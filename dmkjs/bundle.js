!function(){var e,t,r,n=function(e){var t;return function(r){return t||e(t={exports:{},parent:r},t.exports),t.exports}},o=n(function(e,t){}),i=n(function(e,t){!function(){JailedSite=function(t){this._interface={},this._remote=null,this._remoteUpdateHandler=function(){},this._getInterfaceHandler=function(){},this._interfaceSetAsRemoteHandler=function(){},this._disconnectHandler=function(){},this._store=new e;var r=this;this._connection=t,this._connection.onMessage(function(e){r._processMessage(e)}),this._connection.onDisconnect(function(e){r._disconnectHandler(e)})},JailedSite.prototype.onRemoteUpdate=function(e){this._remoteUpdateHandler=e},JailedSite.prototype.onInterfaceSetAsRemote=function(e){this._interfaceSetAsRemoteHandler=e},JailedSite.prototype.onGetInterface=function(e){this._getInterfaceHandler=e},JailedSite.prototype.getRemote=function(){return this._remote},JailedSite.prototype.setInterface=function(e){this._interface=e,this._sendInterface()},JailedSite.prototype._sendInterface=function(){var e=[];for(var t in this._interface)this._interface.hasOwnProperty(t)&&e.push(t);this._connection.send({type:"setInterface",api:e})},JailedSite.prototype._processMessage=function(e){switch(e.type){case"method":var t=this._interface[e.name],r=this._unwrap(e.args);t.apply(null,r);break;case"callback":t=this._store.fetch(e.id)[e.num],r=this._unwrap(e.args),t.apply(null,r);break;case"setInterface":this._setRemote(e.api);break;case"getInterface":this._sendInterface(),this._getInterfaceHandler();break;case"interfaceSetAsRemote":this._interfaceSetAsRemoteHandler();break;case"disconnect":this._disconnectHandler(),this._connection.disconnect()}},JailedSite.prototype.requestRemote=function(){this._connection.send({type:"getInterface"})},JailedSite.prototype._setRemote=function(e){var t,r;for(this._remote={},t=0;t<e.length;t++)r=e[t],this._remote[r]=this._genRemoteMethod(r);this._remoteUpdateHandler(),this._reportRemoteSet()},JailedSite.prototype._genRemoteMethod=function(e){var t=this;return function(){t._connection.send({type:"method",name:e,args:t._wrap(arguments)})}},JailedSite.prototype._reportRemoteSet=function(){this._connection.send({type:"interfaceSetAsRemote"})},JailedSite.prototype._wrap=function(e){for(var t=[],r={},n=!1,o=0;o<e.length;o++)"function"==typeof e[o]?(r[o]=e[o],t[o]={type:"callback",num:o},n=!0):t[o]={type:"argument",value:e[o]};var i={args:t};return n&&(i.callbackId=this._store.put(r)),i},JailedSite.prototype._unwrap=function(e){var t,r,n,o=!1,i=function(e){return function(){if(o)throw new Error("A callback from this set has already been executed");o=!0,e.apply(this,arguments)}},a=[];for(t=0;t<e.args.length;t++)"argument"==(r=e.args[t]).type?a.push(r.value):(n=i(this._genRemoteCallback(e.callbackId,t)),a.push(n));return a},JailedSite.prototype._genRemoteCallback=function(e,t){var r=this;return function(){r._connection.send({type:"callback",id:e,num:t,args:r._wrap(arguments)})}},JailedSite.prototype.disconnect=function(){this._connection.send({type:"disconnect"}),this._connection.disconnect()},JailedSite.prototype.onDisconnect=function(e){this._disconnectHandler=e};var e=function(){this._store={},this._indices=[0]};e.prototype._genId=function(){return 1==this._indices.length?this._indices[0]++:this._indices.shift()},e.prototype._releaseId=function(e){for(var t=0;t<this._indices.length;t++)if(e<this._indices[t]){this._indices.splice(t,0,e);break}for(t=this._indices.length-1;t>=0&&this._indices[t]-1==this._indices[t-1];t--)this._indices.pop()},e.prototype.put=function(e){var t=this._genId();return this._store[t]=e,t},e.prototype.fetch=function(e){var t=this._store[e];return this._store[e]=null,delete this._store[e],this._releaseId(e),t}}()}),a=e={};function s(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(e){r=u}}();var l,f=[],d=!1,p=-1;function h(){d&&l&&(d=!1,l.length?f=l.concat(f):p=-1,f.length&&y())}function y(){if(!d){var e=c(h);d=!0;for(var t=f.length;t;){for(l=f,f=[];++p<t;)l&&l[p].run();p=-1,t=f.length}l=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new m(e,t)),1!==f.length||d||c(y)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0};var g={};(function(e,t){var r,n,a=void 0!==e&&!e.browser&&-1!==e.release.name.search(/node|io.js/);if(a)r=t+"/";else{var s=document.getElementsByTagName("script");r=s[s.length-1].src.split("?")[0].split("/").slice(0,-1).join("/")+"/jailed/"}n=function(e){var t,n,s,u=function(){this._emitted=!1,this._handlers=[]};u.prototype.emit=function(){var e;if(!this._emitted)for(this._emitted=!0;e=this._handlers.pop();)setTimeout(e,0)},u.prototype.whenEmitted=function(e){e=this._checkHandler(e),this._emitted?setTimeout(e,0):this._handlers.push(e)},u.prototype._checkHandler=function(e){var t=typeof e;if("function"!=t)throw new Error("A function may only be subsribed to the event, "+t+" was provided instead");return e},a?(i({}),s=o({}),(n=function(){this.dedicatedThread=!0,this._disconnected=!1,this._messageHandler=function(){},this._disconnectHandler=function(){},this._process=s.fork(r+"_pluginNode.js");var e=this;this._process.on("message",function(t){e._messageHandler(t)}),this._process.on("exit",function(t){e._disconnected=!0,e._disconnectHandler(t)})}).prototype.whenInit=function(e){e()},n.prototype.send=function(e){this._disconnected||this._process.send(e)},n.prototype.onMessage=function(e){this._messageHandler=function(t){try{e(t)}catch(r){console.error(),console.error(r.stack)}}},n.prototype.onDisconnect=function(e){this._disconnectHandler=e},n.prototype.disconnect=function(){this._process.kill("SIGKILL"),this._disconnected=!0}):(function(){t=new u;var e=window.onload||function(){};window.onload=function(){e(),function(e,r){var n=document.createElement("script");n.src=e;var o=function(){n.onload=null,n.onerror=null,n.onreadystatechange=null,n.parentNode.removeChild(n)},i=function(){o(),t.emit()};n.onerror=o,n.onload=i,n.onreadystatechange=function(){var e=n.readyState;"loaded"!==e&&"complete"!==e||i()},document.body.appendChild(n)}(r+"_JailedSite.js")}}(),function(){var e=["allow-scripts"];"file://"==r.substr(0,7).toLowerCase()&&e.push("allow-same-origin");var o=document.createElement("iframe");o.src=r+"_frame.html",o.sandbox=e.join(" "),o.style.display="none",(n=function(){this._init=new u,this._disconnected=!1;var e=this;t.whenEmitted(function(){e._disconnected||(e._frame=o.cloneNode(!1),document.body.appendChild(e._frame),window.addEventListener("message",function(t){t.source===e._frame.contentWindow&&("initialized"==t.data.type?(e.dedicatedThread=t.data.dedicatedThread,e._init.emit()):e._messageHandler(t.data))}))})}).prototype.whenInit=function(e){this._init.whenEmitted(e)},n.prototype.send=function(e){this._frame.contentWindow.postMessage({type:"message",data:e},"*")},n.prototype.onMessage=function(e){this._messageHandler=e},n.prototype.onDisconnect=function(){},n.prototype.disconnect=function(){this._disconnected||(this._disconnected=!0,void 0!==this._frame&&this._frame.parentNode.removeChild(this._frame))}}());var c=function(){this._platformConnection=new n,this._importCallbacks={},this._executeSCb=function(){},this._executeFCb=function(){},this._messageHandler=function(){};var e=this;this.whenInit=function(t){e._platformConnection.whenInit(t)},this._platformConnection.onMessage(function(t){switch(t.type){case"message":e._messageHandler(t.data);break;case"importSuccess":e._handleImportSuccess(t.url);break;case"importFailure":e._handleImportFailure(t.url);break;case"executeSuccess":e._executeSCb();break;case"executeFailure":e._executeFCb()}})};c.prototype.hasDedicatedThread=function(){return this._platformConnection.dedicatedThread},c.prototype.importScript=function(e,t,r){var n=function(){};this._importCallbacks[e]={sCb:t||n,fCb:r||n},this._platformConnection.send({type:"import",url:e})},c.prototype.importJailedScript=function(e,t,r){var n=function(){};this._importCallbacks[e]={sCb:t||n,fCb:r||n},this._platformConnection.send({type:"importJailed",url:e})},c.prototype.execute=function(e,t,r){this._executeSCb=t||function(){},this._executeFCb=r||function(){},this._platformConnection.send({type:"execute",code:e})},c.prototype.onMessage=function(e){this._messageHandler=e},c.prototype.onDisconnect=function(e){this._platformConnection.onDisconnect(e)},c.prototype.send=function(e){this._platformConnection.send({type:"message",data:e})},c.prototype._handleImportSuccess=function(e){var t=this._importCallbacks[e].sCb;this._importCallbacks[e]=null,delete this._importCallbacks[e],t()},c.prototype._handleImportFailure=function(e){var t=this._importCallbacks[e].fCb;this._importCallbacks[e]=null,delete this._importCallbacks[e],t()},c.prototype.disconnect=function(){this._platformConnection.disconnect()};var l=function(e,t){this._path=e,this._initialInterface=t||{},this._connect()},f=function(e,t){this._code=e,this._initialInterface=t||{},this._connect()};f.prototype._connect=l.prototype._connect=function(){this.remote=null,this._connect=new u,this._fail=new u,this._disconnect=new u;var e=this;this._fCb=function(){e._fail.emit(),e.disconnect()},this._connection=new c,this._connection.whenInit(function(){e._init()})},f.prototype._init=l.prototype._init=function(){this._site=new JailedSite(this._connection);var e=this;this._site.onDisconnect(function(){e._disconnect.emit()}),this._connection.importScript(r+"_JailedSite.js",function(){e._loadCore()},this._fCb)},f.prototype._loadCore=l.prototype._loadCore=function(){var e=this;this._connection.importScript(r+"_pluginCore.js",function(){e._sendInterface()},this._fCb)},f.prototype._sendInterface=l.prototype._sendInterface=function(){var e=this;this._site.onInterfaceSetAsRemote(function(){e._connected||e._loadPlugin()}),this._site.setInterface(this._initialInterface)},l.prototype._loadPlugin=function(){var e=this;this._connection.importJailedScript(this._path,function(){e._requestRemote()},this._fCb)},f.prototype._loadPlugin=function(){var e=this;this._connection.execute(this._code,function(){e._requestRemote()},this._fCb)},f.prototype._requestRemote=l.prototype._requestRemote=function(){var e=this;this._site.onRemoteUpdate(function(){e.remote=e._site.getRemote(),e._connect.emit()}),this._site.requestRemote()},f.prototype.hasDedicatedThread=l.prototype.hasDedicatedThread=function(){return this._connection.hasDedicatedThread()},f.prototype.disconnect=l.prototype.disconnect=function(){this._connection.disconnect(),this._disconnect.emit()},f.prototype.whenFailed=l.prototype.whenFailed=function(e){this._fail.whenEmitted(e)},f.prototype.whenConnected=l.prototype.whenConnected=function(e){this._connect.whenEmitted(e)},f.prototype.whenDisconnected=l.prototype.whenDisconnected=function(e){this._disconnect.whenEmitted(e)},e.Plugin=l,e.DynamicPlugin=f},"function"==typeof define&&define.amd?define(["exports"],n):n(void 0!==g?g:this.jailed={})}).call(this,e,"/dmkjs/jailed");var b,_,E={exports:{}};b="undefined"!=typeof self?self:this,_=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/twgl-full.js")}({"./src/attributes.js":function(e,t,r){"use strict";t.__esModule=!0,t.createAttribsFromArrays=m,t.createBuffersFromArrays=function(e,t){var r={};return Object.keys(t).forEach(function(n){r[n]=g(e,t[n],n)}),t.indices?(r.numElements=t.indices.length,r.elementType=n.getGLTypeForTypedArray(y(t.indices),"indices")):r.numElements=function(e){var t,r;for(r=0;r<v.length&&!((t=v[r])in e);++r);r===v.length&&(t=Object.keys(e)[0]);var n=e[t],o=l(n).length,i=h(n,t),a=o/i;if(o%i>0)throw new Error("numComponents ".concat(i," not correct for length ").concat(o));return a}(t),r},t.createBufferFromArray=g,t.createBufferFromTypedArray=u,t.createBufferInfoFromArrays=function(e,t,r){var o=m(e,t),i=Object.assign({},r||{});i.attribs=Object.assign({},r?r.attribs:{},o);var s=t.indices;if(s){var c=y(s,"indices");i.indices=u(e,c,e.ELEMENT_ARRAY_BUFFER),i.numElements=c.length,i.elementType=n.getGLTypeForTypedArray(c)}else i.numElements||(i.numElements=function(e,t){var r,n;for(n=0;n<v.length&&!((r=v[n])in t)&&!((r=a.attribPrefix+r)in t);++n);n===v.length&&(r=Object.keys(t)[0]);var o=t[r];e.bindBuffer(e.ARRAY_BUFFER,o.buffer);var i=e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE);e.bindBuffer(e.ARRAY_BUFFER,null);var s=i/function(e,t){return t===e.BYTE?1:t===e.UNSIGNED_BYTE?1:t===e.SHORT?2:t===e.UNSIGNED_SHORT?2:t===e.INT?4:t===e.UNSIGNED_INT?4:t===e.FLOAT?4:0}(e,o.type),u=o.numComponents||o.size,c=s/u;if(c%1!=0)throw new Error("numComponents ".concat(u," not correct for length ").concat(length));return c}(e,i.attribs));return i},t.setAttribInfoBufferFromArray=function(e,t,r,n){r=y(r),void 0!==n?(e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.bufferSubData(e.ARRAY_BUFFER,n,r)):s(e,e.ARRAY_BUFFER,t.buffer,r,t.drawType)},t.setAttributePrefix=function(e){a.attribPrefix=e},t.setAttributeDefaults_=function(e){o.copyExistingProperties(e,a)},t.getNumComponents_=h,t.getArray_=l;var n=i(r("./src/typedarrays.js")),o=i(r("./src/helper.js"));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var a={attribPrefix:""};function s(e,t,r,n,o){e.bindBuffer(t,r),e.bufferData(t,n,o||e.STATIC_DRAW)}function u(e,t,r,n){if(o.isBuffer(e,t))return t;r=r||e.ARRAY_BUFFER;var i=e.createBuffer();return s(e,r,i,t,n),i}function c(e){return"indices"===e}function l(e){return e.length?e:e.data}var f=/coord|texture/i,d=/color|colour/i;function p(e,t){var r;if(t%(r=f.test(e)?2:d.test(e)?4:3)>0)throw new Error("Can not guess numComponents for attribute '".concat(e,"'. Tried ").concat(r," but ").concat(t," values is not evenly divisible by ").concat(r,". You should specify it."));return r}function h(e,t){return e.numComponents||e.size||p(t,l(e).length)}function y(e,t){if(n.isArrayBuffer(e))return e;if(n.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var r=e.type;return r||(r=c(t)?Uint16Array:Float32Array),new r(e.data)}function m(e,t){var r={};return Object.keys(t).forEach(function(o){if(!c(o)){var i=t[o],s=i.attrib||i.name||i.attribName||a.attribPrefix+o;if(i.value){if(!Array.isArray(i.value)&&!n.isArrayBuffer(i.value))throw new Error("array.value is not array or typedarray");r[s]={value:i.value}}else{var l,f,d,m;if(i.buffer&&i.buffer instanceof WebGLBuffer)l=i.buffer,m=i.numComponents||i.size,f=i.type,d=i.normalize;else if("number"==typeof i||"number"==typeof i.data){var v=i.data||i,g=i.type||Float32Array,b=v*g.BYTES_PER_ELEMENT;f=n.getGLTypeForTypedArrayType(g),d=void 0!==i.normalize?i.normalize:(E=g)===Int8Array||E===Uint8Array,m=i.numComponents||i.size||p(o,v),l=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,b,i.drawType||e.STATIC_DRAW)}else{var _=y(i,o);l=u(e,_,void 0,i.drawType),f=n.getGLTypeForTypedArray(_),d=void 0!==i.normalize?i.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(_),m=h(i,o)}r[s]={buffer:l,numComponents:m,type:f,normalize:d,stride:i.stride||0,offset:i.offset||0,divisor:void 0===i.divisor?void 0:i.divisor,drawType:i.drawType}}}var E}),e.bindBuffer(e.ARRAY_BUFFER,null),r}var v=["position","positions","a_position"];function g(e,t,r){var n="indices"===r?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;return u(e,y(t,r),n)}},"./src/draw.js":function(e,t,r){"use strict";t.__esModule=!0,t.drawBufferInfo=o,t.drawObjectList=function(e,t){var r=null,i=null;t.forEach(function(t){if(!1!==t.active){var a=t.programInfo,s=t.vertexArrayInfo||t.bufferInfo,u=!1,c=void 0===t.type?e.TRIANGLES:t.type;a!==r&&(r=a,e.useProgram(a.program),u=!0),(u||s!==i)&&(i&&i.vertexArrayObject&&!s.vertexArrayObject&&e.bindVertexArray(null),i=s,n.setBuffersAndAttributes(e,a,s)),n.setUniforms(a,t.uniforms),o(e,s,c,t.count,t.offset,t.instanceCount)}}),i.vertexArrayObject&&e.bindVertexArray(null)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./src/programs.js"));function o(e,t,r,n,o,i){r=void 0===r?e.TRIANGLES:r;var a=t.indices,s=t.elementType,u=void 0===n?t.numElements:n;o=void 0===o?0:o,s||a?void 0!==i?e.drawElementsInstanced(r,u,void 0===s?e.UNSIGNED_SHORT:t.elementType,o,i):e.drawElements(r,u,void 0===s?e.UNSIGNED_SHORT:t.elementType,o):void 0!==i?e.drawArraysInstanced(r,o,u,i):e.drawArrays(r,o,u)}},"./src/framebuffers.js":function(e,t,r){"use strict";t.__esModule=!0,t.bindFramebufferInfo=function(e,t,r){r=r||e.FRAMEBUFFER,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))},t.createFramebufferInfo=function(e,t,r,i){var l=e.FRAMEBUFFER,f=e.createFramebuffer();e.bindFramebuffer(l,f),r=r||e.drawingBufferWidth,i=i||e.drawingBufferHeight;var d=0,p={framebuffer:f,attachments:[],width:r,height:i};return(t=t||s).forEach(function(t){var s=t.attachment,f=t.format,h=function(e){return u[e]}(f);if(h||(h=a+d++),!s)if(function(e){return c[e]}(f))s=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,s),e.renderbufferStorage(e.RENDERBUFFER,f,r,i);else{var y=Object.assign({},t);y.width=r,y.height=i,void 0===y.auto&&(y.auto=!1,y.min=y.min||y.minMag||e.LINEAR,y.mag=y.mag||y.minMag||e.LINEAR,y.wrapS=y.wrapS||y.wrap||e.CLAMP_TO_EDGE,y.wrapT=y.wrapT||y.wrap||e.CLAMP_TO_EDGE),s=n.createTexture(e,y)}if(o.isRenderbuffer(e,s))e.framebufferRenderbuffer(l,h,e.RENDERBUFFER,s);else{if(!o.isTexture(e,s))throw new Error("unknown attachment type");e.framebufferTexture2D(l,h,t.texTarget||e.TEXTURE_2D,s,t.level||0)}p.attachments.push(s)}),p},t.resizeFramebufferInfo=function(e,t,r,i,a){i=i||e.drawingBufferWidth,a=a||e.drawingBufferHeight,t.width=i,t.height=a,(r=r||s).forEach(function(r,s){var u=t.attachments[s],c=r.format;if(o.isRenderbuffer(e,u))e.bindRenderbuffer(e.RENDERBUFFER,u),e.renderbufferStorage(e.RENDERBUFFER,c,i,a);else{if(!o.isTexture(e,u))throw new Error("unknown attachment type");n.resizeTexture(e,u,r,i,a)}})};var n=i(r("./src/textures.js")),o=i(r("./src/helper.js"));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var a=36064,s=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],u={34041:33306,6401:36128,36168:36128,6402:36096,33189:36096},c={32854:!0,32855:!0,36194:!0,34041:!0,33189:!0,6401:!0,36168:!0}},"./src/helper.js":function(e,t,r){"use strict";t.__esModule=!0,t.copyExistingProperties=function(e,t){Object.keys(t).forEach(function(r){t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&(t[r]=e[r])})},t.copyNamedProperties=function(e,t,r){e.forEach(function(e){var n=t[e];void 0!==n&&(r[e]=n)})},t.isBuffer=function(e,t){return"undefined"!=typeof WebGLBuffer&&t instanceof WebGLBuffer},t.isRenderbuffer=function(e,t){return"undefined"!=typeof WebGLRenderbuffer&&t instanceof WebGLRenderbuffer},t.isShader=function(e,t){return"undefined"!=typeof WebGLShader&&t instanceof WebGLShader},t.isTexture=function(e,t){return"undefined"!=typeof WebGLTexture&&t instanceof WebGLTexture},t.isSampler=function(e,t){return"undefined"!=typeof WebGLSampler&&t instanceof WebGLSampler},t.warn=t.error=void 0;var n="undefined"!=typeof console&&console.error&&"function"==typeof console.error?console.error.bind(console):function(){};t.error=n;var o="undefined"!=typeof console&&console.warn&&"function"==typeof console.warn?console.warn.bind(console):function(){};t.warn=o},"./src/m4.js":function(e,t,r){"use strict";t.__esModule=!0,t.axisRotate=function(e,t,r,n){n=n||new o(16);var i=t[0],a=t[1],s=t[2],u=Math.sqrt(i*i+a*a+s*s),c=(i/=u)*i,l=(a/=u)*a,f=(s/=u)*s,d=Math.cos(r),p=Math.sin(r),h=1-d,y=c+(1-c)*d,m=i*a*h+s*p,v=i*s*h-a*p,g=i*a*h-s*p,b=l+(1-l)*d,_=a*s*h+i*p,E=i*s*h+a*p,w=a*s*h-i*p,x=f+(1-f)*d,A=e[0],T=e[1],S=e[2],F=e[3],R=e[4],I=e[5],C=e[6],P=e[7],k=e[8],O=e[9],B=e[10],U=e[11];return n[0]=y*A+m*R+v*k,n[1]=y*T+m*I+v*O,n[2]=y*S+m*C+v*B,n[3]=y*F+m*P+v*U,n[4]=g*A+b*R+_*k,n[5]=g*T+b*I+_*O,n[6]=g*S+b*C+_*B,n[7]=g*F+b*P+_*U,n[8]=E*A+w*R+x*k,n[9]=E*T+w*I+x*O,n[10]=E*S+w*C+x*B,n[11]=E*F+w*P+x*U,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},t.axisRotation=function(e,t,r){r=r||new o(16);var n=e[0],i=e[1],a=e[2],s=Math.sqrt(n*n+i*i+a*a),u=(n/=s)*n,c=(i/=s)*i,l=(a/=s)*a,f=Math.cos(t),d=Math.sin(t),p=1-f;return r[0]=u+(1-u)*f,r[1]=n*i*p+a*d,r[2]=n*a*p-i*d,r[3]=0,r[4]=n*i*p-a*d,r[5]=c+(1-c)*f,r[6]=i*a*p+n*d,r[7]=0,r[8]=n*a*p+i*d,r[9]=i*a*p-n*d,r[10]=l+(1-l)*f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},t.copy=u,t.frustum=function(e,t,r,n,i,a,s){var u=t-e,c=n-r,l=i-a;return(s=s||new o(16))[0]=2*i/u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*i/c,s[6]=0,s[7]=0,s[8]=(e+t)/u,s[9]=(n+r)/c,s[10]=a/l,s[11]=-1,s[12]=0,s[13]=0,s[14]=i*a/l,s[15]=0,s},t.getAxis=function(e,t,r){var o=4*t;return(r=r||n.create())[0]=e[o+0],r[1]=e[o+1],r[2]=e[o+2],r},t.getTranslation=function(e,t){return(t=t||n.create())[0]=e[12],t[1]=e[13],t[2]=e[14],t},t.identity=c,t.inverse=l,t.lookAt=function(e,t,r,u){u=u||new o(16);var c=i,l=a,f=s;return n.normalize(n.subtract(e,t,f),f),n.normalize(n.cross(r,f,c),c),n.normalize(n.cross(f,c,l),l),u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=0,u[4]=l[0],u[5]=l[1],u[6]=l[2],u[7]=0,u[8]=f[0],u[9]=f[1],u[10]=f[2],u[11]=0,u[12]=e[0],u[13]=e[1],u[14]=e[2],u[15]=1,u},t.multiply=function(e,t,r){r=r||new o(16);var n=e[0],i=e[1],a=e[2],s=e[3],u=e[4],c=e[5],l=e[6],f=e[7],d=e[8],p=e[9],h=e[10],y=e[11],m=e[12],v=e[13],g=e[14],b=e[15],_=t[0],E=t[1],w=t[2],x=t[3],A=t[4],T=t[5],S=t[6],F=t[7],R=t[8],I=t[9],C=t[10],P=t[11],k=t[12],O=t[13],B=t[14],U=t[15];return r[0]=n*_+u*E+d*w+m*x,r[1]=i*_+c*E+p*w+v*x,r[2]=a*_+l*E+h*w+g*x,r[3]=s*_+f*E+y*w+b*x,r[4]=n*A+u*T+d*S+m*F,r[5]=i*A+c*T+p*S+v*F,r[6]=a*A+l*T+h*S+g*F,r[7]=s*A+f*T+y*S+b*F,r[8]=n*R+u*I+d*C+m*P,r[9]=i*R+c*I+p*C+v*P,r[10]=a*R+l*I+h*C+g*P,r[11]=s*R+f*I+y*C+b*P,r[12]=n*k+u*O+d*B+m*U,r[13]=i*k+c*O+p*B+v*U,r[14]=a*k+l*O+h*B+g*U,r[15]=s*k+f*O+y*B+b*U,r},t.negate=function(e,t){return(t=t||new o(16))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},t.ortho=function(e,t,r,n,i,a,s){return(s=s||new o(16))[0]=2/(t-e),s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2/(n-r),s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2/(i-a),s[11]=0,s[12]=(t+e)/(e-t),s[13]=(n+r)/(r-n),s[14]=(a+i)/(i-a),s[15]=1,s},t.perspective=function(e,t,r,n,i){i=i||new o(16);var a=Math.tan(.5*Math.PI-.5*e),s=1/(r-n);return i[0]=a/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(r+n)*s,i[11]=-1,i[12]=0,i[13]=0,i[14]=r*n*s*2,i[15]=0,i},t.rotateX=function(e,t,r){r=r||new o(16);var n=e[4],i=e[5],a=e[6],s=e[7],u=e[8],c=e[9],l=e[10],f=e[11],d=Math.cos(t),p=Math.sin(t);return r[4]=d*n+p*u,r[5]=d*i+p*c,r[6]=d*a+p*l,r[7]=d*s+p*f,r[8]=d*u-p*n,r[9]=d*c-p*i,r[10]=d*l-p*a,r[11]=d*f-p*s,e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},t.rotateY=function(e,t,r){r=r||new o(16);var n=e[0],i=e[1],a=e[2],s=e[3],u=e[8],c=e[9],l=e[10],f=e[11],d=Math.cos(t),p=Math.sin(t);return r[0]=d*n-p*u,r[1]=d*i-p*c,r[2]=d*a-p*l,r[3]=d*s-p*f,r[8]=d*u+p*n,r[9]=d*c+p*i,r[10]=d*l+p*a,r[11]=d*f+p*s,e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},t.rotateZ=function(e,t,r){r=r||new o(16);var n=e[0],i=e[1],a=e[2],s=e[3],u=e[4],c=e[5],l=e[6],f=e[7],d=Math.cos(t),p=Math.sin(t);return r[0]=d*n+p*u,r[1]=d*i+p*c,r[2]=d*a+p*l,r[3]=d*s+p*f,r[4]=d*u-p*n,r[5]=d*c-p*i,r[6]=d*l-p*a,r[7]=d*f-p*s,e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},t.rotationX=function(e,t){t=t||new o(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.rotationY=function(e,t){t=t||new o(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.rotationZ=function(e,t){t=t||new o(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.scale=function(e,t,r){r=r||new o(16);var n=t[0],i=t[1],a=t[2];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=n*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=i*e[6],r[7]=i*e[7],r[8]=a*e[8],r[9]=a*e[9],r[10]=a*e[10],r[11]=a*e[11],e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},t.scaling=function(e,t){return(t=t||new o(16))[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.setAxis=function(e,t,r,n){n!==e&&(n=u(e,n));var o=4*r;return n[o+0]=t[0],n[o+1]=t[1],n[o+2]=t[2],n},t.setDefaultType=function(e){var t=o;return o=e,t},t.setTranslation=function(e,t,r){return e!==(r=r||c())&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11]),r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},t.transformDirection=function(e,t,r){r=r||n.create();var o=t[0],i=t[1],a=t[2];return r[0]=o*e[0]+i*e[4]+a*e[8],r[1]=o*e[1]+i*e[5]+a*e[9],r[2]=o*e[2]+i*e[6]+a*e[10],r},t.transformNormal=function(e,t,r){r=r||n.create();var o=l(e),i=t[0],a=t[1],s=t[2];return r[0]=i*o[0]+a*o[1]+s*o[2],r[1]=i*o[4]+a*o[5]+s*o[6],r[2]=i*o[8]+a*o[9]+s*o[10],r},t.transformPoint=function(e,t,r){r=r||n.create();var o=t[0],i=t[1],a=t[2],s=o*e[3]+i*e[7]+a*e[11]+e[15];return r[0]=(o*e[0]+i*e[4]+a*e[8]+e[12])/s,r[1]=(o*e[1]+i*e[5]+a*e[9]+e[13])/s,r[2]=(o*e[2]+i*e[6]+a*e[10]+e[14])/s,r},t.translate=function(e,t,r){r=r||new o(16);var n=t[0],i=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=e[3],f=e[4],d=e[5],p=e[6],h=e[7],y=e[8],m=e[9],v=e[10],g=e[11],b=e[12],_=e[13],E=e[14],w=e[15];return e!==r&&(r[0]=s,r[1]=u,r[2]=c,r[3]=l,r[4]=f,r[5]=d,r[6]=p,r[7]=h,r[8]=y,r[9]=m,r[10]=v,r[11]=g),r[12]=s*n+f*i+y*a+b,r[13]=u*n+d*i+m*a+_,r[14]=c*n+p*i+v*a+E,r[15]=l*n+h*i+g*a+w,r},t.translation=function(e,t){return(t=t||new o(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},t.transpose=function(e,t){var r;if((t=t||new o(16))===e)return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,t;var n=e[0],i=e[1],a=e[2],s=e[3],u=e[4],c=e[5],l=e[6],f=e[7],d=e[8],p=e[9],h=e[10],y=e[11],m=e[12],v=e[13],g=e[14],b=e[15];return t[0]=n,t[1]=u,t[2]=d,t[3]=m,t[4]=i,t[5]=c,t[6]=p,t[7]=v,t[8]=a,t[9]=l,t[10]=h,t[11]=g,t[12]=s,t[13]=f,t[14]=y,t[15]=b,t};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./src/v3.js")),o=Float32Array,i=n.create(),a=n.create(),s=n.create();function u(e,t){return(t=t||new o(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function c(e){return(e=e||new o(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){t=t||new o(16);var r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],p=e[10],h=e[11],y=e[12],m=e[13],v=e[14],g=e[15],b=p*g,_=v*h,E=c*g,w=v*l,x=c*h,A=p*l,T=i*g,S=v*a,F=i*h,R=p*a,I=i*l,C=c*a,P=f*m,k=y*d,O=s*m,B=y*u,U=s*d,j=f*u,N=r*m,M=y*n,L=r*d,D=f*n,z=r*u,G=s*n,W=b*u+w*d+x*m-(_*u+E*d+A*m),X=_*n+T*d+R*m-(b*n+S*d+F*m),H=E*n+S*u+I*m-(w*n+T*u+C*m),K=A*n+F*u+C*d-(x*n+R*u+I*d),V=1/(r*W+s*X+f*H+y*K);return t[0]=V*W,t[1]=V*X,t[2]=V*H,t[3]=V*K,t[4]=V*(_*s+E*f+A*y-(b*s+w*f+x*y)),t[5]=V*(b*r+S*f+F*y-(_*r+T*f+R*y)),t[6]=V*(w*r+T*s+C*y-(E*r+S*s+I*y)),t[7]=V*(x*r+R*s+I*f-(A*r+F*s+C*f)),t[8]=V*(P*l+B*h+U*g-(k*l+O*h+j*g)),t[9]=V*(k*a+N*h+D*g-(P*a+M*h+L*g)),t[10]=V*(O*a+M*l+z*g-(B*a+N*l+G*g)),t[11]=V*(j*a+L*l+G*h-(U*a+D*l+z*h)),t[12]=V*(O*p+j*v+k*c-(U*v+P*c+B*p)),t[13]=V*(L*v+P*i+M*p-(N*p+D*v+k*i)),t[14]=V*(N*c+G*v+B*i-(z*v+O*i+M*c)),t[15]=V*(z*p+U*i+D*c-(L*c+G*p+j*i)),t}},"./src/primitives.js":function(e,t,r){"use strict";t.__esModule=!0,t.create3DFVertices=F,t.createAugmentedTypedArray=d,t.createCubeVertices=A,t.createPlaneVertices=E,t.createSphereVertices=w,t.createTruncatedConeVertices=T,t.createXYQuadVertices=_,t.createCresentVertices=R,t.createCylinderVertices=I,t.createTorusVertices=C,t.createDiscVertices=P,t.deindexVertices=function(e){var t=e.indices,r={},n=t.length;return Object.keys(e).filter(p).forEach(function(o){for(var i=e[o],a=i.numComponents,s=d(a,n,i.constructor),u=0;u<n;++u)for(var c=t[u]*a,l=0;l<a;++l)s.push(i[c+l]);r[o]=s}),r},t.flattenNormals=function(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var t=e.normal,r=t.length,n=0;n<r;n+=9){var o=t[n+0],i=t[n+1],a=t[n+2],s=t[n+3],u=t[n+4],c=t[n+5],l=o+s+t[n+6],f=i+u+t[n+7],d=a+c+t[n+8],p=Math.sqrt(l*l+f*f+d*d);l/=p,f/=p,d/=p,t[n+0]=l,t[n+1]=f,t[n+2]=d,t[n+3]=l,t[n+4]=f,t[n+5]=d,t[n+6]=l,t[n+7]=f,t[n+8]=d}return e},t.makeRandomVertexColors=function(e,t){t=t||{};var r=e.position.numElements,n=d(4,r,Uint8Array),o=t.rand||function(e,t){return t<3?(256,256*Math.random()|0):255};if(e.color=n,e.indices)for(var i=0;i<r;++i)n.push(o(i,0),o(i,1),o(i,2),o(i,3));else for(var a=t.vertsPerColor||3,s=r/a,u=0;u<s;++u)for(var c=[o(u,0),o(u,1),o(u,2),o(u,3)],l=0;l<a;++l)n.push(c);return e},t.reorientDirections=m,t.reorientNormals=v,t.reorientPositions=g,t.reorientVertices=b,t.concatVertices=function(e){for(var t,r={},n=function(n){var o=e[n];Object.keys(o).forEach(function(e){r[e]||(r[e]=[]),t||"indices"===e||(t=e);var n=o[e],i=l(n,e),a=c(n).length/i;r[e].push(a)})},o=0;o<e.length;++o)n(o);var i=r[t],a={};return Object.keys(r).forEach(function(t){var r=function(t){for(var r,n=0,o=0;o<e.length;++o){var i=e[o][t];n+=c(i).length,r&&!i.data||(r=i)}return{length:n,spec:r}}(t),n=j(r.spec,r.length);!function(t,r,n){for(var o=0,i=0,a=0;a<e.length;++a){var s=e[a][t],u=c(s);"indices"===t?(U(u,n,i,o),o+=r[a]):U(u,n,i),i+=u.length}}(t,i,c(n)),a[t]=n}),a},t.duplicateVertices=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r],o=c(n),i=j(n,o.length);U(o,c(i),0),t[r]=i}),t},t.createDiscBuffers=t.createDiscBufferInfo=t.createTorusBuffers=t.createTorusBufferInfo=t.createCylinderBuffers=t.createCylinderBufferInfo=t.createCresentBuffers=t.createCresentBufferInfo=t.createXYQuadBuffers=t.createXYQuadBufferInfo=t.createTruncatedConeBuffers=t.createTruncatedConeBufferInfo=t.createSphereBuffers=t.createSphereBufferInfo=t.createPlaneBuffers=t.createPlaneBufferInfo=t.createCubeBuffers=t.createCubeBufferInfo=t.create3DFBuffers=t.create3DFBufferInfo=void 0;var n=u(r("./src/attributes.js")),o=u(r("./src/helper.js")),i=u(r("./src/typedarrays.js")),a=u(r("./src/m4.js")),s=u(r("./src/v3.js"));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var c=n.getArray_,l=n.getNumComponents_;function f(e,t){var r=0;return e.push=function(){for(var t=0;t<arguments.length;++t){var n=arguments[t];if(n instanceof Array||i.isArrayBuffer(n))for(var o=0;o<n.length;++o)e[r++]=n[o];else e[r++]=n}},e.reset=function(e){r=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function d(e,t,r){return f(new(r||Float32Array)(e*t),e)}function p(e){return"indices"!==e}function h(e,t,r){for(var n=e.length,o=new Float32Array(3),i=0;i<n;i+=3)r(t,[e[i],e[i+1],e[i+2]],o),e[i]=o[0],e[i+1]=o[1],e[i+2]=o[2]}function y(e,t,r){r=r||s.create();var n=t[0],o=t[1],i=t[2];return r[0]=n*e[0]+o*e[1]+i*e[2],r[1]=n*e[4]+o*e[5]+i*e[6],r[2]=n*e[8]+o*e[9]+i*e[10],r}function m(e,t){return h(e,t,a.transformDirection),e}function v(e,t){return h(e,a.inverse(t),y),e}function g(e,t){return h(e,t,a.transformPoint),e}function b(e,t){return Object.keys(e).forEach(function(r){var n=e[r];r.indexOf("pos")>=0?g(n,t):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?m(n,t):r.indexOf("norm")>=0&&v(n,t)}),e}function _(e,t,r){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(r=r||0)+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function E(e,t,r,n,o){e=e||1,t=t||1,r=r||1,n=n||1,o=o||a.identity();for(var i=(r+1)*(n+1),s=d(3,i),u=d(3,i),c=d(2,i),l=0;l<=n;l++)for(var f=0;f<=r;f++){var p=f/r,h=l/n;s.push(e*p-.5*e,0,t*h-.5*t),u.push(0,1,0),c.push(p,h)}for(var y=r+1,m=d(3,r*n*2,Uint16Array),v=0;v<n;v++)for(var g=0;g<r;g++)m.push((v+0)*y+g,(v+1)*y+g,(v+0)*y+g+1),m.push((v+1)*y+g,(v+1)*y+g+1,(v+0)*y+g+1);return b({position:s,normal:u,texcoord:c,indices:m},o)}function w(e,t,r,n,o,i,a){if(t<=0||r<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,i=i||0;for(var s=(o=o||Math.PI)-n,u=(a=a||2*Math.PI)-i,c=(t+1)*(r+1),l=d(3,c),f=d(3,c),p=d(2,c),h=0;h<=r;h++)for(var y=0;y<=t;y++){var m=y/t,v=h/r,g=u*m+i,b=s*v+n,_=Math.sin(g),E=Math.cos(g),w=Math.sin(b),x=E*w,A=Math.cos(b),T=_*w;l.push(e*x,e*A,e*T),f.push(x,A,T),p.push(1-m,v)}for(var S=t+1,F=d(3,t*r*2,Uint16Array),R=0;R<t;R++)for(var I=0;I<r;I++)F.push((I+0)*S+R,(I+0)*S+R+1,(I+1)*S+R),F.push((I+1)*S+R,(I+0)*S+R+1,(I+1)*S+R+1);return{position:l,normal:f,texcoord:p,indices:F}}var x=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function A(e){for(var t=(e=e||1)/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],i=d(3,24),a=d(3,24),s=d(2,24),u=d(3,12,Uint16Array),c=0;c<6;++c){for(var l=x[c],f=0;f<4;++f){var p=r[l[f]],h=n[c],y=o[f];i.push(p),a.push(h),s.push(y)}var m=4*c;u.push(m+0,m+1,m+2),u.push(m+0,m+2,m+3)}return{position:i,normal:a,texcoord:s,indices:u}}function T(e,t,r,n,o,i,a){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var s=void 0===i||i,u=void 0===a||a,c=(s?2:0)+(u?2:0),l=(n+1)*(o+1+c),f=d(3,l),p=d(3,l),h=d(2,l),y=d(3,n*(o+c)*2,Uint16Array),m=n+1,v=Math.atan2(e-t,r),g=Math.cos(v),b=Math.sin(v),_=o+(u?2:0),E=s?-2:0;E<=_;++E){var w=E/o,x=r*w,A=void 0;E<0?(x=0,w=1,A=e):E>o?(x=r,w=1,A=t):A=e+E/o*(t-e),-2!==E&&E!==o+2||(A=0,w=0),x-=r/2;for(var T=0;T<m;++T){var S=Math.sin(T*Math.PI*2/n),F=Math.cos(T*Math.PI*2/n);f.push(S*A,x,F*A),p.push(E<0||E>o?0:S*g,E<0?-1:E>o?1:b,E<0||E>o?0:F*g),h.push(T/n,1-w)}}for(var R=0;R<o+c;++R)for(var I=0;I<n;++I)y.push(m*(R+0)+0+I,m*(R+0)+1+I,m*(R+1)+1+I),y.push(m*(R+0)+0+I,m*(R+1)+1+I,m*(R+1)+0+I);return{position:f,normal:p,texcoord:h,indices:y}}function S(e,t){t=t||[];for(var r=[],n=0;n<e.length;n+=4){var o=e[n],i=e.slice(n+1,n+4);i.push.apply(i,t);for(var a=0;a<o;++a)r.push.apply(r,i)}return r}function F(){var e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=S([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=S([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,o={position:d(3,n),texcoord:d(2,n),normal:d(3,n),color:d(4,n,Uint8Array),indices:d(3,n/3,Uint16Array)};o.position.push(e),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(t),o.color.push(r);for(var i=0;i<n;++i)o.indices.push(i);return o}function R(e,t,r,n,o,i,a){if(o<=0)throw new Error("subdivisionDown must be > 0");var u=2,c=(a=a||1)-(i=i||0),l=2*(o+1)*(2+u),f=d(3,l),p=d(3,l),h=d(2,l);function y(e,t,r){return e+(t-e)*r}function m(t,r,a,l,d,m){for(var v=0;v<=o;v++){var g=r/(u-1),b=v/o,_=2*(g-.5),E=(i+b*c)*Math.PI,w=Math.sin(E),x=Math.cos(E),A=y(e,t,w),T=_*n,S=x*e,F=w*A;f.push(T,S,F);var R=s.add(s.multiply([0,w,x],a),l);p.push(R),h.push(g*d+m,b)}}for(var v=0;v<u;v++){var g=2*(v/(u-1)-.5);m(t,v,[1,1,1],[0,0,0],1,0),m(t,v,[0,0,0],[g,0,0],0,0),m(r,v,[1,1,1],[0,0,0],1,0),m(r,v,[0,0,0],[g,0,0],0,1)}var b=d(3,2*o*(2+u),Uint16Array);function _(e,t){for(var r=0;r<o;++r)b.push(e+r+0,e+r+1,t+r+0),b.push(e+r+1,t+r+1,t+r+0)}var E=o+1;return _(0*E,4*E),_(5*E,7*E),_(6*E,2*E),_(3*E,1*E),{position:f,normal:p,texcoord:h,indices:b}}function I(e,t,r,n,o,i){return T(e,e,t,r,n,o,i)}function C(e,t,r,n,o,i){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<3)throw new Error("verticalSubdivisions must be 3 or greater");o=o||0;for(var a=(i=i||2*Math.PI)-o,s=r+1,u=n+1,c=s*u,l=d(3,c),f=d(3,c),p=d(2,c),h=d(3,r*n*2,Uint16Array),y=0;y<u;++y)for(var m=y/n,v=m*Math.PI*2,g=Math.sin(v),b=e+g*t,_=Math.cos(v),E=_*t,w=0;w<s;++w){var x=w/r,A=o+x*a,T=Math.sin(A),S=Math.cos(A),F=T*b,R=S*b,I=T*g,C=S*g;l.push(F,E,R),f.push(I,_,C),p.push(x,1-m)}for(var P=0;P<n;++P)for(var k=0;k<r;++k){var O=1+k,B=1+P;h.push(s*P+k,s*B+k,s*P+O),h.push(s*B+k,s*B+O,s*P+O)}return{position:l,normal:f,texcoord:p,indices:h}}function P(e,t,r,n,o){if(t<3)throw new Error("divisions must be at least 3");o=o||1,n=n||0;for(var i=(t+1)*((r=r||1)+1),a=d(3,i),s=d(3,i),u=d(2,i),c=d(3,r*t*2,Uint16Array),l=0,f=e-n,p=t+1,h=0;h<=r;++h){for(var y=n+f*Math.pow(h/r,o),m=0;m<=t;++m){var v=2*Math.PI*m/t,g=y*Math.cos(v),b=y*Math.sin(v);if(a.push(g,0,b),s.push(0,1,0),u.push(1-m/t,h/r),h>0&&m!==t){var _=l+(m+1),E=l+m,w=l+m-p,x=l+(m+1)-p;c.push(_,E,w),c.push(_,w,x)}}l+=t+1}return{position:a,normal:s,texcoord:u,indices:c}}function k(e){return function(t){var r=e.apply(this,Array.prototype.slice.call(arguments,1));return n.createBuffersFromArrays(t,r)}}function O(e){return function(t){var r=e.apply(null,Array.prototype.slice.call(arguments,1));return n.createBufferInfoFromArrays(t,r)}}var B=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function U(e,t,r,n){n=n||0;for(var o=e.length,i=0;i<o;++i)t[r+i]=e[i]+n}function j(e,t){var r=c(e),n=new r.constructor(t),i=n;return r.numComponents&&r.numElements&&f(n,r.numComponents),e.data&&(i={data:n},o.copyNamedProperties(B,e,i)),i}var N=O(F);t.create3DFBufferInfo=N;var M=k(F);t.create3DFBuffers=M;var L=O(A);t.createCubeBufferInfo=L;var D=k(A);t.createCubeBuffers=D;var z=O(E);t.createPlaneBufferInfo=z;var G=k(E);t.createPlaneBuffers=G;var W=O(w);t.createSphereBufferInfo=W;var X=k(w);t.createSphereBuffers=X;var H=O(T);t.createTruncatedConeBufferInfo=H;var K=k(T);t.createTruncatedConeBuffers=K;var V=O(_);t.createXYQuadBufferInfo=V;var Y=k(_);t.createXYQuadBuffers=Y;var q=O(R);t.createCresentBufferInfo=q;var $=k(R);t.createCresentBuffers=$;var J=O(I);t.createCylinderBufferInfo=J;var Z=k(I);t.createCylinderBuffers=Z;var Q=O(C);t.createTorusBufferInfo=Q;var ee=k(C);t.createTorusBuffers=ee;var te=O(P);t.createDiscBufferInfo=te;var re=k(P);t.createDiscBuffers=re},"./src/programs.js":function(e,t,r){"use strict";t.__esModule=!0,t.createAttributeSetters=D,t.createProgram=I,t.createProgramFromScripts=function(e,t,r,n,o){for(var i=T(r,n,o),a=[],s=0;s<t.length;++s){var u=C(e,t[s],e[S[s]],i.errorCallback);if(!u)return null;a.push(u)}return I(e,a,i)},t.createProgramFromSources=P,t.createProgramInfo=function(e,t,r,n,o){var i=T(r,n,o),a=!0;if(t=t.map(function(e){if(e.indexOf("\n")<0){var t=u(e);t?e=t.text:(i.errorCallback("no element with id: "+e),a=!1)}return e}),!a)return null;var s=P(e,t,i);return s?G(e,s):null},t.createProgramInfoFromProgram=G,t.createUniformSetters=O,t.createUniformBlockSpecFromProgram=j,t.createUniformBlockInfoFromProgram=M,t.createUniformBlockInfo=function(e,t,r){return M(e,t.program,t.uniformBlockSpec,r)},t.createTransformFeedback=function(e,t,r){var n=e.createTransformFeedback();return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n),e.useProgram(t.program),U(e,t,r),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),n},t.createTransformFeedbackInfo=B,t.bindTransformFeedbackInfo=U,t.setAttributes=z,t.setBuffersAndAttributes=function(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(z(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indices))},t.setUniforms=function e(t,r){for(var n=t.uniformSetters||t,o=arguments.length,i=1;i<o;++i){var a=arguments[i];if(Array.isArray(a))for(var s=a.length,u=0;u<s;++u)e(n,a[u]);else for(var c in a){var l=n[c];l&&l(a[c])}}},t.setUniformBlock=function(e,t,r){L(e,t,r)&&e.bufferData(e.UNIFORM_BUFFER,r.array,e.DYNAMIC_DRAW)},t.setBlockUniforms=function(e,t){var r=e.uniforms;for(var n in t){var o=r[n];if(o){var i=t[n];i.length?o.set(i):o[0]=i}}},t.bindUniformBlock=L;var n=i(r("./src/utils.js")),o=i(r("./src/helper.js"));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var a=o.error,s=o.warn,u="undefined"!=typeof document&&document.getElementById?document.getElementById.bind(document):function(){return null},c={};function l(e,t){return c[t].bindPoint}function f(e,t){return function(r){e.uniform1i(t,r)}}function d(e,t){return function(r){e.uniform1iv(t,r)}}function p(e,t){return function(r){e.uniform2iv(t,r)}}function h(e,t){return function(r){e.uniform3iv(t,r)}}function y(e,t){return function(r){e.uniform4iv(t,r)}}function m(e,t,r,i){var a=l(0,t);return n.isWebGL2(e)?function(t){var n,s;o.isTexture(e,t)?(n=t,s=null):(n=t.texture,s=t.sampler),e.uniform1i(i,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(a,n),e.bindSampler(r,s)}:function(t){e.uniform1i(i,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(a,t)}}function v(e,t,r,i,a){for(var s=l(0,t),u=new Int32Array(a),c=0;c<a;++c)u[c]=r+c;return n.isWebGL2(e)?function(t){e.uniform1iv(i,u),t.forEach(function(t,n){var i,a;e.activeTexture(e.TEXTURE0+u[n]),o.isTexture(e,t)?(i=t,a=null):(i=t.texture,a=t.sampler),e.bindSampler(r,a),e.bindTexture(s,i)})}:function(t){e.uniform1iv(i,u),t.forEach(function(t,r){e.activeTexture(e.TEXTURE0+u[r]),e.bindTexture(s,t)})}}function g(e,t){return function(r){if(r.value)switch(e.disableVertexAttribArray(t),r.value.length){case 4:e.vertexAttrib4fv(t,r.value);break;case 3:e.vertexAttrib3fv(t,r.value);break;case 2:e.vertexAttrib2fv(t,r.value);break;case 1:e.vertexAttrib1fv(t,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||e.FLOAT,r.normalize||!1,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function b(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an integer constant value must be 4!");e.vertexAttrib4iv(t,r.value)}else e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||e.INT,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function _(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");e.vertexAttrib4uiv(t,r.value)}else e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||e.UNSIGNED_INT,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function E(e,t,r){var n=r.size,o=r.count;return function(r){e.bindBuffer(e.ARRAY_BUFFER,r.buffer);for(var i=r.size||r.numComponents||n,a=i/o,s=r.type||e.FLOAT,u=c[s].size*i,l=r.normalize||!1,f=r.offset||0,d=u/o,p=0;p<o;++p)e.enableVertexAttribArray(t+p),e.vertexAttribPointer(t+p,a,s,l,u,f+d*p),void 0!==r.divisor&&e.vertexAttribDivisor(t+p,r.divisor)}}c[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(r){e.uniform1f(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1fv(t,r)}}},c[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(r){e.uniform2fv(t,r)}}},c[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(r){e.uniform3fv(t,r)}}},c[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniform4fv(t,r)}}},c[5124]={Type:Int32Array,size:4,setter:f,arraySetter:d},c[35667]={Type:Int32Array,size:8,setter:p},c[35668]={Type:Int32Array,size:12,setter:h},c[35669]={Type:Int32Array,size:16,setter:y},c[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(r){e.uniform1ui(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1uiv(t,r)}}},c[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(r){e.uniform2uiv(t,r)}}},c[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(r){e.uniform3uiv(t,r)}}},c[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(r){e.uniform4uiv(t,r)}}},c[35670]={Type:Uint32Array,size:4,setter:f,arraySetter:d},c[35671]={Type:Uint32Array,size:8,setter:p},c[35672]={Type:Uint32Array,size:12,setter:h},c[35673]={Type:Uint32Array,size:16,setter:y},c[35674]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}},c[35675]={Type:Float32Array,size:36,setter:function(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}},c[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}},c[35685]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}},c[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}},c[35687]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}},c[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}},c[35689]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}},c[35690]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}},c[35678]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:3553},c[35680]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:34067},c[35679]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:32879},c[35682]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:3553},c[36289]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:35866},c[36292]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:35866},c[36293]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:34067},c[36298]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:3553},c[36299]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:32879},c[36300]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:34067},c[36303]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:35866},c[36306]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:3553},c[36307]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:32879},c[36308]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:34067},c[36311]={Type:null,size:0,setter:m,arraySetter:v,bindPoint:35866};var w={};w[5126]={size:4,setter:g},w[35664]={size:8,setter:g},w[35665]={size:12,setter:g},w[35666]={size:16,setter:g},w[5124]={size:4,setter:b},w[35667]={size:8,setter:b},w[35668]={size:12,setter:b},w[35669]={size:16,setter:b},w[5125]={size:4,setter:_},w[36294]={size:8,setter:_},w[36295]={size:12,setter:_},w[36296]={size:16,setter:_},w[35670]={size:4,setter:b},w[35671]={size:8,setter:b},w[35672]={size:12,setter:b},w[35673]={size:16,setter:b},w[35674]={size:4,setter:E,count:2},w[35675]={size:9,setter:E,count:3},w[35676]={size:16,setter:E,count:4};var x=/^[ \t]*\n/;function A(e,t,r,n){var o=n||a,i=e.createShader(r),s=0;if(x.test(t)&&(s=1,t=t.replace(x,"")),e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){var u=e.getShaderInfoLog(i);return o(function(e,r){return r=r||0,++r,t.split("\n").map(function(e,t){return t+r+": "+e}).join("\n")}(0,s)+"\n*** Error compiling shader: "+u),e.deleteShader(i),null}return i}function T(e,t,r){var n;if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e)r=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var o=e;r=o.errorCallback,e=o.attribLocations,n=o.transformFeedbackVaryings}var i={errorCallback:r||a,transformFeedbackVaryings:n};if(e){var s={};Array.isArray(e)?e.forEach(function(e,r){s[e]=t?t[r]:r}):s=e,i.attribLocations=s}return i}var S=["VERTEX_SHADER","FRAGMENT_SHADER"];function F(e,t){return t.indexOf("frag")>=0?e.FRAGMENT_SHADER:t.indexOf("vert")>=0?e.VERTEX_SHADER:void 0}function R(e,t){t.forEach(function(t){e.deleteShader(t)})}function I(e,t,r,n,i){for(var a=T(r,n,i),s=[],c=[],l=0;l<t.length;++l){var f=t[l];if("string"==typeof f){var d=u(f),p=d?d.text:f,h=e[S[l]];d&&d.type&&(h=F(e,d.type)||h),f=A(e,p,h,a.errorCallback),c.push(f)}o.isShader(e,f)&&s.push(f)}if(s.length!==t.length)return a.errorCallback("not enough shaders for program"),R(e,c),null;var y=e.createProgram();s.forEach(function(t){e.attachShader(y,t)}),a.attribLocations&&Object.keys(a.attribLocations).forEach(function(t){e.bindAttribLocation(y,a.attribLocations[t],t)});var m=a.transformFeedbackVaryings;if(m&&(m.attribs&&(m=m.attribs),Array.isArray(m)||(m=Object.keys(m)),e.transformFeedbackVaryings(y,m,a.transformFeedbackMode||e.SEPARATE_ATTRIBS)),e.linkProgram(y),!e.getProgramParameter(y,e.LINK_STATUS)){var v=e.getProgramInfoLog(y);return a.errorCallback("Error in program linking:"+v),e.deleteProgram(y),R(e,c),null}return y}function C(e,t,r,n){var o,i=u(t);if(!i)throw new Error("unknown script element: ".concat(t));o=i.text;var a=r||F(e,i.type);if(!a)throw new Error("unknown shader type");return A(e,o,a,n)}function P(e,t,r,n,o){for(var i=T(r,n,o),a=[],s=0;s<t.length;++s){var u=A(e,t[s],e[S[s]],i.errorCallback);if(!u)return null;a.push(u)}return I(e,a,i)}function k(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function O(e,t){var r=0;function n(t,n){var o,i=e.getUniformLocation(t,n.name),a=n.size>1&&"[0]"===n.name.substr(-3),s=n.type,u=c[s];if(!u)throw new Error("unknown type: 0x".concat(s.toString(16)));if(u.bindPoint){var l=r;r+=n.size,o=a?u.arraySetter(e,s,l,i,n.size):u.setter(e,s,l,i,n.size)}else o=u.arraySetter&&a?u.arraySetter(e,i):u.setter(e,i);return o.location=i,o}for(var o={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a=0;a<i;++a){var s=e.getActiveUniform(t,a);if(!k(s)){var u=s.name;"[0]"===u.substr(-3)&&(u=u.substr(0,u.length-3));var l=n(t,s);o[u]=l}}return o}function B(e,t){for(var r={},n=e.getProgramParameter(t,e.TRANSFORM_FEEDBACK_VARYINGS),o=0;o<n;++o){var i=e.getTransformFeedbackVarying(t,o);r[i.name]={index:o,type:i.type,size:i.size}}return r}function U(e,t,r){for(var n in t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var o=t[n];if(o){var i=r[n];i.offset?e.bindBufferRange(e.TRANSFORM_FEEDBACK_BUFFER,o.index,i.buffer,i.offset,i.size):e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o.index,i.buffer)}}}function j(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=[],o=[],i=0;i<r;++i){o.push(i),n.push({});var a=e.getActiveUniform(t,i);if(k(a))break;n[i].name=a.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(r){var i=r[0],a=r[1];e.getActiveUniforms(t,o,e[i]).forEach(function(e,t){n[t][a]=e})});for(var s={},u=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS),c=0;c<u;++c){var l=e.getActiveUniformBlockName(t,c),f={index:c,usedByVertexShader:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};f.used=f.usedByVertexSahder||f.usedByFragmentShader,s[l]=f}return{blockSpecs:s,uniformData:n}}var N=/\[\d+\]\.$/;function M(e,t,r,n){var o=r.blockSpecs,i=r.uniformData,a=o[n];if(!a)return s("no uniform block object named:",n),{name:n,uniforms:{}};var u=new ArrayBuffer(a.size),l=e.createBuffer(),f=a.index;e.bindBuffer(e.UNIFORM_BUFFER,l),e.uniformBlockBinding(t,a.index,f);var d=n+".";N.test(d)&&(d=d.replace(N,"."));var p={};return a.uniformIndices.forEach(function(e){var t=i[e],r=c[t.type],n=r.Type,o=t.size*r.size,a=t.name;a.substr(0,d.length)===d&&(a=a.substr(d.length)),p[a]=new n(u,t.offset,o/n.BYTES_PER_ELEMENT)}),{name:n,array:u,asFloat:new Float32Array(u),buffer:l,uniforms:p}}function L(e,t,r){var n=(t.uniformBlockSpec||t).blockSpecs[r.name];if(n){var o=n.index;return e.bindBufferRange(e.UNIFORM_BUFFER,o,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function D(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<n;++o){var i=e.getActiveAttrib(t,o);if(!k(i)){var a=e.getAttribLocation(t,i.name),s=w[i.type],u=s.setter(e,a,s);u.location=a,r[i.name]=u}}return r}function z(e,t){for(var r in t){var n=e[r];n&&n(t[r])}}function G(e,t){var r={program:t,uniformSetters:O(e,t),attribSetters:D(e,t)};return n.isWebGL2(e)&&(r.uniformBlockSpec=j(e,t),r.transformFeedbackInfo=B(e,t)),r}},"./src/textures.js":function(e,t,r){"use strict";t.__esModule=!0,t.setTextureDefaults_=function(e){i.copyExistingProperties(e,s),e.textureColor&&x(e.textureColor)},t.createSampler=k,t.createSamplers=function(e,t){var r={};return Object.keys(t).forEach(function(n){r[n]=k(e,t[n])}),r},t.setSamplerParameters=P,t.createTexture=H,t.setEmptyTexture=X,t.setTextureFromArray=W,t.loadTextureFromUrl=G,t.setTextureFromElement=N,t.setTextureFilteringForSize=O,t.setTextureParameters=C,t.setDefaultTextureColor=x,t.createTextures=function(e,t,r){r=r||M;var n=0,o=[],i={},a={};function s(){0===n&&setTimeout(function(){r(o.length?o:void 0,i,a)},0)}return Object.keys(t).forEach(function(r){var u,c,l=t[r];("string"==typeof(c=l.src)||Array.isArray(c)&&"string"==typeof c[0])&&(u=function(e,t,i){a[r]=i,--n,e&&o.push(e),s()},++n),i[r]=H(e,l,u)}),s(),i},t.resizeTexture=function(e,t,r,n,o){n=n||r.width,o=o||r.height;var i=r.target||e.TEXTURE_2D;e.bindTexture(i,t);var a,s=r.level||0,c=r.internalFormat||r.format||e.RGBA,l=v(c),f=r.format||l.format,d=r.src;if(a=d&&(u(d)||Array.isArray(d)&&"number"==typeof d[0])?r.type||E(e,d,l.type):r.type||l.type,i===e.TEXTURE_CUBE_MAP)for(var p=0;p<6;++p)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,s,c,n,o,0,f,a,null);else e.texImage2D(i,s,c,n,o,0,f,a,null)},t.canGenerateMipmap=b,t.canFilter=_,t.getNumComponentsForFormat=function(e){var t=d[e];if(!t)throw"unknown format: "+e;return t.numColorComponents},t.getBytesPerElementForInternalFormat=m,t.getFormatAndTypeForInternalFormat=v;var n=a(r("./src/utils.js")),o=a(r("./src/typedarrays.js")),i=a(r("./src/helper.js"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var s={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},u=o.isArrayBuffer,c="undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null,l=6407,f=33319,d={},p=d;p[6406]={numColorComponents:1},p[6409]={numColorComponents:1},p[6410]={numColorComponents:2},p[l]={numColorComponents:3},p[6408]={numColorComponents:4},p[6403]={numColorComponents:1},p[36244]={numColorComponents:1},p[f]={numColorComponents:2},p[33320]={numColorComponents:2},p[l]={numColorComponents:3},p[36248]={numColorComponents:3},p[6408]={numColorComponents:4},p[36249]={numColorComponents:4},p[6402]={numColorComponents:1},p[34041]={numColorComponents:2};var h={},y=h;function m(e,t){var r=h[e];if(!r)throw"unknown internal format";var n=r.bytesPerElementMap[t];if(void 0===n)throw"unknown internal format";return n}function v(e){var t=h[e];if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function g(e){return 0==(e&e-1)}function b(e,t,r,o){if(!n.isWebGL2(e))return g(t)&&g(r);var i=h[o];if(!i)throw"unknown internal format";return i.colorRenderable&&i.textureFilterable}function _(e){var t=h[e];if(!t)throw"unknown internal format";return t.textureFilterable}function E(e,t,r){return u(t)?o.getGLTypeForTypedArray(t):r||e.UNSIGNED_BYTE}function w(e,t,r,n,o){if(o%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=o/n)%1)throw"can't guess dimensions"}else if((n=o/r)%1)throw"can't guess dimensions"}else{var i=Math.sqrt(o/(t===e.TEXTURE_CUBE_MAP?6:1));i%1==0?(r=i,n=i):(r=o,n=1)}return{width:r,height:n}}function x(e){s.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}y[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},y[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},y[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]},y[l]={textureFormat:l,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},y[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},y[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[5121]},y[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[5120]},y[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},y[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[5126]},y[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5121]},y[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5120]},y[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5123]},y[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5122]},y[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},y[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5124]},y[33323]={textureFormat:f,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[5121]},y[36757]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[5120]},y[33327]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},y[33328]={textureFormat:f,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[5126]},y[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5121]},y[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5120]},y[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5123]},y[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5122]},y[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5125]},y[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5124]},y[32849]={textureFormat:l,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[5121]},y[35905]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5121]},y[36194]={textureFormat:l,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},y[36758]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5120]},y[35898]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},y[35901]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},y[34843]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},y[34837]={textureFormat:l,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5126]},y[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5121]},y[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5120]},y[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5123]},y[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5122]},y[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5125]},y[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5124]},y[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},y[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},y[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[5120]},y[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},y[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},y[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[33640]},y[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},y[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[5126]},y[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5121]},y[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5120]},y[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[33640]},y[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5123]},y[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5122]},y[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5124]},y[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5125]},y[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},y[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},y[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5126]},y[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[34042]},y[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[36269]},Object.keys(y).forEach(function(e){var t=y[e];t.bytesPerElementMap={},t.bytesPerElement.forEach(function(e,r){var n=t.type[r];t.bytesPerElementMap[n]=e})});var A={};function T(e,t){void 0!==t.colorspaceConversion&&(A.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorspaceConversion)),void 0!==t.premultiplyAlpha&&(A.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha)),void 0!==t.flipY&&(A.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY))}function S(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,A.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,A.flipY)}function F(e){A.unpackAlignment=e.getParameter(e.UNPACK_ALIGNMENT),n.isWebGL2(e)&&(A.unpackRowLength=e.getParameter(e.UNPACK_ROW_LENGTH),A.unpackImageHeight=e.getParameter(e.UNPACK_IMAGE_HEIGHT),A.unpackSkipPixels=e.getParameter(e.UNPACK_SKIP_PIXELS),A.unpackSkipRows=e.getParameter(e.UNPACK_SKIP_ROWS),A.unpackSkipImages=e.getParameter(e.UNPACK_SKIP_IMAGES))}function R(e){e.pixelStorei(e.UNPACK_ALIGNMENT,A.unpackAlignment),n.isWebGL2(e)&&(e.pixelStorei(e.UNPACK_ROW_LENGTH,A.unpackRowLength),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,A.unpackImageHeight),e.pixelStorei(e.UNPACK_SKIP_PIXELS,A.unpackSkipPixels),e.pixelStorei(e.UNPACK_SKIP_ROWS,A.unpackSkipRows),e.pixelStorei(e.UNPACK_SKIP_IMAGES,A.unpackSkipImages))}function I(e,t,r,n){n.minMag&&(r.call(e,t,e.TEXTURE_MIN_FILTER,n.minMag),r.call(e,t,e.TEXTURE_MAG_FILTER,n.minMag)),n.min&&r.call(e,t,e.TEXTURE_MIN_FILTER,n.min),n.mag&&r.call(e,t,e.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(r.call(e,t,e.TEXTURE_WRAP_S,n.wrap),r.call(e,t,e.TEXTURE_WRAP_T,n.wrap),(t===e.TEXTURE_3D||i.isSampler(e,t))&&r.call(e,t,e.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&r.call(e,t,e.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&r.call(e,t,e.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&r.call(e,t,e.TEXTURE_WRAP_T,n.wrapT),n.minLod&&r.call(e,t,e.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&r.call(e,t,e.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&r.call(e,t,e.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&r.call(e,t,e.TEXTURE_MAX_LEVEL,n.maxLevel)}function C(e,t,r){var n=r.target||e.TEXTURE_2D;e.bindTexture(n,t),I(e,n,e.texParameteri,r)}function P(e,t,r){I(e,t,e.samplerParameteri,r)}function k(e,t){var r=e.createSampler();return P(e,r,t),r}function O(e,t,r,n,o,i,a){r=r||s.textureOptions,i=i||e.RGBA,a=a||e.UNSIGNED_BYTE;var u=r.target||e.TEXTURE_2D;if(n=n||r.width,o=o||r.height,e.bindTexture(u,t),b(e,n,o,i))e.generateMipmap(u);else{var c=_(i)?e.LINEAR:e.NEAREST;e.texParameteri(u,e.TEXTURE_MIN_FILTER,c),e.texParameteri(u,e.TEXTURE_MAG_FILTER,c),e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}}function B(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function U(e,t){return(t=t||{}).cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function j(e,t){var r=U(e,t).map(function(e,t){return{face:e,ndx:t}});return r.sort(function(e,t){return e.face-t.face}),r}function N(e,t,r,n){var o=(n=n||s.textureOptions).target||e.TEXTURE_2D,i=n.level||0,a=r.width,u=r.height,l=n.internalFormat||n.format||e.RGBA,f=v(l),d=n.format||f.format,p=n.type||f.type;if(T(e,n),e.bindTexture(o,t),o===e.TEXTURE_CUBE_MAP){var h,y,m=r.width,g=r.height;if(m/6===g)h=g,y=[0,0,1,0,2,0,3,0,4,0,5,0];else if(g/6===m)h=m,y=[0,0,0,1,0,2,0,3,0,4,0,5];else if(m/3==g/2)h=m/3,y=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(m/2!=g/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);h=m/2,y=[0,0,1,0,0,1,1,1,0,2,1,2]}c?(c.canvas.width=h,c.canvas.height=h,a=h,u=h,j(e,n).forEach(function(t){var n=y[2*t.ndx+0]*h,o=y[2*t.ndx+1]*h;c.drawImage(r,n,o,h,h,0,0,h,h),e.texImage2D(t.face,i,l,d,p,c.canvas)}),c.canvas.width=1,c.canvas.height=1):"undefined"!=typeof createImageBitmap&&(a=h,u=h,j(e,n).forEach(function(s){var c=y[2*s.ndx+0]*h,f=y[2*s.ndx+1]*h;e.texImage2D(s.face,i,l,h,h,0,d,p,null),createImageBitmap(r,c,f,h,h,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(r){T(e,n),e.bindTexture(o,t),e.texImage2D(s.face,i,l,d,p,r),S(e,n),B(n)&&O(e,t,n,a,u,l,p)})}))}else if(o===e.TEXTURE_3D||o===e.TEXTURE_2D_ARRAY){var b=Math.min(r.width,r.height),_=Math.max(r.width,r.height),E=_/b;if(E%1!=0)throw"can not compute 3D dimensions of element";var w=r.width===_?1:0,x=r.height===_?1:0;F(e),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.pixelStorei(e.UNPACK_ROW_LENGTH,r.width),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.texImage3D(o,i,l,b,b,b,0,d,p,null);for(var A=0;A<E;++A){var I=A*b*w,P=A*b*x;e.pixelStorei(e.UNPACK_SKIP_PIXELS,I),e.pixelStorei(e.UNPACK_SKIP_ROWS,P),e.texSubImage3D(o,i,0,0,A,b,b,1,d,p,r)}R(e)}else e.texImage2D(o,i,l,d,p,r);S(e,n),B(n)&&O(e,t,n,a,u,l,p),C(e,t,n)}function M(){}function L(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function D(e,t,r){return L(e)?(setTimeout(function(){r(null,e)}),e):function(e,t,r){var n;if(r=r||M,t=void 0!==t?t:s.crossOrigin,t=function(e,t){return void 0!==t||function(e){if("undefined"!=typeof document){var t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}var r=new URL(location.href).origin;return new URL(e,location.href).origin===r}(e)?t:"anonymous"}(e,t),"undefined"!=typeof Image){n=new Image,void 0!==t&&(n.crossOrigin=t);var o=function(){n.removeEventListener("error",a),n.removeEventListener("load",u),n=null},a=function(){var t="couldn't load image: "+e;i.error(t),r(t,n),o()},u=function(){r(null,n),o()};return n.addEventListener("error",a),n.addEventListener("load",u),n.src=e,n}if("undefined"!=typeof ImageBitmap){var c,l,f=function(){r(c,l)},d={};t&&(d.mode="cors"),fetch(e,d).then(function(e){if(!e.ok)throw e;return e.blob()}).then(function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(e){l=e,setTimeout(f)}).catch(function(e){c=e,setTimeout(f)}),n=null}return n}(e,t,r)}function z(e,t,r){var n=(r=r||s.textureOptions).target||e.TEXTURE_2D;if(e.bindTexture(n,t),!1!==r.color){var o=function(e){return e=e||s.textureColor,u(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(r.color);if(n===e.TEXTURE_CUBE_MAP)for(var i=0;i<6;++i)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);else n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o)}}function G(e,t,r,n){return n=n||M,r=r||s.textureOptions,z(e,t,r),D((r=Object.assign({},r)).src,r.crossOrigin,function(o,i){o?n(o,t,i):(N(e,t,i,r),n(null,t,i))})}function W(e,t,r,i){var a=(i=i||s.textureOptions).target||e.TEXTURE_2D;e.bindTexture(a,t);var c=i.width,l=i.height,f=i.depth,d=i.level||0,p=i.internalFormat||i.format||e.RGBA,h=v(p),y=i.format||h.format,g=i.type||E(e,r,h.type);if(u(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{var b=o.getTypedArrayTypeForGLType(g);r=new b(r)}var _,x=m(p,g),A=r.byteLength/x;if(A%1)throw"length wrong size for format: "+n.glEnumToString(e,y);if(a===e.TEXTURE_3D)if(c||l||f)!c||l&&f?!l||c&&f?(_=w(e,a,c,l,A/f),c=_.width,l=_.height):(_=w(e,a,c,f,A/l),c=_.width,f=_.height):(_=w(e,a,l,f,A/c),l=_.width,f=_.height);else{var I=Math.cbrt(A);if(I%1!=0)throw"can't guess cube size of array of numElements: "+A;c=I,l=I,f=I}else _=w(e,a,c,l,A),c=_.width,l=_.height;if(F(e),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment||1),T(e,i),a===e.TEXTURE_CUBE_MAP){var C=A/6*(x/r.BYTES_PER_ELEMENT);j(e,i).forEach(function(t){var n=C*t.ndx,o=r.subarray(n,n+C);e.texImage2D(t.face,d,p,c,l,0,y,g,o)})}else a===e.TEXTURE_3D?e.texImage3D(a,d,p,c,l,f,0,y,g,r):e.texImage2D(a,d,p,c,l,0,y,g,r);return S(e,i),R(e),{width:c,height:l,depth:f,type:g}}function X(e,t,r){var n=r.target||e.TEXTURE_2D;e.bindTexture(n,t);var o=r.level||0,i=r.internalFormat||r.format||e.RGBA,a=v(i),s=r.format||a.format,u=r.type||a.type;if(T(e,r),n===e.TEXTURE_CUBE_MAP)for(var c=0;c<6;++c)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+c,o,i,r.width,r.height,0,s,u,null);else n===e.TEXTURE_3D?e.texImage3D(n,o,i,r.width,r.height,r.depth,0,s,u,null):e.texImage2D(n,o,i,r.width,r.height,0,s,u,null);S(e,r)}function H(e,t,r){r=r||M,t=t||s.textureOptions;var n=e.createTexture(),o=t.target||e.TEXTURE_2D,i=t.width||1,a=t.height||1,l=t.internalFormat||e.RGBA,f=v(l),d=t.type||f.type;e.bindTexture(o,n),o===e.TEXTURE_CUBE_MAP&&(e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var p=t.src;if(p)if("function"==typeof p&&(p=p(e,t)),"string"==typeof p)G(e,n,t,r);else if(u(p)||Array.isArray(p)&&("number"==typeof p[0]||Array.isArray(p[0])||u(p[0]))){var h=W(e,n,p,t);i=h.width,a=h.height,d=h.type}else if(Array.isArray(p)&&("string"==typeof p[0]||L(p[0])))o===e.TEXTURE_CUBE_MAP?function(e,t,r,n){n=n||M;var o=r.src;if(6!==o.length)throw"there must be 6 urls for a cubemap";var i=r.level||0,a=r.internalFormat||r.format||e.RGBA,s=v(a),u=r.format||s.format,c=r.type||e.UNSIGNED_BYTE,l=r.target||e.TEXTURE_2D;if(l!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";z(e,t,r),r=Object.assign({},r);var f,d=6,p=[],h=U(e,r);f=o.map(function(o,s){return D(o,r.crossOrigin,(y=h[s],function(o,s){--d,o?p.push(o):s.width!==s.height?p.push("cubemap face img is not a square: "+s.src):(T(e,r),e.bindTexture(l,t),5===d?U(e).forEach(function(t){e.texImage2D(t,i,a,u,c,s)}):e.texImage2D(y,i,a,u,c,s),S(e,r),B(r)&&e.generateMipmap(l)),0===d&&n(p.length?p:void 0,t,f)}));var y})}(e,n,t,r):function(e,t,r,n){n=n||M;var o=r.src,i=r.internalFormat||r.format||e.RGBA,a=v(i),s=r.format||a.format,u=r.type||e.UNSIGNED_BYTE,l=r.target||e.TEXTURE_2D_ARRAY;if(l!==e.TEXTURE_3D&&l!==e.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";z(e,t,r),r=Object.assign({},r);var f,d=o.length,p=[],h=r.level||0,y=r.width,m=r.height,g=o.length,b=!0;f=o.map(function(o,a){return D(o,r.crossOrigin,(v=a,function(o,a){if(--d,o)p.push(o);else{if(T(e,r),e.bindTexture(l,t),b){b=!1,y=r.width||a.width,m=r.height||a.height,e.texImage3D(l,h,i,y,m,g,0,s,u,null);for(var _=0;_<g;++_)e.texSubImage3D(l,h,0,0,_,y,m,1,s,u,a)}else{var E=a;a.width===y&&a.height===m||(E=c.canvas,c.canvas.width=y,c.canvas.height=m,c.drawImage(a,0,0,y,m)),e.texSubImage3D(l,h,0,0,v,y,m,1,s,u,E),E===c.canvas&&(c.canvas.width=0,c.canvas.height=0)}S(e,r),B(r)&&e.generateMipmap(l)}0===d&&n(p.length?p:void 0,t,f)}));var v})}(e,n,t,r);else{if(!L(p))throw"unsupported src type";N(e,n,p,t),i=p.width,a=p.height}else X(e,n,t);return B(t)&&O(e,n,t,i,a,l,d),C(e,n,t),n}},"./src/twgl-full.js":function(e,t,r){"use strict";t.__esModule=!0;var n={m4:!0,v3:!0,primitives:!0};t.primitives=t.v3=t.m4=void 0;var o=u(r("./src/m4.js"));t.m4=o;var i=u(r("./src/v3.js"));t.v3=i;var a=u(r("./src/primitives.js"));t.primitives=a;var s=r("./src/twgl.js");function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=s[e]))})},"./src/twgl.js":function(e,t,r){"use strict";t.__esModule=!0;var n={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0};t.addExtensionsToContext=g,t.getContext=function(e,t){return function(e,t){for(var r=["webgl2","webgl","experimental-webgl"],n=null,o=0;o<r.length;++o)if(n=e.getContext(r[o],t)){h.addExtensionsToContext&&g(n);break}return n}(e,t)},t.getWebGLContext=function(e,t){return function(e,t){for(var r=["webgl","experimental-webgl"],n=null,o=0;o<r.length;++o)if(n=e.getContext(r[o],t)){h.addExtensionsToContext&&g(n);break}return n}(e,t)},t.resizeCanvasToDisplaySize=function(e,t){t=t||1,t=Math.max(0,t);var r=e.clientWidth*t|0,n=e.clientHeight*t|0;return(e.width!==r||e.height!==n)&&(e.width=r,e.height=n,!0)},t.setDefaults=function(e){a.copyExistingProperties(e,h),o.setAttributeDefaults_(e),i.setTextureDefaults_(e)};var o=p(r("./src/attributes.js"));Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=o[e]))});var i=p(r("./src/textures.js"));Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=i[e]))});var a=p(r("./src/helper.js")),s=p(r("./src/utils.js"));Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=s[e]))});var u=r("./src/draw.js");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=u[e]))});var c=r("./src/framebuffers.js");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=c[e]))});var l=r("./src/programs.js");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=l[e]))});var f=r("./src/typedarrays.js");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=f[e]))});var d=r("./src/vertex-arrays.js");function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=d[e]))});var h={addExtensionsToContext:!0},y=/^(.*?)_/;function m(e,t){s.glEnumToString(e,0);var r=e.getExtension(t);if(r){var n={},o=y.exec(t)[1],i="_"+o;for(var u in r){var c=r[u],l="function"==typeof c,f=l?o:i,d=u;u.endsWith(f)&&(d=u.substring(0,u.length-f.length)),void 0!==e[d]?l||e[d]===c||a.warn(d,e[d],c,u):l?e[d]=function(e){return function(){return e.apply(r,arguments)}}(c):(e[d]=c,n[d]=c)}n.constructor={name:r.constructor.name},s.glEnumToString(n,0)}return r}var v=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function g(e){for(var t=0;t<v.length;++t)m(e,v[t])}},"./src/typedarrays.js":function(e,t,r){"use strict";t.__esModule=!0,t.getGLTypeForTypedArray=function(e){if(e instanceof Int8Array)return n;if(e instanceof Uint8Array)return o;if(e instanceof Uint8ClampedArray)return o;if(e instanceof Int16Array)return i;if(e instanceof Uint16Array)return a;if(e instanceof Int32Array)return s;if(e instanceof Uint32Array)return u;if(e instanceof Float32Array)return c;throw new Error("unsupported typed array type")},t.getGLTypeForTypedArrayType=function(e){if(e===Int8Array)return n;if(e===Uint8Array)return o;if(e===Uint8ClampedArray)return o;if(e===Int16Array)return i;if(e===Uint16Array)return a;if(e===Int32Array)return s;if(e===Uint32Array)return u;if(e===Float32Array)return c;throw new Error("unsupported typed array type")},t.getTypedArrayTypeForGLType=function(e){var t=l[e];if(!t)throw new Error("unknown gl type");return t},t.isArrayBuffer=void 0;var n=5120,o=5121,i=5122,a=5123,s=5124,u=5125,c=5126,l={},f=l;f[n]=Int8Array,f[o]=Uint8Array,f[i]=Int16Array,f[a]=Uint16Array,f[s]=Int32Array,f[u]=Uint32Array,f[c]=Float32Array,f[32819]=Uint16Array,f[32820]=Uint16Array,f[33635]=Uint16Array,f[5131]=Uint16Array,f[33640]=Uint32Array,f[35899]=Uint32Array,f[35902]=Uint32Array,f[36269]=Uint32Array,f[34042]=Uint32Array;var d="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};t.isArrayBuffer=d},"./src/utils.js":function(e,t,r){"use strict";t.__esModule=!0,t.isWebGL1=function(e){return!e.texStorage2D},t.isWebGL2=function(e){return!!e.texStorage2D},t.glEnumToString=void 0;var n,o,i=(n={},o={},function(e,t){return function(e){var t=e.constructor.name;if(!n[t]){for(var r in e)if("number"==typeof e[r]){var i=o[e[r]];o[e[r]]=i?"".concat(i," | ").concat(r):r}n[t]=!0}}(e),o[t]||"0x"+t.toString(16)});t.glEnumToString=i},"./src/v3.js":function(e,t,r){"use strict";t.__esModule=!0,t.add=function(e,t,r){return(r=r||new n(3))[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r},t.copy=function(e,t){return(t=t||new n(3))[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.create=function(e,t,r){var o=new n(3);return e&&(o[0]=e),t&&(o[1]=t),r&&(o[2]=r),o},t.cross=function(e,t,r){r=r||new n(3);var o=e[2]*t[0]-e[0]*t[2],i=e[0]*t[1]-e[1]*t[0];return r[0]=e[1]*t[2]-e[2]*t[1],r[1]=o,r[2]=i,r},t.distance=function(e,t){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(r*r+n*n+o*o)},t.distanceSq=function(e,t){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return r*r+n*n+o*o},t.divide=function(e,t,r){return(r=r||new n(3))[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r},t.divScalar=function(e,t,r){return(r=r||new n(3))[0]=e[0]/t,r[1]=e[1]/t,r[2]=e[2]/t,r},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},t.lerp=function(e,t,r,o){return(o=o||new n(3))[0]=e[0]+r*(t[0]-e[0]),o[1]=e[1]+r*(t[1]-e[1]),o[2]=e[2]+r*(t[2]-e[2]),o},t.lerpV=function(e,t,r,o){return(o=o||new n(3))[0]=e[0]+r[0]*(t[0]-e[0]),o[1]=e[1]+r[1]*(t[1]-e[1]),o[2]=e[2]+r[2]*(t[2]-e[2]),o},t.length=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},t.lengthSq=function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},t.max=function(e,t,r){return(r=r||new n(3))[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r},t.min=function(e,t,r){return(r=r||new n(3))[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r},t.mulScalar=function(e,t,r){return(r=r||new n(3))[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r},t.multiply=function(e,t,r){return(r=r||new n(3))[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r},t.negate=function(e,t){return(t=t||new n(3))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},t.normalize=function(e,t){t=t||new n(3);var r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],o=Math.sqrt(r);return o>1e-5?(t[0]=e[0]/o,t[1]=e[1]/o,t[2]=e[2]/o):(t[0]=0,t[1]=0,t[2]=0),t},t.setDefaultType=function(e){var t=n;return n=e,t},t.subtract=function(e,t,r){return(r=r||new n(3))[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r};var n=Float32Array},"./src/vertex-arrays.js":function(e,t,r){"use strict";t.__esModule=!0,t.createVertexArrayInfo=function(e,t,r){var o=e.createVertexArray();return e.bindVertexArray(o),t.length||(t=[t]),t.forEach(function(t){n.setBuffersAndAttributes(e,t,r)}),e.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:o}},t.createVAOAndSetAttributes=o,t.createVAOFromBufferInfo=function(e,t,r){return o(e,t.attribSetters||t,r.attribs,r.indices)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./src/programs.js"));function o(e,t,r,o){var i=e.createVertexArray();return e.bindVertexArray(i),n.setAttributes(t,r),o&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o),e.bindVertexArray(null),i}}})},"object"==typeof E.exports?E.exports=_():"function"==typeof define&&define.amd?define([],_):"object"==typeof E.exports?E.exports.twgl=_():b.twgl=_(),E=E.exports;var w={};(function(e){"use strict";var t,r=this&&this.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,r)},function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(w,"__esModule",{value:!0});var n=0;w.IS_UNIQUE="__DO_NOT_DEDUPE_STYLE__";for(var o=/[A-Z]/g,i=/^ms-/,a=/&/g,s=/[ !#$%&()*+,.\/;<=>?@[\]^`{|}~"'\\]/g,u=function(e){return"-"+e.toLowerCase()},c={"animation-iteration-count":!0,"border-image-outset":!0,"border-image-slice":!0,"border-image-width":!0,"box-flex":!0,"box-flex-group":!0,"box-ordinal-group":!0,"column-count":!0,columns:!0,"counter-increment":!0,"counter-reset":!0,flex:!0,"flex-grow":!0,"flex-positive":!0,"flex-shrink":!0,"flex-negative":!0,"flex-order":!0,"font-weight":!0,"grid-area":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-span":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-span":!0,"grid-row-start":!0,"line-clamp":!0,"line-height":!0,opacity:!0,order:!0,orphans:!0,"tab-size":!0,widows:!0,"z-index":!0,zoom:!0,"fill-opacity":!0,"flood-opacity":!0,"stop-opacity":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0},l=0,f=Object.keys(c);l<f.length;l++)for(var d=f[l],p=0,h=["-webkit-","-ms-","-moz-","-o-",""];p<h.length;p++)c[h[p]+d]=!0;function y(e){return e.replace(o,u).replace(i,"-ms-")}function m(e){for(var t=5381,r=e.length;r--;)t=33*t^e.charCodeAt(r);return(t>>>0).toString(36)}function v(e,t){return"number"!=typeof t||0===t||c.hasOwnProperty(e)?e+":"+t:e+":"+t+"px"}function g(e){return e.sort(function(e,t){return e[0]>t[0]?1:-1})}function b(e){return e.map(function(e){var t=e[0],r=e[1];return Array.isArray(r)?r.map(function(e){return v(t,e)}).join(";"):v(t,r)}).join(";")}function _(e,t){return-1===e.indexOf("&")?t+" "+e:e.replace(a,t)}function E(e,t,r,n,o){var i=function(e,t){for(var r=[],n=[],o=!1,i=0,a=Object.keys(e);i<a.length;i++){var s=a[i],u=e[s];null!=u&&(s===w.IS_UNIQUE?o=!0:"object"!=typeof u||Array.isArray(u)?r.push([y(s.trim()),u]):n.push([s.trim(),u]))}return{style:b(g(r)),nested:t?n:g(n),isUnique:o}}(t,""!==e),a=i.style,s=i.nested,u=i.isUnique,c=a;if(64===e.charCodeAt(0)){var l={selector:e,styles:[],rules:[],style:o?"":a};r.push(l),a&&o&&l.styles.push({selector:o,style:a,isUnique:u});for(var f=0,d=s;f<d.length;f++){var p=d[f];c+=(x=p[0])+E(x,p[1],l.rules,l.styles,o)}}else{var h=o?_(e,o):e;a&&n.push({selector:h,style:a,isUnique:u});for(var m=0,v=s;m<v.length;m++){var x,A=v[m];c+=(x=A[0])+E(x,A[1],r,n,h)}}return c}function x(e,t,r,o,i,a){for(var s=0,u=o;s<u.length;s++){var c=u[s],l=c.selector,f=c.style,d=c.isUnique,p=a?_(l,i):l,h=d?"u\0"+(++n).toString(36):"s\0"+t+"\0"+f;(v=new R(f,h)).add(new F(p,"k\0"+t+"\0"+p)),e.add(v)}for(var y=0,m=r;y<m.length;y++){var v,g=m[y],b=(l=g.selector,f=g.style,g.rules),E=g.styles;x(v=new I(l,f,"r\0"+t+"\0"+l+"\0"+f),t,b,E,i,a),e.add(v)}}function A(e){for(var t="",r=0;r<e.length;r++)t+=e[r];return t}w.escape=function(e){return e.replace(s,"\\$&")},w.hyphenate=y,w.stringHash=m;var T={add:function(){},change:function(){},remove:function(){}},S=function(){function e(e){void 0===e&&(e=T),this.changes=e,this.sheet=[],this.changeId=0,this._keys=[],this._children=Object.create(null),this._counters=Object.create(null)}return e.prototype.add=function(t){var r=this._counters[t.id]||0,n=this._children[t.id]||t.clone();if(this._counters[t.id]=r+1,0===r)this._children[n.id]=n,this._keys.push(n.id),this.sheet.push(n.getStyles()),this.changeId++,this.changes.add(n,this._keys.length-1);else if(n instanceof e&&t instanceof e){var o=this._keys.indexOf(t.id),i=n.changeId;n.merge(t),n.changeId!==i&&(this.sheet.splice(o,1,n.getStyles()),this.changeId++,this.changes.change(n,o,o))}return n},e.prototype.remove=function(t){var r=this._counters[t.id];if(void 0!==r&&r>0){this._counters[t.id]=r-1;var n=this._children[t.id],o=this._keys.indexOf(n.id);if(1===r)delete this._counters[t.id],delete this._children[t.id],this._keys.splice(o,1),this.sheet.splice(o,1),this.changeId++,this.changes.remove(n,o);else if(n instanceof e&&t instanceof e){var i=n.changeId;n.unmerge(t),n.changeId!==i&&(this.sheet.splice(o,1,n.getStyles()),this.changeId++,this.changes.change(n,o,o))}}},e.prototype.values=function(){var e=this;return this._keys.map(function(t){return e._children[t]})},e.prototype.merge=function(e){for(var t=0,r=e.values();t<r.length;t++){var n=r[t];this.add(n)}return this},e.prototype.unmerge=function(e){for(var t=0,r=e.values();t<r.length;t++){var n=r[t];this.remove(n)}return this},e.prototype.clone=function(){return(new e).merge(this)},e}();w.Cache=S;var F=function(){function e(e,t){this.selector=e,this.id=t}return e.prototype.getStyles=function(){return this.selector},e.prototype.clone=function(){return new e(this.selector,this.id)},e}();w.Selector=F;var R=function(e){function t(t,r){var n=e.call(this)||this;return n.style=t,n.id=r,n}return r(t,e),t.prototype.getStyles=function(){return this.sheet.join(",")+"{"+this.style+"}"},t.prototype.clone=function(){return new t(this.style,this.id).merge(this)},t}(S);w.Style=R;var I=function(e){function t(t,r,n){var o=e.call(this)||this;return o.rule=t,o.style=r,o.id=n,o}return r(t,e),t.prototype.getStyles=function(){return this.rule+"{"+this.style+A(this.sheet)+"}"},t.prototype.clone=function(){return new t(this.rule,this.style,this.id).merge(this)},t}(S);w.Rule=I;var C=function(e){function t(t,r,n,o){var i=e.call(this,o)||this;return i.hash=t,i.debug=r,i.id=n,i}return r(t,e),t.prototype.registerStyle=function(e,t){var r=[],n=[],o=E("&",e,r,n),i="f"+this.hash(o),a=this.debug&&t?t+"_"+i:i;return x(this,o,r,n,"."+w.escape(a),!0),a},t.prototype.registerKeyframes=function(e,t){return this.registerHashRule("@keyframes",e,t)},t.prototype.registerHashRule=function(e,t,r){var n=[],o=[],i=E("",t,n,o),a="f"+this.hash(i),s=this.debug&&r?r+"_"+a:a,u=new I(e+" "+w.escape(s),"","h\0"+i+"\0"+e);return x(u,i,n,o,"",!1),this.add(u),s},t.prototype.registerRule=function(e,t){var r=[],n=[];x(this,E(e,t,r,n),r,n,"",!1)},t.prototype.registerCss=function(e){return this.registerRule("",e)},t.prototype.getStyles=function(){return A(this.sheet)},t.prototype.clone=function(){return new t(this.hash,this.debug,this.id,this.changes).merge(this)},t}(S);w.FreeStyle=C,w.create=function(t,r,o){return void 0===t&&(t=m),void 0===r&&(r=void 0!==e&&!1),void 0===o&&(o=T),new C(t,r,"f"+(++n).toString(36),o)}}).call(this,e);var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.ensureStringObj=function e(t){var r={},n="";for(var o in t){var i=t[o];if("$unique"===o)r[w.IS_UNIQUE]=i;else if("$nest"===o){var a=i;for(var s in a){var u=a[s];r[s]=e(u).result}}else"$debugName"===o?n=i:r[o]=i}return{result:r,debugName:n}},x.explodeKeyframes=function(e){var t={$debugName:void 0,keyframes:{}};for(var r in e){var n=e[r];"$debugName"===r?t.$debugName=n:t.keyframes[r]=n}return t};var A={};function T(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r={},n=0,o=e;n<o.length;n++){var i=o[n];if(null!=i&&!1!==i)for(var a in i){var s=i[a];(s||0===s)&&("$nest"===a&&s?r[a]=r.$nest?T(r.$nest,s):s:-1!==a.indexOf("&")||0===a.indexOf("@media")?r[a]=r[a]?T(r[a],s):s:r[a]=s)}}return r}Object.defineProperty(A,"__esModule",{value:!0}),A.raf="undefined"==typeof requestAnimationFrame?function(e){return setTimeout(e)}:"undefined"==typeof window?requestAnimationFrame:requestAnimationFrame.bind(window),A.classes=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.map(function(e){return e&&"object"==typeof e?Object.keys(e).map(function(t){return!!e[t]&&t}):[e]}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return!!e}).join(" ")},A.extend=T,A.media=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n,o=[];return e.type&&o.push(e.type),e.orientation&&o.push("(orientation: "+e.orientation+")"),e.minWidth&&o.push("(min-width: "+S(e.minWidth)+")"),e.maxWidth&&o.push("(max-width: "+S(e.maxWidth)+")"),e.minHeight&&o.push("(min-height: "+S(e.minHeight)+")"),e.maxHeight&&o.push("(max-height: "+S(e.maxHeight)+")"),{$nest:(n={},n["@media "+o.join(" and ")]=T.apply(void 0,t),n)}};var S=function(e){return"string"==typeof e?e:e+"px"},F={};Object.defineProperty(F,"__esModule",{value:!0});var R=function(){return w.create(void 0,!0)},I=function(){function e(e){var t=e.autoGenerateTag,r=this;this.cssRaw=function(e){e&&(r._raw+=e||"",r._pendingRawChange=!0,r._styleUpdated())},this.cssRule=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=x.ensureStringObj(A.extend.apply(void 0,t)).result;r._freeStyle.registerRule(e,o),r._styleUpdated()},this.forceRenderStyles=function(){var e=r._getTag();e&&(e.textContent=r.getStyles())},this.fontFace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=r._freeStyle,o=0,i=e;o<i.length;o++){var a=i[o];n.registerRule("@font-face",a)}r._styleUpdated()},this.getStyles=function(){return(r._raw||"")+r._freeStyle.getStyles()},this.keyframes=function(e){var t=x.explodeKeyframes(e),n=t.keyframes,o=t.$debugName,i=r._freeStyle.registerKeyframes(n,o);return r._styleUpdated(),i},this.reinit=function(){var e=R();r._freeStyle=e,r._lastFreeStyleChangeId=e.changeId,r._raw="",r._pendingRawChange=!1;var t=r._getTag();t&&(t.textContent="")},this.setStylesTarget=function(e){r._tag&&(r._tag.textContent=""),r._tag=e,r.forceRenderStyles()},this.stylesheet=function(e){for(var t={},n=0,o=Object.getOwnPropertyNames(e);n<o.length;n++){var i=o[n],a=e[i];a&&(a.$debugName=i,t[i]=r.style(a))}return t};var n=R();this._autoGenerateTag=t,this._freeStyle=n,this._lastFreeStyleChangeId=n.changeId,this._pending=0,this._pendingRawChange=!1,this._raw="",this._tag=void 0,this.style=this.style.bind(this)}return e.prototype._afterAllSync=function(e){var t=this;this._pending++;var r=this._pending;A.raf(function(){r===t._pending&&e()})},e.prototype._getTag=function(){if(this._tag)return this._tag;if(this._autoGenerateTag){var e="undefined"==typeof window?{textContent:""}:document.createElement("style");return"undefined"!=typeof document&&document.head.appendChild(e),this._tag=e,e}},e.prototype._styleUpdated=function(){var e=this,t=this._freeStyle.changeId,r=this._lastFreeStyleChangeId;(this._pendingRawChange||t!==r)&&(this._lastFreeStyleChangeId=t,this._pendingRawChange=!1,this._afterAllSync(function(){return e.forceRenderStyles()}))},e.prototype.style=function(){var e=this._freeStyle,t=x.ensureStringObj(A.extend.apply(void 0,arguments)),r=t.result,n=t.debugName,o=n?e.registerStyle(r,n):e.registerStyle(r);return this._styleUpdated(),o},e}();F.TypeStyle=I;var C={};Object.defineProperty(C,"__esModule",{value:!0});var P={};Object.defineProperty(P,"__esModule",{value:!0}),P.TypeStyle=F.TypeStyle,P.types=C,P.extend=A.extend,P.classes=A.classes,P.media=A.media;var k=new F.TypeStyle({autoGenerateTag:!0});P.setStylesTarget=k.setStylesTarget,P.cssRaw=k.cssRaw,P.cssRule=k.cssRule,P.forceRenderStyles=k.forceRenderStyles,P.fontFace=k.fontFace,P.getStyles=k.getStyles,P.keyframes=k.keyframes,P.reinit=k.reinit,P.style=k.style,P.stylesheet=k.stylesheet,P.createTypeStyle=function(e){var t=new F.TypeStyle({autoGenerateTag:!1});return e&&t.setStylesTarget(e),t};var O={__esModule:!0,BACKGROUND_COLOR:"#fff",LINE_HEIGHT:"20px",FONT_SIZE:"13px"};O.defaultCssTheme="\n.codeflask {\n  background: "+O.BACKGROUND_COLOR+";\n  color: #4f559c;\n}\n\n.codeflask .token.punctuation {\n  color: #4a4a4a;\n}\n\n.codeflask .token.keyword {\n  color: #8500ff;\n}\n\n.codeflask .token.operator {\n  color: #ff5598;\n}\n\n.codeflask .token.string {\n  color: #41ad8f;\n}\n\n.codeflask .token.comment {\n  color: #9badb7;\n}\n\n.codeflask .token.function {\n  color: #8500ff;\n}\n\n.codeflask .token.boolean {\n  color: #8500ff;\n}\n\n.codeflask .token.number {\n  color: #8500ff;\n}\n\n.codeflask .token.selector {\n  color: #8500ff;\n}\n\n.codeflask .token.property {\n  color: #8500ff;\n}\n\n.codeflask .token.tag {\n  color: #8500ff;\n}\n\n.codeflask .token.attr-value {\n  color: #8500ff;\n}\n";var B={};function U(e){return(e=e.split("-").filter(function(e){return!!e}).map(function(e){return e[0].toUpperCase()+e.substr(1)}).join(""))[0].toLowerCase()+e.substr(1)}B.__esModule=!0,B.cssSupports=function(e,t){return"undefined"!=typeof CSS?CSS.supports(e,t):"undefined"!=typeof document&&U(e)in document.body.style},B.toCamelCase=U;var j={__esModule:!0},N='"SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace',M=B.cssSupports("caret-color","#000")?O.BACKGROUND_COLOR:"#ccc";j.editorCss="\n  .codeflask {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  .codeflask, .codeflask * {\n    box-sizing: border-box;\n  }\n\n  .codeflask__pre {\n    pointer-events: none;\n    z-index: 3;\n    overflow: hidden;\n  }\n\n  .codeflask__textarea {\n    background: none;\n    border: none;\n    color: "+M+";\n    z-index: 1;\n    resize: none;\n    font-family: "+N+";\n    -webkit-appearance: pre;\n    caret-color: #111;\n    z-index: 2;\n    width: 100%;\n    height: 100%;\n  }\n\n  .codeflask--has-line-numbers .codeflask__textarea {\n    width: calc(100% - 40px);\n  }\n\n  .codeflask__code {\n    display: block;\n    font-family: "+N+";\n    overflow: hidden;\n  }\n\n  .codeflask__flatten {\n    padding: 10px;\n    font-size: "+O.FONT_SIZE+";\n    line-height: "+O.LINE_HEIGHT+";\n    white-space: pre;\n    position: absolute;\n    top: 0;\n    left: 0;\n    overflow: auto;\n    margin: 0 !important;\n    outline: none;\n    text-align: left;\n  }\n\n  .codeflask--has-line-numbers .codeflask__flatten {\n    width: calc(100% - 40px);\n    left: 40px;\n  }\n\n  .codeflask__line-highlight {\n    position: absolute;\n    top: 10px;\n    left: 0;\n    width: 100%;\n    height: "+O.LINE_HEIGHT+";\n    background: rgba(0,0,0,0.1);\n    z-index: 1;\n  }\n\n  .codeflask__lines {\n    padding: 10px 4px;\n    font-size: 12px;\n    line-height: "+O.LINE_HEIGHT+";\n    font-family: 'Cousine', monospace;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 40px;\n    height: 100%;\n    text-align: right;\n    color: #999;\n    z-index: 2;\n  }\n\n  .codeflask__lines__line {\n    display: block;\n  }\n\n  .codeflask.codeflask--has-line-numbers {\n    padding-left: 40px;\n  }\n\n  .codeflask.codeflask--has-line-numbers:before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 40px;\n    height: 100%;\n    background: #eee;\n    z-index: 1;\n  }\n";var L={__esModule:!0,injectCss:function(e,t,r){var n=t||"codeflask-style",o=r||document.head;if(!e)return!1;if(document.getElementById(n))return!0;var i=document.createElement("style");return i.innerHTML=e,i.id=n,o.appendChild(i),!0}},D={__esModule:!0},z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};D.escapeHtml=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return z[e]})};var G={exports:{}};(function(e){var t=function(e){var t=/\blang(?:uage)?-([\w-]+)\b/i,r=0,n={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function(e){return e instanceof o?new o(e.type,n.util.encode(e.content),e.alias):Array.isArray(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++r}),e.__id},clone:function e(t,r){var o,i,a=n.util.type(t);switch(r=r||{},a){case"Object":if(i=n.util.objId(t),r[i])return r[i];for(var s in o={},r[i]=o,t)t.hasOwnProperty(s)&&(o[s]=e(t[s],r));return o;case"Array":return i=n.util.objId(t),r[i]?r[i]:(o=[],r[i]=o,t.forEach(function(t,n){o[n]=e(t,r)}),o);default:return t}}},languages:{extend:function(e,t){var r=n.util.clone(n.languages[e]);for(var o in t)r[o]=t[o];return r},insertBefore:function(e,t,r,o){var i=(o=o||n.languages)[e],a={};for(var s in i)if(i.hasOwnProperty(s)){if(s==t)for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u]);r.hasOwnProperty(s)||(a[s]=i[s])}var c=o[e];return o[e]=a,n.languages.DFS(n.languages,function(t,r){r===c&&t!=e&&(this[t]=a)}),a},DFS:function e(t,r,o,i){i=i||{};var a=n.util.objId;for(var s in t)if(t.hasOwnProperty(s)){r.call(t,s,t[s],o||s);var u=t[s],c=n.util.type(u);"Object"!==c||i[a(u)]?"Array"!==c||i[a(u)]||(i[a(u)]=!0,e(u,r,s,i)):(i[a(u)]=!0,e(u,r,null,i))}}},plugins:{},highlightAll:function(e,t){n.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,r){var o={callback:r,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",o);for(var i,a=o.elements||e.querySelectorAll(o.selector),s=0;i=a[s++];)n.highlightElement(i,!0===t,o.callback)},highlightElement:function(r,o,i){for(var a,s,u=r;u&&!t.test(u.className);)u=u.parentNode;u&&(a=(u.className.match(t)||[,""])[1].toLowerCase(),s=n.languages[a]),r.className=r.className.replace(t,"").replace(/\s+/g," ")+" language-"+a,r.parentNode&&(u=r.parentNode,/pre/i.test(u.nodeName)&&(u.className=u.className.replace(t,"").replace(/\s+/g," ")+" language-"+a));var c={element:r,language:a,grammar:s,code:r.textContent},l=function(e){c.highlightedCode=e,n.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,n.hooks.run("after-highlight",c),n.hooks.run("complete",c),i&&i.call(c.element)};if(n.hooks.run("before-sanity-check",c),c.code)if(n.hooks.run("before-highlight",c),c.grammar)if(o&&e.Worker){var f=new Worker(n.filename);f.onmessage=function(e){l(e.data)},f.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else l(n.highlight(c.code,c.grammar,c.language));else l(n.util.encode(c.code));else n.hooks.run("complete",c)},highlight:function(e,t,r){var i={code:e,grammar:t,language:r};return n.hooks.run("before-tokenize",i),i.tokens=n.tokenize(i.code,i.grammar),n.hooks.run("after-tokenize",i),o.stringify(n.util.encode(i.tokens),i.language)},matchGrammar:function(e,t,r,i,a,s,u){for(var c in r)if(r.hasOwnProperty(c)&&r[c]){if(c==u)return;var l=r[c];l="Array"===n.util.type(l)?l:[l];for(var f=0;f<l.length;++f){var d=l[f],p=d.inside,h=!!d.lookbehind,y=!!d.greedy,m=0,v=d.alias;if(y&&!d.pattern.global){var g=d.pattern.toString().match(/[imuy]*$/)[0];d.pattern=RegExp(d.pattern.source,g+"g")}d=d.pattern||d;for(var b=i,_=a;b<t.length;_+=t[b].length,++b){var E=t[b];if(t.length>e.length)return;if(!(E instanceof o)){if(y&&b!=t.length-1){if(d.lastIndex=_,!(F=d.exec(e)))break;for(var w=F.index+(h?F[1].length:0),x=F.index+F[0].length,A=b,T=_,S=t.length;A<S&&(T<x||!t[A].type&&!t[A-1].greedy);++A)w>=(T+=t[A].length)&&(++b,_=T);if(t[b]instanceof o)continue;R=A-b,E=e.slice(_,T),F.index-=_}else{d.lastIndex=0;var F=d.exec(E),R=1}if(F){h&&(m=F[1]?F[1].length:0),x=(w=F.index+m)+(F=F[0].slice(m)).length;var I=E.slice(0,w),C=E.slice(x),P=[b,R];I&&(++b,_+=I.length,P.push(I));var k=new o(c,p?n.tokenize(F,p):F,v,F,y);if(P.push(k),C&&P.push(C),Array.prototype.splice.apply(t,P),1!=R&&n.matchGrammar(e,t,r,b,_,!0,c),s)break}else if(s)break}}}}},tokenize:function(e,t){var r=[e],o=t.rest;if(o){for(var i in o)t[i]=o[i];delete t.rest}return n.matchGrammar(e,r,t,0,0,!1),r},hooks:{all:{},add:function(e,t){var r=n.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=n.hooks.all[e];if(r&&r.length)for(var o,i=0;o=r[i++];)o(t)}},Token:o};function o(e,t,r,n,o){this.type=e,this.content=t,this.alias=r,this.length=0|(n||"").length,this.greedy=!!o}if(e.Prism=n,o.stringify=function(e,t,r){if("string"==typeof e)return e;if(Array.isArray(e))return e.map(function(r){return o.stringify(r,t,e)}).join("");var i={type:e.type,content:o.stringify(e.content,t,r),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:r};if(e.alias){var a=Array.isArray(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,a)}n.hooks.run("wrap",i);var s=Object.keys(i.attributes).map(function(e){return e+'="'+(i.attributes[e]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+i.tag+' class="'+i.classes.join(" ")+'"'+(s?" "+s:"")+">"+i.content+"</"+i.tag+">"},!e.document)return e.addEventListener?(n.disableWorkerMessageHandler||e.addEventListener("message",function(t){var r=JSON.parse(t.data),o=r.language,i=r.code,a=r.immediateClose;e.postMessage(n.highlight(i,n.languages[o],o)),a&&e.close()},!1),n):n;var i=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return i&&(n.filename=i.src,n.manual||i.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener("DOMContentLoaded",n.highlightAll))),n}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});G.exports&&(G.exports=t),void 0!==e&&(e.Prism=t),t.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s\/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(e,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};o["language-"+r]={pattern:/[\s\S]+/,inside:t.languages[r]};var i={};i[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:o},t.languages.insertBefore("markup","cdata",i)}}),t.languages.xml=t.languages.extend("markup",{}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,function(e){var t=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+?[\s\S]*?(?:;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:RegExp("url\\((?:"+t.source+"|.*?)\\)","i"),selector:RegExp("[^{}\\s](?:[^{};\"']|"+t.source+")*?(?=\\s*\\{)"),string:{pattern:t,greedy:!0},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var r=e.languages.markup;r&&(r.tag.addInlined("style","css"),e.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:r.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:e.languages.css}},alias:"language-css"}},r.tag))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+)n?|\d+n|NaN|Infinity)\b|(?:\b\d+\.?\d*|\B\.\d+)(?:[Ee][+-]?\d+)?/,function:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^\/\\\[\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${[^}]+}|[^\\`])*`/,greedy:!0,inside:{interpolation:{pattern:/\${[^}]+}/,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}}}),t.languages.markup&&t.languages.markup.tag.addInlined("script","javascript"),t.languages.js=t.languages.javascript,"undefined"!=typeof self&&self.Prism&&self.document&&document.querySelector&&(self.Prism.fileHighlight=function(e){e=e||document;var r={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.slice.call(e.querySelectorAll("pre[data-src]")).forEach(function(e){if(!e.hasAttribute("data-src-loaded")){for(var n,o=e.getAttribute("data-src"),i=e,a=/\blang(?:uage)?-([\w-]+)\b/i;i&&!a.test(i.className);)i=i.parentNode;if(i&&(n=(e.className.match(a)||[,""])[1]),!n){var s=(o.match(/\.(\w+)$/)||[,""])[1];n=r[s]||s}var u=document.createElement("code");u.className="language-"+n,e.textContent="",u.textContent="Loading\u2026",e.appendChild(u);var c=new XMLHttpRequest;c.open("GET",o,!0),c.onreadystatechange=function(){4==c.readyState&&(c.status<400&&c.responseText?(u.textContent=c.responseText,t.highlightElement(u),e.setAttribute("data-src-loaded","")):c.status>=400?u.textContent="\u2716 Error "+c.status+" while fetching file: "+c.statusText:u.textContent="\u2716 Error: File does not exist or is empty")},c.send(null)}}),t.plugins.toolbar&&t.plugins.toolbar.registerButton("download-file",function(e){var t=e.element.parentNode;if(t&&/pre/i.test(t.nodeName)&&t.hasAttribute("data-src")&&t.hasAttribute("data-download-link")){var r=t.getAttribute("data-src"),n=document.createElement("a");return n.textContent=t.getAttribute("data-download-link-label")||"Download",n.setAttribute("download",""),n.href=r,n}})},document.addEventListener("DOMContentLoaded",function(){self.Prism.fileHighlight()}))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),G=G.exports;var W={__esModule:!0},X=function(){function e(e,t){if(!e)throw Error("CodeFlask expects a parameter which is Element or a String selector");if(!t)throw Error("CodeFlask expects an object containing options as second parameter");if(e.nodeType)this.editorRoot=e;else{var r=document.querySelector(e);r&&(this.editorRoot=r)}this.opts=t,this.startEditor()}return e.prototype.startEditor=function(){if(!L.injectCss(j.editorCss,null,this.opts.styleParent))throw Error("Failed to inject CodeFlask CSS.");this.createWrapper(),this.createTextarea(),this.createPre(),this.createCode(),this.runOptions(),this.listenTextarea(),this.populateDefault(),this.updateCode(this.code)},e.prototype.createWrapper=function(){this.code=this.editorRoot.innerHTML,this.editorRoot.innerHTML="",this.elWrapper=this.createElement("div",this.editorRoot),this.elWrapper.classList.add("codeflask")},e.prototype.createTextarea=function(){this.elTextarea=this.createElement("textarea",this.elWrapper),this.elTextarea.classList.add("codeflask__textarea","codeflask__flatten")},e.prototype.createPre=function(){this.elPre=this.createElement("pre",this.elWrapper),this.elPre.classList.add("codeflask__pre","codeflask__flatten")},e.prototype.createCode=function(){this.elCode=this.createElement("code",this.elPre),this.elCode.classList.add("codeflask__code","language-"+(this.opts.language||"html"))},e.prototype.createLineNumbers=function(){this.elLineNumbers=this.createElement("div",this.elWrapper),this.elLineNumbers.classList.add("codeflask__lines"),this.setLineNumber()},e.prototype.createElement=function(e,t){var r=document.createElement(e);return t.appendChild(r),r},e.prototype.runOptions=function(){this.opts.rtl=this.opts.rtl||!1,this.opts.tabSize=this.opts.tabSize||2,this.opts.enableAutocorrect=this.opts.enableAutocorrect||!1,this.opts.lineNumbers=this.opts.lineNumbers||!1,this.opts.defaultTheme=!1!==this.opts.defaultTheme,this.opts.areaId=this.opts.areaId||null,this.opts.ariaLabelledby=this.opts.ariaLabelledby||null,this.opts.readonly=this.opts.readonly||null,"boolean"!=typeof this.opts.handleTabs&&(this.opts.handleTabs=!0),"boolean"!=typeof this.opts.handleSelfClosingCharacters&&(this.opts.handleSelfClosingCharacters=!0),"boolean"!=typeof this.opts.handleNewLineIndentation&&(this.opts.handleNewLineIndentation=!0),!0===this.opts.rtl&&(this.elTextarea.setAttribute("dir","rtl"),this.elPre.setAttribute("dir","rtl")),!1===this.opts.enableAutocorrect&&(this.elTextarea.setAttribute("spellcheck","false"),this.elTextarea.setAttribute("autocapitalize","off"),this.elTextarea.setAttribute("autocomplete","off"),this.elTextarea.setAttribute("autocorrect","off")),this.opts.lineNumbers&&(this.elWrapper.classList.add("codeflask--has-line-numbers"),this.createLineNumbers()),this.opts.defaultTheme&&L.injectCss(O.defaultCssTheme,"theme-default",this.opts.styleParent),this.opts.areaId&&this.elTextarea.setAttribute("id",this.opts.areaId),this.opts.ariaLabelledby&&this.elTextarea.setAttribute("aria-labelledby",this.opts.ariaLabelledby),this.opts.readonly&&this.enableReadonlyMode()},e.prototype.updateLineNumbersCount=function(){for(var e="",t=1;t<=this.lineNumber;t++)e=e+'<span class="codeflask__lines__line">'+t+"</span>";this.elLineNumbers.innerHTML=e},e.prototype.listenTextarea=function(){var e=this;this.elTextarea.addEventListener("input",function(t){e.code=t.target.value,e.elCode.innerHTML=D.escapeHtml(t.target.value),e.highlight(),setTimeout(function(){e.runUpdate(),e.setLineNumber()},1)}),this.elTextarea.addEventListener("keydown",function(t){e.handleTabs(t),e.handleSelfClosingCharacters(t),e.handleNewLineIndentation(t)}),this.elTextarea.addEventListener("scroll",function(t){e.elPre.style.transform="translate3d(-"+t.target.scrollLeft+"px, -"+t.target.scrollTop+"px, 0)",e.elLineNumbers&&(e.elLineNumbers.style.transform="translate3d(0, -"+t.target.scrollTop+"px, 0)")})},e.prototype.handleTabs=function(e){if(this.opts.handleTabs){if(9!==e.keyCode)return;e.preventDefault();var t=this.elTextarea,r=t.selectionDirection,n=t.selectionStart,o=t.selectionEnd,i=t.value,a=i.substr(0,n),s=i.substring(n,o),u=i.substring(o),c=" ".repeat(this.opts.tabSize);if(n!==o&&s.length>=c.length){var l=n-a.split("\n").pop().length,f=c.length,d=c.length;e.shiftKey?(i.substr(l,c.length)===c?(f=-f,l>n?(s=s.substring(0,l)+s.substring(l+c.length),d=0):l===n?(f=0,d=0,s=s.substring(c.length)):(d=-d,a=a.substring(0,l)+a.substring(l+c.length))):(f=0,d=0),s=s.replace(new RegExp("\n"+c.split("").join("\\"),"g"),"\n")):(a=a.substr(0,l)+c+a.substring(l,n),s=s.replace(/\n/g,"\n"+c)),t.value=a+s+u,t.selectionStart=n+f,t.selectionEnd=n+s.length+d,t.selectionDirection=r}else t.value=a+c+u,t.selectionStart=n+c.length,t.selectionEnd=n+c.length;var p=t.value;this.updateCode(p),this.elTextarea.selectionEnd=o+this.opts.tabSize}},e.prototype.handleSelfClosingCharacters=function(e){if(this.opts.handleSelfClosingCharacters){var t=e.key;if(["(","[","{","<","'",'"'].includes(t)||[")","]","}",">","'",'"'].includes(t))switch(t){case"(":case")":this.closeCharacter(t);break;case"[":case"]":this.closeCharacter(t);break;case"{":case"}":this.closeCharacter(t);break;case"<":case">":case"'":case'"':this.closeCharacter(t)}}},e.prototype.setLineNumber=function(){this.lineNumber=this.code.split("\n").length,this.opts.lineNumbers&&this.updateLineNumbersCount()},e.prototype.handleNewLineIndentation=function(e){if(this.opts.handleNewLineIndentation&&13===e.keyCode){e.preventDefault();var t=this.elTextarea,r=t.selectionStart,n=t.selectionEnd,o=t.value,i=o.substr(0,r),a=o.substring(n),s=o.lastIndexOf("\n",r-1),u=s+o.slice(s+1).search(/[^ ]|$/),c=u>s?u-s:0,l=i+"\n"+" ".repeat(c)+a;t.value=l,t.selectionStart=r+c+1,t.selectionEnd=r+c+1,this.updateCode(t.value)}},e.prototype.closeCharacter=function(e){var t=this.elTextarea.selectionStart,r=this.elTextarea.selectionEnd;if(this.skipCloseChar(e)){var n=this.code.substr(r,1)===e,o=n?r+1:r;i=!n&&["'",'"'].includes(e)?e:"",s=""+this.code.substring(0,t)+i+this.code.substring(o),this.updateCode(s),this.elTextarea.selectionEnd=++this.elTextarea.selectionStart}else{var i=e;switch(e){case"(":i=String.fromCharCode(e.charCodeAt()+1);break;case"<":case"{":case"[":i=String.fromCharCode(e.charCodeAt()+2)}var a=this.code.substring(t,r),s=""+this.code.substring(0,t)+a+i+this.code.substring(r);this.updateCode(s)}this.elTextarea.selectionEnd=t},e.prototype.skipCloseChar=function(e){var t=this.elTextarea.selectionStart,r=this.elTextarea.selectionEnd,n=Math.abs(r-t)>0;return[")","}","]",">"].includes(e)||["'",'"'].includes(e)&&!n},e.prototype.updateCode=function(e){this.code=e,this.elTextarea.value=e,this.elCode.innerHTML=D.escapeHtml(e),this.highlight(),this.setLineNumber(),setTimeout(this.runUpdate.bind(this),1)},e.prototype.updateLanguage=function(e){var t=this.opts.language;this.elCode.classList.remove("language-"+t),this.elCode.classList.add("language-"+e),this.opts.language=e,this.highlight()},e.prototype.addLanguage=function(e,t){G.languages[e]=t},e.prototype.populateDefault=function(){this.updateCode(this.code)},e.prototype.highlight=function(){G.highlightElement(this.elCode,!1)},e.prototype.onUpdate=function(e){if(e&&"[object Function]"!=={}.toString.call(e))throw Error("CodeFlask expects callback of type Function");this.updateCallBack=e},e.prototype.getCode=function(){return this.code},e.prototype.runUpdate=function(){this.updateCallBack&&this.updateCallBack(this.code)},e.prototype.enableReadonlyMode=function(){this.elTextarea.setAttribute("readonly",!0)},e.prototype.disableReadonlyMode=function(){this.elTextarea.removeAttribute("readonly")},e}();W.default=X;var H={exports:{}};(function(e){!function(t){"object"==typeof H.exports?H.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).localforage=t()}(function(){return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var u=require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){return o(t[a][1][e]||e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var i=require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,r,n){(function(e){"use strict";var t,n,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),t=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var u=new e.MessageChannel;u.port1.onmessage=l,t=function(){u.port2.postMessage(0)}}var c=[];function l(){var e,t;n=!0;for(var r=c.length;r;){for(t=c,c=[],e=-1;++e<r;)t[e]();r=c.length}n=!1}r.exports=function(e){1!==c.push(e)||n||t()}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";var n=e(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==o&&p(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,t,r){n(function(){var n;try{n=t(r)}catch(o){return i.reject(e,o)}n===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,n)})}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function n(t){r||(r=!0,i.reject(e,t))}function o(t){r||(r=!0,i.resolve(e,t))}var a=h(function(){t(o,n)});"error"===a.status&&n(a.value)}function h(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(o);return this.state!==u?f(r,this.state===s?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},i.resolve=function(e,t){var r=h(d,t);if("error"===r.status)return i.reject(e,r.value);var n=r.value;if(n)p(e,n);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},c.reject=function(e){var t=new this(o);return i.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,u=-1,c=new this(o);++u<r;)l(e[u],u);return c;function l(e,o){t.resolve(e).then(function(e){a[o]=e,++s!==r||n||(n=!0,i.resolve(c,a))},function(e){n||(n=!0,i.reject(c,e))})}},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var n,a=-1,s=new this(o);++a<t;)n=e[a],this.resolve(n).then(function(e){r||(r=!0,i.resolve(s,e))},function(e){r||(r=!0,i.reject(s,e))});return s}},{1:1}],3:[function(t,r,n){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function s(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function u(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function c(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",d=void 0,p={},h=Object.prototype.toString,y="readwrite";function m(e){var t=p[e.name],r={};r.promise=new a(function(e,t){r.resolve=e,r.reject=t}),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then(function(){return r.promise}):t.dbReady=r.promise}function v(e){var t=p[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function g(e,t){var r=p[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function b(e,t){return new a(function(r,n){if(p[e.name]=p[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);m(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var a=o.open.apply(o,i);t&&(a.onupgradeneeded=function(t){var r=a.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(f)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),n(a.error)},a.onsuccess=function(){r(a.result),v(e)}})}function _(e){return b(e,!1)}function E(e){return b(e,!0)}function w(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||r){if(r){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function x(e){return i([function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}(atob(e.data))],{type:e.type})}function A(e){return e&&e.__local_forage_encoded_blob}function T(e){var t=this,r=t._initReady().then(function(){var e=p[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return u(r,e,e),r}function S(e,t,r,n){void 0===n&&(n=1);try{var o=e.db.transaction(e.storeName,t);r(null,o)}catch(i){if(n>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return a.resolve().then(function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),E(e)}).then(function(){return function(e){m(e);for(var t=p[e.name],r=t.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,_(e).then(function(t){return e.db=t,w(e)?E(e):t}).then(function(n){e.db=t.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n}).catch(function(t){throw g(e,t),t})}(e).then(function(){S(e,t,r,n-1)})}).catch(r);r(i)}}var F={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var o=p[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},p[r.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=T);var i=[];function s(){return a.resolve()}for(var u=0;u<o.forages.length;u++){var c=o.forages[u];c!==t&&i.push(c._initReady().catch(s))}var l=o.forages.slice(0);return a.all(i).then(function(){return r.db=o.db,_(r)}).then(function(e){return r.db=e,w(r,t._defaultConfig.version)?E(r):e}).then(function(e){r.db=o.db=e,t._dbInfo=r;for(var n=0;n<l.length;n++){var i=l[n];i!==t&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}})},_support:function(){try{if(!o)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(r){return!1}}(),iterate:function(e,t){var r=this,n=new a(function(t,n){r.ready().then(function(){S(r._dbInfo,"readonly",function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var r=a.result;if(r){var n=r.value;A(n)&&(n=x(n));var o=e(n,r.key,s++);void 0!==o?t(o):r.continue()}else t()},a.onerror=function(){n(a.error)}}catch(u){n(u)}})}).catch(n)});return s(n,t),n},getItem:function(e,t){var r=this;e=c(e);var n=new a(function(t,n){r.ready().then(function(){S(r._dbInfo,"readonly",function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),A(e)&&(e=x(e)),t(e)},a.onerror=function(){n(a.error)}}catch(s){n(s)}})}).catch(n)});return s(n,t),n},setItem:function(e,t,r){var n=this;e=c(e);var o=new a(function(r,o){var s;n.ready().then(function(){return s=n._dbInfo,"[object Blob]"===h.call(t)?(e=s.db,"boolean"==typeof d?a.resolve(d):function(e){return new a(function(t){var r=e.transaction(f,y),n=i([""]);r.objectStore(f).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}(e).then(function(e){return d=e})).then(function(e){return e?t:(r=t,new a(function(e,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){var n=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:r.type})},n.readAsBinaryString(r)}));var r}):t;var e}).then(function(t){S(n._dbInfo,y,function(i,a){if(i)return o(i);try{var s=a.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var u=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),r(t)},a.onabort=a.onerror=function(){var e=u.error?u.error:u.transaction.error;o(e)}}catch(c){o(c)}})}).catch(o)});return s(o,r),o},removeItem:function(e,t){var r=this;e=c(e);var n=new a(function(t,n){r.ready().then(function(){S(r._dbInfo,y,function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){n(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(s){n(s)}})}).catch(n)});return s(n,t),n},clear:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){S(t._dbInfo,y,function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(a){r(a)}})}).catch(r)});return s(r,e),r},length:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){S(t._dbInfo,"readonly",function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){r(i.error)}}catch(a){r(a)}})}).catch(r)});return s(r,e),r},key:function(e,t){var r=this,n=new a(function(t,n){e<0?t(null):r.ready().then(function(){S(r._dbInfo,"readonly",function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName),s=!1,u=a.openCursor();u.onsuccess=function(){var r=u.result;r?0===e?t(r.key):s?t(r.key):(s=!0,r.advance(e)):t(null)},u.onerror=function(){n(u.error)}}catch(c){n(c)}})}).catch(n)});return s(n,t),n},keys:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){S(t._dbInfo,"readonly",function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).openCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){r(i.error)}}catch(s){r(s)}})}).catch(r)});return s(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r,n=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName),e.name){var i=e.name===n.name&&this._dbInfo.db?a.resolve(this._dbInfo.db):_(e).then(function(t){var r=p[e.name],n=r.forages;r.db=t;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=t;return t});r=e.storeName?i.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;m(e);var n=p[e.name],i=n.forages;t.close();for(var s=0;s<i.length;s++){var u=i[s];u._dbInfo.db=null,u._dbInfo.version=r}return new a(function(t,n){var i=o.open(e.name,r);i.onerror=function(e){i.result.close(),n(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e,v(r._dbInfo)}}).catch(function(t){throw(g(e,t)||a.resolve()).catch(function(){}),t})}}):i.then(function(t){m(e);var r=p[e.name],n=r.forages;t.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;return new a(function(t,r){var n=o.deleteDatabase(e.name);n.onerror=n.onblocked=function(e){var t=n.result;t&&t.close(),r(e)},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<n.length;t++)v(n[t]._dbInfo)}).catch(function(t){throw(g(e,t)||a.resolve()).catch(function(){}),t})})}else r=a.reject("Invalid arguments");return s(r,t),r}},R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=/^~~local_forage_type~([^~]+)~/,C="__lfsc__:".length,P=C+"arbf".length,k=Object.prototype.toString;function O(e){var t,r,n,o,i,a=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),l=new Uint8Array(c);for(t=0;t<s;t+=4)r=R.indexOf(e[t]),n=R.indexOf(e[t+1]),o=R.indexOf(e[t+2]),i=R.indexOf(e[t+3]),l[u++]=r<<2|n>>4,l[u++]=(15&n)<<4|o>>2,l[u++]=(3&o)<<6|63&i;return c}function B(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=R[r[t]>>2],n+=R[(3&r[t])<<4|r[t+1]>>4],n+=R[(15&r[t+1])<<2|r[t+2]>>6],n+=R[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var U={serialize:function(e,t){var r="";if(e&&(r=k.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===k.call(e.buffer))){var n,o="__lfsc__:";e instanceof ArrayBuffer?(n=e,o+="arbf"):(n=e.buffer,"[object Int8Array]"===r?o+="si08":"[object Uint8Array]"===r?o+="ui08":"[object Uint8ClampedArray]"===r?o+="uic8":"[object Int16Array]"===r?o+="si16":"[object Uint16Array]"===r?o+="ur16":"[object Int32Array]"===r?o+="si32":"[object Uint32Array]"===r?o+="ui32":"[object Float32Array]"===r?o+="fl32":"[object Float64Array]"===r?o+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(o+B(n))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r="~~local_forage_type~"+e.type+"~"+B(this.result);t("__lfsc__:blob"+r)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(a){console.error("Couldn't convert value into a JSON string: ",e),t(null,a)}},deserialize:function(e){if("__lfsc__:"!==e.substring(0,C))return JSON.parse(e);var t,r=e.substring(P),n=e.substring(C,P);if("blob"===n&&I.test(r)){var o=r.match(I);t=o[1],r=r.substring(o[0].length)}var a=O(r);switch(n){case"arbf":return a;case"blob":return i([a],{type:t});case"si08":return new Int8Array(a);case"ui08":return new Uint8Array(a);case"uic8":return new Uint8ClampedArray(a);case"si16":return new Int16Array(a);case"ur16":return new Uint16Array(a);case"si32":return new Int32Array(a);case"ui32":return new Uint32Array(a);case"fl32":return new Float32Array(a);case"fl64":return new Float64Array(a);default:throw new Error("Unkown type: "+n)}},stringToBuffer:O,bufferToString:B};function j(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function N(e,t,r,n,o,i){e.executeSql(r,n,o,function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(e,s){s.rows.length?i(e,a):j(e,t,function(){e.executeSql(r,n,o,i)},i)},i):i(e,a)},i)}var M={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new a(function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(o){return n(o)}r.db.transaction(function(o){j(o,r,function(){t._dbInfo=r,e()},function(e,t){n(t)})},n)});return r.serializer=U,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var r=this,n=new a(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){N(r,o,"SELECT * FROM "+o.storeName,[],function(r,n){for(var i=n.rows,a=i.length,s=0;s<a;s++){var u=i.item(s),c=u.value;if(c&&(c=o.serializer.deserialize(c)),void 0!==(c=e(c,u.key,s+1)))return void t(c)}t()},function(e,t){n(t)})})}).catch(n)});return s(n,t),n},getItem:function(e,t){var r=this;e=c(e);var n=new a(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){N(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),t(n)},function(e,t){n(t)})})}).catch(n)});return s(n,t),n},setItem:function(e,t,r){return function e(t,r,n,o){var i=this;t=c(t);var u=new a(function(a,s){i.ready().then(function(){void 0===r&&(r=null);var u=r,c=i._dbInfo;c.serializer.serialize(r,function(r,l){l?s(l):c.db.transaction(function(e){N(e,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[t,r],function(){a(u)},function(e,t){s(t)})},function(r){if(r.code===r.QUOTA_ERR){if(o>0)return void a(e.apply(i,[t,u,n,o-1]));s(r)}})})}).catch(s)});return s(u,n),u}.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this;e=c(e);var n=new a(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){N(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){n(t)})})}).catch(n)});return s(n,t),n},clear:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){N(t,n,"DELETE FROM "+n.storeName,[],function(){e()},function(e,t){r(t)})})}).catch(r)});return s(r,e),r},length:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){N(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(t,r){var n=r.rows.item(0).c;e(n)},function(e,t){r(t)})})}).catch(r)});return s(r,e),r},key:function(e,t){var r=this,n=new a(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){N(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)},function(e,t){n(t)})})}).catch(n)});return s(n,t),n},keys:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){N(t,n,"SELECT key FROM "+n.storeName,[],function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)},function(e,t){r(t)})})}).catch(r)});return s(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;return s(n=e.name?new a(function(t){var n;n=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(function(e){return new a(function(t,r){e.transaction(function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(r,n){for(var o=[],i=0;i<n.rows.length;i++)o.push(n.rows.item(i).name);t({db:e,storeNames:o})},function(e,t){r(t)})},function(e){r(e)})})}(n))}).then(function(e){return new a(function(t,r){e.db.transaction(function(n){function o(e){return new a(function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){r(t)})})}for(var i=[],s=0,u=e.storeNames.length;s<u;s++)i.push(o(e.storeNames[s]));a.all(i).then(function(){t()}).catch(function(e){r(e)})},function(e){r(e)})})}):a.reject("Invalid arguments"),t),n}};function L(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}var D={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=L(e,this._defaultConfig),!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0?(this._dbInfo=t,t.serializer=U,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=r.ready().then(function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,i=localStorage.length,a=1,s=0;s<i;s++){var u=localStorage.key(s);if(0===u.indexOf(n)){var c=localStorage.getItem(u);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,u.substring(o),a++)))return c}}});return s(n,t),n},getItem:function(e,t){var r=this;e=c(e);var n=r.ready().then(function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n});return s(n,t),n},setItem:function(e,t,r){var n=this;e=c(e);var o=n.ready().then(function(){void 0===t&&(t=null);var r=t;return new a(function(o,i){var a=n._dbInfo;a.serializer.serialize(t,function(t,n){if(n)i(n);else try{localStorage.setItem(a.keyPrefix+e,t),o(r)}catch(s){"QuotaExceededError"!==s.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==s.name||i(s),i(s)}})})});return s(o,r),o},removeItem:function(e,t){var r=this;e=c(e);var n=r.ready().then(function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return s(n,t),n},clear:function(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}});return s(r,e),r},length:function(e){var t=this.keys().then(function(e){return e.length});return s(t,e),t},key:function(e,t){var r=this,n=r.ready().then(function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(o){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t});return s(n,t),n},keys:function(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&n.push(i.substring(e.keyPrefix.length))}return n});return s(r,e),r},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,o=this;return s(n=e.name?new a(function(t){e.storeName?t(L(e,o._defaultConfig)):t(e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}}):a.reject("Invalid arguments"),t),n}},z=function(e,t){for(var r,n,o=e.length,i=0;i<o;){if((r=e[i])===(n=t)||"number"==typeof r&&"number"==typeof n&&isNaN(r)&&isNaN(n))return!0;i++}return!1},G=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},W={},X={},H={INDEXEDDB:F,WEBSQL:M,LOCALSTORAGE:D},K=[H.INDEXEDDB._driver,H.WEBSQL._driver,H.LOCALSTORAGE._driver],V=["dropInstance"],Y=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(V),q={description:"",driver:K.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function $(e,t){e[t]=function(){var r=arguments;return e.ready().then(function(){return e[t].apply(e,r)})}}function J(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(G(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var Z=new(function(){function e(t){for(var r in function(t,r){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),H)if(H.hasOwnProperty(r)){var n=H[r],o=n._driver;this[r]=o,W[o]||this.defineDriver(n)}this._defaultConfig=J({},q),this._config=J({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new a(function(t,r){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(o);for(var i=Y.concat("_initStorage"),u=0,c=i.length;u<c;u++){var l=i[u];if((!z(V,l)||e[l])&&"function"!=typeof e[l])return void r(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=a.reject(t);return s(r,arguments[arguments.length-1]),r}},r=0,n=V.length;r<n;r++){var o=V[r];e[o]||(e[o]=t(o))}}();var f=function(r){W[n]&&console.info("Redefining LocalForage driver: "+n),W[n]=e,X[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,r):f(!!e._support):f(!0)}catch(d){r(d)}});return u(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=W[e]?a.resolve(W[e]):a.reject(new Error("Driver not found."));return u(n,t,r),n},e.prototype.getSerializer=function(e){var t=a.resolve(U);return u(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return u(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;G(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){n._config.driver=n.driver()}function s(e){return n._extend(e),i(),n._ready=n._initStorage(n._config),n._ready}var c=null!==this._driverSet?this._driverSet.catch(function(){return a.resolve()}):a.resolve();return this._driverSet=c.then(function(){var e=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then(function(e){n._driver=e._driver,i(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){var t=0;return function r(){for(;t<e.length;){var o=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(s).catch(r)}i();var u=new Error("No available storage method found.");return n._driverSet=a.reject(u),n._driverSet}()}}(o)})}).catch(function(){i();var e=new Error("No available storage method found.");return n._driverSet=a.reject(e),n._driverSet}),u(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!X[e]},e.prototype._extend=function(e){J(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=Y.length;e<t;e++)$(this,Y[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=Z},{3:3}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),H=H.exports;var K=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(a,s)}u((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Y=P,q=console.log;console.error,(0,console.clear)();var $=function(){function e(e){var t=this;this.loop=function(e){e/=1e3,t.frame_count>0&&t.callback_arr.forEach(function(t){return t(e)}),(t.max_frame<0||t.frame_count<t.max_frame)&&(t.frame_count+=1,t.prev_time=e,requestAnimationFrame(t.loop))},this.callback_arr=[],this.frame_count=0,this.max_frame=-1,this.prev_time=0,"number"==typeof e&&e>=0&&(this.max_frame=e)}return e.prototype.start=function(){return requestAnimationFrame(this.loop),this},e.prototype.add=function(e){return this.callback_arr.push(e),this},e}(),J=function(){function e(e,t){e instanceof HTMLElement?this.element=e:this.element=document.createElement(e,t)}return e.prototype.style=function(e){return this.element.className=Y.style(e),this},e.prototype.child=function(t){return t instanceof e?this.element.appendChild(t.element):this.element.appendChild(t),this},e}(),Z=function(e,t){this.x=0,this.y=0,this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0},Q=function(e,t,r,n,o,i){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this.a="number"==typeof e?e:1,this.b="number"==typeof t?t:0,this.c="number"==typeof r?r:0,this.d="number"==typeof n?n:1,this.e="number"==typeof o?o:0,this.f="number"==typeof i?i:0},ee=function(e,t,r,n){for(var o in e.save(),n)"fill"!==o&&(e[o]=n[o]);var i=r.a,a=r.b,s=r.c,u=r.d,c=r.e,l=r.f;e.transform(i,a,s,u,c,l),e.beginPath(),t.length>0&&(e.moveTo(t[0].x,t[0].y),t.forEach(function(t){e.lineTo(t.x,t.y)}),e.lineTo(t[0].x,t[0].y)),e.stroke(),n&&!0===n.fill&&e.fill(),e.restore()},te=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t,r){return r%2==0?e.push(new Z(t,0)):e[e.length-1].y=t,e},new Array)};K(this,void 0,void 0,function(){var e,t,r,n,o,i,a,s,u,c,l,f,d,p,h,y=this;return V(this,function(m){switch(m.label){case 0:return e=new J("canvas").style({width:400,height:400,display:"block"}).element,t=e.getContext("2d"),e.getContext("webgl2"),r=new $(1),n=new J("div").style({width:400,height:400}).element,new J(document.body).style({overflow:"hidden",display:"flex",flexWrap:"wrap"}).child(e).child(n),o=new W.default(n,{language:"js"}),i="// Code Editor, use Ctrl+S to run code\nconst define = api => application.setInterface({ define:() => api });\n\n// User code start here\ndefine({a:()=>{}})",a="code",[4,H.getItem(a)];case 1:return s=m.sent(),o.updateCode(s||i),u=function(e){return K(y,void 0,void 0,function(){return V(this,function(t){return e&&H.setItem(a,e),[2]})})},document.addEventListener("keydown",function(e){("Enter"===e.key&&!0===e.altKey||"r"===e.key&&!0===e.altKey||"s"===e.key&&!0===e.ctrlKey||"Alt"===e.key)&&e.preventDefault()}),document.addEventListener("keyup",function(e){if("Enter"===e.key&&!0===e.altKey||"r"===e.key&&!0===e.altKey||"s"===e.key&&!0===e.ctrlKey){var t=o.getCode();u(t),p(t)}}),c=function(e,t){return void 0===t&&(t={}),new g.DynamicPlugin(e,t)},d=(l=function(e,t,r){void 0===r&&(r={});var n=c(e,r);return n.whenConnected(function(){return t(n)}),n})(i,f=function(e){var t=e.remote;q(t.define())}),p=function(e){d&&d.disconnect(),d=l(e,f)},r.start(),Math.sin,Math.cos,h=function(r){var n=window.devicePixelRatio||1;e.width=e.clientWidth*n,e.height=e.clientHeight*n,t.save(),t.clearRect(0,0,e.width,e.height),t.translate(e.width/2,e.height/2);var o={strokeStyle:"red",fillStyle:"none",lineWidth:8,lineCap:"round",lineJoin:"round"};ee(t,te(-100,50,200,0,0,200),new Q(1,0,0,-1,100,-100),o),ee(t,te(-100,50,200,0,0,200),new Q(1,0,0,-1,0,0),o),ee(t,te(0,0,0,0,0,0),new Q(1,0,0,-1),{strokeStyle:"black",lineWidth:8,lineCap:"round",lineJoin:"round"})},r.add(h),[2]}})})}();