{"version":3,"sources":["bundle.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","__esModule","editor_1","injector_1","theme_default_1","html_escape_1","Prism","CodeFlask","prototype","startEditor","injectCss","editorCss","this","opts","styleParent","createWrapper","createTextarea","createPre","createCode","runOptions","listenTextarea","populateDefault","updateCode","editorRoot","innerHTML","elWrapper","createElement","classList","add","elTextarea","elPre","elCode","language","createLineNumbers","elLineNumbers","setLineNumber","elementTag","whereToAppend","element","document","appendChild","rtl","tabSize","enableAutocorrect","lineNumbers","defaultTheme","areaId","ariaLabelledby","readonly","handleTabs","handleSelfClosingCharacters","handleNewLineIndentation","setAttribute","defaultCssTheme","enableReadonlyMode","updateLineNumbersCount","numberList","lineNumber","_this","addEventListener","target","value","escapeHtml","highlight","setTimeout","runUpdate","style","transform","scrollLeft","scrollTop","keyCode","preventDefault","input","selectionDir","selectionDirection","selStartPos","selectionStart","selEndPos","selectionEnd","inputVal","beforeSelection","substr","selectionVal","substring","afterSelection","indent","repeat","currentLineStart","split","pop","startIndentLen","endIndentLen","shiftKey","replace","RegExp","join","newCode","key","includes","closeCharacter","lineStart","lastIndexOf","spaceLast","slice","search","char","skipCloseChar","skipChar","newSelectionEnd","closeChar","String","fromCharCode","charCodeAt","selectionText","hasSelection","Math","abs","bind","updateLanguage","newLanguage","oldLanguage","remove","addLanguage","name","options","languages","highlightElement","onUpdate","callback","toString","updateCallBack","getCode","disableReadonlyMode","removeAttribute","selectorOrElement","nodeType","querySelector","./styles/editor","./styles/injector","./styles/theme-default","./utils/html-escape","prismjs","2","FONT_FAMILY","COLOR","cssSupports","BACKGROUND_COLOR","LINE_NUMBER_WIDTH","FONT_SIZE","LINE_HEIGHT","../utils/css-supports","./theme-default","3","css","styleName","parent","CSS_ID","PARENT","head","getElementById","id","4","5","toCamelCase","cssProperty","filter","word","map","toUpperCase","toLowerCase","property","CSS","supports","body","6","entityMap","&","<",">","\"","'","/","`","=","string","s","7","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","apply","__generator","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","push","tagName","append","newChild","load_text","names","_a","all","fetch","res","text","rand","min","max","undefined","random","twgl_js_1","typestyle_1","codeflask_1","localforage_1","xterm_1","fit","log","console","error","clear","instance_demo","gl","vs","fs","program_info","createProgramInfo","inst_wto_mat4_arr","Float32Array","num_instances","inst_color_arr","Array","mat","buffer","m4","translation","rotateZ","PI","rotateX","quad_verts","primitives","createPlaneVertices","Object","assign","instanceWorld","numComponents","data","divisor","instanceColor","buffer_info","createBufferInfoFromArrays","vertex_array_info","createVertexArrayInfo","time","ratio","window","devicePixelRatio","canvas","width","clientWidth","height","clientHeight","viewport","enable","DEPTH_TEST","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","fov","aspect","projection","perspective","speed","eye","sin","cos","camera","lookAt","view","inverse","uniforms","u_lightWorldPos","u_lightColor","u_ambient","u_specular","u_shininess","u_specularFactor","u_viewProjection","multiply","u_viewInverse","useProgram","program","setBuffersAndAttributes","setUniforms","drawBufferInfo","TRIANGLES","numElements","RenderLoop","start","requestAnimationFrame","loop","callback_arr","max_frame","frame_count","forEach","err","prev_time","Element","className","child","content","textContent","HTMLElement","Vec2","x","MatrixRP2","b","d","m1","m2","scale","sx","sy","rotate","angle","translate","tx","ty","shear","shx","shy","multimatrix","matrices","_i","arguments","reduce","drawPath","context","path","save","beginPath","moveTo","lineTo","stroke","fill","restore","vec2Array","array","bullet_editor","crc","render_loop","atan2","toward_speed_vector","game","div_editor","div_canvas","div_setting","code_1","csk_1","saved_code","runCode_1","reload_code_button","load_code_button","clear_bullet_button","saveCode_1","bullets","drawEditor","getContext","period","end","floor","pos","prev_pos","dpv","sv","paddingLeft","overflow","display","flexWrap","getItem","game_setting","eval","setItem","altKey","ctrlKey","code_2","Date","toLocaleTimeString","clearRect","grid_style_1","strokeStyle","lineWidth","ceil","interval_1","sw_1","sh_1","ew_1","eh_1","grid_row","lineCap","t_1","pt_1","radius","matrix","t_2","l","bullet_style_1","spawn","isArray","w","h","out_of_bound","size","drawBullet_1","Terminal","applyAddon","term","allowTransparency","theme","background","div_terminal","position","left","right","top","bottom","div_fullscreen","open","on","charAt","write","hello_word","event","hidden","./editor/codeflask","localforage","twgl.js","typestyle","xterm","xterm/lib/addons/fit/fit","8","process","extendStatics","__extends","setPrototypeOf","__proto__","hasOwnProperty","__","constructor","create","defineProperty","uniqueId","IS_UNIQUE","upperCasePattern","msPattern","interpolatePattern","escapePattern","propLower","m","CSS_NUMBER","animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","columns","counter-increment","counter-reset","flex","flex-grow","flex-positive","flex-shrink","flex-negative","flex-order","font-weight","grid-area","grid-column","grid-column-end","grid-column-span","grid-column-start","grid-row","grid-row-end","grid-row-span","grid-row-start","line-clamp","line-height","opacity","order","orphans","tab-size","widows","z-index","zoom","fill-opacity","flood-opacity","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","keys","_b","_c","hyphenate","propertyName","stringHash","str","len","styleToString","sortTuples","sort","parseStyles","styles","hasNestedStyles","properties","nestedStyles","isUnique","trim","stringifyProperties","nested","interpolate","selector","indexOf","stylize","rulesList","stylesList","pid","rules","nested_1","nested_2","_d","composeStylize","cache","isStyle","stylesList_1","item","Style","Selector","rulesList_1","Rule","arr","escape","noopChanges","change","Cache","count","_counters","_children","clone","_keys","sheet","getStyles","changeId","changes","curIndex","prevItemChangeId","merge","splice","index","prevChangeId","unmerge","values","_super","rule","FreeStyle","registerStyle","displayName","hash","debug","registerKeyframes","keyframes","registerHashRule","prefix","registerRule","registerCss","env","NODE_ENV","_process","9","global","define","amd","self","_dereq_","scheduleDrain","draining","Mutation","MutationObserver","WebKitMutationObserver","called","observer","nextTick","createTextNode","observe","characterData","setImmediate","MessageChannel","scriptEl","onreadystatechange","parentNode","removeChild","documentElement","channel","port1","onmessage","port2","postMessage","queue","oldQueue","task","immediate","INTERNAL","handlers","REJECTED","FULFILLED","PENDING","resolver","state","outcome","safelyResolveThenable","QueueItem","promise","onFulfilled","onRejected","callFulfilled","otherCallFulfilled","callRejected","otherCallRejected","unwrap","func","returnValue","getThen","obj","thenable","onError","onSuccess","tryCatch","status","out","reason","iterable","resolved","allResolver","outValue","race","response","_typeof","idb","indexedDB","webkitIndexedDB","mozIndexedDB","OIndexedDB","msIndexedDB","getIDB","createBlob","parts","Blob","builder","BlobBuilder","MSBlobBuilder","MozBlobBuilder","WebKitBlobBuilder","getBlob","type","Promise$1","executeCallback","executeTwoCallbacks","errorCallback","normalizeKey","warn","getCallback","DETECT_BLOB_SUPPORT_STORE","supportsBlobs","dbContexts","READ_ONLY","READ_WRITE","_checkBlobSupport","txn","transaction","blob","objectStore","put","onabort","stopPropagation","oncomplete","matchedChrome","navigator","userAgent","match","matchedEdge","parseInt","_checkBlobSupportWithoutCaching","_deferReadiness","dbInfo","dbContext","deferredOperation","deferredOperations","dbReady","_advanceReadiness","_rejectReadiness","_getConnection","upgradeNeeded","forages","db","close","dbArgs","version","openreq","onupgradeneeded","createObjectStore","storeName","oldVersion","ex","newVersion","onerror","onsuccess","_getOriginalConnection","_getUpgradedConnection","_isUpgradeNeeded","defaultVersion","isNewStore","objectStoreNames","contains","isDowngrade","isUpgrade","incVersion","_decodeBlob","encodedBlob","bin","buf","ArrayBuffer","Uint8Array","_binStringToArrayBuffer","atob","_isEncodedBlob","__local_forage_encoded_blob","_fullyReady","_initReady","_dbInfo","createTransaction","mode","retries","forage","_tryReconnect","asyncStorage","_driver","_initStorage","ready","initPromises","ignoreErrors","j","_defaultConfig","k","_support","isSafari","openDatabase","test","platform","hasFetch","IDBKeyRange","isIndexedDBValid","iterate","req","openCursor","iterationNumber","cursor","get","blobSupport","reader","FileReader","onloadend","base64","btoa","readAsBinaryString","_encodeBlob","store","removeItem","advanced","advance","dropInstance","currentConfig","config","dbPromise","deleteObjectStore","_forage2","deleteDatabase","onblocked","BASE_CHARS","BLOB_TYPE_PREFIX_REGEX","SERIALIZED_MARKER","SERIALIZED_MARKER_LENGTH","TYPE_ARRAYBUFFER","TYPE_BLOB","TYPE_SERIALIZED_MARKER_LENGTH","toString$1","stringToBuffer","serializedString","encoded1","encoded2","encoded3","encoded4","bufferLength","bytes","bufferToString","base64String","localforageSerializer","serialize","valueType","marker","fileReader","onload","readAsArrayBuffer","JSON","stringify","deserialize","parse","blobType","matcher","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float64Array","createDbTable","executeSql","tryExecuteSql","sqlStatement","args","SYNTAX_ERR","results","rows","webSQLStorage","dbInfoPromise","description","serializer","_setItem","retriesLeft","originalValue","sqlError","QUOTA_ERR","storeNames","getAllStoreNames","operationInfo","dropTable","operations","_getKeyPrefix","defaultConfig","keyPrefix","_isLocalStorageUsable","localStorageTestKey","localStorage","checkIfLocalStorageThrows","searchElement","isNaN","localStorageWrapper","isLocalStorageValid","keyPrefixLength","itemKey","arg","DefinedDrivers","DriverSupport","DefaultDrivers","INDEXEDDB","WEBSQL","LOCALSTORAGE","DefaultDriverOrder","OptionalDriverMethods","LibraryMethods","concat","DefaultConfig","driver","callWhenReady","localForageInstance","libraryMethod","_args","extend","_key","LocalForage","driverTypeKey","instance","Constructor","_classCallCheck","driverName","defineDriver","_config","_driverSet","_initDriver","_ready","_wrapLibraryMethodsWithReady","setDriver","localforage_js","driverObject","complianceError","driverMethods","driverMethodName","methodNotImplementedFactory","methodName","_len","optionalDriverMethod","configureMissingMethods","setDriverSupport","support","info","getDriver","getDriverPromise","getSerializer","serializerPromise","drivers","supportedDrivers","_getSupportedDrivers","setDriverToConfig","extendSelfWithDriver","_extend","oldDriverSetDone","currentDriverIndex","driverPromiseLoop","initDriver","libraryMethodsAndProperties","createInstance","10","_self","lang","manual","disableWorkerMessageHandler","util","encode","tokens","Token","alias","objId","deepClone","visited","redef","insertBefore","inside","before","insert","root","grammar","ret","token","newToken","old","DFS","propertyType","plugins","highlightAll","async","highlightAllUnder","container","hooks","run","elements","querySelectorAll","nodeName","insertHighlightedCode","highlightedCode","Worker","worker","filename","evt","immediateClose","tokenize","matchGrammar","strarr","startPos","oneshot","patterns","pattern","lookbehind","greedy","lookbehindLength","flags","source","lastIndex","exec","from","to","delNum","after","wrapped","rest","callbacks","matchedStr","tag","classes","attributes","aliases","message","script","currentScript","getElementsByTagName","src","hasAttribute","readyState","WorkerGlobalScope","markup","comment","prolog","doctype","cdata","punctuation","namespace","attr-value","attr-name","entity","includedCdataInside","included-cdata","def","xml","html","mathml","svg","atrule","url","important","function","addInlined","style-attr","clike","class-name","keyword","boolean","number","operator","javascript","regex","function-variable","parameter","constant","template-string","interpolation","interpolation-punctuation","js","fileHighlight","Extensions","py","rb","ps1","psm1","sh","bat","tex","pre","getAttribute","extension","xhr","XMLHttpRequest","responseText","statusText","send","toolbar","registerButton","href","11","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","runClearTimeout","Item","noop","title","browser","argv","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","12","factory","installedModules","__webpack_require__","modules","./src/attributes.js","createAttribsFromArrays","createBuffersFromArrays","arrays","buffers","createBufferFromArray","indices","elementType","typedArrays","getGLTypeForTypedArray","makeTypedArray","ii","positionKeys","getArray","getNumComponents","getNumElementsFromNonIndexedArrays","createBufferFromTypedArray","srcBufferInfo","newAttribs","bufferInfo","attribs","newIndices","ELEMENT_ARRAY_BUFFER","defaults","attribPrefix","attrib","bindBuffer","ARRAY_BUFFER","numBytes","getBufferParameter","BUFFER_SIZE","bytesPerValue","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","FLOAT","getBytesPerValueForGLType","totalElements","getNumElementsFromAttributes","setAttribInfoBufferFromArray","attribInfo","offset","bufferSubData","setBufferFromTypedArray","drawType","setAttributePrefix","setAttributeDefaults_","newDefaults","helper","copyExistingProperties","getNumComponents_","getArray_","_interopRequireWildcard","newObj","desc","getOwnPropertyDescriptor","set","default","bufferData","STATIC_DRAW","typedArray","isBuffer","createBuffer","isIndices","texcoordRE","colorRE","guessNumComponentsFromName","arrayName","isArrayBuffer","Type","attribName","normalization","WebGLBuffer","normalize","numValues","arrayType","BYTES_PER_ELEMENT","getGLTypeForTypedArrayType","typedArrayType","getNormalizationForTypedArrayType","getNormalizationForTypedArray","stride","./src/draw.js","drawObjectList","objectsToDraw","lastUsedProgramInfo","lastUsedBufferInfo","object","active","programInfo","vertexArrayInfo","bindBuffers","vertexArrayObject","bindVertexArray","programs","instanceCount","drawElementsInstanced","drawElements","drawArraysInstanced","drawArrays","./src/framebuffers.js","bindFramebufferInfo","framebufferInfo","FRAMEBUFFER","bindFramebuffer","framebuffer","drawingBufferWidth","drawingBufferHeight","createFramebufferInfo","attachments","fb","createFramebuffer","colorAttachmentCount","defaultAttachments","attachmentOptions","attachment","format","attachmentPoint","attachmentsByFormat","getAttachmentPointForFormat","COLOR_ATTACHMENT0","renderbufferFormats","isRenderbufferFormat","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","textureOptions","auto","minMag","LINEAR","mag","wrapS","wrap","CLAMP_TO_EDGE","wrapT","textures","createTexture","isRenderbuffer","framebufferRenderbuffer","isTexture","framebufferTexture2D","texTarget","TEXTURE_2D","level","resizeFramebufferInfo","ndx","resizeTexture","./src/helper.js","dst","copyNamedProperties","WebGLRenderbuffer","isShader","WebGLShader","WebGLTexture","isSampler","WebGLSampler","./src/m4.js","axisRotate","axis","angleInRadians","MatType","z","sqrt","xx","yy","zz","oneMinusCosine","r00","r01","r02","r10","r11","r12","r20","r21","r22","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","axisRotation","copy","frustum","near","far","dx","dy","dz","getAxis","v3","getTranslation","identity","up","xAxis","tempV3a","yAxis","tempV3b","zAxis","tempV3c","subtract","cross","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b10","b11","b12","b13","b20","b21","b22","b23","b30","b31","b32","b33","negate","ortho","fieldOfViewYInRadians","zNear","zFar","tan","rangeInv","rotateY","rotationX","rotationY","rotationZ","v0","v1","v2","scaling","setAxis","setDefaultType","ctor","oldType","setTranslation","transformDirection","transformNormal","mi","transformPoint","m30","m31","m32","m33","transpose","tmp_0","tmp_1","tmp_2","tmp_3","tmp_4","tmp_5","tmp_6","tmp_7","tmp_8","tmp_9","tmp_10","tmp_11","tmp_12","tmp_13","tmp_14","tmp_15","tmp_16","tmp_17","tmp_18","tmp_19","tmp_20","tmp_21","tmp_22","tmp_23","t0","t1","t2","t3","./src/primitives.js","create3DFVertices","createAugmentedTypedArray","createCubeVertices","createSphereVertices","createTruncatedConeVertices","createXYQuadVertices","createCresentVertices","createCylinderVertices","createTorusVertices","createDiscVertices","deindexVertices","vertices","newVertices","allButIndices","srcBuffer","dstBuffer","jj","flattenNormals","normals","normal","numNormals","nax","nay","naz","nbx","nby","nbz","ncx","ncy","ncz","nx","ny","nz","makeRandomVertexColors","vcolors","range","randInt","color","numVertsPerColor","vertsPerColor","numSets","_ii2","reorientDirections","reorientNormals","reorientPositions","reorientVertices","concatVertices","arrayOfArrays","baseName","_loop","arrayInfo","base","newArrays","arraySpec","spec","getLengthOfCombinedArrays","newArraySpec","createArrayOfSameType","newArray","baseIndex","copyElements","copyArraysToNewArray","duplicateVertices","srcArray","createDiscBuffers","createDiscBufferInfo","createTorusBuffers","createTorusBufferInfo","createCylinderBuffers","createCylinderBufferInfo","createCresentBuffers","createCresentBufferInfo","createXYQuadBuffers","createXYQuadBufferInfo","createTruncatedConeBuffers","createTruncatedConeBufferInfo","createSphereBuffers","createSphereBufferInfo","createPlaneBuffers","createPlaneBufferInfo","createCubeBuffers","createCubeBufferInfo","create3DFBuffers","create3DFBufferInfo","augmentTypedArray","reset","opt_index","opt_type","applyFuncToV3Array","fn","tmp","xOffset","yOffset","texcoord","depth","subdivisionsWidth","subdivisionsDepth","numVertices","positions","texcoords","numVertsAcross","_z","_x","subdivisionsAxis","subdivisionsHeight","opt_startLatitudeInRadians","opt_endLatitudeInRadians","opt_startLongitudeInRadians","opt_endLongitudeInRadians","latRange","longRange","theta","phi","sinTheta","cosTheta","sinPhi","ux","uy","uz","numVertsAround","_x2","_y","CUBE_FACE_INDICES","cornerVertices","faceNormals","uvCoords","faceIndices","uv","bottomRadius","topRadius","radialSubdivisions","verticalSubdivisions","opt_topCap","opt_bottomCap","topCap","bottomCap","extra","vertsAroundEdge","slant","cosSlant","sinSlant","ringRadius","_yy","_ii","expandRLEData","rleData","padding","runLength","colors","numVerts","verticalRadius","outerRadius","innerRadius","thickness","subdivisionsDown","startOffset","endOffset","subdivisionsThick","offsetRange","createArc","arcRadius","normalMult","normalAdd","uMult","uAdd","uBack","xBack","px","pz","createSurface","leftArcOffset","rightArcOffset","numVerticesDown","bodySubdivisions","startAngle","endAngle","radialParts","bodyParts","sliceAngle","sliceSin","ring","ringAngle","xSin","zCos","_slice","_ring","nextRingIndex","nextSliceIndex","divisions","stacks","stackPower","firstIndex","radiusSpan","pointsPerStack","stack","stackRadius","pow","createBufferFunc","createBufferInfoFunc","arraySpecPropertyNames","dstNdx","arraySrc","./src/programs.js","createAttributeSetters","createProgram","createProgramFromScripts","shaderScriptIds","opt_attribs","opt_locations","opt_errorCallback","progOptions","getProgramOptions","shaders","shader","createShaderFromScript","defaultShaderType","createProgramFromSources","shaderSources","good","createProgramInfoFromProgram","createUniformSetters","createUniformBlockSpecFromProgram","createUniformBlockInfoFromProgram","createUniformBlockInfo","blockName","uniformBlockSpec","createTransformFeedback","tf","bindTransformFeedback","TRANSFORM_FEEDBACK","bindTransformFeedbackInfo","createTransformFeedbackInfo","setAttributes","attribSetters","setters","actualSetters","uniformSetters","numArgs","andx","vals","setter","setUniformBlock","uniformBlockInfo","bindUniformBlock","UNIFORM_BUFFER","DYNAMIC_DRAW","setBlockUniforms","utils","TEXTURE_CUBE_MAP","TEXTURE_2D_ARRAY","typeMap","getBindPointForSamplerType","bindPoint","intSetter","location","uniform1i","intArraySetter","uniform1iv","intVec2Setter","uniform2iv","intVec3Setter","uniform3iv","intVec4Setter","uniform4iv","samplerSetter","unit","isWebGL2","textureOrPair","texture","sampler","activeTexture","TEXTURE0","bindTexture","bindSampler","samplerArraySetter","units","floatAttribSetter","disableVertexAttribArray","vertexAttrib4fv","vertexAttrib3fv","vertexAttrib2fv","vertexAttrib1fv","enableVertexAttribArray","vertexAttribPointer","vertexAttribDivisor","intAttribSetter","vertexAttrib4iv","vertexAttribIPointer","uintAttribSetter","vertexAttrib4uiv","matAttribSetter","typeInfo","defaultSize","rowOffset","uniform1f","arraySetter","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniform1ui","uniform1uiv","uniform2uiv","uniform3uiv","uniform4uiv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","uniformMatrix2x3fv","uniformMatrix2x4fv","uniformMatrix3x2fv","uniformMatrix3x4fv","uniformMatrix4x2fv","uniformMatrix4x3fv","attrTypeMap","spaceRE","loadShader","shaderSource","shaderType","errFn","createShader","lineOffset","compileShader","getShaderParameter","COMPILE_STATUS","lastError","getShaderInfoLog","line","addLineNumbers","deleteShader","transformFeedbackVaryings","opt","attribLocations","getShaderTypeFromScriptType","scriptType","FRAGMENT_SHADER","VERTEX_SHADER","deleteShaders","realShaders","newShaders","elem","attachShader","bindAttribLocation","varyings","transformFeedbackMode","SEPARATE_ATTRIBS","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","scriptId","opt_shaderType","shaderScript","isBuiltIn","startsWith","textureUnit","createUniformSetter","uniformInfo","getUniformLocation","numUniforms","ACTIVE_UNIFORMS","getActiveUniform","numVaryings","TRANSFORM_FEEDBACK_VARYINGS","varying","getTransformFeedbackVarying","transformFeedbackInfo","bindBufferRange","TRANSFORM_FEEDBACK_BUFFER","bindBufferBase","uniformData","uniformIndices","pair","pname","getActiveUniforms","blockSpecs","numUniformBlocks","ACTIVE_UNIFORM_BLOCKS","getActiveUniformBlockName","blockSpec","usedByVertexShader","getActiveUniformBlockParameter","UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER","usedByFragmentShader","UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER","UNIFORM_BLOCK_DATA_SIZE","UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES","used","usedByVertexSahder","arraySuffixRE","uniformBufferIndex","uniformBlockBinding","uniformNdx","asFloat","bufferBindIndex","byteLength","numAttribs","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","./src/textures.js","setTextureDefaults_","textureColor","setDefaultTextureColor","createSampler","createSamplers","samplerOptions","samplers","setSamplerParameters","setEmptyTexture","setTextureFromArray","loadTextureFromUrl","setTextureFromElement","setTextureFilteringForSize","setTextureParameters","createTextures","numDownloading","errors","images","callCallbackIfReady","onLoadFn","isAsyncSrc","img","internalFormat","RGBA","formatType","getFormatAndTypeForInternalFormat","getTextureTypeForArrayType","texImage2D","TEXTURE_CUBE_MAP_POSITIVE_X","canGenerateMipmap","canFilter","getNumComponentsForFormat","formatInfo","numColorComponents","getBytesPerElementForInternalFormat","crossOrigin","ctx","RGB","HALF_FLOAT","HALF_FLOAT_OES","RG","RG_INTEGER","RED","RED_INTEGER","RGB_INTEGER","RGBA_INTEGER","textureInternalFormatInfo","bytesPerElement","bytesPerElementMap","textureFormat","isPowerOf2","colorRenderable","textureFilterable","defaultType","guessDimensions","lastPackState","savePackState","colorspaceConversion","getParameter","UNPACK_COLORSPACE_CONVERSION_WEBGL","pixelStorei","premultiplyAlpha","UNPACK_PREMULTIPLY_ALPHA_WEBGL","flipY","UNPACK_FLIP_Y_WEBGL","restorePackState","saveSkipState","unpackAlignment","UNPACK_ALIGNMENT","unpackRowLength","UNPACK_ROW_LENGTH","unpackImageHeight","UNPACK_IMAGE_HEIGHT","unpackSkipPixels","UNPACK_SKIP_PIXELS","unpackSkipRows","UNPACK_SKIP_ROWS","unpackSkipImages","UNPACK_SKIP_IMAGES","restoreSkipState","setTextureSamplerParameters","parameteriFn","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_3D","TEXTURE_WRAP_R","wrapR","minLod","TEXTURE_MIN_LOD","maxLod","TEXTURE_MAX_LOD","baseLevel","TEXTURE_BASE_LEVEL","maxLevel","TEXTURE_MAX_LEVEL","texParameteri","samplerParameteri","generateMipmap","filtering","NEAREST","shouldAutomaticallySetTextureFilteringForSize","getCubeFaceOrder","cubeFaceOrder","TEXTURE_CUBE_MAP_NEGATIVE_X","TEXTURE_CUBE_MAP_POSITIVE_Y","TEXTURE_CUBE_MAP_NEGATIVE_Y","TEXTURE_CUBE_MAP_POSITIVE_Z","TEXTURE_CUBE_MAP_NEGATIVE_Z","getCubeFacesWithNdx","facesWithNdx","face","slices","imgWidth","imgHeight","drawImage","createImageBitmap","colorSpaceConversion","imageBitmap","smallest","largest","xMult","yMult","texImage3D","srcX","srcY","texSubImage3D","setToAnonymousIfUndefinedAndURLIsNotSameOrigin","hostname","port","protocol","localOrigin","URL","origin","urlIsSameOrigin","isTexImageSource","ImageBitmap","ImageData","loadAndUseImage","Image","clearEventHandlers","removeEventListener","onLoad","msg","bm","cb","ok","bitmap","catch","loadImage","setTextureTo1PixelColor","make1Pixel","loadCubemapFromUrls","urls","imgs","numToLoad","faces","faceTarget","otherTarget","uploadImg","loadSlicesFromUrls","firstImage","getTypedArrayTypeForGLType","dimensions","glEnumToString","cbrt","faceSize","subarray","./src/twgl-full.js","_exportNames","_twgl","./src/twgl.js","addExtensionsToContext","getWebGLContext","resizeCanvasToDisplaySize","setDefaults","createContext","create3DContext","multiplier","_draw","_framebuffers","_programs","_typedarrays","_vertexArrays","prefixRE","addExtensionToContext","extensionName","ext","getExtension","enums","fnSuffix","enumSuffix","isFunc","suffix","endsWith","origFn","supportedExtensions","./src/typedarrays.js","CTOR","glTypeToTypedArray","tt","SharedArrayBuffer","./src/utils.js","isWebGL1","texStorage2D","haveEnumsForType","existing","addEnums","./src/v3.js","VecType","distance","distanceSq","divide","divScalar","dot","lerp","lerpV","lengthSq","mulScalar","lenSq","./src/vertex-arrays.js","programInfos","vao","createVertexArray","createVAOAndSetAttributes","createVAOFromBufferInfo","getter","enumerable","toStringTag","ns","moduleId","13","TypeStyle","types","utilities_1","media","ts","autoGenerateTag","setStylesTarget","cssRaw","cssRule","forceRenderStyles","fontFace","reinit","stylesheet","createTypeStyle","./internal/typestyle","./internal/utilities","./types","14","ensureStringObj","debugName","val","subproperties","explodeKeyframes","frames","$debugName","free-style","15","createFreeStyle","formatting_1","_afterAllSync","_pending","pending","raf","_getTag","_tag","_autoGenerateTag","_styleUpdated","_freeStyle","lastChangeId","_lastFreeStyleChangeId","_pendingRawChange","freeStyle","mustBeValidCSS","_raw","objects","animationName","classNames_1","getOwnPropertyNames","classDef","./formatting","./utilities","16","objects_1","flattened","mediaQuery","mediaQuerySections","orientation","minWidth","mediaLength","maxWidth","minHeight","maxHeight","$nest","17","18","Strings","Platform_1","RenderDebouncer_1","Lifecycle_1","Lifecycle_2","ScreenDprMonitor_1","AccessibilityManager","Disposable","dispose","_terminal","_accessibilityTreeRoot","_rowElements","_onBoundaryFocus","boundaryElement","beforeBoundaryElement","lines","relatedTarget","topBoundaryElement","bottomBoundaryElement","_rowContainer","shift","_topBoundaryFocusListener","_bottomBoundaryFocusListener","newElement","_createAccessibilityTreeNode","unshift","insertAdjacentElement","scrollLines","focus","stopImmediatePropagation","_onResize","children","_refreshRowsDimensions","tabIndex","_refreshRowDimensions","_onTab","spaceCount","_onChar","_liveRegionLineCount","MAX_ROWS_TO_READ","_charsToConsume","_charsToAnnounce","_liveRegion","tooMuchOutput","isMac","_clearLiveRegion","_onKey","keyChar","_refreshRows","_renderRowsDebouncer","refresh","_renderRows","setSize","lineData","translateBufferLineToString","ydisp","posInSet","blankLine","_announceCharacters","_dimensions","actualCellHeight","setDimensions","RenderDebouncer","register","onResize","onRender","onScroll","addDisposableListener","onLineFeed","onKey","_screenDprMonitor","ScreenDprMonitor","setListener","addDisposableDomListener","./Strings","./common/Lifecycle","./common/Platform","./ui/Lifecycle","./ui/RenderDebouncer","./ui/ScreenDprMonitor","19","CircularList_1","BufferLine_1","BufferReflow_1","Marker_1","MAX_BUFFER_SIZE","Buffer","getNullCell","attr","_nullCell","fg","bg","getWhitespaceCell","_whitespaceCell","getBlankLine","isWrapped","BufferLine","cols","_hasScrollback","maxLength","_rows","configurable","relativeY","ybase","_getCorrectBufferLength","correctBufferLength","scrollback","fillViewportRows","fillAttr","DEFAULT_ATTR_DATA","CircularList","scrollBottom","setupTabStops","resize","newCols","newRows","nullCell","newMaxLength","_cols","addToY","amountToTrim","trimStart","savedY","savedX","_isReflowEnabled","_reflow","windowsMode","_reflowLarger","_reflowSmaller","toRemove","reflowLargerGetLinesToRemove","newLayoutResult","reflowLargerCreateNewLayout","reflowLargerApplyNewLayout","layout","_reflowLargerAdjustViewport","countRemoved","viewportAdjustments","toInsert","countToInsert","nextLine","getTrimmedLength","wrappedLines","absoluteY","lastLineLength","destLineLengths","reflowSmallerGetNewLineLengths","linesToAdd","trimmedLines","newLines","newLine","destLineIndex","destCol","srcLineIndex","srcCol","cellsToCopy","copyCellsFrom","wrappedLinesIndex","getWrappedLineTrimmedLength","setCell","insertEvents","originalLines","originalLinesLength","originalLineIndex","nextToInsertIndex","nextToInsert","countInsertedSoFar","nextI","amount","insertCountEmitted","onInsertEmitter","fire","onTrimEmitter","stringIndexToBufferIndex","lineIndex","stringIndex","trimRight","length_1","CHAR_DATA_WIDTH_INDEX","CHAR_DATA_CHAR_INDEX","startCol","endCol","translateToString","getWrappedRangeForLine","first","last","tabs","prevStop","tabStopWidth","nextStop","addMarker","Marker","markers","onTrim","onInsert","onDelete","onDispose","_removeMarker","startIndex","endIndex","startOverscan","endOverscan","BufferStringIterator","savedCurAttrData","CellData","fromCharData","NULL_CELL_CHAR","NULL_CELL_WIDTH","NULL_CELL_CODE","WHITESPACE_CELL_CHAR","WHITESPACE_CELL_WIDTH","WHITESPACE_CELL_CODE","hasNext","_current","_endIndex","_buffer","_startIndex","_startOverscan","_endOverscan","_trimRight","./common/CircularList","./core/buffer/BufferLine","./core/buffer/BufferReflow","./core/buffer/Marker","20","Buffer_1","EventEmitter2_1","BufferSet","_onBufferActivate","_alt","_activeBuffer","_normal","activateNormalBuffer","activeBuffer","inactiveBuffer","activateAltBuffer","EventEmitter2","./Buffer","./common/EventEmitter2","21","CharMeasure","_onCharSizeChanged","_width","_height","measure","_measureElement","fontFamily","fontSize","geometry","getBoundingClientRect","adjustedHeight","parentElement","_document","_parentElement","22","TypedArrayUtils_1","wcwidth","COMBINING_BMP","COMBINING_HIGH","control","table","nul","num","ucs","mid","bisearch","wcwidthHigh","getStringCellWidth","second","./common/TypedArrayUtils","23","prepareTextForTerminal","bracketTextForPaste","bracketedPasteMode","moveTextAreaUnderMouseCursor","ev","screenElement","clientX","clientY","textarea","zIndex","copyHandler","selectionManager","isMSIE","clipboardData","setData","pasteHandler","dispatchPaste","handler","cancel","getData","rightClickHandler","shouldSelectWord","isClickInSelection","selectWordAtCursor","select","24","CompositionHelper","compositionstart","_isComposing","_compositionPosition","_textarea","_compositionView","compositionupdate","updateCompositionElements","compositionend","_finalizeComposition","keydown","_isSendingComposition","_handleAnyTextareaChanges","waitForPropagation","_clearTextareaPosition","currentCompositionPosition_1","oldValue","diff","dontRecurse","isCursorInViewport","cellHeight","charMeasure","lineHeight","cursorTop","cursorLeft","compositionViewBounds","25","TextDecoder_1","low","high","TransitionTable","action","addMany","codes","PRINTABLES","EXECUTABLES","VT500_TRANSITION_TABLE","states","DcsDummy","hook","collect","params","flag","unhook","EscapeSequenceParser","_printHandlerFb","_executeHandlerFb","_csiHandlerFb","_escHandlerFb","_oscHandlerFb","_dcsHandlerFb","_errorHandlerFb","_printHandler","_executeHandlers","_escHandlers","_csiHandlers","_oscHandlers","_dcsHandlers","_activeDcsHandler","_errorHandler","setPrintHandler","clearPrintHandler","setExecuteHandler","clearExecuteHandler","setExecuteHandlerFallback","addCsiHandler","handlerList","handlerIndex","setCsiHandler","clearCsiHandler","setCsiHandlerFallback","setEscHandler","collectAndFlag","clearEscHandler","setEscHandlerFallback","addOscHandler","ident","setOscHandler","clearOscHandler","setOscHandlerFallback","setDcsHandler","clearDcsHandler","setDcsHandlerFallback","setErrorHandler","clearErrorHandler","currentState","initialState","_osc","_params","_collect","transition","print","dcs","osc","TRANSITIONS","dcsHandler","abort","j_1","utf32ToString","idx","identifier","handlers_1","j_2","./core/input/TextDecoder","26","EscapeSequences_1","Charsets_1","CharWidth_1","EscapeSequenceParser_1","GLEVEL","(",")","*","+","-",".","DECRQSS","_data","C0","ESC","pt","block","underline","bar","getOption","InputHandler","_onCursorMove","_onData","_onLineFeed","_onScroll","cursorStartX","cursorStartY","_parseBuffer","_parser","_stringDecoder","decode","parseUtf8","_utf8Decoder","chWidth","charset","screenReaderMode","wraparoundMode","insertMode","curAttr","curAttrData","bufferRow","updateRange","ch","stringFromCodePoint","scroll","insertCells","getWidth","setCellFromCodePoint","addCodepointToCell","bell","lineFeed","convertEol","carriageReturn","backspace","tab","originalX","shiftOut","setgLevel","shiftIn","insertChars","eraseAttrData","cursorUp","param","cursorDown","cursorForward","cursorBackward","cursorNextLine","cursorPrecedingLine","cursorCharAbsolute","cursorPosition","col","row","cursorForwardTab","_eraseInBufferLine","clearWrap","replaceCells","_resetBufferLine","eraseInDisplay","scrollBackSize","eraseInLine","insertLines","scrollBottomRowsOffset","scrollBottomAbsolute","deleteLines","deleteChars","deleteCells","scrollUp","scrollDown","eraseChars","cursorBackwardTab","charPosAbsolute","hPositionRelative","repeatPrecedingCharacter","loadCell","_workCell","sendDeviceAttributes","is","linePosAbsolute","vPositionRelative","hVPosition","tabClear","setMode","applicationCursor","setgCharset","DEFAULT_CHARSET","savedCols","originMode","applicationKeypad","syncScrollArea","x10Mouse","vt200Mouse","normalMouse","mouseEvents","disable","sendFocus","utfMouse","sgrMouse","urxvtMouse","cursorHidden","saveCursor","showCursor","resetMode","restoreCursor","charAttributes","AttributeData","fromColorRGB","deviceStatus","softReset","glevel","charsets","setCursorStyle","setOption","isBlinking","setScrollRegion","setTitle","handleTitle","keypadApplicationMode","keypadNumericMode","selectDefaultCharset","selectCharset","CHARSETS","tabSet","reverseIndex","StringToUtf32","Utf8ToUtf32","BEL","LF","VT","FF","CR","BS","HT","SO","SI","C1","IND","NEL","HTS","_loop_1","this_1","./CharWidth","./EscapeSequenceParser","./common/data/EscapeSequences","./core/data/Charsets","27","MouseZoneManager_1","Linkifier","_onLinkHover","_onLinkLeave","_onLinkTooltip","attachToDom","mouseZoneManager","_mouseZoneManager","linkifyRows","_rowsToLinkify","clearAll","_rowsTimeoutId","_linkifyRows","TIME_BEFORE_LINKIFY","absoluteRowIndexStart","absoluteRowIndexEnd","overscanLineLimit","OVERSCAN_CHAR_LIMIT","_linkMatchers","_doLinkifyRow","registerLinkMatcher","_nextLinkMatcherId","matchIndex","validationCallback","hoverTooltipCallback","tooltipCallback","hoverLeaveCallback","leaveCallback","willLinkActivate","priority","_addLinkMatcherToList","deregisterLinkMatcher","matcherId","rowIndex","rex","uri","bufferIndex","getFg","isValid","_addLink","x1","y1","x2","y2","MouseZone","_createLinkHoverEvent","./MouseZoneManager","28","MouseHelper","getCoordsRelativeToElement","rect","getCoords","colCount","rowCount","isSelection","coords","_renderCoordinator","actualCellWidth","getRawByteCoords","29","MouseZoneManager","_deactivate","zone","_zones","_activate","_currentZone","_areZonesActive","_mouseMoveListener","_mouseLeaveListener","_clickListener","_onMouseMove","_lastHoverCoords","pageX","pageY","_onHover","_findZoneEventAt","_tooltipTimeout","hoverCallback","_onTooltip","_onMouseDown","_initialSelectionLength","getSelection","_onMouseLeave","_onClick","currentSelectionLength","clickCallback","mouseHelper","30","MouseHelper_1","Browser","SelectionModel_1","AltClickHandler_1","NON_BREAKING_SPACE_CHAR","ALL_NON_BREAKING_SPACE_REGEX","SelectionManager","_onLinuxMouseSelection","_onRedrawRequest","_onSelectionChange","_removeMouseDownListeners","_initListeners","_mouseUpListener","_onMouseUp","initBuffersListeners","_trimListener","_onTrim","onBufferActivate","clearSelection","_enabled","_model","finalSelectionStart","finalSelectionEnd","_activeSelectionMode","lineText","startRowEndCol","bufferLine","isMSWindows","isLinuxMouseSelection","_refreshAnimationFrame","_refresh","isLinux","columnSelectMode","_getMouseBufferCoords","_areCoordsInSelection","_selectWordAt","selectAll","isSelectAllActive","selectLines","_charMeasure","_getMouseEventScrollAmount","terminalHeight","round","shouldForceSelection","macOptionClickForcesSelection","onMouseDown","_mouseDownTimeStamp","timeStamp","button","_dragScrollAmount","_onIncrementalClick","detail","_onSingleClick","_onDoubleClick","_onTripleClick","_addMouseDownListeners","ownerDocument","_dragScrollIntervalTimer","setInterval","_dragScroll","clearInterval","selectionStartLength","shouldColumnSelect","hasWidth","_selectLineAt","previousSelectionEnd","_selectToWordAt","timeElapsed","AltClickHandler","move","_convertViewportColToCharacterIndex","charIndex","getChars","setSelection","_getWordAt","allowWhitespaceOnlySelection","followWrappedLinesAbove","followWrappedLinesBelow","charOffset","leftWideCharCount","rightWideCharCount","leftLongCharOffset","rightLongCharOffset","length_2","getString","_isCharWordSeparator","length_3","length_4","getCodePoint","previousBufferLine","previousLineWordPosition","nextBufferLine","nextLineWordPosition","wordPosition","endRow","areSelectionValuesReversed","cell","wrappedRange","SelectionModel","./MouseHelper","./SelectionModel","./handlers/AltClickHandler","31","startPlusLength","32","DEFAULT_BELL_SOUND","SoundManager","_audioContext","audioContextCtor","AudioContext","webkitAudioContext","playBellSound","audioContext","bellAudioSource","createBufferSource","decodeAudioData","_base64ToArrayBuffer","_removeMimeType","bellSound","connect","destination","binaryString","dataURI","33","promptLabel","34","BufferSet_1","CompositionHelper_1","EventEmitter_1","Viewport_1","Clipboard_1","InputHandler_1","Renderer_1","Linkifier_1","SelectionManager_1","CharMeasure_1","SoundManager_1","AccessibilityManager_1","CharAtlasCache_1","DomRenderer_1","Keyboard_1","Clone_1","WindowsMode_1","ColorManager_1","RenderCoordinator_1","CONSTRUCTOR_ONLY_OPTIONS","DEFAULT_OPTIONS","termName","cursorBlink","cursorStyle","bellStyle","drawBoldTextInBrightColors","enableBold","experimentalCharAtlas","fontWeight","fontWeightBold","letterSpacing","screenKeys","macOptionIsMeta","cancelEvents","disableStdin","useFlowControl","rightClickSelectsWord","rendererType","EventEmitter","_onRender","_onTitleChange","_windowsMode","_customKeyEventHandler","removeTerminalFromCache","destroy","_setup","_parent","onData","cursorState","gcharset","_eraseAttrData","currentParam","writeBuffer","writeBufferUtf8","_writeInProgress","_xoffSentToCatchUp","_userScrolling","_inputHandler","onCursorMove","linkifier","soundManager","applyWindowsMode","preventScroll","activeElement","hasFocus","_setTheme","newBufferLength","needsRefresh","setRenderer","_createRenderer","_accessibilityManager","onOptionsChanged","_onTextAreaFocus","updateCursorStyle","blur","_onTextAreaBlur","_initGlobal","pasteHandlerWrapper","_bindKeys","isFirefox","_keyDown","_keyPress","wasModifierKeyOnlyEvent","_keyUp","_compositionHelper","_queueLinkification","_context","defaultView","fragment","createDocumentFragment","_viewportElement","_viewportScrollArea","_helperContainer","_theme","_colorManager","ColorManager","setTheme","renderer","RenderCoordinator","Viewport","onThemeChange","onBlur","onFocus","onCharSizeChanged","onDimensionsChange","onSelectionChange","onRedrawRequest","onSelectionChanged","onLinuxMouseSelection","toggle","bindMouse","Renderer","DomRenderer","setColors","el","pressed","sendButton","meta","ctrl","mod","overrideType","which","deltaY","metaKey","getButton","sendEvent","_vt300Mouse","data_1","_decLocator","page","moveHandler","sendMove","hasScrollback","getLinesScrolled","sequence","onWheel","onTouchStart","onTouchMove","refreshRows","_blankLine","eraseAttr","getBg","topRow","bottomRow","willBufferBeTrimmed","isFull","recycle","copyFrom","scrollRegionHeight","shiftElements","disp","suppressScrollEvent","oldYdisp","scrollPages","pageCount","scrollToTop","scrollToBottom","scrollToLine","scrollAmount","writeUtf8","_isDisposed","DC3","_innerWriteUtf8","bufferOffset","startTime","now","DC1","_refreshStart","_refreshEnd","_innerWrite","writeln","attachCustomKeyEventHandler","customKeyEventHandler","registerCharacterJoiner","joinerId","deregisterCharacterJoiner","cursorYOffset","column","getSelectionPosition","startColumn","startRow","endColumn","evaluateKeyboardEvent","_isThirdLevelShift","domEvent","scrollCount","thirdLevelKey","charCode","_soundBell","_visualBell","_visualBellTimer","maxRange","inputHandler","writeInProgress","xoffSentToCatchUp","userScrolling","force","onTitleChange","./AccessibilityManager","./BufferSet","./CharMeasure","./Clipboard","./CompositionHelper","./InputHandler","./Linkifier","./SelectionManager","./SoundManager","./Viewport","./WindowsMode","./common/Clone","./common/EventEmitter","./core/input/Keyboard","./renderer/RenderCoordinator","./renderer/Renderer","./renderer/atlas/CharAtlasCache","./renderer/dom/DomRenderer","./ui/ColorManager","35","onDimensionsChance","backgroundColor","_innerRefresh","_currentRowHeight","scaledCellHeight","_lastRecordedViewportHeight","offsetHeight","newBufferHeight","_lastRecordedBufferLength","canvasHeight","_lastRecordedBufferHeight","_scrollArea","_ignoreNextScrollEvent","newScrollTop","_lastScrollTop","offsetParent","_getPixelsScrolled","deltaMode","WheelEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","DOM_DELTA_PIXEL","_wheelPartialScroll","_lastTouchY","touches","scrollBarWidth","offsetWidth","36","terminal","lastChar","CHAR_DATA_CODE_INDEX","37","proposeGeometry","parentElementStyle","getComputedStyle","parentElementHeight","getPropertyValue","parentElementWidth","elementStyle","availableHeight","availableWidth","_core","terminalConstructor","38","onDeleteEmitter","_maxLength","_array","_getCyclicIndex","_length","newLength","deleteCount","items","countToTrim","expandListBy","./EventEmitter2","39","clonedObject","40","listener","_events","disposed","emitMayRemoveListeners","./Lifecycle","41","_event","_listeners","42","_disposables","unregister","43","isNode","isIpad","isIphone","44","fillFallback","45","DEFAULT_COLOR","46","NUL","SOH","STX","ETX","EOT","ENQ","ACK","DLE","DC2","DC4","NAK","SYN","ETB","CAN","EM","SUB","FS","GS","RS","US","SP","DEL","PAD","HOP","BPH","NBH","SSA","ESA","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","SGCI","SCI","CSI","ST","OSC","PM","APC","47","Types_1","DEFAULT_ATTR","CHAR_DATA_ATTR_INDEX","toColorRGB","isInverse","isBold","isUnderline","isBlink","isInvisible","isItalic","isDim","getFgColorMode","getBgColorMode","isFgRGB","isBgRGB","isFgPalette","isBgPalette","isFgDefault","isBgDefault","getFgColor","getBgColor","freeze","setFromCharData","isCombined","combinedData","combined","getAsCharData","cp","_combined","hasContent","codePoint","fillCellData","applyInReverse","srcData","srcCombinedKeys","../../common/Types","../input/TextDecoder","48","endsInNull","followingLineStartsWithWide","oldCols","bufferAbsoluteY","srcTrimmedTineLength","srcRemainingCells","destRemainingCells","countToRemove","i_1","nextToRemoveIndex","nextToRemoveStart","countRemovedSoFar","newLayout","newLayoutLines","newLineLengths","cellsNeeded","srcLine","cellsAvailable","oldTrimmedLength","endsWithWide","lineLength","49","_id","_onDispose","isDisposed","_nextId","../../common/EventEmitter2","../../common/Lifecycle","50","q","{","|","}","~","#","@","[","\\","]","^","51","KEYCODE_KEY_MAPPINGS","52","53","54","55","56","57","186","187","188","189","190","191","192","219","220","221","222","applicationCursorMode","modifiers","keyMapping","../../common/data/EscapeSequences","codepoint","_interim","interim","byte1","byte2","byte3","byte4","discardInterim","missing","fourStop","_mouseEvent","_endCol","_endRow","_arrowSequences","_moveHorizontallyOnly","_resetStartingRow","_moveToRequestedRow","_moveToRequestedCol","_bufferLine","_startCol","_startRow","_wrappedRowsForRow","_sequence","_wrappedRowsCount","_verticalDirection","direction","_horizontalDirection","wrappedRows","_lines","currentRow","lineWraps","forward","currentCol","bufferStr","coordinates","coordinate","rpt","../common/data/EscapeSequences","AddonManager","_addons","loadAddon","loadedAddon","_wrappedAddonDispose","activate","Terminal_1","AddonManager_1","BufferApiView","_addonManager","addon","getLine","BufferLineApiView","_line","getCell","BufferCellApiView","../Strings","../Terminal","./AddonManager","Types_2","BaseRenderLayer","_container","_canvas","_charAtlas","_initCanvas","_ctx","alpha","_alpha","onGridChanged","colorSet","_refreshCharAtlas","setTransparency","oldCanvas","cloneNode","replaceChild","_colors","_scaledCharWidth","_scaledCharHeight","acquireCharAtlas","warmUp","dim","_scaledCellWidth","scaledCellWidth","_scaledCellHeight","scaledCharWidth","scaledCharHeight","_scaledCharLeft","scaledCharLeft","_scaledCharTop","scaledCharTop","scaledCanvasWidth","scaledCanvasHeight","canvasWidth","fillCells","fillRect","fillBottomLineAtCells","fillLeftLineAtCell","strokeRectAtCell","strokeRect","fillStyle","clearCells","fillCharTrueColor","font","_getFont","textBaseline","_clipRow","fillText","drawChars","_drawUncachedChars","INVERTED_DEFAULT_COLOR","_currentGlyphIdentifier","chars","bold","italic","draw","ansi","foreground","globalAlpha","DIM_OPACITY","clip","../common/Types","../core/buffer/BufferLine","./atlas/CharAtlasCache","./atlas/Types","JoinedCellData","firstCell","CharacterJoinerRegistry","joiner","_nextCharacterJoinerId","_characterJoiners","getJoinedCharacters","ranges","lineStr","rangeStartColumn","currentStringIndex","rangeStartStringIndex","rangeAttrFG","rangeAttrBG","joinedRanges","_getJoinedRanges","joinerRanges","_mergeRanges","_stringRangesToCellRanges","currentRangeIndex","currentRangeStarted","currentRange","newRange","inRange","58","BaseRenderLayer_1","CursorRenderLayer","_state","isFocused","_clearCursor","_cursorBlinkStateManager","pause","resume","CursorBlinkStateManager","_render","restartBlinkAnimation","isPaused","triggeredByAnimationFrame","cursorY","viewportRelativeCursorY","_cell","_renderBlurCursor","isCursorVisible","_cursorRenderers","_renderBarCursor","_renderBlockCursor","cursorAccent","_renderUnderlineCursor","_blinkStartTimeout","_blinkInterval","_animationFrame","cancelAnimationFrame","_animationTimeRestarted","_renderCallback","_restartInterval","timeToStart","./BaseRenderLayer","59","GridCache","60","CharAtlasUtils_1","LinkRenderLayer","_clearCurrentLink","middleRowCount","is256Color","onLinkHover","onLinkLeave","./atlas/CharAtlasUtils","61","_onDimensionsChange","_onRefreshRequest","_renderer","_onIntersectionChange","entry","_isPaused","intersectionRatio","_needsFullRefresh","_rowCount","_renderDebouncer","renderRows","_fireOnCanvasResize","changeOptions","_canvasWidth","_canvasHeight","_fullRefresh","onDevicePixelRatioChange","observer_1","IntersectionObserver","threshold","disconnect","../common/EventEmitter2","../common/Lifecycle","../ui/Lifecycle","../ui/RenderDebouncer","../ui/ScreenDprMonitor","62","TextRenderLayer_1","SelectionRenderLayer_1","CursorRenderLayer_1","LinkRenderLayer_1","CharacterJoinerRegistry_1","_renderLayers","_devicePixelRatio","_updateDimensions","_runOperation","operation","_characterJoinerRegistry","TextRenderLayer","SelectionRenderLayer","../renderer/CharacterJoinerRegistry","./CursorRenderLayer","./LinkRenderLayer","./SelectionRenderLayer","./TextRenderLayer","63","_clearState","_didStateChange","viewportStartRow","viewportEndRow","viewportCappedStartRow","viewportCappedEndRow","selection","middleRowsCount","_areCoordinatesEqual","coord1","coord2","64","GridCache_1","terminalFont","_characterWidth","_characterFont","_characterOverlapCache","_forEachCell","firstRow","lastRow","joinerRegistry","isJoined","lastCharX","_isOverlapping","_drawBackground","startX","startY","prevFillStyle","nextFillStyle","_drawForeground","beginFrame","overlaps","measureText","characterJoinerRegistry","./CharacterJoinerRegistry","./GridCache","65","BaseCharAtlas","_didWarmUp","_doWarmUp","66","DynamicCharAtlas_1","NoneCharAtlas_1","StaticCharAtlas_1","charAtlasImplementations","none","static","dynamic","charAtlasCache","newConfig","generateConfig","ownedByIndex","ownedBy","configEquals","atlas","newEntry","./CharAtlasUtils","./DynamicCharAtlas","./NoneCharAtlas","./StaticCharAtlas","67","clearColor","imageData","isEmpty","rgba","getFont","generateStaticCharAtlasTexture","canvasFactory","cellWidth","CHAR_ATLAS_CELL_SPACING","colorIndex","charAtlasImageData","getImageData","../../common/Platform","./Types","68","clonedColors","colorCode","69","BaseCharAtlas_1","CharAtlasGenerator_1","LRUMap_1","TRANSPARENT_COLOR","getGlyphCacheKey","glyph","DynamicCharAtlas","_bitmapCommitTimeout","_drawToCacheCount","_canCache","glyphKey","cacheValue","_cacheMap","_drawFromCache","capacity","peek","cacheValue_1","_drawToCache","_toCoordinateX","_toCoordinateY","cacheX","cacheY","inBitmap","_bitmap","_cacheCanvas","_getColorFromAnsiIndex","DEFAULT_ANSI_COLORS","_getBackgroundColor","_getForegroundColor","_tmpCtx","globalCompositeOperation","fontStyle","_cacheCtx","putImageData","_addGlyphToBitmap","_glyphsWaitingOnBitmap","_generateBitmap","glyphsMovingToBitmap","tmpCanvas","prealloc","../../ui/ColorManager","./BaseCharAtlas","./CharAtlasGenerator","./LRUMap","70","LRUMap","_unlinkNode","node","prev","_head","_tail","_appendNode","tail","nodePool","_nodePool","_map","peekValue","71","NoneCharAtlas","72","StaticCharAtlas","_canvasFactory","HTMLCanvasElement","_texture","_isCached","isAscii","isBasicColor","isDefaultColor","isDefaultBackground","charAtlasCellWidth","charAtlasCellHeight","73","74","DomRendererRowFactory_1","TERMINAL_CLASS_PREFIX","ROW_CONTAINER_CLASS","FOCUS_CLASS","SELECTION_CLASS","nextTerminalId","_terminalClass","_selectionContainer","_themeStyleElement","_dimensionsStyleElement","_terminalSelector","_injectCss","BOLD_CLASS","ITALIC_CLASS","CURSOR_CLASS","CURSOR_BLINK_CLASS","CURSOR_STYLE_BLOCK_CLASS","CURSOR_STYLE_BAR_CLASS","CURSOR_STYLE_UNDERLINE_CLASS","_refreshRowElements","documentFragment","_createSelectionElement","endCol_1","colStart","colEnd","cursorAbsoluteY","cursorX","rowElement","_rowFactory","createRow","_setCellUnderline","enabled","span","textDecoration","DomRendererRowFactory","../atlas/Types","./DomRendererRowFactory","75","DIM_CLASS","UNDERLINE_CLASS","isCursorRow","charElement","_terminalOptions","swapColor","../../core/buffer/BufferLine","76","DEFAULT_FOREGROUND","fromHex","DEFAULT_BACKGROUND","DEFAULT_CURSOR","DEFAULT_CURSOR_ACCENT","DEFAULT_SELECTION","toPaddedHex","_parseColor","black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite","fallback","_litmusColor","createLinearGradient","77","useCapture","78","rowStart","rowEnd","_rowStart","_rowEnd","79","_listener","clearListener","_outerListener","_currentDevicePixelRatio","_updateDpr","_resolutionMediaMatchList","matchMedia"],"mappings":"CAAY,SAASA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAE,mBAAmBC,SAASA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,IAAIK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,KAAK,MAAMK,EAAEE,KAAK,mBAAmBF,EAAE,IAAIG,EAAEX,EAAEG,GAAG,CAACS,QAAQ,IAAIb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAoB,OAAOI,EAAlBH,EAAEI,GAAG,GAAGL,IAAeA,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAQ,IAAI,IAAIL,EAAE,mBAAmBD,SAASA,QAAQH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAA7b,CAA4c,CAACa,EAAE,CAAC,SAAST,EAAQU,EAAOJ,GACxe,aACAA,EAAQK,YAAa,EACrB,IAAIC,EAAWZ,EAAQ,mBACnBa,EAAab,EAAQ,qBACrBc,EAAkBd,EAAQ,0BAC1Be,EAAgBf,EAAQ,uBACxBgB,EAAQhB,EAAQ,WAChBiB,GA4BAA,EAAUC,UAAUC,YAAc,WAE9B,IADoBN,EAAWO,UAAUR,EAASS,UAAW,KAAMC,KAAKC,KAAKC,aAEzE,MAAMrB,MAAM,mCAIhBmB,KAAKG,gBACLH,KAAKI,iBACLJ,KAAKK,YACLL,KAAKM,aACLN,KAAKO,aACLP,KAAKQ,iBACLR,KAAKS,kBACLT,KAAKU,WAAWV,KAAKlB,OAEzBa,EAAUC,UAAUO,cAAgB,WAChCH,KAAKlB,KAAOkB,KAAKW,WAAWC,UAC5BZ,KAAKW,WAAWC,UAAY,GAC5BZ,KAAKa,UAAYb,KAAKc,cAAc,MAAOd,KAAKW,YAChDX,KAAKa,UAAUE,UAAUC,IAAI,cAEjCrB,EAAUC,UAAUQ,eAAiB,WACjCJ,KAAKiB,WAAajB,KAAKc,cAAc,WAAYd,KAAKa,WACtDb,KAAKiB,WAAWF,UAAUC,IAAI,sBAAuB,uBAEzDrB,EAAUC,UAAUS,UAAY,WAC5BL,KAAKkB,MAAQlB,KAAKc,cAAc,MAAOd,KAAKa,WAC5Cb,KAAKkB,MAAMH,UAAUC,IAAI,iBAAkB,uBAE/CrB,EAAUC,UAAUU,WAAa,WAC7BN,KAAKmB,OAASnB,KAAKc,cAAc,OAAQd,KAAKkB,OAC9ClB,KAAKmB,OAAOJ,UAAUC,IAAI,kBAAmB,aAAehB,KAAKC,KAAKmB,UAAY,UAEtFzB,EAAUC,UAAUyB,kBAAoB,WACpCrB,KAAKsB,cAAgBtB,KAAKc,cAAc,MAAOd,KAAKa,WACpDb,KAAKsB,cAAcP,UAAUC,IAAI,oBACjChB,KAAKuB,iBAET5B,EAAUC,UAAUkB,cAAgB,SAAUU,EAAYC,GACtD,IAAIC,EAAUC,SAASb,cAAcU,GAErC,OADAC,EAAcG,YAAYF,GACnBA,GAEX/B,EAAUC,UAAUW,WAAa,WAC7BP,KAAKC,KAAK4B,IAAM7B,KAAKC,KAAK4B,MAAO,EACjC7B,KAAKC,KAAK6B,QAAU9B,KAAKC,KAAK6B,SAAW,EACzC9B,KAAKC,KAAK8B,kBAAoB/B,KAAKC,KAAK8B,oBAAqB,EAC7D/B,KAAKC,KAAK+B,YAAchC,KAAKC,KAAK+B,cAAe,EACjDhC,KAAKC,KAAKgC,cAA0C,IAA3BjC,KAAKC,KAAKgC,aACnCjC,KAAKC,KAAKiC,OAASlC,KAAKC,KAAKiC,QAAU,KACvClC,KAAKC,KAAKkC,eAAiBnC,KAAKC,KAAKkC,gBAAkB,KACvDnC,KAAKC,KAAKmC,SAAWpC,KAAKC,KAAKmC,UAAY,KAEP,kBAAzBpC,KAAKC,KAAKoC,aACjBrC,KAAKC,KAAKoC,YAAa,GAG0B,kBAA1CrC,KAAKC,KAAKqC,8BACjBtC,KAAKC,KAAKqC,6BAA8B,GAGM,kBAAvCtC,KAAKC,KAAKsC,2BACjBvC,KAAKC,KAAKsC,0BAA2B,IAEnB,IAAlBvC,KAAKC,KAAK4B,MACV7B,KAAKiB,WAAWuB,aAAa,MAAO,OACpCxC,KAAKkB,MAAMsB,aAAa,MAAO,SAEC,IAAhCxC,KAAKC,KAAK8B,oBACV/B,KAAKiB,WAAWuB,aAAa,aAAc,SAC3CxC,KAAKiB,WAAWuB,aAAa,iBAAkB,OAC/CxC,KAAKiB,WAAWuB,aAAa,eAAgB,OAC7CxC,KAAKiB,WAAWuB,aAAa,cAAe,QAE5CxC,KAAKC,KAAK+B,cACVhC,KAAKa,UAAUE,UAAUC,IAAI,+BAC7BhB,KAAKqB,qBAELrB,KAAKC,KAAKgC,cACV1C,EAAWO,UAAUN,EAAgBiD,gBAAiB,gBAAiBzC,KAAKC,KAAKC,aAEjFF,KAAKC,KAAKiC,QACVlC,KAAKiB,WAAWuB,aAAa,KAAMxC,KAAKC,KAAKiC,QAE7ClC,KAAKC,KAAKkC,gBACVnC,KAAKiB,WAAWuB,aAAa,kBAAmBxC,KAAKC,KAAKkC,gBAE1DnC,KAAKC,KAAKmC,UACVpC,KAAK0C,sBAGb/C,EAAUC,UAAU+C,uBAAyB,WAEzC,IADA,IAAIC,EAAa,GACRrE,EAAI,EAAGA,GAAKyB,KAAK6C,WAAYtE,IAClCqE,EAAaA,EAAc,wCAA4CrE,EAAI,UAE/EyB,KAAKsB,cAAcV,UAAYgC,GAEnCjD,EAAUC,UAAUY,eAAiB,WACjC,IAAIsC,EAAQ9C,KACZA,KAAKiB,WAAW8B,iBAAiB,QAAS,SAAU5E,GAChD2E,EAAMhE,KAAOX,EAAE6E,OAAOC,MACtBH,EAAM3B,OAAOP,UAAYnB,EAAcyD,WAAW/E,EAAE6E,OAAOC,OAC3DH,EAAMK,YACNC,WAAW,WACPN,EAAMO,YACNP,EAAMvB,iBACP,KAEPvB,KAAKiB,WAAW8B,iBAAiB,UAAW,SAAU5E,GAClD2E,EAAMT,WAAWlE,GACjB2E,EAAMR,4BAA4BnE,GAClC2E,EAAMP,yBAAyBpE,KAEnC6B,KAAKiB,WAAW8B,iBAAiB,SAAU,SAAU5E,GACjD2E,EAAM5B,MAAMoC,MAAMC,UAAY,gBAAkBpF,EAAE6E,OAAOQ,WAAa,QAAUrF,EAAE6E,OAAOS,UAAY,SACjGX,EAAMxB,gBACNwB,EAAMxB,cAAcgC,MAAMC,UAAY,mBAAqBpF,EAAE6E,OAAOS,UAAY,aAI5F9D,EAAUC,UAAUyC,WAAa,SAAUlE,GACvC,GAAI6B,KAAKC,KAAKoC,WAAY,CACtB,GAAkB,IAAdlE,EAAEuF,QACF,OAEJvF,EAAEwF,iBACF,IAAIC,EAAQ5D,KAAKiB,WACb4C,EAAeD,EAAME,mBACrBC,EAAcH,EAAMI,eACpBC,EAAYL,EAAMM,aAClBC,EAAWP,EAAMX,MACjBmB,EAAkBD,EAASE,OAAO,EAAGN,GACrCO,EAAeH,EAASI,UAAUR,EAAaE,GAC/CO,EAAiBL,EAASI,UAAUN,GACpCQ,EAAS,IAAIC,OAAO1E,KAAKC,KAAK6B,SAClC,GAAIiC,IAAgBE,GAAaK,EAAapF,QAAUuF,EAAOvF,OAAQ,CACnE,IAAIyF,EAAmBZ,EAAcK,EAAgBQ,MAAM,MAAMC,MAAM3F,OACnE4F,EAAiBL,EAAOvF,OACxB6F,EAAeN,EAAOvF,OA4BtBoF,EA1BAnG,EAAE6G,UACwBb,EAASE,OAAOM,EAAkBF,EAAOvF,UAEvCuF,GACxBK,GAAkBA,EACKf,EAAnBY,GAEAL,EAAeA,EAAaC,UAAU,EAAGI,GAAoBL,EAAaC,UAAUI,EAAmBF,EAAOvF,QAC9G6F,EAAe,GAEVJ,IAAqBZ,GAG1BgB,EADAD,EAAiB,EAEjBR,EAAeA,EAAaC,UAAUE,EAAOvF,UAI7C6F,GAAgBA,EAChBX,EAAkBA,EAAgBG,UAAU,EAAGI,GAAoBP,EAAgBG,UAAUI,EAAmBF,EAAOvF,UAK3H6F,EADAD,EAAiB,EAGNR,EAAaW,QAAQ,IAAIC,OAAO,KAAOT,EAAOG,MAAM,IAAIO,KAAK,MAAO,KAAM,QAIzFf,EAAkBA,EAAgBC,OAAO,EAAGM,GAAoBF,EAASL,EAAgBG,UAAUI,EAAkBZ,GACtGO,EAAaW,QAAQ,MAAO,KAAOR,IAGtDb,EAAMX,MAAQmB,EAAkBE,EAAeE,EAC/CZ,EAAMI,eAAiBD,EAAce,EACrClB,EAAMM,aAAeH,EAAcO,EAAapF,OAAS6F,EACzDnB,EAAME,mBAAqBD,OAG3BD,EAAMX,MAAQmB,EAAkBK,EAASD,EACzCZ,EAAMI,eAAiBD,EAAcU,EAAOvF,OAC5C0E,EAAMM,aAAeH,EAAcU,EAAOvF,OAE9C,IAAIkG,EAAUxB,EAAMX,MACpBjD,KAAKU,WAAW0E,GAChBpF,KAAKiB,WAAWiD,aAAeD,EAAYjE,KAAKC,KAAK6B,UAG7DnC,EAAUC,UAAU0C,4BAA8B,SAAUnE,GACxD,GAAK6B,KAAKC,KAAKqC,4BAAf,CAEA,IAEI+C,EAAMlH,EAAEkH,IACZ,GAHgB,CAAC,IAAK,IAAK,IAAK,IAAK,IAAM,KAG5BC,SAASD,IAFP,CAAC,IAAK,IAAK,IAAK,IAAK,IAAM,KAEAC,SAASD,GAGrD,OAAQA,GACJ,IAAK,IACL,IAAK,IACDrF,KAAKuF,eAAeF,GACpB,MACJ,IAAK,IACL,IAAK,IACDrF,KAAKuF,eAAeF,GACpB,MACJ,IAAK,IACL,IAAK,IACDrF,KAAKuF,eAAeF,GACpB,MACJ,IAAK,IACL,IAAK,IAGL,IAAK,IAGL,IAAK,IACDrF,KAAKuF,eAAeF,MAIhC1F,EAAUC,UAAU2B,cAAgB,WAChCvB,KAAK6C,WAAa7C,KAAKlB,KAAK8F,MAAM,MAAM1F,OACpCc,KAAKC,KAAK+B,aACVhC,KAAK2C,0BAGbhD,EAAUC,UAAU2C,yBAA2B,SAAUpE,GACrD,GAAK6B,KAAKC,KAAKsC,0BAEG,KAAdpE,EAAEuF,QAAN,CAGAvF,EAAEwF,iBACF,IAAIC,EAAQ5D,KAAKiB,WACb8C,EAAcH,EAAMI,eACpBC,EAAYL,EAAMM,aAClBC,EAAWP,EAAMX,MACjBmB,EAAkBD,EAASE,OAAO,EAAGN,GACrCS,EAAiBL,EAASI,UAAUN,GACpCuB,EAAYrB,EAASsB,YAAY,KAAM1B,EAAc,GACrD2B,EAAYF,EAAYrB,EAASwB,MAAMH,EAAY,GAAGI,OAAO,UAC7DnB,EAAsBe,EAAZE,EAA0BA,EAAYF,EAAa,EAC7DJ,EAAUhB,EAAkB,KAAO,IAAIM,OAAOD,GAAUD,EAC5DZ,EAAMX,MAAQmC,EACdxB,EAAMI,eAAiBD,EAAcU,EAAS,EAC9Cb,EAAMM,aAAeH,EAAcU,EAAS,EAC5CzE,KAAKU,WAAWkD,EAAMX,SAE1BtD,EAAUC,UAAU2F,eAAiB,SAAUM,GAC3C,IAAI7B,EAAiBhE,KAAKiB,WAAW+C,eACjCE,EAAelE,KAAKiB,WAAWiD,aACnC,GAAKlE,KAAK8F,cAAcD,GAgBnB,CACD,IAAIE,EAAW/F,KAAKlB,KAAKuF,OAAOH,EAAc,KAAO2B,EACjDG,EAAkBD,EAAW7B,EAAe,EAAIA,EAChD+B,GAAaF,GAAY,CAAC,IAAM,KAAKT,SAASO,GAAQA,EAAO,GAC7DT,EAAU,GAAKpF,KAAKlB,KAAKyF,UAAU,EAAGP,GAAkBiC,EAAYjG,KAAKlB,KAAKyF,UAAUyB,GAC5FhG,KAAKU,WAAW0E,GAChBpF,KAAKiB,WAAWiD,eAAiBlE,KAAKiB,WAAW+C,mBAtBtB,CAC3B,IAAIiC,EAAYJ,EAChB,OAAQA,GACJ,IAAK,IACDI,EAAYC,OAAOC,aAAaN,EAAKO,aAAe,GACpD,MACJ,IAAK,IACL,IAAK,IACL,IAAK,IACDH,EAAYC,OAAOC,aAAaN,EAAKO,aAAe,GAG5D,IAAIC,EAAgBrG,KAAKlB,KAAKyF,UAAUP,EAAgBE,GACpDkB,EAAU,GAAKpF,KAAKlB,KAAKyF,UAAU,EAAGP,GAAkBqC,EAAgBJ,EAAYjG,KAAKlB,KAAKyF,UAAUL,GAC5GlE,KAAKU,WAAW0E,GAUpBpF,KAAKiB,WAAWiD,aAAeF,GAEnCrE,EAAUC,UAAUkG,cAAgB,SAAUD,GAC1C,IAAI7B,EAAiBhE,KAAKiB,WAAW+C,eACjCE,EAAelE,KAAKiB,WAAWiD,aAC/BoC,EAAyD,EAA1CC,KAAKC,IAAItC,EAAeF,GAC3C,MAAO,CAAC,IAAK,IAAK,IAAK,KAAKsB,SAASO,IAAU,CAAC,IAAM,KAAKP,SAASO,KAAUS,GAElF3G,EAAUC,UAAUc,WAAa,SAAU0E,GACvCpF,KAAKlB,KAAOsG,EACZpF,KAAKiB,WAAWgC,MAAQmC,EACxBpF,KAAKmB,OAAOP,UAAYnB,EAAcyD,WAAWkC,GACjDpF,KAAKmD,YACLnD,KAAKuB,gBACL6B,WAAWpD,KAAKqD,UAAUoD,KAAKzG,MAAO,IAE1CL,EAAUC,UAAU8G,eAAiB,SAAUC,GAC3C,IAAIC,EAAc5G,KAAKC,KAAKmB,SAC5BpB,KAAKmB,OAAOJ,UAAU8F,OAAO,YAAcD,GAC3C5G,KAAKmB,OAAOJ,UAAUC,IAAI,YAAc2F,GACxC3G,KAAKC,KAAKmB,SAAWuF,EACrB3G,KAAKmD,aAETxD,EAAUC,UAAUkH,YAAc,SAAUC,EAAMC,GAC9CtH,EAAMuH,UAAUF,GAAQC,GAE5BrH,EAAUC,UAAUa,gBAAkB,WAClCT,KAAKU,WAAWV,KAAKlB,OAEzBa,EAAUC,UAAUuD,UAAY,WAC5BzD,EAAMwH,iBAAiBlH,KAAKmB,QAAQ,IAExCxB,EAAUC,UAAUuH,SAAW,SAAUC,GACrC,GAAIA,GAA2C,sBAA/B,GAAGC,SAASpI,KAAKmI,GAC7B,MAAMvI,MAAM,+CAEhBmB,KAAKsH,eAAiBF,GAE1BzH,EAAUC,UAAU2H,QAAU,WAC1B,OAAOvH,KAAKlB,MAEhBa,EAAUC,UAAUyD,UAAY,WACxBrD,KAAKsH,gBACLtH,KAAKsH,eAAetH,KAAKlB,OAGjCa,EAAUC,UAAU8C,mBAAqB,WACrC1C,KAAKiB,WAAWuB,aAAa,YAAY,IAE7C7C,EAAUC,UAAU4H,oBAAsB,WACtCxH,KAAKiB,WAAWwG,gBAAgB,aAE7B9H,GAvWP,SAASA,EAAU+H,EAAmBzH,GAClC,IAAKyH,EAGD,MAAM7I,MAAM,uEAEhB,IAAKoB,EAGD,MAAMpB,MAAM,sEAEhB,GAAI6I,EAAkBC,SAElB3H,KAAKW,WAAa+G,MAEjB,CAED,IAAI/G,EAAagB,SAASiG,cAAcF,GAGpC/G,IACAX,KAAKW,WAAaA,GAG1BX,KAAKC,KAAOA,EACZD,KAAKH,cAgVbb,EAAiB,QAAIW,GAEnB,CAACkI,kBAAkB,EAAEC,oBAAoB,EAAEC,yBAAyB,EAAEC,sBAAsB,EAAEC,QAAU,KAAKC,EAAE,CAAC,SAASxJ,EAAQU,EAAOJ,GAC1I,aACAA,EAAQK,YAAa,EACrB,IAAIG,EAAkBd,EAAQ,mBAE1ByJ,EAAc,2EACdC,EAFiB1J,EAAQ,yBAED2J,YAAY,cAAe,QAAW7I,EAAgB8I,iBAAmB,OACjGC,EAAoB,OACxBvJ,EAAQe,UAAY,iWAAmWqI,EAAQ,0CAA4CD,EAAc,uMAAyMI,EAAoB,0EAA4EJ,EAAc,wHAA0H3I,EAAgBgJ,UAAY,uBAAyBhJ,EAAgBiJ,YAAc,gQAAkQF,EAAoB,iBAAmBA,EAAoB,kIAAoI/I,EAAgBiJ,YAAc,sJAAwJjJ,EAAgBiJ,YAAc,6GAA+GF,EAAoB,kNAAoNA,EAAoB,iJAAmJA,EAAoB,uEAElmE,CAACG,wBAAwB,EAAEC,kBAAkB,IAAIC,EAAE,CAAC,SAASlK,EAAQU,EAAOJ,GAC9E,aACAA,EAAQK,YAAa,EAgBrBL,EAAQc,UAfR,SAAmB+I,EAAKC,EAAWC,GAC/B,IAAIC,EAASF,GAAa,kBACtBG,EAASF,GAAUpH,SAASuH,KAChC,IAAKL,EACD,OAAO,EAEX,GAAIlH,SAASwH,eAAeH,GACxB,OAAO,EAEX,IAAI1F,EAAQ3B,SAASb,cAAc,SAInC,OAHAwC,EAAM1C,UAAYiI,EAClBvF,EAAM8F,GAAKJ,EACXC,EAAOrH,YAAY0B,IACZ,IAIT,IAAI+F,EAAE,CAAC,SAAS3K,EAAQU,EAAOJ,GACjC,aACAA,EAAQK,YAAa,EACrBL,EAAQsJ,iBAAmB,OAC3BtJ,EAAQyJ,YAAc,OACtBzJ,EAAQwJ,UAAY,OACpBxJ,EAAQyD,gBAAkB,iCAAmCzD,EAAQsJ,iBAAmB,8pBAEtF,IAAIgB,EAAE,CAAC,SAAS5K,EAAQU,EAAOJ,GACjC,aAYA,SAASuK,EAAYC,GAMjB,OALAA,EAAcA,EACT5E,MAAM,KACN6E,OAAO,SAAUC,GAAQ,QAASA,IAClCC,IAAI,SAAUD,GAAQ,OAAOA,EAAK,GAAGE,cAAgBF,EAAKrF,OAAO,KACjEc,KAAK,KACS,GAAG0E,cAAgBL,EAAYnF,OAAO,GAjB7DrF,EAAQK,YAAa,EAUrBL,EAAQqJ,YATR,SAAqByB,EAAU7G,GAC3B,MAAmB,oBAAR8G,IACAA,IAAIC,SAASF,EAAU7G,GAEV,oBAAbtB,UAGJ4H,EAAYO,KAAanI,SAASsI,KAAK3G,OAWlDtE,EAAQuK,YAAcA,GAEpB,IAAIW,EAAE,CAAC,SAASxL,EAAQU,EAAOJ,GACjC,aACAA,EAAQK,YAAa,EACrB,IAAI8K,EAAY,CACZC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,UAOT3L,EAAQkE,WALR,SAAoB0H,GAChB,OAAO1E,OAAO0E,GAAQ3F,QAAQ,cAAe,SAAU4F,GACnD,OAAOV,EAAUU,OAKvB,IAAIC,EAAE,CAAC,SAASpM,QAAQU,OAAOJ,SACjC,aACA,IAAI+L,UAAa/K,MAAQA,KAAK+K,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAWD,EAANA,GAAUE,SAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUtI,GAAS,IAAMuI,EAAKL,EAAUM,KAAKxI,IAAW,MAAO9E,GAAKmN,EAAOnN,IACpF,SAASuN,EAASzI,GAAS,IAAMuI,EAAKL,EAAiB,MAAElI,IAAW,MAAO9E,GAAKmN,EAAOnN,IACvF,SAASqN,EAAKG,GAAUA,EAAOC,KAAOP,EAAQM,EAAO1I,OAAS,IAAIiI,EAAE,SAAUG,GAAWA,EAAQM,EAAO1I,SAAW4I,KAAKN,EAAWG,GACnIF,GAAML,EAAYA,EAAUW,MAAMd,EAASC,GAAc,KAAKQ,WAGlEM,YAAe/L,MAAQA,KAAK+L,aAAgB,SAAUf,EAASf,GAC/D,IAAsGzL,EAAGwN,EAAG3N,EAAG4N,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAP/N,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOgO,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAER,KAAMc,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BT,EAAES,OAAOC,UAAY,WAAa,OAAO3M,OAAUiM,EACvJ,SAASM,EAAKnO,GAAK,OAAO,SAAUwO,GAAK,OACzC,SAAcC,GACV,GAAIrO,EAAG,MAAM,IAAIsO,UAAU,mCAC3B,KAAOZ,GAAG,IACN,GAAI1N,EAAI,EAAGwN,IAAM3N,EAAY,EAARwO,EAAG,GAASb,EAAU,OAAIa,EAAG,GAAKb,EAAS,SAAO3N,EAAI2N,EAAU,SAAM3N,EAAEY,KAAK+M,GAAI,GAAKA,EAAEP,SAAWpN,EAAIA,EAAEY,KAAK+M,EAAGa,EAAG,KAAKjB,KAAM,OAAOvN,EAE3J,OADI2N,EAAI,EAAG3N,IAAGwO,EAAK,CAAS,EAARA,EAAG,GAAQxO,EAAE4E,QACzB4J,EAAG,IACP,KAAK,EAAG,KAAK,EAAGxO,EAAIwO,EAAI,MACxB,KAAK,EAAc,OAAXX,EAAEC,QAAgB,CAAElJ,MAAO4J,EAAG,GAAIjB,MAAM,GAChD,KAAK,EAAGM,EAAEC,QAASH,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKX,EAAEI,IAAIzH,MAAOqH,EAAEG,KAAKxH,MAAO,SACxC,QACI,KAAkBxG,EAAe,GAA3BA,EAAI6N,EAAEG,MAAYnN,QAAcb,EAAEA,EAAEa,OAAS,MAAkB,IAAV2N,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEX,EAAI,EAAG,SACjG,GAAc,IAAVW,EAAG,MAAcxO,GAAMwO,EAAG,GAAKxO,EAAE,IAAMwO,EAAG,GAAKxO,EAAE,IAAM,CAAE6N,EAAEC,MAAQU,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYX,EAAEC,MAAQ9N,EAAE,GAAI,CAAE6N,EAAEC,MAAQ9N,EAAE,GAAIA,EAAIwO,EAAI,MAC7D,GAAIxO,GAAK6N,EAAEC,MAAQ9N,EAAE,GAAI,CAAE6N,EAAEC,MAAQ9N,EAAE,GAAI6N,EAAEI,IAAIS,KAAKF,GAAK,MACvDxO,EAAE,IAAI6N,EAAEI,IAAIzH,MAChBqH,EAAEG,KAAKxH,MAAO,SAEtBgI,EAAK5C,EAAKhL,KAAK+L,EAASkB,GAC1B,MAAO/N,GAAK0O,EAAK,CAAC,EAAG1O,GAAI6N,EAAI,EAAK,QAAUxN,EAAIH,EAAI,EACtD,GAAY,EAARwO,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE5J,MAAO4J,EAAG,GAAKA,EAAG,QAAK,EAAQjB,MAAM,GArB9BJ,CAAK,CAACpN,EAAGwO,OAwBzD9J,MAAQ9C,KACZhB,QAAQK,YAAa,EACrB,IAAIqC,QAAU,SAAUsL,EAAShG,GAC7B,OAAOrF,SAASb,cAAckM,EAAShG,IAEvCiG,OAAS,SAAUvL,EAASwL,GAC5B,OAAOxL,EAAQE,YAAYsL,IAE3BC,UAAY,SAAUC,GAAS,OAAOrC,UAAUjI,WAAO,OAAQ,EAAQ,WAAc,OAAOiJ,YAAY/L,KAAM,SAAUqN,GACxH,OAAQA,EAAGlB,OACP,KAAK,EAAG,MAAO,CAAC,EAAaf,QAAQkC,IAAIF,EAAMzD,IAAI,SAAUiD,GAAK,OAAOW,MAAMX,GAAGf,KAAK,SAAU2B,GAAO,OAAOA,EAAIC,aACnH,KAAK,EAAG,MAAO,CAAC,EAAcJ,EAAGjB,cAGrCsB,KAAO,SAAUC,EAAKC,GAKtB,YAJYC,IAARD,IACAA,EAAMD,EACNA,EAAM,GAEHA,EAAMpH,KAAKuH,UAAYF,EAAMD,IAEpCI,UAAYrP,QAAQ,WACpBsP,YAActP,QAAQ,aACtBuP,YAAcvP,QAAQ,sBACtBwP,cAAgBxP,QAAQ,eACxByP,QAAUzP,QAAQ,SAClB0P,IAAM1P,QAAQ,4BACd2P,IAAMC,QAAQD,IAAKE,MAAQD,QAAQC,MAAOC,MAAQF,QAAQE,MAC9DA,QACA,IAAIC,cAAgB,SAAUC,EAAIC,EAAIC,GAMlC,IALA,IAAIC,EAAed,UAAUe,kBAAkBJ,EAAI,CAACC,EAAIC,IAEpDG,EAAoB,IAAIC,aAAaC,MACrCC,EAAiB,IAAIC,MAEhB5Q,EAAI,EAAGA,EAJI,MAIiBA,EAAG,CACpC,IAAI6Q,EAAM,IAAIJ,aAAaD,EAAkBM,OAAY,GAAJ9Q,EAAS,EAAG,IACjEwP,UAAUuB,GAAGC,YAAY,CAAC7B,MAHtB,GAAA,IAGmCA,MAHnC,GAAA,IAGgDA,MAHhD,GAAA,KAG8D0B,GAClErB,UAAUuB,GAAGE,QAAQJ,EAAK1B,KAAK,EAAa,EAAVnH,KAAKkJ,IAASL,GAChDrB,UAAUuB,GAAGI,QAAQN,EAAK1B,KAAK,EAAa,EAAVnH,KAAKkJ,IAASL,GAChDF,EAAenC,KAAKW,KAAK,GAAIA,KAAK,GAAIA,KAAK,IAE/C,IAAIiC,EAAa5B,UAAU6B,WAAWC,sBACtCC,OAAOC,OAAOJ,EAAY,CACtBK,cAAe,CACXC,cAAe,GACfC,KAAMnB,EACNoB,QAAS,GAEbC,cAAe,CACXH,cAAe,EACfC,KAAMhB,EACNiB,QAAS,KAGjB,IAAIE,EAActC,UAAUuC,2BAA2B5B,EAAIiB,GACvDY,EAAoBxC,UAAUyC,sBAAsB9B,EAAIG,EAAcwB,GAC1E,OAAO,SAAUI,GACbA,GAAc,IACd,IAAIC,EAAQC,OAAOC,iBACfC,EAASnC,EAAGmC,OAChBA,EAAOC,MAAQD,EAAOE,YAAcL,EACpCG,EAAOG,OAASH,EAAOI,aAAeP,EACtChC,EAAGwC,SAAS,EAAG,EAAGxC,EAAGmC,OAAOC,MAAOpC,EAAGmC,OAAOG,QAC7CtC,EAAGyC,OAAOzC,EAAG0C,YAEb1C,EAAGF,MAAME,EAAG2C,iBAAmB3C,EAAG4C,kBAElC,IAAIC,EAAM,GAAKhL,KAAKkJ,GAAK,IACrB+B,EAAS9C,EAAGmC,OAAOE,YAAcrC,EAAGmC,OAAOI,aAG3CQ,EAAa1D,UAAUuB,GAAGoC,YAAYH,EAAKC,EAFnC,GACD,KAIPG,EAAe,GAAPlB,EACRmB,EAAM,CAFG,GAEFrL,KAAKsL,IAAIF,GAAwC,GAAvBpL,KAAKsL,IAAY,GAARF,GAFjC,GAEmDpL,KAAKuL,IAAIH,IAGrEI,EAAShE,UAAUuB,GAAG0C,OAAOJ,EAFpB,CAAC,EAAG,EAAG,GACX,CAAC,EAAG,EAAG,IAEZK,EAAOlE,UAAUuB,GAAG4C,QAAQH,GAC5BI,EAAW,CACXC,gBAAiB,CAAC,EAAG,GAAI,IACzBC,aAAc,CAAC,EAAG,EAAG,EAAG,GACxBC,UAAW,CAAC,EAAG,EAAG,EAAG,GACrBC,WAAY,CAAC,EAAG,EAAG,EAAG,GACtBC,YAAa,GACbC,iBAAkB,EAClBC,iBAAkB3E,UAAUuB,GAAGqD,SAASlB,EAAYQ,GACpDW,cAAeb,GAEnBrD,EAAGmE,WAAWhE,EAAaiE,SAC3B/E,UAAUgF,wBAAwBrE,EAAIG,EAAc0B,GACpDxC,UAAUiF,YAAYnE,EAAcsD,GACpCpE,UAAUkF,eAAevE,EAAI6B,EAAmB7B,EAAGwE,UAAW3C,EAAkB4C,YAAa,EA/D7E,OAkEpBC,YAgCAA,GAAWxT,UAAUyT,MAAQ,WAEzB,OADAC,sBAAsBtT,KAAKuT,MACpBvT,MAGXoT,GAAWxT,UAAUoB,IAAM,SAAUoG,GAEjC,OADApH,KAAKwT,aAAazG,KAAK3F,GAChBpH,MAEJoT,IAxCP,SAASA,GAAWK,GAChB,IAAI3Q,EAAQ9C,KACZA,KAAKuT,KAAO,SAAU9C,GAElB,GADAA,GAAQ,IACJ3N,EAAM2Q,UAAY,GAAK3Q,EAAM4Q,YAAc5Q,EAAM2Q,UAAW,CAE5D,GADAH,sBAAsBxQ,EAAMyQ,MACJ,EAApBzQ,EAAM4Q,YACN,IACI5Q,EAAM0Q,aAAaG,QAAQ,SAAU/G,GAAK,OAAO7B,UAAUjI,OAAO,OAAQ,EAAQ,WAAc,OAAOiJ,YAAY/L,KAAM,SAAUqN,GAC/H,OAAQA,EAAGlB,OACP,KAAK,EAAG,MAAO,CAAC,EAAaS,EAAE6D,IAC/B,KAAK,EAAG,MAAO,CAAC,EAAcpD,EAAGjB,eAI7C,MAAOwH,GACHrF,MAAMqF,GAGd9Q,EAAM4Q,aAAe,EACrB5Q,EAAM+Q,UAAYpD,IAG1BzQ,KAAKwT,aAAe,GACpBxT,KAAK0T,YAAc,EACnB1T,KAAKyT,WAAa,EAClBzT,KAAK6T,UAAY,EACQ,iBAAdJ,GAAuC,GAAbA,IACjCzT,KAAKyT,UAAYA,GAc7B,IAAIK,SASAA,GAAQlU,UAAU0D,MAAQ,SAAUuF,GAEhC,OADA7I,KAAK0B,QAAQqS,UAAY/F,YAAY1K,MAAMuF,GACpC7I,MAEX8T,GAAQlU,UAAUoU,MAAQ,SAAUtS,GAKhC,OAJIA,aAAmBoS,GACnB9T,KAAK0B,QAAQE,YAAYF,EAAQA,SAEjC1B,KAAK0B,QAAQE,YAAYF,GACtB1B,MAEX8T,GAAQlU,UAAUqU,QAAU,SAAUxG,GAElC,OADAzN,KAAK0B,QAAQwS,YAAczG,EACpBzN,MAEJ8T,IAvBP,SAASA,GAAQ9G,EAAShG,GAClBgG,aAAmBmH,YACnBnU,KAAK0B,QAAUsL,EAGfhN,KAAK0B,QAAUC,SAASb,cAAckM,EAAShG,GAoB3D,IAAIoN,KACA,SAAcC,EAAGrI,GACbhM,KAAKqU,EAAI,EACTrU,KAAKgM,EAAI,EACThM,KAAKqU,EAAiB,iBAANA,EAAiBA,EAAI,EACrCrU,KAAKgM,EAAiB,iBAANA,EAAiBA,EAAI,GAIzCsI,UACA,SAAmB1V,EAAG2V,EAAG9V,EAAG+V,EAAGrW,EAAGK,GAC9BwB,KAAKpB,EAAI,EACToB,KAAKuU,EAAI,EACTvU,KAAKvB,EAAI,EACTuB,KAAKwU,EAAI,EACTxU,KAAK7B,EAAI,EACT6B,KAAKxB,EAAI,EACTwB,KAAKpB,EAAiB,iBAANA,EAAiBA,EAAI,EACrCoB,KAAKuU,EAAiB,iBAANA,EAAiBA,EAAI,EACrCvU,KAAKvB,EAAiB,iBAANA,EAAiBA,EAAI,EACrCuB,KAAKwU,EAAiB,iBAANA,EAAiBA,EAAI,EACrCxU,KAAK7B,EAAiB,iBAANA,EAAiBA,EAAI,EACrC6B,KAAKxB,EAAiB,iBAANA,EAAiBA,EAAI,GAIzCmU,SAAW,SAAU8B,EAAIC,GACzB,OAAO,IAAIJ,UAAUG,EAAG7V,EAAI8V,EAAG9V,EAAI6V,EAAGhW,EAAIiW,EAAGH,EAAGE,EAAGF,EAAIG,EAAG9V,EAAI6V,EAAGD,EAAIE,EAAGH,EAAGE,EAAG7V,EAAI8V,EAAGjW,EAAIgW,EAAGhW,EAAIiW,EAAGF,EAAGC,EAAGF,EAAIG,EAAGjW,EAAIgW,EAAGD,EAAIE,EAAGF,EAAGC,EAAG7V,EAAI8V,EAAGvW,EAAIsW,EAAGhW,EAAIiW,EAAGlW,EAAIiW,EAAGtW,EAAGsW,EAAGF,EAAIG,EAAGvW,EAAIsW,EAAGD,EAAIE,EAAGlW,EAAIiW,EAAGjW,IAElMmW,MAAQ,SAAUC,EAAIC,GAGtB,YAFW,IAAPD,IAAiBA,EAAK,QACf,IAAPC,IAAiBA,EAAK,GACnB,IAAIP,UAAUM,EAAI,EAAG,EAAGC,IAE/BC,OAAS,SAAUC,QACL,IAAVA,IAAoBA,EAAQ,GAChC,IAAI1H,EAAK,CAAC9G,KAAKuL,IAAIiD,GAAQxO,KAAKsL,IAAIkD,IAASjD,EAAMzE,EAAG,GAAIwE,EAAMxE,EAAG,GACnE,OAAO,IAAIiH,UAAUxC,EAAKD,GAAMA,EAAKC,IAErCkD,UAAY,SAAUC,EAAIC,GAE1B,YADW,IAAPD,IAAiBA,EAAK,GACnB,IAAIX,UAAU,EAAG,EAAG,EAAG,EAAGW,EAAIC,IAErCC,MAAQ,SAAUC,EAAKC,GACvB,OAAO,IAAIf,UAAU,EAAGe,EAAKD,IAE7BE,YAAc,WAEd,IADA,IAAIC,EAAW,GACNC,EAAK,EAAGA,EAAKC,UAAUvW,OAAQsW,IACpCD,EAASC,GAAMC,UAAUD,GAE7B,OAAQD,EAASrW,QACb,KAAK,EAAG,MAAM,IAAIL,MAAM,wBACxB,KAAK,EAAG,OAAO0W,EAAS,GACxB,KAAK,EAAG,OAAO5C,SAAS4C,EAAS,GAAIA,EAAS,IAC9C,QAAS,OAAOA,EAASG,OAAO,SAAU9W,EAAGH,EAAGF,GAAK,OAAa,IAANA,EAAUE,EAAIkU,SAAS/T,EAAGH,OAG1FkX,SAAW,SAAUC,EAASC,EAAMtS,EAAWD,GAE/C,IAAK,IAAI+B,KADTuQ,EAAQE,OACQxS,EACA,SAAR+B,IACAuQ,EAAQvQ,GAAO/B,EAAM+B,IAG7B,IAAIzG,EAAI2E,EAAU3E,EAAG2V,EAAIhR,EAAUgR,EAAG9V,EAAI8E,EAAU9E,EAAG+V,EAAIjR,EAAUiR,EAAGrW,EAAIoF,EAAUpF,EAAGK,EAAI+E,EAAU/E,EACvGoX,EAAQrS,UAAU3E,EAAG2V,EAAG9V,EAAG+V,EAAGrW,EAAGK,GACjCoX,EAAQG,YACU,EAAdF,EAAK3W,SACL0W,EAAQI,OAAOH,EAAK,GAAGxB,EAAGwB,EAAK,GAAG7J,GAClC6J,EAAKlC,QAAQ,SAAU/G,GAAKgJ,EAAQK,OAAOrJ,EAAEyH,EAAGzH,EAAEZ,KAClD4J,EAAQK,OAAOJ,EAAK,GAAGxB,EAAGwB,EAAK,GAAG7J,IAEtC4J,EAAQM,SACJ5S,IAAwB,IAAfA,EAAM6S,MACfP,EAAQO,OAEZP,EAAQQ,WAERC,UAAY,WAEZ,IADA,IAAIC,EAAQ,GACHd,EAAK,EAAGA,EAAKC,UAAUvW,OAAQsW,IACpCc,EAAMd,GAAMC,UAAUD,GAE1B,OAAOc,EAAMZ,OAAO,SAAU9W,EAAGH,EAAGF,GAOhC,OANIA,EAAI,GAAK,EACTK,EAAEmO,KAAK,IAAIqH,KAAK3V,EAAG,IAGnBG,EAAEA,EAAEM,OAAS,GAAG8M,EAAIvN,EAEjBG,GACR,IAAIuQ,QAGPoH,cAAgB,WAAc,OAAOxL,UAAUjI,WAAO,OAAQ,EAAQ,WACtE,IAAI+N,OAAQ2F,IAAK/C,UAAWgD,YAAa5E,IAAKC,IAAK4E,MAAOhS,OAAQiS,oBAAqBC,KAAMC,WAAYC,WAAYC,YAAazX,SAAU0X,OAAQC,MAAOC,WAAYC,UAAWC,mBAAoBC,iBAAkBC,oBAAqBC,WAAYC,QAASC,WAClQ,OAAO1L,YAAY/L,KAAM,SAAUqN,IAC/B,OAAQA,GAAGlB,OACP,KAAK,EAmCD,OAlCA0E,OAAS,IAAIiD,QAAQ,UAAUxQ,MAAM,CAAEwN,MAAO,OAAQE,OAAQ,SAAUtP,QACxE8U,IAAM3F,OAAO6G,WAAW,MACxBjE,WAAa,EACbgD,YAAc,IAAIrD,WAAWK,WAC7B5B,IAAMtL,KAAKsL,IAAKC,IAAMvL,KAAKuL,IAAK4E,MAAQnQ,KAAKmQ,MAC7ChS,OAAS,SAAUiT,GAAU,OAAO,SAAUtE,EAAOuE,GACjD,GAAIA,EAAMvE,EACN,MAAO,GAIX,IAHA,IACI1H,EAAS,GACTd,IAAKgN,EAFGtR,KAAKsR,OAEFxE,EAAQsE,GAAU,GAAKA,EAC/B9M,EAAI+M,GACPjM,EAAOoB,KAAKlC,GACZA,GAAK8M,EAET,OAAOhM,IAEXgL,oBAAsB,SAAUmB,EAAKC,GACjC,IAEIC,EAAM,CAAE3D,EAAGyD,EAAIzD,EAAI0D,EAAS1D,EAAGrI,EAAG8L,EAAI9L,EAAI+L,EAAS/L,GACnDiM,EAAU,EAAVA,EAAgB,EAEpB,OADYvB,MAAUuB,EAAmBD,EAAIhM,EAAjBiM,EAAMD,EAAI3D,EAAe4D,EAAYD,EAAI3D,EAAV4D,EAAaD,EAAIhM,IAGhF4K,UAAO/I,EACPgJ,WAAa,IAAI/C,QAAQ,OAAOxQ,MAAM,CAAE4U,YAAa,GAAIpH,MAAO,OAAQE,OAAQ,MAAOtP,QACvFoV,WAAa,IAAIhD,QAAQ,OAAOxQ,MAAM,CAAEwN,MAAO,IAAKE,OAAQ,MAAOgD,MAAMnD,QACzEkG,YAAc,IAAIjD,QAAQ,OAC1B,IAAIA,QAAQnS,SAASsI,MAAM3G,MAAM,CAAE6U,SAAU,SAAUC,QAAS,OAAQC,SAAU,SAC7ErE,MAAM6C,YAAY7C,MAAM8C,YAAY9C,MAAM+C,aAC/CzX,SAAW,IAAI2O,YAAqB,QAAE4I,WAAY,CAAEzV,SAAU,OAC9D4V,OAAS,+oBACTC,MAAQ,OACD,CAAC,EAAa/I,cAAcoK,QAAQrB,QAC/C,KAAK,EAyHD,OAxHAC,WAAa7J,GAAGjB,OAChB9M,SAASoB,WAAWwW,YAAcF,QAClCG,UAAY,SAAUrY,MAClB,IAAIyZ,aAAeC,KAAK1Z,MACxB8X,KAAO,WAAc,OAAO2B,eAEhCpB,UAAU7X,SAASiI,WACnB6P,mBAAqB,IAAItD,QAAQ,UAAUG,QAAQ,aAAavS,QAChE0V,mBAAmBrU,iBAAiB,QAAS,WAAc,OAAOzD,SAASoB,WAAWsW,UACtFK,iBAAmB,IAAIvD,QAAQ,UAAUG,QAAQ,aAAavS,QAC9D2V,iBAAiBtU,iBAAiB,QAAS,WAAc,OAAOoU,UAAU7X,SAASiI,aACnF+P,oBAAsB,IAAIxD,QAAQ,UAAUG,QAAQ,gBAAgBvS,QACpE4V,oBAAoBvU,iBAAiB,QAAS,WAAc,OAAOyU,QAAU,KAC7ET,YAAY/C,MAAMqD,kBAAkBrD,MAAMoD,oBAAoBpD,MAAMsD,qBACpEC,WAAa,SAAUzY,GAAYA,GAC/BoP,cAAcuK,QAAQxB,MAAOnY,IAEjC6C,SAASoB,iBAAiB,UAAW,SAAU5E,IAC7B,UAAVA,EAAEkH,MAAgC,IAAblH,EAAEua,QACb,MAAVva,EAAEkH,MAA4B,IAAblH,EAAEua,QACT,MAAVva,EAAEkH,MAA6B,IAAdlH,EAAEwa,SACT,QAAVxa,EAAEkH,MACFlH,EAAEwF,mBAGVhC,SAASoB,iBAAiB,QAAS,SAAU5E,GACzC,GAAc,UAAVA,EAAEkH,MAAgC,IAAblH,EAAEua,QACb,MAAVva,EAAEkH,MAA4B,IAAblH,EAAEua,QACT,MAAVva,EAAEkH,MAA6B,IAAdlH,EAAEwa,QAAkB,CACrC,IAAIC,EAAStZ,SAASiI,UACT4P,UAAUyB,GACT,MAAVza,EAAEkH,MAA6B,IAAdlH,EAAEwa,UACnBpB,WAAWqB,GACXvK,IAAI,KAAM,IAAIwK,MAAOC,qBAAuB,8BAIxDrC,YAAYpD,QACZmE,QAAU,IAAIrI,MACdsI,WAAa,SAAUhH,GACnB,IAAIC,EAAQC,OAAOC,kBAAoB,EACnCE,EAAQD,OAAOC,MAAQD,OAAOE,YAAcL,EAC5CM,EAASH,OAAOG,OAASH,OAAOI,aAAeP,EAS/C8F,IAAIuC,UAAU,EAAG,EAAGlI,OAAOC,MAAOD,OAAOG,QACzCwF,IAAIxB,UAAUnE,OAAOC,MAAQ,EAAGD,OAAOG,OAAS,GAChDwF,IAAI7B,MAAM,GAAI,GAEd,IAAIqE,EAAe,CACfC,YAAa,OAAQC,UAAW,EAAIxI,GAEpCyI,EAAO5S,KAAK4S,KAEZC,EAAatI,EADF,GAEXzD,EAAK,EAAEyD,EAAQ,GAAIE,EAAS,EAAGF,EAAQ,EAAGE,EAAS,GAAIqI,EAAOhM,EAAG,GAAIiM,EAAOjM,EAAG,GAAIkM,EAAOlM,EAAG,GAAImM,EAAOnM,EAAG,GAC/G,IAAI8B,MAAMgK,EAAKM,MAAetD,KAAK,GAAGxM,IAAI,SAAUiD,EAAGrO,GAAK,OAAOA,IAAMoV,QAAQ,SAAU/G,GACvF,IAAIS,EAAK,CAACT,EAAIwM,EAAYxM,EAAIwM,GAAa/E,EAAIhH,EAAG,GAAIrB,EAAIqB,EAAG,GAC7DsI,SAASa,IAAKH,UAAUgD,EAAMrN,EAAGuN,EAAMvN,GAAI,IAAIsI,UAAa0E,GAC5DrD,SAASa,IAAKH,UAAUhC,EAAGiF,EAAMjF,EAAGmF,GAAO,IAAIlF,UAAa0E,GAC5DrD,SAASa,IAAKH,UAAUgD,GAAOrN,EAAGuN,GAAOvN,GAAI,IAAIsI,UAAa0E,GAC9DrD,SAASa,IAAKH,WAAWhC,EAAGiF,GAAOjF,EAAGmF,GAAO,IAAIlF,UAAa0E,KAGlErD,SAASa,IAAKH,UAAU,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,IAAI/B,UAAa,CAAE2E,YAAa,OAAQC,UAAW,EAAGQ,QAAS,UAI1G,IAAIC,EAAMlJ,EAENmJ,EAAOnD,YAAY5C,UAIfgG,EAAS,IAAMnJ,EACfoJ,EAAS9E,UAAU6E,EAAS/H,IAAIrB,GAAOoJ,EAAShI,IAAIpB,IAExDkF,SAASa,IAAKH,UAAU,EAAG,EAAG,EAAG,EAAG,EAAG,GAAIyD,EADxB,CAAEb,YAAa,OAAQC,UAAW,EAAGQ,QAAS,UAKjE,IACIK,EAAa,GAAPtJ,EACVkF,SAASa,IAAKH,UAFN,GAAA,GAAA,IAAA,IAAA,IAAA,IAAA,GAAA,IAE6CvB,OAAOiF,IAC5DpE,SAASa,IAAKH,UAHE2D,GAAAA,GAAAA,IAAAA,IAAAA,IAAAA,IAAAA,GAAAA,IAGqClF,OAAOiF,IAI5D,IAAIE,EAAiB,CAAEhB,YAAa,OAAQC,UAAW,GAKvDtC,OAAOsD,MAAMP,EAAKC,GAAMjG,QAAQ,SAAU/G,GAClCuC,MAAMgL,QAAQvN,GACdA,EAAE+G,QAAQ,SAAU1H,GAAK,OAAOuL,QAAQzK,KAAKd,KAG7CuL,QAAQzK,KAAKH,KAGrB4K,QAAUA,QACL/N,OAAO,SAAUmD,GAClB,IAAIkN,EAASlN,EAAE+M,EAAKC,GACpB,OAnEO,SAAUvF,EAAGrI,GAC5B,IAAIoO,EAAItJ,EAAQ,EAAGuJ,EAAIrJ,EAAS,EAC5B3D,EAAK,EAAE+M,EAAGA,GAAIC,EAAGA,GACrB,QADgChN,EAAG,GACpBgH,GAAKA,EAD0BhH,EAAG,IAAWA,EAAG,GACxBrB,GAAKA,EAD8BqB,EAAG,IAiE7DiN,CAAaR,EAAO3b,EAAG2b,EAAOtb,KAErCmL,IAAI,SAAUiD,GAEf,OAnBe,SAAUkN,EAAQS,QACpB,IAATA,IAAmBA,EAAO,GAC9B5E,SAASa,IAAKH,WAAW,EAAIkE,GAAOA,EAAM,EAAG,EAAIA,EAAM,EAAIA,GAAOA,GAAOjF,YAAYwE,GAASG,GAgB9FO,CAAa5N,EAAE+M,EAAKC,IACbhN,KAKvB6J,YAAYzV,IAAIyW,YACT,CAAC,SAIxBlB,gBACApI,QAAQsM,SAASC,WAAWtM,KAC5B,IAAIuM,KAAO,IAAIxM,QAAQsM,SAAS,CAC5BG,mBAAmB,EACnBC,MAAO,CACHC,WAAY,kBAGhBC,aAAe,IAAIjH,QAAQ,OAAOxQ,MAAM,CACxC0X,SAAU,WACVC,KAAM,MAAOC,MAAO,MACpBC,IAAK,MAAOC,OAAQ,QACrB1Z,QACC2Z,eAAiB,IAAIvH,QAAQ,OAAOxQ,MAAM,CAC1C0X,SAAU,QACVlK,MAAO,OAAQE,OAAQ,OACvB8J,WAAY,mBACb9G,MAAM+G,cAAcrZ,QACvB,IAAIoS,QAAQnS,SAASsI,MAAM+J,MAAMqH,gBACjCV,KAAKW,KAAKP,cACVJ,KAAKY,GAAG,MAAO,SAAUlW,GACrBgJ,IAAIhJ,EAAKA,EAAImW,OAAO,GAAInW,EAAIe,WAAW,IACd,IAArBf,EAAIe,WAAW,IACfuU,KAAKc,MAAM,MAEfd,KAAKc,MAAMpW,KAEfsL,OAAO5N,iBAAiB,SAAU,WAAc,OAAO4X,KAAKvM,QAC5D,IAAIsN,WAAa,+DACjB/K,OAAO5N,iBAAiB,OAAQ,WAC5B4X,KAAKvM,MACLuM,KAAKc,MAAMC,cAEf/K,OAAO5N,iBAAiB,WAAY,SAAU4Y,GACxB,MAAdA,EAAMtW,MACNgW,eAAeO,QAAUP,eAAeO,WAI9C,CAACC,qBAAqB,EAAEC,YAAc,EAAEC,UAAU,GAAGC,UAAY,GAAGC,MAAQ,GAAGC,2BAA2B,KAAKC,EAAE,CAAC,SAASzd,EAAQU,EAAOJ,IAC5I,SAAWod,GACX,aACA,IACQC,EADJC,EAAatc,MAAQA,KAAKsc,YACtBD,EAAgB,SAAU7H,EAAGD,GAI7B,OAHA8H,EAAgBvM,OAAOyM,gBAClB,CAAEC,UAAW,cAAgBrN,OAAS,SAAUqF,EAAGD,GAAKC,EAAEgI,UAAYjI,IACvE,SAAUC,EAAGD,GAAK,IAAK,IAAIxV,KAAKwV,EAAOA,EAAEkI,eAAe1d,KAAIyV,EAAEzV,GAAKwV,EAAExV,MACpDyV,EAAGD,IAErB,SAAUC,EAAGD,GAEhB,SAASmI,IAAO1c,KAAK2c,YAAcnI,EADnC6H,EAAc7H,EAAGD,GAEjBC,EAAE5U,UAAkB,OAAN2U,EAAazE,OAAO8M,OAAOrI,IAAMmI,EAAG9c,UAAY2U,EAAE3U,UAAW,IAAI8c,KAGvF5M,OAAO+M,eAAe7d,EAAS,aAAc,CAAEiE,OAAO,IAItD,IAAI6Z,EAAW,EAIf9d,EAAQ+d,UAAY,0BA2DpB,IA1DA,IAAIC,EAAmB,SACnBC,EAAY,OACZC,EAAqB,KACrBC,EAAgB,sCAChBC,EAAY,SAAUC,GAAK,MAAO,IAAMA,EAAExT,eAM1CyT,EAAa,CACbC,6BAA6B,EAC7BC,uBAAuB,EACvBC,sBAAsB,EACtBC,sBAAsB,EACtBC,YAAY,EACZC,kBAAkB,EAClBC,qBAAqB,EACrBC,gBAAgB,EAChBC,SAAW,EACXC,qBAAqB,EACrBC,iBAAiB,EACjBC,MAAQ,EACRC,aAAa,EACbC,iBAAiB,EACjBC,eAAe,EACfC,iBAAiB,EACjBC,cAAc,EACdC,eAAe,EACfC,aAAa,EACbC,eAAe,EACfC,mBAAmB,EACnBC,oBAAoB,EACpBC,qBAAqB,EACrBC,YAAY,EACZC,gBAAgB,EAChBC,iBAAiB,EACjBC,kBAAkB,EAClBC,cAAc,EACdC,eAAe,EACfC,SAAW,EACXC,OAAS,EACTC,SAAW,EACXC,YAAY,EACZC,QAAU,EACVC,WAAW,EACXC,MAAQ,EAERC,gBAAgB,EAChBC,iBAAiB,EACjBC,gBAAgB,EAChBC,oBAAoB,EACpBC,qBAAqB,EACrBC,qBAAqB,EACrBC,kBAAkB,EAClBC,gBAAgB,GAGX1K,EAAK,EAAGnI,EAAKyC,OAAOqQ,KAAK7C,GAAa9H,EAAKnI,EAAGnO,OAAQsW,IAE3D,IADA,IAAI1L,EAAWuD,EAAGmI,GACT4K,EAAK,EAAGC,EAAK,CAAC,WAAY,OAAQ,QAAS,MAAO,IAAKD,EAAKC,EAAGnhB,OAAQkhB,IAAM,CAElF9C,EADa+C,EAAGD,GACItW,IAAY,EAUxC,SAASwW,EAAUC,GACf,OAAOA,EACFtb,QAAQ+X,EAAkBI,GAC1BnY,QAAQgY,EAAW,QAM5B,SAASuD,EAAWC,GAGhB,IAFA,IAAIxd,EAAQ,KACRyd,EAAMD,EAAIvhB,OACPwhB,KACHzd,EAAiB,GAARA,EAAcwd,EAAIra,WAAWsa,GAC1C,OAAQzd,IAAU,GAAGoE,SAAS,IAMlC,SAASsZ,EAActb,EAAKpC,GACxB,MAAqB,iBAAVA,GAAgC,IAAVA,GAAgBqa,EAAWb,eAAepX,GAGpEA,EAAM,IAAMpC,EAFRoC,EAAM,IAAMpC,EAAQ,KAOnC,SAAS2d,EAAW3d,GAChB,OAAOA,EAAM4d,KAAK,SAAUjiB,EAAG2V,GAAK,OAAO3V,EAAE,GAAK2V,EAAE,GAAK,GAAK,IAKlE,SAASuM,EAAYC,EAAQC,GAKzB,IAJA,IAAIC,EAAa,GACbC,EAAe,GACfC,GAAW,EAEN3L,EAAK,EAAGnI,EAAKyC,OAAOqQ,KAAKY,GAASvL,EAAKnI,EAAGnO,OAAQsW,IAAM,CAC7D,IAAInQ,EAAMgI,EAAGmI,GACTvS,EAAQ8d,EAAO1b,GACfpC,MAAAA,IACIoC,IAAQrG,EAAQ+d,UAChBoE,GAAW,EAEW,iBAAVle,GAAuBkM,MAAMgL,QAAQlX,GAIjDge,EAAWlU,KAAK,CAACuT,EAAUjb,EAAI+b,QAASne,IAHxCie,EAAanU,KAAK,CAAC1H,EAAI+b,OAAQne,KAO3C,MAAO,CACHK,MAQR,SAA6B2d,GACzB,OAAOA,EAAWtX,IAAI,SAAU0D,GAC5B,IAAItG,EAAOsG,EAAG,GAAIpK,EAAQoK,EAAG,GAC7B,OAAK8B,MAAMgL,QAAQlX,GAEZA,EAAM0G,IAAI,SAAU0K,GAAK,OAAOsM,EAAc5Z,EAAMsN,KAAOlP,KAAK,KAD5Dwb,EAAc5Z,EAAM9D,KAEhCkC,KAAK,KAdGkc,CAAoBT,EAAWK,IACtCK,OAAQN,EAAkBE,EAAeN,EAAWM,GACpDC,SAAUA,GAiBlB,SAASI,EAAYC,EAAUzY,GAC3B,OAA+B,IAA3ByY,EAASC,QAAQ,KACV1Y,EAAS,IAAMyY,EACnBA,EAASvc,QAAQiY,EAAoBnU,GAKhD,SAAS2Y,EAAQF,EAAUT,EAAQY,EAAWC,EAAY7Y,GACtD,IAAIsE,EAAKyT,EAAYC,EAAqB,KAAbS,GAAkBle,EAAQ+J,EAAG/J,MAAOge,EAASjU,EAAGiU,OAAQH,EAAW9T,EAAG8T,SAC/FU,EAAMve,EACV,GAA+B,KAA3Bke,EAASpb,WAAW,GAAmB,CACvC,IAAI4N,EAAQ,CAAEwN,SAAUA,EAAUT,OAAQ,GAAIe,MAAO,GAAIxe,MAAOyF,EAAS,GAAKzF,GAC9Eqe,EAAU5U,KAAKiH,GAEX1Q,GAASyF,GACTiL,EAAM+M,OAAOhU,KAAK,CAAEyU,SAAUzY,EAAQzF,MAAOA,EAAO6d,SAAUA,IAClE,IAAK,IAAI3L,EAAK,EAAGuM,EAAWT,EAAQ9L,EAAKuM,EAAS7iB,OAAQsW,IAAM,CAC5D,IAAI4K,EAAK2B,EAASvM,GAClBqM,IADuB9a,EAAOqZ,EAAG,IACnBsB,EAAQ3a,EADuBqZ,EAAG,GACbpM,EAAM8N,MAAO9N,EAAM+M,OAAQhY,QAGjE,CACD,IAAI1D,EAAM0D,EAASwY,EAAYC,EAAUzY,GAAUyY,EAC/Cle,GACAse,EAAW7U,KAAK,CAAEyU,SAAUnc,EAAK/B,MAAOA,EAAO6d,SAAUA,IAC7D,IAAK,IAAId,EAAK,EAAG2B,EAAWV,EAAQjB,EAAK2B,EAAS9iB,OAAQmhB,IAAM,CAC5D,IAAuBtZ,EAAnBkb,EAAKD,EAAS3B,GAClBwB,IADuB9a,EAAOkb,EAAG,IACnBP,EAAQ3a,EADuBkb,EAAG,GACbN,EAAWC,EAAYvc,IAGlE,OAAOwc,EAKX,SAASK,EAAeC,EAAON,EAAKF,EAAWC,EAAY7N,EAAWqO,GAClE,IAAK,IAAI5M,EAAK,EAAG6M,EAAeT,EAAYpM,EAAK6M,EAAanjB,OAAQsW,IAAM,CACxE,IAAInI,EAAKgV,EAAa7M,GAAKgM,EAAWnU,EAAGmU,SAAUle,EAAQ+J,EAAG/J,MAAO6d,EAAW9T,EAAG8T,SAC/E9b,EAAM+c,EAAUb,EAAYC,EAAUzN,GAAayN,EACnDpY,EAAK+X,EAAW,SAAWrE,GAAUzV,SAAS,IAAM,MAAQwa,EAAM,KAAOve,GACzEgf,EAAO,IAAIC,EAAMjf,EAAO8F,IACvBpI,IAAI,IAAIwhB,EAASnd,EAAK,MAAQwc,EAAM,KAAOxc,IAChD8c,EAAMnhB,IAAIshB,GAEd,IAAK,IAAIlC,EAAK,EAAGqC,EAAcd,EAAWvB,EAAKqC,EAAYvjB,OAAQkhB,IAAM,CACrE,IACIkC,EADAjC,EAAKoC,EAAYrC,GAA+C0B,GAA1CN,EAAWnB,EAAGmB,SAAUle,EAAQ+c,EAAG/c,MAAe+c,EAAGyB,OAAOf,EAASV,EAAGU,OAElGmB,EADII,EAAO,IAAII,EAAKlB,EAAUle,EAAO,MAAQue,EAAM,KAAOL,EAAW,KAAOle,GACvDue,EAAKC,EAAOf,EAAQhN,EAAWqO,GACpDD,EAAMnhB,IAAIshB,IAMlB,SAASnd,EAAKwd,GAEV,IADA,IAAInV,EAAM,GACDjP,EAAI,EAAGA,EAAIokB,EAAIzjB,OAAQX,IAC5BiP,GAAOmV,EAAIpkB,GACf,OAAOiP,EA1IXxO,EAAQ4jB,OAAS,SAAUnC,GAAO,OAAOA,EAAIxb,QAAQkY,EAAe,SASpEne,EAAQshB,UAAYA,EAWpBthB,EAAQwhB,WAAaA,EA2HrB,IAAIqC,EAAc,CACd7hB,IAAK,aACL8hB,OAAQ,aACRjc,OAAQ,cAKRkc,GAUAA,EAAMnjB,UAAUoB,IAAM,SAAUsC,GAC5B,IAAI0f,EAAQhjB,KAAKijB,UAAU3f,EAAM8F,KAAO,EACpCkZ,EAAOtiB,KAAKkjB,UAAU5f,EAAM8F,KAAO9F,EAAM6f,QAE7C,GADAnjB,KAAKijB,UAAU3f,EAAM8F,IAAM4Z,EAAQ,EACrB,IAAVA,EACAhjB,KAAKkjB,UAAUZ,EAAKlZ,IAAMkZ,EAC1BtiB,KAAKojB,MAAMrW,KAAKuV,EAAKlZ,IACrBpJ,KAAKqjB,MAAMtW,KAAKuV,EAAKgB,aACrBtjB,KAAKujB,WACLvjB,KAAKwjB,QAAQxiB,IAAIshB,EAAMtiB,KAAKojB,MAAMlkB,OAAS,QAE1C,GAAIojB,aAAgBS,GAASzf,aAAiByf,EAAO,CACtD,IAAIU,EAAWzjB,KAAKojB,MAAM3B,QAAQne,EAAM8F,IACpCsa,EAAmBpB,EAAKiB,SAC5BjB,EAAKqB,MAAMrgB,GACPgf,EAAKiB,WAAaG,IAClB1jB,KAAKqjB,MAAMO,OAAOH,EAAU,EAAGnB,EAAKgB,aACpCtjB,KAAKujB,WACLvjB,KAAKwjB,QAAQV,OAAOR,EAAMmB,EAAUA,IAG5C,OAAOnB,GAEXS,EAAMnjB,UAAUiH,OAAS,SAAUvD,GAC/B,IAAI0f,EAAQhjB,KAAKijB,UAAU3f,EAAM8F,IACjC,QAAcyE,IAAVmV,GAA+B,EAARA,EAAW,CAClChjB,KAAKijB,UAAU3f,EAAM8F,IAAM4Z,EAAQ,EACnC,IAAIV,EAAOtiB,KAAKkjB,UAAU5f,EAAM8F,IAC5Bya,EAAQ7jB,KAAKojB,MAAM3B,QAAQa,EAAKlZ,IACpC,GAAc,IAAV4Z,SACOhjB,KAAKijB,UAAU3f,EAAM8F,WACrBpJ,KAAKkjB,UAAU5f,EAAM8F,IAC5BpJ,KAAKojB,MAAMQ,OAAOC,EAAO,GACzB7jB,KAAKqjB,MAAMO,OAAOC,EAAO,GACzB7jB,KAAKujB,WACLvjB,KAAKwjB,QAAQ3c,OAAOyb,EAAMuB,QAEzB,GAAIvB,aAAgBS,GAASzf,aAAiByf,EAAO,CACtD,IAAIe,EAAexB,EAAKiB,SACxBjB,EAAKyB,QAAQzgB,GACTgf,EAAKiB,WAAaO,IAClB9jB,KAAKqjB,MAAMO,OAAOC,EAAO,EAAGvB,EAAKgB,aACjCtjB,KAAKujB,WACLvjB,KAAKwjB,QAAQV,OAAOR,EAAMuB,EAAOA,OAKjDd,EAAMnjB,UAAUokB,OAAS,WACrB,IAAIlhB,EAAQ9C,KACZ,OAAOA,KAAKojB,MAAMzZ,IAAI,SAAUtE,GAAO,OAAOvC,EAAMogB,UAAU7d,MAElE0d,EAAMnjB,UAAU+jB,MAAQ,SAAUxB,GAC9B,IAAK,IAAI3M,EAAK,EAAGnI,EAAK8U,EAAM6B,SAAUxO,EAAKnI,EAAGnO,OAAQsW,IAAM,CACxD,IAAI8M,EAAOjV,EAAGmI,GACdxV,KAAKgB,IAAIshB,GAEb,OAAOtiB,MAEX+iB,EAAMnjB,UAAUmkB,QAAU,SAAU5B,GAChC,IAAK,IAAI3M,EAAK,EAAGnI,EAAK8U,EAAM6B,SAAUxO,EAAKnI,EAAGnO,OAAQsW,IAAM,CACxD,IAAI8M,EAAOjV,EAAGmI,GACdxV,KAAK6G,OAAOyb,GAEhB,OAAOtiB,MAEX+iB,EAAMnjB,UAAUujB,MAAQ,WACpB,OAAO,IAAIJ,GAAQY,MAAM3jB,OAEtB+iB,GA9EP,SAASA,EAAMS,QACK,IAAZA,IAAsBA,EAAUX,GACpC7iB,KAAKwjB,QAAUA,EACfxjB,KAAKqjB,MAAQ,GACbrjB,KAAKujB,SAAW,EAChBvjB,KAAKojB,MAAQ,GACbpjB,KAAKkjB,UAAYpT,OAAO8M,OAAO,MAC/B5c,KAAKijB,UAAYnT,OAAO8M,OAAO,MAyEvC5d,EAAQ+jB,MAAQA,EAIhB,IAAIP,GAKAA,EAAS5iB,UAAU0jB,UAAY,WAC3B,OAAOtjB,KAAKwhB,UAEhBgB,EAAS5iB,UAAUujB,MAAQ,WACvB,OAAO,IAAIX,EAASxiB,KAAKwhB,SAAUxhB,KAAKoJ,KAErCoZ,GAVP,SAASA,EAAShB,EAAUpY,GACxBpJ,KAAKwhB,SAAWA,EAChBxhB,KAAKoJ,GAAKA,EAUlBpK,EAAQwjB,SAAWA,EAInB,IAAqCyB,EAAjC1B,GACAjG,EAAUiG,EADuB0B,EAenClB,GAPER,EAAM3iB,UAAU0jB,UAAY,WACxB,OAAOtjB,KAAKqjB,MAAMle,KAAK,KAAO,IAAMnF,KAAKsD,MAAQ,KAErDif,EAAM3iB,UAAUujB,MAAQ,WACpB,OAAO,IAAIZ,EAAMviB,KAAKsD,MAAOtD,KAAKoJ,IAAIua,MAAM3jB,OAEzCuiB,GAZP,SAASA,EAAMjf,EAAO8F,GAClB,IAAItG,EAAQmhB,EAAOhlB,KAAKe,OAASA,KAGjC,OAFA8C,EAAMQ,MAAQA,EACdR,EAAMsG,GAAKA,EACJtG,EAUf9D,EAAQujB,MAAQA,EAIhB,IAAoC0B,EAAhCvB,GACApG,EAAUoG,EADsBuB,EAgBlClB,GAPEL,EAAK9iB,UAAU0jB,UAAY,WACvB,OAAOtjB,KAAKkkB,KAAO,IAAMlkB,KAAKsD,MAAQ6B,EAAKnF,KAAKqjB,OAAS,KAE7DX,EAAK9iB,UAAUujB,MAAQ,WACnB,OAAO,IAAIT,EAAK1iB,KAAKkkB,KAAMlkB,KAAKsD,MAAOtD,KAAKoJ,IAAIua,MAAM3jB,OAEnD0iB,GAbP,SAASA,EAAKwB,EAAM5gB,EAAO8F,GACvB,IAAItG,EAAQmhB,EAAOhlB,KAAKe,OAASA,KAIjC,OAHA8C,EAAMohB,KAAOA,EACbphB,EAAMQ,MAAQA,EACdR,EAAMsG,GAAKA,EACJtG,EAUf9D,EAAQ0jB,KAAOA,EAIf,IAAyCuB,EAArCE,GACA7H,EAAU6H,EAD2BF,EAgDvClB,GAvCEoB,EAAUvkB,UAAUwkB,cAAgB,SAAUrD,EAAQsD,GAClD,IAAI1C,EAAY,GACZC,EAAa,GACbC,EAAMH,EAAQ,IAAKX,EAAQY,EAAWC,GACtC0C,EAAO,IAAMtkB,KAAKskB,KAAKzC,GACvBzY,EAAKpJ,KAAKukB,OAASF,EAAcA,EAAc,IAAMC,EAAOA,EAEhE,OADApC,EAAeliB,KAAM6hB,EAAKF,EAAWC,EAAY,IAAM5iB,EAAQ4jB,OAAOxZ,IAAK,GACpEA,GAEX+a,EAAUvkB,UAAU4kB,kBAAoB,SAAUC,EAAWJ,GACzD,OAAOrkB,KAAK0kB,iBAAiB,aAAcD,EAAWJ,IAE1DF,EAAUvkB,UAAU8kB,iBAAmB,SAAUC,EAAQ5D,EAAQsD,GAC7D,IAAI1C,EAAY,GACZC,EAAa,GACbC,EAAMH,EAAQ,GAAIX,EAAQY,EAAWC,GACrC0C,EAAO,IAAMtkB,KAAKskB,KAAKzC,GACvBzY,EAAKpJ,KAAKukB,OAASF,EAAcA,EAAc,IAAMC,EAAOA,EAC5DJ,EAAO,IAAIxB,EAAKiC,EAAS,IAAM3lB,EAAQ4jB,OAAOxZ,GAAK,GAAI,MAAQyY,EAAM,KAAO8C,GAGhF,OAFAzC,EAAegC,EAAMrC,EAAKF,EAAWC,EAAY,IAAI,GACrD5hB,KAAKgB,IAAIkjB,GACF9a,GAEX+a,EAAUvkB,UAAUglB,aAAe,SAAUV,EAAMnD,GAC/C,IAAIY,EAAY,GACZC,EAAa,GAEjBM,EAAeliB,KADL0hB,EAAQwC,EAAMnD,EAAQY,EAAWC,GACjBD,EAAWC,EAAY,IAAI,IAEzDuC,EAAUvkB,UAAUilB,YAAc,SAAU9D,GACxC,OAAO/gB,KAAK4kB,aAAa,GAAI7D,IAEjCoD,EAAUvkB,UAAU0jB,UAAY,WAC5B,OAAOne,EAAKnF,KAAKqjB,QAErBc,EAAUvkB,UAAUujB,MAAQ,WACxB,OAAO,IAAIgB,EAAUnkB,KAAKskB,KAAMtkB,KAAKukB,MAAOvkB,KAAKoJ,GAAIpJ,KAAKwjB,SAASG,MAAM3jB,OAEtEmkB,GA7CP,SAASA,EAAUG,EAAMC,EAAOnb,EAAIoa,GAChC,IAAI1gB,EAAQmhB,EAAOhlB,KAAKe,KAAMwjB,IAAYxjB,KAI1C,OAHA8C,EAAMwhB,KAAOA,EACbxhB,EAAMyhB,MAAQA,EACdzhB,EAAMsG,GAAKA,EACJtG,EA0Cf9D,EAAQmlB,UAAYA,EAUpBnlB,EAAQ4d,OANR,SAAgB0H,EAAMC,EAAOf,GAIzB,YAHa,IAATc,IAAmBA,EAAO9D,QAChB,IAAV+D,IAAoBA,OAA2B,IAAZnI,GAAoD,eAAzBA,EAAQ0I,IAAIC,eAC9D,IAAZvB,IAAsBA,EAAUX,GAC7B,IAAIsB,EAAUG,EAAMC,EAAO,OAASzH,GAAUzV,SAAS,IAAKmc,MAIpEvkB,KAAKe,KAAKtB,EAAQ,cACnB,CAACsmB,SAAW,KAAKC,EAAE,CAAC,SAASvmB,EAAQU,EAAOJ,IAC9C,SAAWkmB,IAOX,SAAU1mB,GAAG,GAAoB,iBAAVQ,QAAoC,IAATI,EAAsBA,EAAOJ,QAAQR,SAAS,GAAmB,mBAAT2mB,QAAqBA,OAAOC,IAAKD,OAAO,GAAG3mB,OAAO,EAA0B,oBAATmS,OAAwBA,YAA+B,IAATuU,EAAwBA,EAA6B,oBAAPG,KAAsBA,KAAYrlB,MAAO8b,YAActd,KAAhU,CAAuU,WAAqC,OAAO,SAAUL,EAAEE,EAAED,EAAEF,GAAG,SAAS2M,EAAEvM,EAAEK,GAAG,IAAIP,EAAEE,GAAG,CAAC,IAAID,EAAEC,GAAG,CAAC,IAAIM,EAAkB,mBAATF,GAAqBA,EAAQ,IAAIC,GAAGC,EAAE,OAAOA,EAAEN,GAAE,GAAI,GAAGC,EAAE,OAAOA,EAAED,GAAE,GAAI,IAAIE,EAAE,IAAIK,MAAM,uBAAuBP,EAAE,KAAK,MAAOE,EAAEM,KAAK,mBAAoBN,EAAG,IAAIwb,EAAE5b,EAAEE,GAAG,CAACU,QAAQ,IAAIX,EAAEC,GAAG,GAAGW,KAAK+a,EAAEhb,QAAQ,SAASb,GAAG,IAAIC,EAAEC,EAAEC,GAAG,GAAGH,GAAG,OAAO0M,EAAEzM,GAAID,IAAI6b,EAAEA,EAAEhb,QAAQb,EAAEE,EAAED,EAAEF,GAAG,OAAOE,EAAEE,GAAGU,QAAkD,IAA1C,IAAIT,EAAkB,mBAATG,GAAqBA,EAAgBJ,EAAE,EAAEA,EAAEJ,EAAEgB,OAAOZ,IAAIuM,EAAE3M,EAAEI,IAAI,OAAOuM,EAA1b,CAA8b,CAAC1L,EAAE,CAAC,SAASmmB,EAAQlmB,EAAOJ,IAC70B,SAAWkmB,GACX,aACA,IAEIK,EAyCAC,EA3CAC,EAAWP,EAAOQ,kBAAoBR,EAAOS,uBAK/C,GAAIF,EAAU,CACZ,IAAIG,EAAS,EACTC,EAAW,IAAIJ,EAASK,GACxBpkB,EAAUwjB,EAAOvjB,SAASokB,eAAe,IAC7CF,EAASG,QAAQtkB,EAAS,CACxBukB,eAAe,IAEjBV,EAAgB,WACd7jB,EAAQwO,KAAQ0V,IAAWA,EAAS,QAEjC,GAAKV,EAAOgB,mBAAiD,IAA1BhB,EAAOiB,eAO/CZ,EADS,aAAcL,GAAU,uBAAwBA,EAAOvjB,SAASb,cAAc,UACvE,WAId,IAAIslB,EAAWlB,EAAOvjB,SAASb,cAAc,UAC7CslB,EAASC,mBAAqB,WAC5BP,IAEAM,EAASC,mBAAqB,KAC9BD,EAASE,WAAWC,YAAYH,GAChCA,EAAW,MAEblB,EAAOvjB,SAAS6kB,gBAAgB5kB,YAAYwkB,IAG9B,WACdhjB,WAAW0iB,EAAU,QAvBwD,CAC/E,IAAIW,EAAU,IAAIvB,EAAOiB,eACzBM,EAAQC,MAAMC,UAAYb,EAC1BP,EAAgB,WACdkB,EAAQG,MAAMC,YAAY,IAyBhC,IAAIC,EAAQ,GAEZ,SAAShB,IAEP,IAAIvnB,EAAGwoB,EADPvB,GAAW,EAGX,IADA,IAAI9E,EAAMoG,EAAM5nB,OACTwhB,GAAK,CAIV,IAHAqG,EAAWD,EACXA,EAAQ,GACRvoB,GAAK,IACIA,EAAImiB,GACXqG,EAASxoB,KAEXmiB,EAAMoG,EAAM5nB,OAEdsmB,GAAW,EAGbpmB,EAAOJ,QACP,SAAmBgoB,GACQ,IAArBF,EAAM/Z,KAAKia,IAAgBxB,GAC7BD,OAIDtmB,KAAKe,UAAuB,IAAXklB,EAAyBA,EAAyB,oBAATG,KAAuBA,KAAyB,oBAAX1U,OAAyBA,OAAS,KAClI,IAAIzI,EAAE,CAAC,SAASod,EAAQlmB,EAAOJ,GACjC,aACA,IAAIioB,EAAY3B,EAAQ,GAGxB,SAAS4B,KAET,IAAIC,EAAW,GAEXC,EAAW,CAAC,YACZC,EAAY,CAAC,aACbC,EAAU,CAAC,WAIf,SAASlc,EAAQmc,GACf,GAAwB,mBAAbA,EACT,MAAM,IAAIza,UAAU,+BAEtB9M,KAAKwnB,MAAQF,EACbtnB,KAAK8mB,MAAQ,GACb9mB,KAAKynB,aAAU,EACXF,IAAaL,GACfQ,EAAsB1nB,KAAMunB,GAsBhC,SAASI,EAAUC,EAASC,EAAaC,GACvC9nB,KAAK4nB,QAAUA,EACY,mBAAhBC,IACT7nB,KAAK6nB,YAAcA,EACnB7nB,KAAK+nB,cAAgB/nB,KAAKgoB,oBAEF,mBAAfF,IACT9nB,KAAK8nB,WAAaA,EAClB9nB,KAAKioB,aAAejoB,KAAKkoB,mBAgB7B,SAASC,EAAOP,EAASQ,EAAMnlB,GAC7BgkB,EAAU,WACR,IAAIoB,EACJ,IACEA,EAAcD,EAAKnlB,GACnB,MAAO9E,GACP,OAAOgpB,EAAS7b,OAAOsc,EAASzpB,GAE9BkqB,IAAgBT,EAClBT,EAAS7b,OAAOsc,EAAS,IAAI9a,UAAU,uCAEvCqa,EAAS9b,QAAQuc,EAASS,KAoChC,SAASC,EAAQC,GAEf,IAAI1c,EAAO0c,GAAOA,EAAI1c,KACtB,GAAI0c,IAAuB,iBAARA,GAAmC,mBAARA,IAAuC,mBAAT1c,EAC1E,OAAO,WACLA,EAAKC,MAAMyc,EAAK9S,YAKtB,SAASiS,EAAsBrC,EAAMmD,GAEnC,IAAI5C,GAAS,EACb,SAAS6C,EAAQxlB,GACX2iB,IAGJA,GAAS,EACTuB,EAAS7b,OAAO+Z,EAAMpiB,IAGxB,SAASylB,EAAUzlB,GACb2iB,IAGJA,GAAS,EACTuB,EAAS9b,QAAQga,EAAMpiB,IAOzB,IAAI0I,EAASgd,EAJb,WACEH,EAASE,EAAWD,KAIA,UAAlB9c,EAAOid,QACTH,EAAQ9c,EAAO1I,OAInB,SAAS0lB,EAASP,EAAMnlB,GACtB,IAAI4lB,EAAM,GACV,IACEA,EAAI5lB,MAAQmlB,EAAKnlB,GACjB4lB,EAAID,OAAS,UACb,MAAOzqB,GACP0qB,EAAID,OAAS,QACbC,EAAI5lB,MAAQ9E,EAEd,OAAO0qB,GAvJTzpB,EAAOJ,QAAUoM,GAcTxL,UAAiB,MAAI,SAAUkoB,GACrC,OAAO9nB,KAAK6L,KAAK,KAAMic,IAEzB1c,EAAQxL,UAAUiM,KAAO,SAAUgc,EAAaC,GAC9C,GAA2B,mBAAhBD,GAA8B7nB,KAAKwnB,QAAUH,GAChC,mBAAfS,GAA6B9nB,KAAKwnB,QAAUJ,EACnD,OAAOpnB,KAET,IAAI4nB,EAAU,IAAI5nB,KAAK2c,YAAYuK,GAC/BlnB,KAAKwnB,QAAUF,EAEjBa,EAAOP,EADQ5nB,KAAKwnB,QAAUH,EAAYQ,EAAcC,EAC9B9nB,KAAKynB,SAE/BznB,KAAK8mB,MAAM/Z,KAAK,IAAI4a,EAAUC,EAASC,EAAaC,IAGtD,OAAOF,GAaTD,EAAU/nB,UAAUmoB,cAAgB,SAAU9kB,GAC5CkkB,EAAS9b,QAAQrL,KAAK4nB,QAAS3kB,IAEjC0kB,EAAU/nB,UAAUooB,mBAAqB,SAAU/kB,GACjDklB,EAAOnoB,KAAK4nB,QAAS5nB,KAAK6nB,YAAa5kB,IAEzC0kB,EAAU/nB,UAAUqoB,aAAe,SAAUhlB,GAC3CkkB,EAAS7b,OAAOtL,KAAK4nB,QAAS3kB,IAEhC0kB,EAAU/nB,UAAUsoB,kBAAoB,SAAUjlB,GAChDklB,EAAOnoB,KAAK4nB,QAAS5nB,KAAK8nB,WAAY7kB,IAmBxCkkB,EAAS9b,QAAU,SAAUga,EAAMpiB,GACjC,IAAI0I,EAASgd,EAASL,EAASrlB,GAC/B,GAAsB,UAAlB0I,EAAOid,OACT,OAAOzB,EAAS7b,OAAO+Z,EAAM1Z,EAAO1I,OAEtC,IAAIulB,EAAW7c,EAAO1I,MAEtB,GAAIulB,EACFd,EAAsBrC,EAAMmD,OACvB,CACLnD,EAAKmC,MAAQH,EACbhC,EAAKoC,QAAUxkB,EAGf,IAFA,IAAI1E,GAAK,EACLmiB,EAAM2E,EAAKyB,MAAM5nB,SACZX,EAAImiB,GACX2E,EAAKyB,MAAMvoB,GAAGwpB,cAAc9kB,GAGhC,OAAOoiB,GAET8B,EAAS7b,OAAS,SAAU+Z,EAAM9W,GAChC8W,EAAKmC,MAAQJ,EACb/B,EAAKoC,QAAUlZ,EAGf,IAFA,IAAIhQ,GAAK,EACLmiB,EAAM2E,EAAKyB,MAAM5nB,SACZX,EAAImiB,GACX2E,EAAKyB,MAAMvoB,GAAG0pB,aAAa1Z,GAE7B,OAAO8W,GAsDTja,EAAQC,QACR,SAAiBpI,GACf,GAAIA,aAAiBjD,KACnB,OAAOiD,EAET,OAAOkkB,EAAS9b,QAAQ,IAAIrL,KAAKknB,GAAWjkB,IAG9CmI,EAAQE,OACR,SAAgBwd,GACd,IAAIlB,EAAU,IAAI5nB,KAAKknB,GACvB,OAAOC,EAAS7b,OAAOsc,EAASkB,IAGlC1d,EAAQkC,IACR,SAAayb,GACX,IAAI1D,EAAOrlB,KACX,GAAiD,mBAA7C8P,OAAOlQ,UAAUyH,SAASpI,KAAK8pB,GACjC,OAAO/oB,KAAKsL,OAAO,IAAIwB,UAAU,qBAGnC,IAAI4T,EAAMqI,EAAS7pB,OACf0mB,GAAS,EACb,IAAKlF,EACH,OAAO1gB,KAAKqL,QAAQ,IAGtB,IAAI2Y,EAAS,IAAI7U,MAAMuR,GACnBsI,EAAW,EACXzqB,GAAK,EACLqpB,EAAU,IAAI5nB,KAAKknB,GAEvB,OAAS3oB,EAAImiB,GACXuI,EAAYF,EAASxqB,GAAIA,GAE3B,OAAOqpB,EACP,SAASqB,EAAYhmB,EAAO1E,GAC1B8mB,EAAKha,QAAQpI,GAAO4I,KAMpB,SAAwBqd,GACtBlF,EAAOzlB,GAAK2qB,IACNF,IAAatI,GAAQkF,IACzBA,GAAS,EACTuB,EAAS9b,QAAQuc,EAAS5D,KAVW,SAAUzV,GAC5CqX,IACHA,GAAS,EACTuB,EAAS7b,OAAOsc,EAASrZ,QAajCnD,EAAQ+d,KACR,SAAcJ,GACZ,IAAI1D,EAAOrlB,KACX,GAAiD,mBAA7C8P,OAAOlQ,UAAUyH,SAASpI,KAAK8pB,GACjC,OAAO/oB,KAAKsL,OAAO,IAAIwB,UAAU,qBAGnC,IAAI4T,EAAMqI,EAAS7pB,OACf0mB,GAAS,EACb,IAAKlF,EACH,OAAO1gB,KAAKqL,QAAQ,IAGtB,IAAI9M,GAAK,EACLqpB,EAAU,IAAI5nB,KAAKknB,GAEvB,OAAS3oB,EAAImiB,GAIKzd,EAHP8lB,EAASxqB,GAIlB8mB,EAAKha,QAAQpI,GAAO4I,KAAK,SAAUud,GAC5BxD,IACHA,GAAS,EACTuB,EAAS9b,QAAQuc,EAASwB,KAE3B,SAAU7a,GACNqX,IACHA,GAAS,EACTuB,EAAS7b,OAAOsc,EAASrZ,MAT/B,IAAkBtL,EADlB,OAAO2kB,IAgBP,CAACzoB,EAAI,IAAIyJ,EAAE,CAAC,SAAS0c,EAAQlmB,EAAOJ,IACtC,SAAWkmB,GACX,aAC8B,mBAAnBA,EAAO9Z,UAChB8Z,EAAO9Z,QAAUka,EAAQ,MAGxBrmB,KAAKe,UAAuB,IAAXklB,EAAyBA,EAAyB,oBAATG,KAAuBA,KAAyB,oBAAX1U,OAAyBA,OAAS,KAClI,CAACzI,EAAI,IAAImB,EAAE,CAAC,SAASic,EAAQlmB,EAAOJ,GACtC,aAEA,IAAIqqB,EAA4B,mBAAX3c,QAAoD,iBAApBA,OAAOC,SAAwB,SAAU4b,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,mBAAX7b,QAAyB6b,EAAI5L,cAAgBjQ,QAAU6b,IAAQ7b,OAAO9M,UAAY,gBAAkB2oB,GA2BtQ,IAAIe,EAvBJ,WAEI,IACI,GAAyB,oBAAdC,UACP,OAAOA,UAEX,GAA+B,oBAApBC,gBACP,OAAOA,gBAEX,GAA4B,oBAAjBC,aACP,OAAOA,aAEX,GAA0B,oBAAfC,WACP,OAAOA,WAEX,GAA2B,oBAAhBC,YACP,OAAOA,YAEb,MAAOxrB,GACL,QAIEyrB,GAoCV,SAASC,EAAWC,EAAO7I,GAEvB6I,EAAQA,GAAS,GACjB7I,EAAaA,GAAc,GAC3B,IACI,OAAO,IAAI8I,KAAKD,EAAO7I,GACzB,MAAO9iB,GACL,GAAe,cAAXA,EAAE4I,KACF,MAAM5I,EAIV,IAFA,IACI6rB,EAAU,IADuB,oBAAhBC,YAA8BA,YAAuC,oBAAlBC,cAAgCA,cAA0C,oBAAnBC,eAAiCA,eAAiBC,mBAExK7rB,EAAI,EAAGA,EAAIurB,EAAM5qB,OAAQX,GAAK,EACnCyrB,EAAQ/c,OAAO6c,EAAMvrB,IAEzB,OAAOyrB,EAAQK,QAAQpJ,EAAWqJ,OAMnB,oBAAZlf,SAGPka,EAAQ,GAEZ,IAAIiF,EAAYnf,QAEhB,SAASof,EAAgB5C,EAASxgB,GAC1BA,GACAwgB,EAAQ/b,KAAK,SAAUF,GACnBvE,EAAS,KAAMuE,IAChB,SAAU4C,GACTnH,EAASmH,KAKrB,SAASkc,EAAoB7C,EAASxgB,EAAUsjB,GACpB,mBAAbtjB,GACPwgB,EAAQ/b,KAAKzE,GAGY,mBAAlBsjB,GACP9C,EAAe,MAAE8C,GAIzB,SAASC,EAAatlB,GAOlB,MALmB,iBAARA,IACPiJ,QAAQsc,KAAKvlB,EAAM,2CACnBA,EAAMa,OAAOb,IAGVA,EAGX,SAASwlB,IACL,GAAIpV,UAAUvW,QAAqD,mBAApCuW,UAAUA,UAAUvW,OAAS,GACxD,OAAOuW,UAAUA,UAAUvW,OAAS,GAO5C,IAAI4rB,EAA4B,mCAC5BC,OAAgB,EAChBC,EAAa,GACb3jB,EAAWyI,OAAOlQ,UAAUyH,SAG5B4jB,EAAY,WACZC,EAAa,YA0DjB,SAASC,EAAkB7B,GACvB,MAA6B,kBAAlByB,EACAR,EAAUlf,QAAQ0f,GA5BjC,SAAyCzB,GACrC,OAAO,IAAIiB,EAAU,SAAUlf,GAC3B,IAAI+f,EAAM9B,EAAI+B,YAAYP,EAA2BI,GACjDI,EAAOzB,EAAW,CAAC,KACvBuB,EAAIG,YAAYT,GAA2BU,IAAIF,EAAM,OAErDF,EAAIK,QAAU,SAAUttB,GAGpBA,EAAEwF,iBACFxF,EAAEutB,kBACFrgB,GAAQ,IAGZ+f,EAAIO,WAAa,WACb,IAAIC,EAAgBC,UAAUC,UAAUC,MAAM,iBAC1CC,EAAcH,UAAUC,UAAUC,MAAM,UAG5C1gB,EAAQ2gB,IAAgBJ,GAAmD,IAAlCK,SAASL,EAAc,GAAI,QAElE,MAAE,WACR,OAAO,IAQJM,CAAgC5C,GAAKzd,KAAK,SAAU5I,GAEvD,OADA8nB,EAAgB9nB,IAKxB,SAASkpB,EAAgBC,GACrB,IAAIC,EAAYrB,EAAWoB,EAAOrlB,MAG9BulB,EAAoB,GAExBA,EAAkB1E,QAAU,IAAI2C,EAAU,SAAUlf,EAASC,GACzDghB,EAAkBjhB,QAAUA,EAC5BihB,EAAkBhhB,OAASA,IAI/B+gB,EAAUE,mBAAmBxf,KAAKuf,GAG7BD,EAAUG,QAGXH,EAAUG,QAAUH,EAAUG,QAAQ3gB,KAAK,WACvC,OAAOygB,EAAkB1E,UAH7ByE,EAAUG,QAAUF,EAAkB1E,QAQ9C,SAAS6E,EAAkBL,GACvB,IAGIE,EAHYtB,EAAWoB,EAAOrlB,MAGAwlB,mBAAmB1nB,MAIrD,GAAIynB,EAEA,OADAA,EAAkBjhB,UACXihB,EAAkB1E,QAIjC,SAAS8E,EAAiBN,EAAQxY,GAC9B,IAGI0Y,EAHYtB,EAAWoB,EAAOrlB,MAGAwlB,mBAAmB1nB,MAIrD,GAAIynB,EAEA,OADAA,EAAkBhhB,OAAOsI,GAClB0Y,EAAkB1E,QAIjC,SAAS+E,EAAeP,EAAQQ,GAC5B,OAAO,IAAIrC,EAAU,SAAUlf,EAASC,GAGpC,GAFA0f,EAAWoB,EAAOrlB,MAAQikB,EAAWoB,EAAOrlB,OAoNzC,CAEH8lB,QAAS,GAETC,GAAI,KAEJN,QAAS,KAETD,mBAAoB,IA1NhBH,EAAOU,GAAI,CACX,IAAIF,EAIA,OAAOvhB,EAAQ+gB,EAAOU,IAHtBX,EAAgBC,GAChBA,EAAOU,GAAGC,QAMlB,IAAIC,EAAS,CAACZ,EAAOrlB,MAEjB6lB,GACAI,EAAOjgB,KAAKqf,EAAOa,SAGvB,IAAIC,EAAU5D,EAAIhO,KAAKxP,MAAMwd,EAAK0D,GAE9BJ,IACAM,EAAQC,gBAAkB,SAAUhvB,GAChC,IAAI2uB,EAAKI,EAAQvhB,OACjB,IACImhB,EAAGM,kBAAkBhB,EAAOiB,WACxBlvB,EAAEmvB,YAAc,GAEhBR,EAAGM,kBAAkBtC,GAE3B,MAAOyC,GACL,GAAgB,oBAAZA,EAAGxmB,KAGH,MAAMwmB,EAFNjf,QAAQsc,KAAK,iBAAmBwB,EAAOrlB,KAAO,oCAA2C5I,EAAEmvB,WAAa,eAAiBnvB,EAAEqvB,WAAa,sBAAwBpB,EAAOiB,UAAY,wBAQnMH,EAAQO,QAAU,SAAUtvB,GACxBA,EAAEwF,iBACF2H,EAAO4hB,EAAQ3e,QAGnB2e,EAAQQ,UAAY,WAChBriB,EAAQ6hB,EAAQvhB,QAChB8gB,EAAkBL,MAK9B,SAASuB,EAAuBvB,GAC5B,OAAOO,EAAeP,GAAQ,GAGlC,SAASwB,EAAuBxB,GAC5B,OAAOO,EAAeP,GAAQ,GAGlC,SAASyB,EAAiBzB,EAAQ0B,GAC9B,IAAK1B,EAAOU,GACR,OAAO,EAGX,IAAIiB,GAAc3B,EAAOU,GAAGkB,iBAAiBC,SAAS7B,EAAOiB,WACzDa,EAAc9B,EAAOa,QAAUb,EAAOU,GAAGG,QACzCkB,EAAY/B,EAAOa,QAAUb,EAAOU,GAAGG,QAY3C,GAVIiB,IAGI9B,EAAOa,UAAYa,GACnBxf,QAAQsc,KAAK,iBAAmBwB,EAAOrlB,KAAO,uCAA6CqlB,EAAOU,GAAGG,QAAU,eAAiBb,EAAOa,QAAU,KAGrJb,EAAOa,QAAUb,EAAOU,GAAGG,SAG3BkB,GAAaJ,EAAY,CAIzB,GAAIA,EAAY,CACZ,IAAIK,EAAahC,EAAOU,GAAGG,QAAU,EACjCmB,EAAahC,EAAOa,UACpBb,EAAOa,QAAUmB,GAIzB,OAAO,EAGX,OAAO,EAqBX,SAASC,EAAYC,GAEjB,OAAOzE,EAAW,CArOtB,SAAiC0E,GAI7B,IAHA,IAAIrvB,EAASqvB,EAAIrvB,OACbsvB,EAAM,IAAIC,YAAYvvB,GACtByjB,EAAM,IAAI+L,WAAWF,GAChBjwB,EAAI,EAAGA,EAAIW,EAAQX,IACxBokB,EAAIpkB,GAAKgwB,EAAInoB,WAAW7H,GAE5B,OAAOiwB,EA6NSG,CAAwBC,KAAKN,EAAYpe,QAC1B,CAAEoa,KAAMgE,EAAYhE,OAIvD,SAASuE,EAAe5rB,GACpB,OAAOA,GAASA,EAAM6rB,4BAO1B,SAASC,EAAY3nB,GACjB,IAAIie,EAAOrlB,KAEP4nB,EAAUvC,EAAK2J,aAAanjB,KAAK,WACjC,IAAIwgB,EAAYrB,EAAW3F,EAAK4J,QAAQloB,MAExC,GAAIslB,GAAaA,EAAUG,QACvB,OAAOH,EAAUG,UAKzB,OADA/B,EAAoB7C,EAASxgB,EAAUA,GAChCwgB,EA2CX,SAASsH,EAAkB9C,EAAQ+C,EAAM/nB,EAAUgoB,QAC/BvhB,IAAZuhB,IACAA,EAAU,GAGd,IACI,IAAIna,EAAKmX,EAAOU,GAAGzB,YAAYe,EAAOiB,UAAW8B,GACjD/nB,EAAS,KAAM6N,GACjB,MAAOrB,GACL,GAAc,EAAVwb,KAAiBhD,EAAOU,IAAmB,sBAAblZ,EAAI7M,MAA6C,kBAAb6M,EAAI7M,MACtE,OAAOwjB,EAAUlf,UAAUQ,KAAK,WAC5B,IAAKugB,EAAOU,IAAmB,kBAAblZ,EAAI7M,OAA6BqlB,EAAOU,GAAGkB,iBAAiBC,SAAS7B,EAAOiB,YAAcjB,EAAOa,SAAWb,EAAOU,GAAGG,QAMpI,OAJIb,EAAOU,KACPV,EAAOa,QAAUb,EAAOU,GAAGG,QAAU,GAGlCW,EAAuBxB,KAEnCvgB,KAAK,WACJ,OAzDhB,SAAuBugB,GACnBD,EAAgBC,GAKhB,IAHA,IAAIC,EAAYrB,EAAWoB,EAAOrlB,MAC9B8lB,EAAUR,EAAUQ,QAEftuB,EAAI,EAAGA,EAAIsuB,EAAQ3tB,OAAQX,IAAK,CACrC,IAAI8wB,EAASxC,EAAQtuB,GACjB8wB,EAAOJ,QAAQnC,KACfuC,EAAOJ,QAAQnC,GAAGC,QAClBsC,EAAOJ,QAAQnC,GAAK,MAK5B,OAFAV,EAAOU,GAAK,KAELa,EAAuBvB,GAAQvgB,KAAK,SAAUihB,GAEjD,OADAV,EAAOU,GAAKA,EACRe,EAAiBzB,GAEVwB,EAAuBxB,GAE3BU,IACRjhB,KAAK,SAAUihB,GAGdV,EAAOU,GAAKT,EAAUS,GAAKA,EAC3B,IAAK,IAAIvuB,EAAI,EAAGA,EAAIsuB,EAAQ3tB,OAAQX,IAChCsuB,EAAQtuB,GAAG0wB,QAAQnC,GAAKA,IAEtB,MAAE,SAAUlZ,GAElB,MADA8Y,EAAiBN,EAAQxY,GACnBA,IA0BS0b,CAAclD,GAAQvgB,KAAK,WAC9BqjB,EAAkB9C,EAAQ+C,EAAM/nB,EAAUgoB,EAAU,OAElD,MAAEhoB,GAGhBA,EAASwM,IAylBjB,IAAI2b,EAAe,CACfC,QAAS,eACTC,aAxkBJ,SAAsBzoB,GAClB,IAAIqe,EAAOrlB,KACPosB,EAAS,CACTU,GAAI,MAGR,GAAI9lB,EACA,IAAK,IAAIzI,KAAKyI,EACVolB,EAAO7tB,GAAKyI,EAAQzI,GAK5B,IAAI8tB,EAAYrB,EAAWoB,EAAOrlB,MAG7BslB,IACDA,EA/BG,CAEHQ,QAAS,GAETC,GAAI,KAEJN,QAAS,KAETD,mBAAoB,IAyBpBvB,EAAWoB,EAAOrlB,MAAQslB,GAI9BA,EAAUQ,QAAQ9f,KAAKsY,GAGlBA,EAAK2J,aACN3J,EAAK2J,WAAa3J,EAAKqK,MACvBrK,EAAKqK,MAAQX,GAIjB,IAAIY,EAAe,GAEnB,SAASC,IAGL,OAAOrF,EAAUlf,UAGrB,IAAK,IAAIwkB,EAAI,EAAGA,EAAIxD,EAAUQ,QAAQ3tB,OAAQ2wB,IAAK,CAC/C,IAAIR,EAAShD,EAAUQ,QAAQgD,GAC3BR,IAAWhK,GAEXsK,EAAa5iB,KAAKsiB,EAAOL,aAAoB,MAAEY,IAKvD,IAAI/C,EAAUR,EAAUQ,QAAQlnB,MAAM,GAItC,OAAO4kB,EAAUjd,IAAIqiB,GAAc9jB,KAAK,WAGpC,OAFAugB,EAAOU,GAAKT,EAAUS,GAEfa,EAAuBvB,KAC/BvgB,KAAK,SAAUihB,GAEd,OADAV,EAAOU,GAAKA,EACRe,EAAiBzB,EAAQ/G,EAAKyK,eAAe7C,SAEtCW,EAAuBxB,GAE3BU,IACRjhB,KAAK,SAAUihB,GACdV,EAAOU,GAAKT,EAAUS,GAAKA,EAC3BzH,EAAK4J,QAAU7C,EAEf,IAAK,IAAI2D,EAAI,EAAGA,EAAIlD,EAAQ3tB,OAAQ6wB,IAAK,CACrC,IAAIV,EAASxC,EAAQkD,GACjBV,IAAWhK,IAEXgK,EAAOJ,QAAQnC,GAAKV,EAAOU,GAC3BuC,EAAOJ,QAAQhC,QAAUb,EAAOa,aAggB5C+C,SAjhCJ,WACI,IAGI,IAAK1G,EACD,OAAO,EAMX,IAAI2G,EAAmC,oBAAjBC,cAAgC,4BAA4BC,KAAKtE,UAAUC,aAAe,SAASqE,KAAKtE,UAAUC,aAAe,aAAaqE,KAAKtE,UAAUuE,UAE/KC,EAA4B,mBAAV9iB,QAAsE,IAA9CA,MAAMlG,WAAWoa,QAAQ,gBAIvE,QAASwO,GAAYI,IAAkC,oBAAd9G,WAKlB,oBAAhB+G,YACT,MAAOnyB,GACL,OAAO,GAy/BDoyB,GACVC,QAjdJ,SAAiB7jB,EAAUvF,GACvB,IAAIie,EAAOrlB,KAEP4nB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,WACdqjB,EAAkB7J,EAAK4J,QAAShE,EAAW,SAAUrX,EAAKyX,GACtD,GAAIzX,EACA,OAAOtI,EAAOsI,GAGlB,IACI,IACI6c,EADQpF,EAAYE,YAAYlG,EAAK4J,QAAQ5B,WACjCqD,aACZC,EAAkB,EAEtBF,EAAI/C,UAAY,WACZ,IAAIkD,EAASH,EAAI9kB,OAEjB,GAAIilB,EAAQ,CACR,IAAI3tB,EAAQ2tB,EAAO3tB,MACf4rB,EAAe5rB,KACfA,EAAQorB,EAAYprB,IAExB,IAAI0I,EAASgB,EAAS1J,EAAO2tB,EAAOvrB,IAAKsrB,UAK1B,IAAXhlB,EACAN,EAAQM,GAERilB,EAAiB,gBAGrBvlB,KAIRolB,EAAIhD,QAAU,WACVniB,EAAOmlB,EAAIliB,QAEjB,MAAOpQ,GACLmN,EAAOnN,QAGT,MAAEmN,KAKhB,OAFAkf,EAAgB5C,EAASxgB,GAElBwgB,GAgaPtP,QA5fJ,SAAiBjT,EAAK+B,GAClB,IAAIie,EAAOrlB,KAEXqF,EAAMslB,EAAatlB,GAEnB,IAAIuiB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,WACdqjB,EAAkB7J,EAAK4J,QAAShE,EAAW,SAAUrX,EAAKyX,GACtD,GAAIzX,EACA,OAAOtI,EAAOsI,GAGlB,IACI,IACI6c,EADQpF,EAAYE,YAAYlG,EAAK4J,QAAQ5B,WACjCwD,IAAIxrB,GAEpBorB,EAAI/C,UAAY,WACZ,IAAIzqB,EAAQwtB,EAAI9kB,YACFkC,IAAV5K,IACAA,EAAQ,MAER4rB,EAAe5rB,KACfA,EAAQorB,EAAYprB,IAExBoI,EAAQpI,IAGZwtB,EAAIhD,QAAU,WACVniB,EAAOmlB,EAAIliB,QAEjB,MAAOpQ,GACLmN,EAAOnN,QAGT,MAAEmN,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GAudPnP,QA9ZJ,SAAiBpT,EAAKpC,EAAOmE,GACzB,IAAIie,EAAOrlB,KAEXqF,EAAMslB,EAAatlB,GAEnB,IAAIuiB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C,IAAI8gB,EACJ/G,EAAKqK,QAAQ7jB,KAAK,WAEd,OADAugB,EAAS/G,EAAK4J,QACe,kBAAzB5nB,EAASpI,KAAKgE,GACPkoB,EAAkBiB,EAAOU,IAAIjhB,KAAK,SAAUilB,GAC/C,OAAIA,EACO7tB,EA7T/B,SAAqBqoB,GACjB,OAAO,IAAIf,EAAU,SAAUlf,EAASC,GACpC,IAAIylB,EAAS,IAAIC,WACjBD,EAAOtD,QAAUniB,EACjBylB,EAAOE,UAAY,SAAU9yB,GACzB,IAAI+yB,EAASC,KAAKhzB,EAAE6E,OAAO2I,QAAU,IACrCN,EAAQ,CACJyjB,6BAA6B,EAC7B5e,KAAMghB,EACN5G,KAAMgB,EAAKhB,QAGnByG,EAAOK,mBAAmB9F,KAmTP+F,CAAYpuB,KAGpBA,IACR4I,KAAK,SAAU5I,GACdisB,EAAkB7J,EAAK4J,QAAS/D,EAAY,SAAUtX,EAAKyX,GACvD,GAAIzX,EACA,OAAOtI,EAAOsI,GAGlB,IACI,IAAI0d,EAAQjG,EAAYE,YAAYlG,EAAK4J,QAAQ5B,WAMnC,OAAVpqB,IACAA,OAAQ4K,GAGZ,IAAI4iB,EAAMa,EAAM9F,IAAIvoB,EAAOoC,GAE3BgmB,EAAYM,WAAa,gBAOP9d,IAAV5K,IACAA,EAAQ,MAGZoI,EAAQpI,IAEZooB,EAAYI,QAAUJ,EAAYoC,QAAU,WACxC,IAAI7Z,EAAM6c,EAAIliB,MAAQkiB,EAAIliB,MAAQkiB,EAAIpF,YAAY9c,MAClDjD,EAAOsI,IAEb,MAAOzV,GACLmN,EAAOnN,QAGT,MAAEmN,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GAiWP2J,WA9VJ,SAAoBlsB,EAAK+B,GACrB,IAAIie,EAAOrlB,KAEXqF,EAAMslB,EAAatlB,GAEnB,IAAIuiB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,WACdqjB,EAAkB7J,EAAK4J,QAAS/D,EAAY,SAAUtX,EAAKyX,GACvD,GAAIzX,EACA,OAAOtI,EAAOsI,GAGlB,IACI,IAMI6c,EANQpF,EAAYE,YAAYlG,EAAK4J,QAAQ5B,WAMzB,OAAEhoB,GAC1BgmB,EAAYM,WAAa,WACrBtgB,KAGJggB,EAAYoC,QAAU,WAClBniB,EAAOmlB,EAAIliB,QAKf8c,EAAYI,QAAU,WAClB,IAAI7X,EAAM6c,EAAIliB,MAAQkiB,EAAIliB,MAAQkiB,EAAIpF,YAAY9c,MAClDjD,EAAOsI,IAEb,MAAOzV,GACLmN,EAAOnN,QAGT,MAAEmN,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GAqTPpZ,MAlTJ,SAAepH,GACX,IAAIie,EAAOrlB,KAEP4nB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,WACdqjB,EAAkB7J,EAAK4J,QAAS/D,EAAY,SAAUtX,EAAKyX,GACvD,GAAIzX,EACA,OAAOtI,EAAOsI,GAGlB,IACI,IACI6c,EADQpF,EAAYE,YAAYlG,EAAK4J,QAAQ5B,WACjC7e,QAEhB6c,EAAYM,WAAa,WACrBtgB,KAGJggB,EAAYI,QAAUJ,EAAYoC,QAAU,WACxC,IAAI7Z,EAAM6c,EAAIliB,MAAQkiB,EAAIliB,MAAQkiB,EAAIpF,YAAY9c,MAClDjD,EAAOsI,IAEb,MAAOzV,GACLmN,EAAOnN,QAGT,MAAEmN,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GAqRP1oB,OAlRJ,SAAgBkI,GACZ,IAAIie,EAAOrlB,KAEP4nB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,WACdqjB,EAAkB7J,EAAK4J,QAAShE,EAAW,SAAUrX,EAAKyX,GACtD,GAAIzX,EACA,OAAOtI,EAAOsI,GAGlB,IACI,IACI6c,EADQpF,EAAYE,YAAYlG,EAAK4J,QAAQ5B,WACjCrK,QAEhByN,EAAI/C,UAAY,WACZriB,EAAQolB,EAAI9kB,SAGhB8kB,EAAIhD,QAAU,WACVniB,EAAOmlB,EAAIliB,QAEjB,MAAOpQ,GACLmN,EAAOnN,QAGT,MAAEmN,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GAsPPviB,IAnPJ,SAAajH,EAAGgJ,GACZ,IAAIie,EAAOrlB,KAEP4nB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GACvClN,EAAI,EACJiN,EAAQ,MAKZga,EAAKqK,QAAQ7jB,KAAK,WACdqjB,EAAkB7J,EAAK4J,QAAShE,EAAW,SAAUrX,EAAKyX,GACtD,GAAIzX,EACA,OAAOtI,EAAOsI,GAGlB,IACI,IAAI0d,EAAQjG,EAAYE,YAAYlG,EAAK4J,QAAQ5B,WAC7CmE,GAAW,EACXf,EAAMa,EAAMZ,aAEhBD,EAAI/C,UAAY,WACZ,IAAIkD,EAASH,EAAI9kB,OACZilB,EAOK,IAANxyB,EAGAiN,EAAQulB,EAAOvrB,KAEVmsB,EAODnmB,EAAQulB,EAAOvrB,MAJfmsB,GAAW,EACXZ,EAAOa,QAAQrzB,IAdnBiN,EAAQ,OAsBhBolB,EAAIhD,QAAU,WACVniB,EAAOmlB,EAAIliB,QAEjB,MAAOpQ,GACLmN,EAAOnN,QAGT,MAAEmN,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GA0LPzH,KAvLJ,SAAc/Y,GACV,IAAIie,EAAOrlB,KAEP4nB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,WACdqjB,EAAkB7J,EAAK4J,QAAShE,EAAW,SAAUrX,EAAKyX,GACtD,GAAIzX,EACA,OAAOtI,EAAOsI,GAGlB,IACI,IACI6c,EADQpF,EAAYE,YAAYlG,EAAK4J,QAAQ5B,WACjCqD,aACZvQ,EAAO,GAEXsQ,EAAI/C,UAAY,WACZ,IAAIkD,EAASH,EAAI9kB,OAEZilB,GAKLzQ,EAAKpT,KAAK6jB,EAAOvrB,KACjBurB,EAAiB,YALbvlB,EAAQ8U,IAQhBsQ,EAAIhD,QAAU,WACVniB,EAAOmlB,EAAIliB,QAEjB,MAAOpQ,GACLmN,EAAOnN,QAGT,MAAEmN,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GAkJP8J,aA/IJ,SAAsB1qB,EAASI,GAC3BA,EAAWyjB,EAAY/e,MAAM9L,KAAMyV,WAEnC,IAQImS,EARA+J,EAAgB3xB,KAAK4xB,SASzB,IARA5qB,EAA6B,mBAAZA,GAA0BA,GAAW,IACzCD,OACTC,EAAQD,KAAOC,EAAQD,MAAQ4qB,EAAc5qB,KAC7CC,EAAQqmB,UAAYrmB,EAAQqmB,WAAasE,EAActE,WAKtDrmB,EAAQD,KAEN,CACH,IAEI8qB,EAFc7qB,EAAQD,OAAS4qB,EAAc5qB,MAL1C/G,KAKuDivB,QAAQnC,GAExCvC,EAAUlf,QAPjCrL,KAO8CivB,QAAQnC,IAAMa,EAAuB3mB,GAAS6E,KAAK,SAAUihB,GAC9G,IAAIT,EAAYrB,EAAWhkB,EAAQD,MAC/B8lB,EAAUR,EAAUQ,QACxBR,EAAUS,GAAKA,EACf,IAAK,IAAIvuB,EAAI,EAAGA,EAAIsuB,EAAQ3tB,OAAQX,IAChCsuB,EAAQtuB,GAAG0wB,QAAQnC,GAAKA,EAE5B,OAAOA,IAgDPlF,EA7CC5gB,EAAQqmB,UA6CCwE,EAAUhmB,KAAK,SAAUihB,GAC/B,GAAKA,EAAGkB,iBAAiBC,SAASjnB,EAAQqmB,WAA1C,CAIA,IAAIG,EAAaV,EAAGG,QAAU,EAE9Bd,EAAgBnlB,GAEhB,IAAIqlB,EAAYrB,EAAWhkB,EAAQD,MAC/B8lB,EAAUR,EAAUQ,QAExBC,EAAGC,QACH,IAAK,IAAIxuB,EAAI,EAAGA,EAAIsuB,EAAQ3tB,OAAQX,IAAK,CACrC,IAAI8wB,EAASxC,EAAQtuB,GACrB8wB,EAAOJ,QAAQnC,GAAK,KACpBuC,EAAOJ,QAAQhC,QAAUO,EAwB7B,OArBwB,IAAIjD,EAAU,SAAUlf,EAASC,GACrD,IAAImlB,EAAMnH,EAAIhO,KAAKtU,EAAQD,KAAMymB,GAEjCiD,EAAIhD,QAAU,SAAU7Z,GACX6c,EAAI9kB,OACVohB,QACHzhB,EAAOsI,IAGX6c,EAAItD,gBAAkB,WACTsD,EAAI9kB,OACVmmB,kBAAkB9qB,EAAQqmB,YAGjCoD,EAAI/C,UAAY,WACZ,IAAIZ,EAAK2D,EAAI9kB,OACbmhB,EAAGC,QACH1hB,EAAQyhB,MAISjhB,KAAK,SAAUihB,GACpCT,EAAUS,GAAKA,EACf,IAAK,IAAI+C,EAAI,EAAGA,EAAIhD,EAAQ3tB,OAAQ2wB,IAAK,CACrC,IAAIkC,EAAWlF,EAAQgD,GACvBkC,EAAS9C,QAAQnC,GAAKA,EACtBL,EAAkBsF,EAAS9C,YAEzB,MAAE,SAAUrb,GAElB,MADC8Y,EAAiB1lB,EAAS4M,IAAQ2W,EAAUlf,WAAkB,MAAE,cAC3DuI,OA7FJie,EAAUhmB,KAAK,SAAUihB,GAC/BX,EAAgBnlB,GAEhB,IAAIqlB,EAAYrB,EAAWhkB,EAAQD,MAC/B8lB,EAAUR,EAAUQ,QAExBC,EAAGC,QACH,IAAK,IAAIxuB,EAAI,EAAGA,EAAIsuB,EAAQ3tB,OAAQX,IAAK,CACxBsuB,EAAQtuB,GACd0wB,QAAQnC,GAAK,KAuBxB,OApBoB,IAAIvC,EAAU,SAAUlf,EAASC,GACjD,IAAImlB,EAAMnH,EAAI0I,eAAehrB,EAAQD,MAErC0pB,EAAIhD,QAAUgD,EAAIwB,UAAY,SAAUre,GACpC,IAAIkZ,EAAK2D,EAAI9kB,OACTmhB,GACAA,EAAGC,QAEPzhB,EAAOsI,IAGX6c,EAAI/C,UAAY,WACZ,IAAIZ,EAAK2D,EAAI9kB,OACTmhB,GACAA,EAAGC,QAEP1hB,EAAQyhB,MAIKjhB,KAAK,SAAUihB,GAChCT,EAAUS,GAAKA,EACf,IAAK,IAAIvuB,EAAI,EAAGA,EAAIsuB,EAAQ3tB,OAAQX,IAAK,CAErCkuB,EADcI,EAAQtuB,GACI0wB,YAExB,MAAE,SAAUrb,GAElB,MADC8Y,EAAiB1lB,EAAS4M,IAAQ2W,EAAUlf,WAAkB,MAAE,cAC3DuI,WAvDlBgU,EAAU2C,EAAUjf,OAAO,qBAmH/B,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,IAyBX,IAAIsK,EAAa,mEAGbC,EAAyB,gCAEzBC,EAAoB,YACpBC,EAA2BD,EAAkBlzB,OAG7CozB,EAAmB,OACnBC,EAAY,OAUZC,EAAgCH,EAA2BC,EAAiBpzB,OAE5EuzB,EAAa3iB,OAAOlQ,UAAUyH,SAElC,SAASqrB,EAAeC,GAEpB,IAEIp0B,EAEAq0B,EAAUC,EAAUC,EAAUC,EAJ9BC,EAAyC,IAA1BL,EAAiBzzB,OAChCwhB,EAAMiS,EAAiBzzB,OAEvBH,EAAI,EAG8C,MAAlD4zB,EAAiBA,EAAiBzzB,OAAS,KAC3C8zB,IACsD,MAAlDL,EAAiBA,EAAiBzzB,OAAS,IAC3C8zB,KAIR,IAAI3jB,EAAS,IAAIof,YAAYuE,GACzBC,EAAQ,IAAIvE,WAAWrf,GAE3B,IAAK9Q,EAAI,EAAGA,EAAImiB,EAAKniB,GAAK,EACtBq0B,EAAWV,EAAWzQ,QAAQkR,EAAiBp0B,IAC/Cs0B,EAAWX,EAAWzQ,QAAQkR,EAAiBp0B,EAAI,IACnDu0B,EAAWZ,EAAWzQ,QAAQkR,EAAiBp0B,EAAI,IACnDw0B,EAAWb,EAAWzQ,QAAQkR,EAAiBp0B,EAAI,IAGnD00B,EAAMl0B,KAAO6zB,GAAY,EAAIC,GAAY,EACzCI,EAAMl0B,MAAmB,GAAX8zB,IAAkB,EAAIC,GAAY,EAChDG,EAAMl0B,MAAmB,EAAX+zB,IAAiB,EAAe,GAAXC,EAEvC,OAAO1jB,EAKX,SAAS6jB,EAAe7jB,GAEpB,IAEI9Q,EAFA00B,EAAQ,IAAIvE,WAAWrf,GACvB8jB,EAAe,GAGnB,IAAK50B,EAAI,EAAGA,EAAI00B,EAAM/zB,OAAQX,GAAK,EAE/B40B,GAAgBjB,EAAWe,EAAM10B,IAAM,GACvC40B,GAAgBjB,GAAuB,EAAXe,EAAM10B,KAAW,EAAI00B,EAAM10B,EAAI,IAAM,GACjE40B,GAAgBjB,GAA2B,GAAfe,EAAM10B,EAAI,KAAY,EAAI00B,EAAM10B,EAAI,IAAM,GACtE40B,GAAgBjB,EAA0B,GAAfe,EAAM10B,EAAI,IASzC,OANI00B,EAAM/zB,OAAS,GAAM,EACrBi0B,EAAeA,EAAa5uB,UAAU,EAAG4uB,EAAaj0B,OAAS,GAAK,IAC7D+zB,EAAM/zB,OAAS,GAAM,IAC5Bi0B,EAAeA,EAAa5uB,UAAU,EAAG4uB,EAAaj0B,OAAS,GAAK,MAGjEi0B,EAyIX,IAAIC,EAAwB,CACxBC,UApIJ,SAAmBpwB,EAAOmE,GACtB,IAAIksB,EAAY,GAShB,GARIrwB,IACAqwB,EAAYb,EAAWxzB,KAAKgE,IAO5BA,IAAwB,yBAAdqwB,GAAwCrwB,EAAMoM,QAA4C,yBAAlCojB,EAAWxzB,KAAKgE,EAAMoM,SAAqC,CAG7H,IAAIA,EACAkkB,EAASnB,EAETnvB,aAAiBwrB,aACjBpf,EAASpM,EACTswB,GAAUjB,IAEVjjB,EAASpM,EAAMoM,OAEG,uBAAdikB,EACAC,GAhGK,OAiGgB,wBAAdD,EACPC,GAjGM,OAkGe,+BAAdD,EACPC,GAlGa,OAmGQ,wBAAdD,EACPC,GAnGM,OAoGe,yBAAdD,EACPC,GAnGO,OAoGc,wBAAdD,EACPC,GAtGM,OAuGe,yBAAdD,EACPC,GAtGO,OAuGc,0BAAdD,EACPC,GAvGQ,OAwGa,0BAAdD,EACPC,GAxGQ,OA0GRnsB,EAAS,IAAIvI,MAAM,wCAI3BuI,EAASmsB,EAASL,EAAe7jB,SAC9B,GAAkB,kBAAdikB,EAA+B,CAEtC,IAAIE,EAAa,IAAIxC,WAErBwC,EAAWC,OAAS,WAEhB,IAAIhT,EAtIO,uBAsIkBxd,EAAMqnB,KAAO,IAAM4I,EAAelzB,KAAK2L,QAEpEvE,EAASgrB,EAAoBG,EAAY9R,IAG7C+S,EAAWE,kBAAkBzwB,QAE7B,IACImE,EAASusB,KAAKC,UAAU3wB,IAC1B,MAAO9E,GACLmQ,QAAQC,MAAM,8CAA+CtL,GAE7DmE,EAAS,KAAMjJ,KAqEvB01B,YAxDJ,SAAqB5wB,GAIjB,GAAIA,EAAMsB,UAAU,EAAG8tB,KAA8BD,EACjD,OAAOuB,KAAKG,MAAM7wB,GAMtB,IAGI8wB,EAHApB,EAAmB1vB,EAAMsB,UAAUiuB,GACnClI,EAAOrnB,EAAMsB,UAAU8tB,EAA0BG,GAKrD,GAAIlI,IAASiI,GAAaJ,EAAuBhC,KAAKwC,GAAmB,CACrE,IAAIqB,EAAUrB,EAAiB5G,MAAMoG,GACrC4B,EAAWC,EAAQ,GACnBrB,EAAmBA,EAAiBpuB,UAAUyvB,EAAQ,GAAG90B,QAE7D,IAAImQ,EAASqjB,EAAeC,GAI5B,OAAQrI,GACJ,KAAKgI,EACD,OAAOjjB,EACX,KAAKkjB,EACD,OAAO1I,EAAW,CAACxa,GAAS,CAAEib,KAAMyJ,IACxC,IArLa,OAsLT,OAAO,IAAIE,UAAU5kB,GACzB,IAtLc,OAuLV,OAAO,IAAIqf,WAAWrf,GAC1B,IAvLqB,OAwLjB,OAAO,IAAI6kB,kBAAkB7kB,GACjC,IAxLc,OAyLV,OAAO,IAAI8kB,WAAW9kB,GAC1B,IAxLe,OAyLX,OAAO,IAAI+kB,YAAY/kB,GAC3B,IA3Lc,OA4LV,OAAO,IAAIglB,WAAWhlB,GAC1B,IA3Le,OA4LX,OAAO,IAAIilB,YAAYjlB,GAC3B,IA5LgB,OA6LZ,OAAO,IAAIL,aAAaK,GAC5B,IA7LgB,OA8LZ,OAAO,IAAIklB,aAAallB,GAC5B,QACI,MAAM,IAAIxQ,MAAM,gBAAkByrB,KAO1CoI,eAAgBA,EAChBQ,eAAgBA,GAapB,SAASsB,EAAcn2B,EAAG+tB,EAAQhlB,EAAUsjB,GACxCrsB,EAAEo2B,WAAW,8BAAgCrI,EAAOiB,UAAY,+CAAqD,GAAIjmB,EAAUsjB,GAyCvI,SAASgK,EAAcr2B,EAAG+tB,EAAQuI,EAAcC,EAAMxtB,EAAUsjB,GAC5DrsB,EAAEo2B,WAAWE,EAAcC,EAAMxtB,EAAU,SAAU/I,EAAGkQ,GAChDA,EAAMzP,OAASyP,EAAMsmB,WACrBx2B,EAAEo2B,WAAW,iEAAuE,CAACrI,EAAOiB,WAAY,SAAUhvB,EAAGy2B,GAC5GA,EAAQC,KAAK71B,OAOdwrB,EAAcrsB,EAAGkQ,GAJjBimB,EAAcn2B,EAAG+tB,EAAQ,WACrB/tB,EAAEo2B,WAAWE,EAAcC,EAAMxtB,EAAUsjB,IAC5CA,IAIRA,GAEHA,EAAcrsB,EAAGkQ,IAEtBmc,GA8VP,IAAIsK,EAAgB,CAChBxF,QAAS,gBACTC,aArZJ,SAAwBzoB,GACpB,IAAIqe,EAAOrlB,KACPosB,EAAS,CACTU,GAAI,MAGR,GAAI9lB,EACA,IAAK,IAAIzI,KAAKyI,EACVolB,EAAO7tB,GAA2B,iBAAfyI,EAAQzI,GAAkByI,EAAQzI,GAAG8I,WAAaL,EAAQzI,GAIrF,IAAI02B,EAAgB,IAAI1K,EAAU,SAAUlf,EAASC,GAGjD,IACI8gB,EAAOU,GAAKoD,aAAa9D,EAAOrlB,KAAMb,OAAOkmB,EAAOa,SAAUb,EAAO8I,YAAa9I,EAAO7R,MAC3F,MAAOpc,GACL,OAAOmN,EAAOnN,GAIlBiuB,EAAOU,GAAGzB,YAAY,SAAUhtB,GAC5Bm2B,EAAcn2B,EAAG+tB,EAAQ,WACrB/G,EAAK4J,QAAU7C,EACf/gB,KACD,SAAUhN,EAAGkQ,GACZjD,EAAOiD,MAEZjD,KAIP,OADA8gB,EAAO+I,WAAa/B,EACb6B,GAqXPjF,SA1oB+B,mBAAjBE,aA2oBdM,QAjUJ,SAAmB7jB,EAAUvF,GACzB,IAAIie,EAAOrlB,KAEP4nB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,WACd,IAAIugB,EAAS/G,EAAK4J,QAElB7C,EAAOU,GAAGzB,YAAY,SAAUhtB,GAC5Bq2B,EAAcr2B,EAAG+tB,EAAQ,iBAAmBA,EAAOiB,UAAW,GAAI,SAAUhvB,EAAGy2B,GAI3E,IAHA,IAAIC,EAAOD,EAAQC,KACf71B,EAAS61B,EAAK71B,OAETX,EAAI,EAAGA,EAAIW,EAAQX,IAAK,CAC7B,IAAI+jB,EAAOyS,EAAKzS,KAAK/jB,GACjBoN,EAAS2W,EAAKrf,MAYlB,GAPI0I,EADAA,GACSygB,EAAO+I,WAAWtB,YAAYloB,QAO5B,KAJfA,EAASgB,EAAShB,EAAQ2W,EAAKjd,IAAK9G,EAAI,IAMpC,YADA8M,EAAQM,GAKhBN,KACD,SAAUhN,EAAGkQ,GACZjD,EAAOiD,SAGT,MAAEjD,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GAyRPtP,QAhWJ,SAAmBjT,EAAK+B,GACpB,IAAIie,EAAOrlB,KAEXqF,EAAMslB,EAAatlB,GAEnB,IAAIuiB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,WACd,IAAIugB,EAAS/G,EAAK4J,QAClB7C,EAAOU,GAAGzB,YAAY,SAAUhtB,GAC5Bq2B,EAAcr2B,EAAG+tB,EAAQ,iBAAmBA,EAAOiB,UAAY,yBAA0B,CAAChoB,GAAM,SAAUhH,EAAGy2B,GACzG,IAAInpB,EAASmpB,EAAQC,KAAK71B,OAAS41B,EAAQC,KAAKzS,KAAK,GAAGrf,MAAQ,KAK5D0I,EADAA,GACSygB,EAAO+I,WAAWtB,YAAYloB,GAG3CN,EAAQM,IACT,SAAUtN,EAAGkQ,GACZjD,EAAOiD,SAGT,MAAEjD,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GAsUPnP,QAhOJ,SAAmBpT,EAAKpC,EAAOmE,GAC3B,OAxDJ,SAASguB,EAAS/vB,EAAKpC,EAAOmE,EAAUiuB,GACpC,IAAIhQ,EAAOrlB,KAEXqF,EAAMslB,EAAatlB,GAEnB,IAAIuiB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,gBAIAgC,IAAV5K,IACAA,EAAQ,MAIZ,IAAIqyB,EAAgBryB,EAEhBmpB,EAAS/G,EAAK4J,QAClB7C,EAAO+I,WAAW9B,UAAUpwB,EAAO,SAAUA,EAAOsL,GAC5CA,EACAjD,EAAOiD,GAEP6d,EAAOU,GAAGzB,YAAY,SAAUhtB,GAC5Bq2B,EAAcr2B,EAAG+tB,EAAQ,0BAA4BA,EAAOiB,UAAY,8BAAoC,CAAChoB,EAAKpC,GAAQ,WACtHoI,EAAQiqB,IACT,SAAUj3B,EAAGkQ,GACZjD,EAAOiD,MAEZ,SAAUgnB,GAGT,GAAIA,EAASz2B,OAASy2B,EAASC,UAAW,CAQtC,GAAkB,EAAdH,EAEA,YADAhqB,EAAQ+pB,EAAStpB,MAAMuZ,EAAM,CAAChgB,EAAKiwB,EAAeluB,EAAUiuB,EAAc,KAG9E/pB,EAAOiqB,UAKjB,MAAEjqB,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GAIS9b,MAAM9L,KAAM,CAACqF,EAAKpC,EAAOmE,EAAU,KAgOnDmqB,WA7NJ,SAAsBlsB,EAAK+B,GACvB,IAAIie,EAAOrlB,KAEXqF,EAAMslB,EAAatlB,GAEnB,IAAIuiB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,WACd,IAAIugB,EAAS/G,EAAK4J,QAClB7C,EAAOU,GAAGzB,YAAY,SAAUhtB,GAC5Bq2B,EAAcr2B,EAAG+tB,EAAQ,eAAiBA,EAAOiB,UAAY,iBAAkB,CAAChoB,GAAM,WAClFgG,KACD,SAAUhN,EAAGkQ,GACZjD,EAAOiD,SAGT,MAAEjD,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GA2MPpZ,MAtMJ,SAAiBpH,GACb,IAAIie,EAAOrlB,KAEP4nB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,WACd,IAAIugB,EAAS/G,EAAK4J,QAClB7C,EAAOU,GAAGzB,YAAY,SAAUhtB,GAC5Bq2B,EAAcr2B,EAAG+tB,EAAQ,eAAiBA,EAAOiB,UAAW,GAAI,WAC5DhiB,KACD,SAAUhN,EAAGkQ,GACZjD,EAAOiD,SAGT,MAAEjD,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GAsLP1oB,OAjLJ,SAAkBkI,GACd,IAAIie,EAAOrlB,KAEP4nB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,WACd,IAAIugB,EAAS/G,EAAK4J,QAClB7C,EAAOU,GAAGzB,YAAY,SAAUhtB,GAE5Bq2B,EAAcr2B,EAAG+tB,EAAQ,+BAAiCA,EAAOiB,UAAW,GAAI,SAAUhvB,EAAGy2B,GACzF,IAAInpB,EAASmpB,EAAQC,KAAKzS,KAAK,GAAG7jB,EAClC4M,EAAQM,IACT,SAAUtN,EAAGkQ,GACZjD,EAAOiD,SAGT,MAAEjD,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GA+JPviB,IArJJ,SAAejH,EAAGgJ,GACd,IAAIie,EAAOrlB,KAEP4nB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,WACd,IAAIugB,EAAS/G,EAAK4J,QAClB7C,EAAOU,GAAGzB,YAAY,SAAUhtB,GAC5Bq2B,EAAcr2B,EAAG+tB,EAAQ,mBAAqBA,EAAOiB,UAAY,wBAAyB,CAACjvB,EAAI,GAAI,SAAUC,EAAGy2B,GAC5G,IAAInpB,EAASmpB,EAAQC,KAAK71B,OAAS41B,EAAQC,KAAKzS,KAAK,GAAGjd,IAAM,KAC9DgG,EAAQM,IACT,SAAUtN,EAAGkQ,GACZjD,EAAOiD,SAGT,MAAEjD,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GAoIPzH,KAjIJ,SAAgB/Y,GACZ,IAAIie,EAAOrlB,KAEP4nB,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C+Z,EAAKqK,QAAQ7jB,KAAK,WACd,IAAIugB,EAAS/G,EAAK4J,QAClB7C,EAAOU,GAAGzB,YAAY,SAAUhtB,GAC5Bq2B,EAAcr2B,EAAG+tB,EAAQ,mBAAqBA,EAAOiB,UAAW,GAAI,SAAUhvB,EAAGy2B,GAG7E,IAFA,IAAI3U,EAAO,GAEF5hB,EAAI,EAAGA,EAAIu2B,EAAQC,KAAK71B,OAAQX,IACrC4hB,EAAKpT,KAAK+nB,EAAQC,KAAKzS,KAAK/jB,GAAG8G,KAGnCgG,EAAQ8U,IACT,SAAU9hB,EAAGkQ,GACZjD,EAAOiD,SAGT,MAAEjD,KAIhB,OADAkf,EAAgB5C,EAASxgB,GAClBwgB,GA2GP8J,aA/EJ,SAAwB1qB,EAASI,GAC7BA,EAAWyjB,EAAY/e,MAAM9L,KAAMyV,WAEnC,IAAIkc,EAAgB3xB,KAAK4xB,UACzB5qB,EAA6B,mBAAZA,GAA0BA,GAAW,IACzCD,OACTC,EAAQD,KAAOC,EAAQD,MAAQ4qB,EAAc5qB,KAC7CC,EAAQqmB,UAAYrmB,EAAQqmB,WAAasE,EAActE,WAG3D,IACIzF,EADAvC,EAAOrlB,KAsDX,OADAwqB,EAhDI5C,EAHC5gB,EAAQD,KAGC,IAAIwjB,EAAU,SAAUlf,GAC9B,IAAIyhB,EAGAA,EAFA9lB,EAAQD,OAAS4qB,EAAc5qB,KAE1Bse,EAAK4J,QAAQnC,GAEboD,aAAalpB,EAAQD,KAAM,GAAI,GAAI,GAGvCC,EAAQqmB,UAIThiB,EAAQ,CACJyhB,GAAIA,EACJ2I,WAAY,CAACzuB,EAAQqmB,aAJzBhiB,EAjDhB,SAA0ByhB,GACtB,OAAO,IAAIvC,EAAU,SAAUlf,EAASC,GACpCwhB,EAAGzB,YAAY,SAAUhtB,GACrBA,EAAEo2B,WAAW,8FAAoG,GAAI,SAAUp2B,EAAGy2B,GAG9H,IAFA,IAAIW,EAAa,GAERl3B,EAAI,EAAGA,EAAIu2B,EAAQC,KAAK71B,OAAQX,IACrCk3B,EAAW1oB,KAAK+nB,EAAQC,KAAKzS,KAAK/jB,GAAGwI,MAGzCsE,EAAQ,CACJyhB,GAAIA,EACJ2I,WAAYA,KAEjB,SAAUp3B,EAAGkQ,GACZjD,EAAOiD,MAEZ,SAAUgnB,GACTjqB,EAAOiqB,OA+BKG,CAAiB5I,MAO9BjhB,KAAK,SAAU8pB,GACd,OAAO,IAAIpL,EAAU,SAAUlf,EAASC,GACpCqqB,EAAc7I,GAAGzB,YAAY,SAAUhtB,GACnC,SAASu3B,EAAUvI,GACf,OAAO,IAAI9C,EAAU,SAAUlf,EAASC,GACpCjN,EAAEo2B,WAAW,wBAA0BpH,EAAW,GAAI,WAClDhiB,KACD,SAAUhN,EAAGkQ,GACZjD,EAAOiD,OAMnB,IADA,IAAIsnB,EAAa,GACRt3B,EAAI,EAAGmiB,EAAMiV,EAAcF,WAAWv2B,OAAQX,EAAImiB,EAAKniB,IAC5Ds3B,EAAW9oB,KAAK6oB,EAAUD,EAAcF,WAAWl3B,KAGvDgsB,EAAUjd,IAAIuoB,GAAYhqB,KAAK,WAC3BR,MACM,MAAE,SAAUlN,GAClBmN,EAAOnN,MAEZ,SAAUo3B,GACTjqB,EAAOiqB,SA5CThL,EAAUjf,OAAO,qBAkDNlE,GAClBwgB,IA4BX,SAASkO,EAAc9uB,EAAS+uB,GAC5B,IAAIC,EAAYhvB,EAAQD,KAAO,IAK/B,OAHIC,EAAQqmB,YAAc0I,EAAc1I,YACpC2I,GAAahvB,EAAQqmB,UAAY,KAE9B2I,EAqBX,SAASC,IACL,OAlBJ,WACI,IAAIC,EAAsB,4BAE1B,IAII,OAHAC,aAAa1d,QAAQyd,GAAqB,GAC1CC,aAAa5E,WAAW2E,IAEjB,EACT,MAAO/3B,GACL,OAAO,GASHi4B,IAAqD,EAAtBD,aAAaj3B,OAgSzC,SAAXoG,EAA6BgR,EAAO+f,GAGpC,IAFA,IAL+BhiB,EAAGrI,EAK9B0U,EAAMpK,EAAMpX,OACZX,EAAI,EACDA,EAAImiB,GAAK,CACZ,IAR2BrM,EAQbiC,EAAM/X,OARUyN,EAQNqqB,IAPG,iBAANhiB,GAA+B,iBAANrI,GAAkBsqB,MAAMjiB,IAAMiiB,MAAMtqB,GAQ9E,OAAO,EAEXzN,IAGJ,OAAO,EA7BX,IAAIg4B,EAAsB,CACtB/G,QAAS,sBACTC,aA3QJ,SAAwBzoB,GACpB,IACIolB,EAAS,GACb,GAAIplB,EACA,IAAK,IAAIzI,KAAKyI,EACVolB,EAAO7tB,GAAKyI,EAAQzI,GAM5B,OAFA6tB,EAAO4J,UAAYF,EAAc9uB,EARtBhH,KAQoC8vB,gBAE1CmG,MAVMj2B,KAcNivB,QAAU7C,GACR+I,WAAa/B,EAEb7I,EAAUlf,WANNkf,EAAUjf,UAgQrB0kB,SAtTJ,WACI,IACI,MAA+B,oBAAjBmG,cAAgC,YAAaA,gBAEzDA,aAAa1d,QACjB,MAAOta,GACL,OAAO,GAgTDq4B,GACVhG,QAxMJ,SAAmB7jB,EAAUvF,GACzB,IAAIie,EAAOrlB,KAEP4nB,EAAUvC,EAAKqK,QAAQ7jB,KAAK,WAc5B,IAbA,IAAIugB,EAAS/G,EAAK4J,QACd+G,EAAY5J,EAAO4J,UACnBS,EAAkBT,EAAU92B,OAC5BA,EAASi3B,aAAaj3B,OAQtByxB,EAAkB,EAEbpyB,EAAI,EAAGA,EAAIW,EAAQX,IAAK,CAC7B,IAAI8G,EAAM8wB,aAAa9wB,IAAI9G,GAC3B,GAA+B,IAA3B8G,EAAIoc,QAAQuU,GAAhB,CAGA,IAAI/yB,EAAQkzB,aAAa7d,QAAQjT,GAYjC,GALIpC,EADAA,GACQmpB,EAAO+I,WAAWtB,YAAY5wB,QAK5B,KAFdA,EAAQ0J,EAAS1J,EAAOoC,EAAId,UAAUkyB,GAAkB9F,MAGpD,OAAO1tB,MAMnB,OADAunB,EAAgB5C,EAASxgB,GAClBwgB,GAgKPtP,QAlOJ,SAAmBjT,EAAK+B,GACpB,IAAIie,EAAOrlB,KAEXqF,EAAMslB,EAAatlB,GAEnB,IAAIuiB,EAAUvC,EAAKqK,QAAQ7jB,KAAK,WAC5B,IAAIugB,EAAS/G,EAAK4J,QACdtjB,EAASwqB,aAAa7d,QAAQ8T,EAAO4J,UAAY3wB,GAUrD,OAHIsG,EADAA,GACSygB,EAAO+I,WAAWtB,YAAYloB,KAO/C,OADA6e,EAAgB5C,EAASxgB,GAClBwgB,GA8MPnP,QAnFJ,SAAmBpT,EAAKpC,EAAOmE,GAC3B,IAAIie,EAAOrlB,KAEXqF,EAAMslB,EAAatlB,GAEnB,IAAIuiB,EAAUvC,EAAKqK,QAAQ7jB,KAAK,gBAGdgC,IAAV5K,IACAA,EAAQ,MAIZ,IAAIqyB,EAAgBryB,EAEpB,OAAO,IAAIsnB,EAAU,SAAUlf,EAASC,GACpC,IAAI8gB,EAAS/G,EAAK4J,QAClB7C,EAAO+I,WAAW9B,UAAUpwB,EAAO,SAAUA,EAAOsL,GAChD,GAAIA,EACAjD,EAAOiD,QAEP,IACI4nB,aAAa1d,QAAQ2T,EAAO4J,UAAY3wB,EAAKpC,GAC7CoI,EAAQiqB,GACV,MAAOn3B,GAGU,uBAAXA,EAAE4I,MAA4C,+BAAX5I,EAAE4I,MACrCuE,EAAOnN,GAEXmN,EAAOnN,UAQ3B,OADAqsB,EAAgB5C,EAASxgB,GAClBwgB,GA8CP2J,WAtGJ,SAAsBlsB,EAAK+B,GACvB,IAAIie,EAAOrlB,KAEXqF,EAAMslB,EAAatlB,GAEnB,IAAIuiB,EAAUvC,EAAKqK,QAAQ7jB,KAAK,WAC5B,IAAIugB,EAAS/G,EAAK4J,QAClBkH,aAAa5E,WAAWnF,EAAO4J,UAAY3wB,KAI/C,OADAmlB,EAAgB5C,EAASxgB,GAClBwgB,GA4FPpZ,MA1PJ,SAAiBpH,GACb,IAAIie,EAAOrlB,KACP4nB,EAAUvC,EAAKqK,QAAQ7jB,KAAK,WAG5B,IAFA,IAAImqB,EAAY3Q,EAAK4J,QAAQ+G,UAEpBz3B,EAAI43B,aAAaj3B,OAAS,EAAQ,GAALX,EAAQA,IAAK,CAC/C,IAAI8G,EAAM8wB,aAAa9wB,IAAI9G,GAEI,IAA3B8G,EAAIoc,QAAQuU,IACZG,aAAa5E,WAAWlsB,MAMpC,OADAmlB,EAAgB5C,EAASxgB,GAClBwgB,GA4OP1oB,OAnHJ,SAAkBkI,GACd,IACIwgB,EADO5nB,KACQmgB,OAAOtU,KAAK,SAAUsU,GACrC,OAAOA,EAAKjhB,SAIhB,OADAsrB,EAAgB5C,EAASxgB,GAClBwgB,GA6GPviB,IAjKJ,SAAejH,EAAGgJ,GACd,IAAIie,EAAOrlB,KACP4nB,EAAUvC,EAAKqK,QAAQ7jB,KAAK,WAC5B,IACIF,EADAygB,EAAS/G,EAAK4J,QAElB,IACItjB,EAASwqB,aAAa9wB,IAAIjH,GAC5B,MAAOmQ,GACL5C,EAAS,KAQb,OAHIA,EADAA,GACSA,EAAOpH,UAAU6nB,EAAO4J,UAAU92B,UAOnD,OADAsrB,EAAgB5C,EAASxgB,GAClBwgB,GA8IPzH,KA3IJ,SAAgB/Y,GACZ,IAAIie,EAAOrlB,KACP4nB,EAAUvC,EAAKqK,QAAQ7jB,KAAK,WAK5B,IAJA,IAAIugB,EAAS/G,EAAK4J,QACd/vB,EAASi3B,aAAaj3B,OACtBihB,EAAO,GAEF5hB,EAAI,EAAGA,EAAIW,EAAQX,IAAK,CAC7B,IAAIm4B,EAAUP,aAAa9wB,IAAI9G,GACW,IAAtCm4B,EAAQjV,QAAQ2K,EAAO4J,YACvB7V,EAAKpT,KAAK2pB,EAAQnyB,UAAU6nB,EAAO4J,UAAU92B,SAIrD,OAAOihB,IAIX,OADAqK,EAAgB5C,EAASxgB,GAClBwgB,GA0HP8J,aAhDJ,SAAwB1qB,EAASI,GAI7B,GAHAA,EAAWyjB,EAAY/e,MAAM9L,KAAMyV,aAEnCzO,EAA6B,mBAAZA,GAA0BA,GAAW,IACzCD,KAAM,CACf,IAAI4qB,EAAgB3xB,KAAK4xB,SACzB5qB,EAAQD,KAAOC,EAAQD,MAAQ4qB,EAAc5qB,KAC7CC,EAAQqmB,UAAYrmB,EAAQqmB,WAAasE,EAActE,UAG3D,IACIzF,EADAvC,EAAOrlB,KAuBX,OADAwqB,EAjBI5C,EAHC5gB,EAAQD,KAGC,IAAIwjB,EAAU,SAAUlf,GACzBrE,EAAQqmB,UAGThiB,EAAQyqB,EAAc9uB,EAASqe,EAAKyK,iBAFpCzkB,EAAQrE,EAAQD,KAAO,OAI5B8E,KAAK,SAAUmqB,GACd,IAAK,IAAIz3B,EAAI43B,aAAaj3B,OAAS,EAAQ,GAALX,EAAQA,IAAK,CAC/C,IAAI8G,EAAM8wB,aAAa9wB,IAAI9G,GAEI,IAA3B8G,EAAIoc,QAAQuU,IACZG,aAAa5E,WAAWlsB,MAb1BklB,EAAUjf,OAAO,qBAmBNlE,GAClBwgB,IAmCPzN,EAAUhL,MAAMgL,SAAW,SAAUwc,GACrC,MAA+C,mBAAxC7mB,OAAOlQ,UAAUyH,SAASpI,KAAK03B,IAKtCC,EAAiB,GAEjBC,EAAgB,GAEhBC,EAAiB,CACjBC,UAAWxH,EACXyH,OAAQhC,EACRiC,aAAcV,GAGdW,EAAqB,CAACJ,EAAeC,UAAUvH,QAASsH,EAAeE,OAAOxH,QAASsH,EAAeG,aAAazH,SAEnH2H,EAAwB,CAAC,gBAEzBC,GAAiB,CAAC,QAAS,UAAW,UAAW,MAAO,OAAQ,SAAU,aAAc,WAAWC,OAAOF,GAE1GG,GAAgB,CAChBpC,YAAa,GACbqC,OAAQL,EAAmBvxB,QAC3BoB,KAAM,cAGNwT,KAAM,QACN8S,UAAW,gBACXJ,QAAS,GAGb,SAASuK,GAAcC,EAAqBC,GACxCD,EAAoBC,GAAiB,WACjC,IAAIC,EAAQliB,UACZ,OAAOgiB,EAAoB/H,QAAQ7jB,KAAK,WACpC,OAAO4rB,EAAoBC,GAAe5rB,MAAM2rB,EAAqBE,MAKjF,SAASC,GAAT,GACI,IAAK,IAAIr5B,EAAI,EAAGA,EAAIkX,UAAUvW,OAAQX,IAAK,CACvC,IAAIo4B,EAAMlhB,UAAUlX,GAEpB,GAAIo4B,EACA,IAAK,IAAIkB,KAAQlB,EACTA,EAAIla,eAAeob,KACf1d,EAAQwc,EAAIkB,IAPpC,EAQqCA,GAAQlB,EAAIkB,GAAMlyB,QARvD,EAUqCkyB,GAAQlB,EAAIkB,IAO7C,OAjBJ,EAqBI,SAASC,GAAY9wB,GAGjB,IAAK,IAAI+wB,KApmEjB,SAAyBC,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAInrB,UAAU,qCAkmExGorB,CAAgBl4B,KAAM83B,IAEIhB,EACtB,GAAIA,EAAera,eAAesb,GAAgB,CAC9C,IAAIR,EAAST,EAAeiB,GACxBI,EAAaZ,EAAO/H,QACxBxvB,KAAK+3B,GAAiBI,EAEjBvB,EAAeuB,IAIhBn4B,KAAKo4B,aAAab,GAK9Bv3B,KAAK8vB,eAAiB8H,GAAO,GAAIN,IACjCt3B,KAAKq4B,QAAUT,GAAO,GAAI53B,KAAK8vB,eAAgB9oB,GAC/ChH,KAAKs4B,WAAa,KAClBt4B,KAAKu4B,YAAc,KACnBv4B,KAAKw4B,QAAS,EACdx4B,KAAKivB,QAAU,KAEfjvB,KAAKy4B,+BACLz4B,KAAK04B,UAAU14B,KAAKq4B,QAAQd,QAAe,MAAE,cAiRrD,IAAIoB,GAAiB,IAxQjBb,GAAYl4B,UAAUgyB,OAAS,SAAgB5qB,GAI3C,GAA0E,iBAAlD,IAAZA,EAA0B,YAAcqiB,EAAQriB,IA0BrD,MAAuB,iBAAZA,EACPhH,KAAKq4B,QAAQrxB,GAEbhH,KAAKq4B,QA1BZ,GAAIr4B,KAAKw4B,OACL,OAAO,IAAI35B,MAAM,wDAGrB,IAAK,IAAIN,KAAKyI,EAAS,CAKnB,GAJU,cAANzI,IACAyI,EAAQzI,GAAKyI,EAAQzI,GAAG0G,QAAQ,MAAO,MAGjC,YAAN1G,GAAyC,iBAAfyI,EAAQzI,GAClC,OAAO,IAAIM,MAAM,sCAGrBmB,KAAKq4B,QAAQ95B,GAAKyI,EAAQzI,GAK9B,QAAI,WAAYyI,GAAWA,EAAQuwB,SACxBv3B,KAAK04B,UAAU14B,KAAKq4B,QAAQd,SAe/CO,GAAYl4B,UAAUw4B,aAAe,SAAsBQ,EAAcxxB,EAAUsjB,GAC/E,IAAI9C,EAAU,IAAI2C,EAAU,SAAUlf,EAASC,GAC3C,IACI,IAAI6sB,EAAaS,EAAapJ,QAC1BqJ,EAAkB,IAAIh6B,MAAM,wFAIhC,IAAK+5B,EAAapJ,QAEd,YADAlkB,EAAOutB,GAKX,IADA,IAAIC,EAAgB1B,GAAeC,OAAO,gBACjC94B,EAAI,EAAGmiB,EAAMoY,EAAc55B,OAAQX,EAAImiB,EAAKniB,IAAK,CACtD,IAAIw6B,EAAmBD,EAAcv6B,GAKrC,KADkB+G,EAAS6xB,EAAuB4B,IAC/BH,EAAaG,KAAgE,mBAAnCH,EAAaG,GAEtE,YADAztB,EAAOutB,IAKe,WAU1B,IATA,IAAIG,EAA8B,SAAqCC,GACnE,OAAO,WACH,IAAI1qB,EAAQ,IAAI1P,MAAM,UAAYo6B,EAAa,6CAC3CrR,EAAU2C,EAAUjf,OAAOiD,GAE/B,OADAic,EAAgB5C,EAASnS,UAAUA,UAAUvW,OAAS,IAC/C0oB,IAINpS,EAAK,EAAG0jB,EAAO/B,EAAsBj4B,OAAQsW,EAAK0jB,EAAM1jB,IAAM,CACnE,IAAI2jB,EAAuBhC,EAAsB3hB,GAC5CojB,EAAaO,KACdP,EAAaO,GAAwBH,EAA4BG,KAK7EC,GAEA,IAAIC,EAAmB,SAA0BC,GACzC1C,EAAeuB,IACf7pB,QAAQirB,KAAK,kCAAoCpB,GAErDvB,EAAeuB,GAAcS,EAC7B/B,EAAcsB,GAAcmB,EAI5BjuB,KAGA,aAAcutB,EACVA,EAAa5I,UAA6C,mBAA1B4I,EAAa5I,SAC7C4I,EAAa5I,WAAWnkB,KAAKwtB,EAAkB/tB,GAE/C+tB,IAAmBT,EAAa5I,UAGpCqJ,GAAiB,GAEvB,MAAOl7B,GACLmN,EAAOnN,MAKf,OADAssB,EAAoB7C,EAASxgB,EAAUsjB,GAChC9C,GAGXkQ,GAAYl4B,UAAU23B,OAAS,WAC3B,OAAOv3B,KAAKwvB,SAAW,MAG3BsI,GAAYl4B,UAAU45B,UAAY,SAAmBrB,EAAY/wB,EAAUsjB,GACvE,IAAI+O,EAAmB7C,EAAeuB,GAAc5N,EAAUlf,QAAQurB,EAAeuB,IAAe5N,EAAUjf,OAAO,IAAIzM,MAAM,sBAG/H,OADA4rB,EAAoBgP,EAAkBryB,EAAUsjB,GACzC+O,GAGX3B,GAAYl4B,UAAU85B,cAAgB,SAAuBtyB,GACzD,IAAIuyB,EAAoBpP,EAAUlf,QAAQ+nB,GAE1C,OADA3I,EAAoBkP,EAAmBvyB,GAChCuyB,GAGX7B,GAAYl4B,UAAU8vB,MAAQ,SAAetoB,GACzC,IAAIie,EAAOrlB,KAEP4nB,EAAUvC,EAAKiT,WAAWzsB,KAAK,WAK/B,OAJoB,OAAhBwZ,EAAKmT,SACLnT,EAAKmT,OAASnT,EAAKkT,eAGhBlT,EAAKmT,SAIhB,OADA/N,EAAoB7C,EAASxgB,EAAUA,GAChCwgB,GAGXkQ,GAAYl4B,UAAU84B,UAAY,SAAmBkB,EAASxyB,EAAUsjB,GACpE,IAAIrF,EAAOrlB,KAENma,EAAQyf,KACTA,EAAU,CAACA,IAGf,IAAIC,EAAmB75B,KAAK85B,qBAAqBF,GAEjD,SAASG,IACL1U,EAAKgT,QAAQd,OAASlS,EAAKkS,SAG/B,SAASyC,EAAqBzC,GAK1B,OAJAlS,EAAK4U,QAAQ1C,GACbwC,IAEA1U,EAAKmT,OAASnT,EAAKoK,aAAapK,EAAKgT,SAC9BhT,EAAKmT,OA+BhB,IAAI0B,EAAuC,OAApBl6B,KAAKs4B,WAAsBt4B,KAAKs4B,WAAkB,MAAE,WACvE,OAAO/N,EAAUlf,YAChBkf,EAAUlf,UAqBf,OAnBArL,KAAKs4B,WAAa4B,EAAiBruB,KAAK,WACpC,IAAIssB,EAAa0B,EAAiB,GAIlC,OAHAxU,EAAK4J,QAAU,KACf5J,EAAKmT,OAAS,KAEPnT,EAAKmU,UAAUrB,GAAYtsB,KAAK,SAAU0rB,GAC7ClS,EAAKmK,QAAU+H,EAAO/H,QACtBuK,IACA1U,EAAKoT,+BACLpT,EAAKkT,YAzCb,SAAoBsB,GAChB,OAAO,WACH,IAAIM,EAAqB,EAmBzB,OAjBA,SAASC,IACL,KAAOD,EAAqBN,EAAiB36B,QAAQ,CACjD,IAAIi5B,EAAa0B,EAAiBM,GAMlC,OALAA,IAEA9U,EAAK4J,QAAU,KACf5J,EAAKmT,OAAS,KAEPnT,EAAKmU,UAAUrB,GAAYtsB,KAAKmuB,GAA6B,MAAEI,GAG1EL,IACA,IAAIxrB,EAAQ,IAAI1P,MAAM,sCAEtB,OADAwmB,EAAKiT,WAAa/N,EAAUjf,OAAOiD,GAC5B8W,EAAKiT,WAGT8B,IAoBYC,CAAWR,OAE5B,MAAE,WACRE,IACA,IAAIxrB,EAAQ,IAAI1P,MAAM,sCAEtB,OADAwmB,EAAKiT,WAAa/N,EAAUjf,OAAOiD,GAC5B8W,EAAKiT,aAGhB7N,EAAoBzqB,KAAKs4B,WAAYlxB,EAAUsjB,GACxC1qB,KAAKs4B,YAGhBR,GAAYl4B,UAAUoK,SAAW,SAAkBmuB,GAC/C,QAAStB,EAAcsB,IAG3BL,GAAYl4B,UAAUq6B,QAAU,SAAiBK,GAC7C1C,GAAO53B,KAAMs6B,IAGjBxC,GAAYl4B,UAAUk6B,qBAAuB,SAA8BF,GAEvE,IADA,IAAIC,EAAmB,GACdt7B,EAAI,EAAGmiB,EAAMkZ,EAAQ16B,OAAQX,EAAImiB,EAAKniB,IAAK,CAChD,IAAI45B,EAAayB,EAAQr7B,GACrByB,KAAKgK,SAASmuB,IACd0B,EAAiB9sB,KAAKorB,GAG9B,OAAO0B,GAGX/B,GAAYl4B,UAAU64B,6BAA+B,WAKjD,IAAK,IAAIl6B,EAAI,EAAGmiB,EAAM0W,GAAel4B,OAAQX,EAAImiB,EAAKniB,IAClDi5B,GAAcx3B,KAAMo3B,GAAe74B,KAI3Cu5B,GAAYl4B,UAAU26B,eAAiB,SAAwBvzB,GAC3D,OAAO,IAAI8wB,GAAY9wB,IAGpB8wB,IASX14B,EAAOJ,QAAU25B,IAEf,CAAC/vB,EAAI,KAAK,GAAG,CAAC,GAruFmW,CAquF/V,OAGjB3J,KAAKe,KAAuB,oBAAXklB,OAAyBA,OAAyB,oBAATG,KAAuBA,KAAyB,oBAAX1U,OAAyBA,OAAS,KAClI,IAAI6pB,GAAG,CAAC,SAAS97B,EAAQU,EAAOJ,IAClC,SAAWkmB,GAMX,IAcIxlB,EAAQ,SAAW+6B,GAGvB,IAAIC,EAAO,8BACP5d,EAAW,EAEX5Q,EAAI,CACPyuB,OAAQF,EAAM/6B,OAAS+6B,EAAM/6B,MAAMi7B,OACnCC,4BAA6BH,EAAM/6B,OAAS+6B,EAAM/6B,MAAMk7B,4BACxDC,KAAM,CACLC,OAAQ,SAAUC,GACjB,OAAIA,aAAkBC,EACd,IAAIA,EAAMD,EAAOzQ,KAAMpe,EAAE2uB,KAAKC,OAAOC,EAAO9mB,SAAU8mB,EAAOE,OAC1D9rB,MAAMgL,QAAQ4gB,GACjBA,EAAOpxB,IAAIuC,EAAE2uB,KAAKC,QAElBC,EAAO91B,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAQA,QAAQ,UAAW,MAIhFqlB,KAAM,SAAUhsB,GACf,OAAOwR,OAAOlQ,UAAUyH,SAASpI,KAAKX,GAAGqH,MAAM,GAAI,IAGpDu1B,MAAO,SAAU3S,GAIhB,OAHKA,EAAU,MACdzY,OAAO+M,eAAe0L,EAAK,OAAQ,CAAEtlB,QAAS6Z,IAExCyL,EAAU,MAIlBpF,MAAO,SAASgY,EAAU78B,EAAG88B,GAC5B,IAAIjY,EAAO/Z,EAAIkhB,EAAOpe,EAAE2uB,KAAKvQ,KAAKhsB,GAGlC,OAFA88B,EAAUA,GAAW,GAEb9Q,GACP,IAAK,SAEJ,GADAlhB,EAAK8C,EAAE2uB,KAAKK,MAAM58B,GACd88B,EAAQhyB,GACX,OAAOgyB,EAAQhyB,GAKhB,IAAK,IAAI/D,KAHT8d,EAAQ,GACRiY,EAAQhyB,GAAM+Z,EAEE7kB,EACXA,EAAEme,eAAepX,KACpB8d,EAAM9d,GAAO81B,EAAU78B,EAAE+G,GAAM+1B,IAIjC,OAAOjY,EAER,IAAK,QAEJ,OADA/Z,EAAK8C,EAAE2uB,KAAKK,MAAM58B,GACd88B,EAAQhyB,GACJgyB,EAAQhyB,IAEhB+Z,EAAQ,GACRiY,EAAQhyB,GAAM+Z,EAEd7kB,EAAEqV,QAAQ,SAAU/G,EAAGrO,GACtB4kB,EAAM5kB,GAAK48B,EAAUvuB,EAAGwuB,KAGlBjY,GAER,QACC,OAAO7kB,KAKX2I,UAAW,CACV2wB,OAAQ,SAAUxuB,EAAIiyB,GACrB,IAAIX,EAAOxuB,EAAE2uB,KAAK1X,MAAMjX,EAAEjF,UAAUmC,IAEpC,IAAK,IAAI/D,KAAOg2B,EACfX,EAAKr1B,GAAOg2B,EAAMh2B,GAGnB,OAAOq1B,GAYRY,aAAc,SAAUC,EAAQC,EAAQC,EAAQC,GAE/C,IAAIC,GADJD,EAAOA,GAAQxvB,EAAEjF,WACEs0B,GACfK,EAAM,GAEV,IAAK,IAAIC,KAASF,EACjB,GAAIA,EAAQlf,eAAeof,GAAQ,CAElC,GAAIA,GAASL,EACZ,IAAK,IAAIM,KAAYL,EAChBA,EAAOhf,eAAeqf,KACzBF,EAAIE,GAAYL,EAAOK,IAMrBL,EAAOhf,eAAeof,KAC1BD,EAAIC,GAASF,EAAQE,IAKxB,IAAIE,EAAML,EAAKH,GAUf,OATAG,EAAKH,GAAUK,EAGf1vB,EAAEjF,UAAU+0B,IAAI9vB,EAAEjF,UAAW,SAAS5B,EAAKpC,GACtCA,IAAU84B,GAAO12B,GAAOk2B,IAC3Bv7B,KAAKqF,GAAOu2B,KAIPA,GAIRI,IAAK,SAASA,EAAI19B,EAAG8I,EAAUkjB,EAAM8Q,GACpCA,EAAUA,GAAW,GAErB,IAAIF,EAAQhvB,EAAE2uB,KAAKK,MAEnB,IAAK,IAAI38B,KAAKD,EACb,GAAIA,EAAEme,eAAele,GAAI,CACxB6I,EAASnI,KAAKX,EAAGC,EAAGD,EAAEC,GAAI+rB,GAAQ/rB,GAElC,IAAIuL,EAAWxL,EAAEC,GACb09B,EAAe/vB,EAAE2uB,KAAKvQ,KAAKxgB,GAEV,WAAjBmyB,GAA8Bb,EAAQF,EAAMpxB,IAItB,UAAjBmyB,GAA6Bb,EAAQF,EAAMpxB,MACnDsxB,EAAQF,EAAMpxB,KAAa,EAC3BkyB,EAAIlyB,EAAU1C,EAAU7I,EAAG68B,KAL3BA,EAAQF,EAAMpxB,KAAa,EAC3BkyB,EAAIlyB,EAAU1C,EAAU,KAAMg0B,OAUnCc,QAAS,GAETC,aAAc,SAASC,EAAOh1B,GAC7B8E,EAAEmwB,kBAAkB16B,SAAUy6B,EAAOh1B,IAGtCi1B,kBAAmB,SAASC,EAAWF,EAAOh1B,GAC7C,IAAI0d,EAAM,CACT1d,SAAUA,EACVoa,SAAU,oGAGXtV,EAAEqwB,MAAMC,IAAI,sBAAuB1X,GAInC,IAFA,IAEcpjB,EAFV+6B,EAAW3X,EAAI2X,UAAYH,EAAUI,iBAAiB5X,EAAItD,UAErDjjB,EAAE,EAAYmD,EAAU+6B,EAASl+B,MACzC2N,EAAEhF,iBAAiBxF,GAAmB,IAAV06B,EAAgBtX,EAAI1d,WAIlDF,iBAAkB,SAASxF,EAAS06B,EAAOh1B,GAI1C,IAFA,IAAIhG,EAAUu6B,EAAS5yB,EAASrH,EAEzBqH,IAAW2xB,EAAKvK,KAAKpnB,EAAOgL,YAClChL,EAASA,EAAOud,WAGbvd,IACH3H,GAAY2H,EAAOgL,UAAUgY,MAAM2O,IAAS,CAAC,CAAC,KAAK,GAAG7wB,cACtD8xB,EAAUzvB,EAAEjF,UAAU7F,IAIvBM,EAAQqS,UAAYrS,EAAQqS,UAAU9O,QAAQy1B,EAAM,IAAIz1B,QAAQ,OAAQ,KAAO,aAAe7D,EAE1FM,EAAQ4kB,aAEXvd,EAASrH,EAAQ4kB,WAEb,OAAO6J,KAAKpnB,EAAO4zB,YACtB5zB,EAAOgL,UAAYhL,EAAOgL,UAAU9O,QAAQy1B,EAAM,IAAIz1B,QAAQ,OAAQ,KAAO,aAAe7D,IAalE,SAAxBw7B,EAAkCC,GACrC/X,EAAI+X,gBAAkBA,EAEtB3wB,EAAEqwB,MAAMC,IAAI,gBAAiB1X,GAE7BA,EAAIpjB,QAAQd,UAAYkkB,EAAI+X,gBAE5B3wB,EAAEqwB,MAAMC,IAAI,kBAAmB1X,GAC/B5Y,EAAEqwB,MAAMC,IAAI,WAAY1X,GACxB1d,GAAYA,EAASnI,KAAK6lB,EAAIpjB,SAlB/B,IAEIojB,EAAM,CACTpjB,QAASA,EACTN,SAAUA,EACVu6B,QAASA,EACT78B,KANU4C,EAAQwS,aAuBnB,GAFAhI,EAAEqwB,MAAMC,IAAI,sBAAuB1X,GAE9BA,EAAIhmB,KAOT,GAFAoN,EAAEqwB,MAAMC,IAAI,mBAAoB1X,GAE3BA,EAAI6W,QAKT,GAAIS,GAAS3B,EAAMqC,OAAQ,CAC1B,IAAIC,EAAS,IAAID,OAAO5wB,EAAE8wB,UAE1BD,EAAOpW,UAAY,SAASsW,GAC3BL,EAAsBK,EAAI/sB,OAG3B6sB,EAAOlW,YAAY8M,KAAKC,UAAU,CACjCxyB,SAAU0jB,EAAI1jB,SACdtC,KAAMgmB,EAAIhmB,KACVo+B,gBAAgB,UAIjBN,EAAsB1wB,EAAE/I,UAAU2hB,EAAIhmB,KAAMgmB,EAAI6W,QAAS7W,EAAI1jB,gBAlB7Dw7B,EAAsB1wB,EAAE2uB,KAAKC,OAAOhW,EAAIhmB,YAPxCoN,EAAEqwB,MAAMC,IAAI,WAAY1X,IA6B1B3hB,UAAW,SAAUsK,EAAMkuB,EAASv6B,GACnC,IAAI0jB,EAAM,CACThmB,KAAM2O,EACNkuB,QAASA,EACTv6B,SAAUA,GAKX,OAHA8K,EAAEqwB,MAAMC,IAAI,kBAAmB1X,GAC/BA,EAAIiW,OAAS7uB,EAAEixB,SAASrY,EAAIhmB,KAAMgmB,EAAI6W,SACtCzvB,EAAEqwB,MAAMC,IAAI,iBAAkB1X,GACvBkW,EAAMpH,UAAU1nB,EAAE2uB,KAAKC,OAAOhW,EAAIiW,QAASjW,EAAI1jB,WAGvDg8B,aAAc,SAAU3vB,EAAM4vB,EAAQ1B,EAAS9X,EAAOyZ,EAAUC,EAASv6B,GACxE,IAAK,IAAI64B,KAASF,EACjB,GAAIA,EAAQlf,eAAeof,IAAWF,EAAQE,GAA9C,CAIA,GAAIA,GAAS74B,EACZ,OAGD,IAAIw6B,EAAW7B,EAAQE,GACvB2B,EAAsC,UAA1BtxB,EAAE2uB,KAAKvQ,KAAKkT,GAAyBA,EAAW,CAACA,GAE7D,IAAK,IAAI3N,EAAI,EAAGA,EAAI2N,EAASt+B,SAAU2wB,EAAG,CACzC,IAAI4N,EAAUD,EAAS3N,GACtB0L,EAASkC,EAAQlC,OACjBmC,IAAeD,EAAQC,WACvBC,IAAWF,EAAQE,OACnBC,EAAmB,EACnB3C,EAAQwC,EAAQxC,MAEjB,GAAI0C,IAAWF,EAAQA,QAAQvY,OAAQ,CAEtC,IAAI2Y,EAAQJ,EAAQA,QAAQp2B,WAAW0kB,MAAM,YAAY,GACzD0R,EAAQA,QAAUv4B,OAAOu4B,EAAQA,QAAQK,OAAQD,EAAQ,KAG1DJ,EAAUA,EAAQA,SAAWA,EAG7B,IAAK,IAAIl/B,EAAIslB,EAAO/L,EAAMwlB,EAAU/+B,EAAI8+B,EAAOn+B,OAAQ4Y,GAAOulB,EAAO9+B,GAAGW,SAAUX,EAAG,CAEpF,IAAIkiB,EAAM4c,EAAO9+B,GAEjB,GAAI8+B,EAAOn+B,OAASuO,EAAKvO,OAExB,OAGD,KAAIuhB,aAAeua,GAAnB,CAIA,GAAI2C,GAAUp/B,GAAK8+B,EAAOn+B,OAAS,EAAG,CAGrC,GAFAu+B,EAAQM,UAAYjmB,IAChBiU,EAAQ0R,EAAQO,KAAKvwB,IAExB,MAQD,IALA,IAAIwwB,EAAOlS,EAAMlI,OAAS6Z,EAAa3R,EAAM,GAAG7sB,OAAS,GACrDg/B,EAAKnS,EAAMlI,MAAQkI,EAAM,GAAG7sB,OAC5B6wB,EAAIxxB,EACJQ,EAAI+Y,EAEC4I,EAAM2c,EAAOn+B,OAAQ6wB,EAAIrP,IAAQ3hB,EAAIm/B,IAAQb,EAAOtN,GAAGzF,OAAS+S,EAAOtN,EAAI,GAAG4N,UAAY5N,GAClGhxB,GAAKs+B,EAAOtN,GAAG7wB,SAEX++B,MACD1/B,EACFuZ,EAAM/Y,GAKR,GAAIs+B,EAAO9+B,aAAcy8B,EACxB,SAIDmD,EAASpO,EAAIxxB,EACbkiB,EAAMhT,EAAK9H,MAAMmS,EAAK/Y,GACtBgtB,EAAMlI,OAAS/L,MACT,CACN2lB,EAAQM,UAAY,EAEpB,IAAIhS,EAAQ0R,EAAQO,KAAKvd,GACxB0d,EAAS,EAGX,GAAKpS,EAAL,CAQG2R,IACFE,EAAmB7R,EAAM,GAAKA,EAAM,GAAG7sB,OAAS,GAK7Cg/B,GAFAD,EAAOlS,EAAMlI,MAAQ+Z,IACrB7R,EAAQA,EAAM,GAAGpmB,MAAMi4B,IACL1+B,OAFtB,IAGIs8B,EAAS/a,EAAI9a,MAAM,EAAGs4B,GACtBG,EAAQ3d,EAAI9a,MAAMu4B,GAElBtJ,EAAO,CAACr2B,EAAG4/B,GAEX3C,MACDj9B,EACFuZ,GAAO0jB,EAAOt8B,OACd01B,EAAK7nB,KAAKyuB,IAGX,IAAI6C,EAAU,IAAIrD,EAAMa,EAAON,EAAQrvB,EAAEixB,SAASpR,EAAOwP,GAAUxP,EAAOkP,EAAOlP,EAAO4R,GAaxF,GAXA/I,EAAK7nB,KAAKsxB,GAEND,GACHxJ,EAAK7nB,KAAKqxB,GAGXjvB,MAAMvP,UAAUgkB,OAAO9X,MAAMuxB,EAAQzI,GAEvB,GAAVuJ,GACHjyB,EAAEkxB,aAAa3vB,EAAM4vB,EAAQ1B,EAASp9B,EAAGuZ,GAAK,EAAM+jB,GAEjD0B,EACH,WAvCA,GAAIA,EACH,WA4CNJ,SAAU,SAAS1vB,EAAMkuB,GACxB,IAAI0B,EAAS,CAAC5vB,GAEV6wB,EAAO3C,EAAQ2C,KAEnB,GAAIA,EAAM,CACT,IAAK,IAAIzC,KAASyC,EACjB3C,EAAQE,GAASyC,EAAKzC,UAGhBF,EAAQ2C,KAKhB,OAFApyB,EAAEkxB,aAAa3vB,EAAM4vB,EAAQ1B,EAAS,EAAG,GAAG,GAErC0B,GAGRd,MAAO,CACNjvB,IAAK,GAELtM,IAAK,SAAU+F,EAAMK,GACpB,IAAIm1B,EAAQrwB,EAAEqwB,MAAMjvB,IAEpBivB,EAAMx1B,GAAQw1B,EAAMx1B,IAAS,GAE7Bw1B,EAAMx1B,GAAMgG,KAAK3F,IAGlBo1B,IAAK,SAAUz1B,EAAM+d,GACpB,IAAIyZ,EAAYryB,EAAEqwB,MAAMjvB,IAAIvG,GAE5B,GAAKw3B,GAAcA,EAAUr/B,OAI7B,IAAK,IAASkI,EAAL7I,EAAE,EAAa6I,EAAWm3B,EAAUhgC,MAC5C6I,EAAS0d,KAKZkW,MAAOA,GAKR,SAASA,EAAM1Q,EAAMrW,EAASgnB,EAAOuD,EAAYb,GAChD39B,KAAKsqB,KAAOA,EACZtqB,KAAKiU,QAAUA,EACfjU,KAAKi7B,MAAQA,EAEbj7B,KAAKd,OAAmC,GAAzBs/B,GAAc,IAAIt/B,OACjCc,KAAK29B,SAAWA,EAuCjB,GA/CAlD,EAAM/6B,MAAQwM,EAWd8uB,EAAMpH,UAAY,SAASt1B,EAAG8C,EAAU2H,GACvC,GAAgB,iBAALzK,EACV,OAAOA,EAGR,GAAI6Q,MAAMgL,QAAQ7b,GACjB,OAAOA,EAAEqL,IAAI,SAASjI,GACrB,OAAOs5B,EAAMpH,UAAUlyB,EAASN,EAAU9C,KACxC6G,KAAK,IAGT,IAAI2f,EAAM,CACTwF,KAAMhsB,EAAEgsB,KACRrW,QAAS+mB,EAAMpH,UAAUt1B,EAAE2V,QAAS7S,EAAU2H,GAC9C01B,IAAK,OACLC,QAAS,CAAC,QAASpgC,EAAEgsB,MACrBqU,WAAY,GACZv9B,SAAUA,EACV2H,OAAQA,GAGT,GAAIzK,EAAE28B,MAAO,CACZ,IAAI2D,EAAUzvB,MAAMgL,QAAQ7b,EAAE28B,OAAS38B,EAAE28B,MAAQ,CAAC38B,EAAE28B,OACpD9rB,MAAMvP,UAAUmN,KAAKjB,MAAMgZ,EAAI4Z,QAASE,GAGzC1yB,EAAEqwB,MAAMC,IAAI,OAAQ1X,GAEpB,IAAI6Z,EAAa7uB,OAAOqQ,KAAK2E,EAAI6Z,YAAYh1B,IAAI,SAAS5C,GACzD,OAAOA,EAAO,MAAQ+d,EAAI6Z,WAAW53B,IAAS,IAAI9B,QAAQ,KAAM,UAAY,MAC1EE,KAAK,KAER,MAAO,IAAM2f,EAAI2Z,IAAM,WAAa3Z,EAAI4Z,QAAQv5B,KAAK,KAAO,KAAOw5B,EAAa,IAAMA,EAAa,IAAM,IAAM7Z,EAAI7Q,QAAU,KAAO6Q,EAAI2Z,IAAM,MAI1IhE,EAAM94B,SACV,OAAK84B,EAAM13B,mBAKNmJ,EAAE0uB,6BAENH,EAAM13B,iBAAiB,UAAW,SAAUk6B,GAC3C,IAAI4B,EAAUlL,KAAKG,MAAMmJ,EAAI/sB,MAC5BwqB,EAAOmE,EAAQz9B,SACftC,EAAO+/B,EAAQ//B,KACfo+B,EAAiB2B,EAAQ3B,eAE1BzC,EAAM5T,YAAY3a,EAAE/I,UAAUrE,EAAMoN,EAAEjF,UAAUyzB,GAAOA,IACnDwC,GACHzC,EAAM1N,UAEL,IAGG7gB,EAIR,IAAI4yB,EAASn9B,SAASo9B,eAAiB,GAAGp5B,MAAM1G,KAAK0C,SAASq9B,qBAAqB,WAAWn6B,MAmB9F,OAjBIi6B,IACH5yB,EAAE8wB,SAAW8B,EAAOG,IAEf/yB,EAAEyuB,QAAWmE,EAAOI,aAAa,iBACV,YAAxBv9B,SAASw9B,WACPxuB,OAAO2C,sBACV3C,OAAO2C,sBAAsBpH,EAAEiwB,cAE/BxrB,OAAOvN,WAAW8I,EAAEiwB,aAAc,IAInCx6B,SAASoB,iBAAiB,mBAAoBmJ,EAAEiwB,gBAK5CjwB,EA/gBK,CAdmB,oBAAXyE,OACjBA,OAE6B,oBAAtByuB,mBAAqC/Z,gBAAgB+Z,kBAC3D/Z,KACA,SA4hBkB,IAAXjmB,GAA0BA,EAAOJ,UAC3CI,EAAOJ,QAAUU,QAII,IAAXwlB,IACVA,EAAOxlB,MAAQA,GAQhBA,EAAMuH,UAAUo4B,OAAS,CACxBC,QAAW,kBACXC,OAAU,iBACVC,QAAW,sBACXC,MAAS,0BACThB,IAAO,CACNhB,QAAS,wHACTE,QAAQ,EACRpC,OAAQ,CACPkD,IAAO,CACNhB,QAAS,kBACTlC,OAAQ,CACPmE,YAAe,QACfC,UAAa,iBAGfC,aAAc,CACbnC,QAAS,sCACTlC,OAAQ,CACPmE,YAAe,CACd,KACA,CACCjC,QAAS,mBACTC,YAAY,MAKhBgC,YAAe,OACfG,YAAa,CACZpC,QAAS,YACTlC,OAAQ,CACPoE,UAAa,mBAMjBG,OAAU,qBAGXpgC,EAAMuH,UAAUo4B,OAAY,IAAE9D,OAAO,cAAcA,OAAe,OACjE77B,EAAMuH,UAAUo4B,OAAe,OAGhC3/B,EAAM68B,MAAMv7B,IAAI,OAAQ,SAAS8jB,GAEf,WAAbA,EAAIwF,OACPxF,EAAI6Z,WAAkB,MAAI7Z,EAAI7Q,QAAQhP,QAAQ,QAAS,QAIzD6K,OAAO+M,eAAend,EAAMuH,UAAUo4B,OAAOZ,IAAK,aAAc,CAY/Dx7B,MAAO,SAAoB+J,EAAS0tB,GACnC,IAAIqF,EAAsB,GAC1BA,EAAoB,YAAcrF,GAAQ,CACzC+C,QAAS,oCACTC,YAAY,EACZnC,OAAQ77B,EAAMuH,UAAUyzB,IAEzBqF,EAA2B,MAAI,uBAE/B,IAAIxE,EAAS,CACZyE,iBAAkB,CACjBvC,QAAS,4BACTlC,OAAQwE,IAGVxE,EAAO,YAAcb,GAAQ,CAC5B+C,QAAS,UACTlC,OAAQ77B,EAAMuH,UAAUyzB,IAGzB,IAAIuF,EAAM,GACVA,EAAIjzB,GAAW,CACdywB,QAASv4B,OAAO,mEAAmE44B,OAAO74B,QAAQ,MAAO+H,GAAU,KACnH0wB,YAAY,EACZC,QAAQ,EACRpC,OAAQA,GAGT77B,EAAMuH,UAAUq0B,aAAa,SAAU,QAAS2E,MAIlDvgC,EAAMuH,UAAUi5B,IAAMxgC,EAAMuH,UAAU2wB,OAAO,SAAU,IACvDl4B,EAAMuH,UAAUk5B,KAAOzgC,EAAMuH,UAAUo4B,OACvC3/B,EAAMuH,UAAUm5B,OAAS1gC,EAAMuH,UAAUo4B,OACzC3/B,EAAMuH,UAAUo5B,IAAM3gC,EAAMuH,UAAUo4B,OAOrC,SAAU3/B,GAEV,IAAIkL,EAAS,gDAEblL,EAAMuH,UAAU4B,IAAM,CACrBy2B,QAAW,mBACXgB,OAAU,CACT7C,QAAS,mCACTlC,OAAQ,CACPrX,KAAQ,YAIVqc,IAAOr7B,OAAO,YAAc0F,EAAOkzB,OAAS,WAAY,KACxDtc,SAAYtc,OAAO,wBAA0B0F,EAAOkzB,OAAS,kBAC7DlzB,OAAU,CACT6yB,QAAS7yB,EACT+yB,QAAQ,GAET7zB,SAAY,+CACZ02B,UAAa,gBACbC,SAAY,oBACZf,YAAe,aAGhBhgC,EAAMuH,UAAU4B,IAAY,OAAE0yB,OAAO+C,KAAO5+B,EAAMuH,UAAU4B,IAE5D,IAAIw2B,EAAS3/B,EAAMuH,UAAUo4B,OACzBA,IACHA,EAAOZ,IAAIiC,WAAW,QAAS,OAE/BhhC,EAAMuH,UAAUq0B,aAAa,SAAU,aAAc,CACpDqF,aAAc,CACblD,QAAS,6CACTlC,OAAQ,CACPsE,YAAa,CACZpC,QAAS,aACTlC,OAAQ8D,EAAOZ,IAAIlD,QAEpBmE,YAAe,wBACfE,aAAc,CACbnC,QAAS,MACTlC,OAAQ77B,EAAMuH,UAAU4B,MAG1BoyB,MAAO,iBAENoE,EAAOZ,MA/CZ,CAkDE/+B,GAOFA,EAAMuH,UAAU25B,MAAQ,CACvBtB,QAAW,CACV,CACC7B,QAAS,kCACTC,YAAY,GAEb,CACCD,QAAS,mBACTC,YAAY,EACZC,QAAQ,IAGV/yB,OAAU,CACT6yB,QAAS,iDACTE,QAAQ,GAETkD,aAAc,CACbpD,QAAS,iGACTC,YAAY,EACZnC,OAAQ,CACPmE,YAAa,UAGfoB,QAAW,6GACXC,QAAW,qBACXN,SAAY,YACZO,OAAU,wDACVC,SAAY,0DACZvB,YAAe,iBAQhBhgC,EAAMuH,UAAUi6B,WAAaxhC,EAAMuH,UAAU2wB,OAAO,QAAS,CAC5DiJ,aAAc,CACbnhC,EAAMuH,UAAU25B,MAAM,cACtB,CACCnD,QAAS,0FACTC,YAAY,IAGdoD,QAAW,CACV,CACCrD,QAAS,kCACTC,YAAY,GAEb,CACCD,QAAS,6WACTC,YAAY,IAGdsD,OAAU,mHAEVP,SAAY,kFACZQ,SAAY,mGAGbvhC,EAAMuH,UAAUi6B,WAAW,cAAc,GAAGzD,QAAU,uEAEtD/9B,EAAMuH,UAAUq0B,aAAa,aAAc,UAAW,CACrD6F,MAAS,CACR1D,QAAS,0HACTC,YAAY,EACZC,QAAQ,GAGTyD,oBAAqB,CACpB3D,QAAS,8JACTxC,MAAO,YAERoG,UAAa,CACZ,CACC5D,QAAS,wGACTC,YAAY,EACZnC,OAAQ77B,EAAMuH,UAAUi6B,YAEzB,CACCzD,QAAS,gDACTlC,OAAQ77B,EAAMuH,UAAUi6B,YAEzB,CACCzD,QAAS,oDACTC,YAAY,EACZnC,OAAQ77B,EAAMuH,UAAUi6B,YAEzB,CACCzD,QAAS,qcACTC,YAAY,EACZnC,OAAQ77B,EAAMuH,UAAUi6B,aAG1BI,SAAY,8BAGb5hC,EAAMuH,UAAUq0B,aAAa,aAAc,SAAU,CACpDiG,kBAAmB,CAClB9D,QAAS,mCACTE,QAAQ,EACRpC,OAAQ,CACPiG,cAAiB,CAChB/D,QAAS,YACTlC,OAAQ,CACPkG,4BAA6B,CAC5BhE,QAAS,UACTxC,MAAO,eAERqD,KAAM5+B,EAAMuH,UAAUi6B,aAGxBt2B,OAAU,cAKTlL,EAAMuH,UAAUo4B,QACnB3/B,EAAMuH,UAAUo4B,OAAOZ,IAAIiC,WAAW,SAAU,cAGjDhhC,EAAMuH,UAAUy6B,GAAKhiC,EAAMuH,UAAUi6B,WAQhB,oBAAT7b,MAAyBA,KAAK3lB,OAAU2lB,KAAK1jB,UAAaA,SAASiG,gBAO9Eyd,KAAK3lB,MAAMiiC,cAAgB,SAASrF,GACnCA,EAAYA,GAAa36B,SAEzB,IAAIigC,EAAa,CAChBF,GAAM,aACNG,GAAM,SACNC,GAAM,OACNC,IAAO,aACPC,KAAQ,aACRC,GAAM,OACNC,IAAO,QACP7nB,EAAK,IACL8nB,IAAO,SAGRhzB,MAAMvP,UAAU+F,MAAM1G,KAAKq9B,EAAUI,iBAAiB,kBAAkB/oB,QAAQ,SAAUyuB,GAEzF,IAAIA,EAAIlD,aAAa,mBAArB,CASA,IAJA,IAEI99B,EAFA69B,EAAMmD,EAAIC,aAAa,YAEbt5B,EAASq5B,EACnB1H,EAAO,8BACJ3xB,IAAW2xB,EAAKvK,KAAKpnB,EAAOgL,YAClChL,EAASA,EAAOud,WAOjB,GAJIvd,IACH3H,GAAYghC,EAAIruB,UAAUgY,MAAM2O,IAAS,CAAC,CAAE,KAAK,KAG7Ct5B,EAAU,CACd,IAAIkhC,GAAarD,EAAIlT,MAAM,aAAe,CAAC,CAAE,KAAK,GAClD3qB,EAAWwgC,EAAWU,IAAcA,EAGrC,IAAIxjC,EAAO6C,SAASb,cAAc,QAClChC,EAAKiV,UAAY,YAAc3S,EAE/BghC,EAAIluB,YAAc,GAElBpV,EAAKoV,YAAc,WAEnBkuB,EAAIxgC,YAAY9C,GAEhB,IAAIyjC,EAAM,IAAIC,eAEdD,EAAIjnB,KAAK,MAAO2jB,GAAK,GAErBsD,EAAIlc,mBAAqB,WACF,GAAlBkc,EAAIpD,aAEHoD,EAAI3Z,OAAS,KAAO2Z,EAAIE,cAC3B3jC,EAAKoV,YAAcquB,EAAIE,aAEvB/iC,EAAMwH,iBAAiBpI,GAEvBsjC,EAAI5/B,aAAa,kBAAmB,KAEd,KAAd+/B,EAAI3Z,OACZ9pB,EAAKoV,YAAc,WAAaquB,EAAI3Z,OAAS,yBAA2B2Z,EAAIG,WAG5E5jC,EAAKoV,YAAc,6CAKtBquB,EAAII,KAAK,SAGNjjC,EAAMw8B,QAAQ0G,SACjBljC,EAAMw8B,QAAQ0G,QAAQC,eAAe,gBAAiB,SAAU/d,GAC/D,IAAIsd,EAAMtd,EAAIpjB,QAAQ4kB,WACtB,GAAK8b,GAAQ,OAAOjS,KAAKiS,EAAIzF,WAAcyF,EAAIlD,aAAa,aAAgBkD,EAAIlD,aAAa,sBAA7F,CAGA,IAAID,EAAMmD,EAAIC,aAAa,YACvBzjC,EAAI+C,SAASb,cAAc,KAI/B,OAHAlC,EAAEsV,YAAckuB,EAAIC,aAAa,6BAA+B,WAChEzjC,EAAE4D,aAAa,WAAY,IAC3B5D,EAAEkkC,KAAO7D,EACFrgC,MAMV+C,SAASoB,iBAAiB,mBAAoB,WAE7CsiB,KAAK3lB,MAAMiiC,qBAKV1iC,KAAKe,KAAuB,oBAAXklB,OAAyBA,OAAyB,oBAATG,KAAuBA,KAAyB,oBAAX1U,OAAyBA,OAAS,KAClI,IAAIoyB,GAAG,CAAC,SAASrkC,EAAQU,EAAOJ,GAElC,IAOIgkC,EACAC,EARA7mB,EAAUhd,EAAOJ,QAAU,GAU/B,SAASkkC,IACL,MAAM,IAAIrkC,MAAM,mCAEpB,SAASskC,IACL,MAAM,IAAItkC,MAAM,qCAsBpB,SAASukC,EAAWC,GAChB,GAAIL,IAAqB5/B,WAErB,OAAOA,WAAWigC,EAAK,GAG3B,IAAKL,IAAqBE,IAAqBF,IAAqB5/B,WAEhE,OADA4/B,EAAmB5/B,WACZA,WAAWigC,EAAK,GAE3B,IAEI,OAAOL,EAAiBK,EAAK,GAC/B,MAAMllC,GACJ,IAEI,OAAO6kC,EAAiB/jC,KAAK,KAAMokC,EAAK,GAC1C,MAAMllC,GAEJ,OAAO6kC,EAAiB/jC,KAAKe,KAAMqjC,EAAK,MAvCnD,WACG,IAEQL,EADsB,mBAAf5/B,WACYA,WAEA8/B,EAEzB,MAAO/kC,GACL6kC,EAAmBE,EAEvB,IAEQD,EADwB,mBAAjBK,aACcA,aAEAH,EAE3B,MAAOhlC,GACL8kC,EAAqBE,GAjB7B,GAwEA,IAEII,EAFAzc,EAAQ,GACRtB,GAAW,EAEXge,GAAc,EAElB,SAASC,IACAje,GAAa+d,IAGlB/d,GAAW,EACP+d,EAAarkC,OACb4nB,EAAQyc,EAAalM,OAAOvQ,GAE5B0c,GAAc,EAEd1c,EAAM5nB,QACNwkC,KAIR,SAASA,IACL,IAAIle,EAAJ,CAGA,IAAIme,EAAUP,EAAWK,GACzBje,GAAW,EAGX,IADA,IAAI9E,EAAMoG,EAAM5nB,OACVwhB,GAAK,CAGP,IAFA6iB,EAAezc,EACfA,EAAQ,KACC0c,EAAa9iB,GACd6iB,GACAA,EAAaC,GAAYhH,MAGjCgH,GAAc,EACd9iB,EAAMoG,EAAM5nB,OAEhBqkC,EAAe,KACf/d,GAAW,EAnEf,SAAyB+N,GACrB,GAAI0P,IAAuBK,aAEvB,OAAOA,aAAa/P,GAGxB,IAAK0P,IAAuBE,IAAwBF,IAAuBK,aAEvE,OADAL,EAAqBK,aACdA,aAAa/P,GAExB,IAEW0P,EAAmB1P,GAC5B,MAAOp1B,GACL,IAEI,OAAO8kC,EAAmBhkC,KAAK,KAAMs0B,GACvC,MAAOp1B,GAGL,OAAO8kC,EAAmBhkC,KAAKe,KAAMuzB,KAgD7CqQ,CAAgBD,IAiBpB,SAASE,EAAKR,EAAK/sB,GACftW,KAAKqjC,IAAMA,EACXrjC,KAAKsW,MAAQA,EAYjB,SAASwtB,KA5BT1nB,EAAQ0J,SAAW,SAAUud,GACzB,IAAIzO,EAAO,IAAIzlB,MAAMsG,UAAUvW,OAAS,GACxC,GAAuB,EAAnBuW,UAAUvW,OACV,IAAK,IAAIX,EAAI,EAAGA,EAAIkX,UAAUvW,OAAQX,IAClCq2B,EAAKr2B,EAAI,GAAKkX,UAAUlX,GAGhCuoB,EAAM/Z,KAAK,IAAI82B,EAAKR,EAAKzO,IACJ,IAAjB9N,EAAM5nB,QAAiBsmB,GACvB4d,EAAWM,IASnBG,EAAKjkC,UAAU48B,IAAM,WACjBx8B,KAAKqjC,IAAIv3B,MAAM,KAAM9L,KAAKsW,QAE9B8F,EAAQ2nB,MAAQ,UAChB3nB,EAAQ4nB,SAAU,EAClB5nB,EAAQ0I,IAAM,GACd1I,EAAQ6nB,KAAO,GACf7nB,EAAQ6Q,QAAU,GAClB7Q,EAAQ8nB,SAAW,GAInB9nB,EAAQb,GAAKuoB,EACb1nB,EAAQ+nB,YAAcL,EACtB1nB,EAAQgoB,KAAON,EACf1nB,EAAQioB,IAAMP,EACd1nB,EAAQkoB,eAAiBR,EACzB1nB,EAAQmoB,mBAAqBT,EAC7B1nB,EAAQooB,KAAOV,EACf1nB,EAAQqoB,gBAAkBX,EAC1B1nB,EAAQsoB,oBAAsBZ,EAE9B1nB,EAAQuoB,UAAY,SAAU59B,GAAQ,MAAO,IAE7CqV,EAAQwoB,QAAU,SAAU79B,GACxB,MAAM,IAAIlI,MAAM,qCAGpBud,EAAQyoB,IAAM,WAAc,MAAO,KACnCzoB,EAAQ0oB,MAAQ,SAAUC,GACtB,MAAM,IAAIlmC,MAAM,mCAEpBud,EAAQ4oB,MAAQ,WAAa,OAAO,IAElC,IAAIC,GAAG,CAAC,SAASvmC,EAAQU,EAAOJ,GAMlC,IAA2C08B,EAAMwJ,EAANxJ,EASxB,oBAATrW,KAAuBA,KAAOrlB,KATSklC,EASH,WAC9C,OAEcC,EAAmB,GA4BvBC,EAAoB/nB,EA9BJgoB,EAsFhB,CAEJC,sBAKA,SAAUlmC,EAAQJ,EAASomC,GAEjC,aAGApmC,EAAQK,YAAa,EACrBL,EAAQumC,wBAA0BA,EAClCvmC,EAAQwmC,wBAivBR,SAAiC92B,EAAI+2B,GACnC,IAAIC,EAAU,GACd51B,OAAOqQ,KAAKslB,GAAQ9xB,QAAQ,SAAUtO,GACpCqgC,EAAQrgC,GAAOsgC,EAAsBj3B,EAAI+2B,EAAOpgC,GAAMA,KAGpDogC,EAAOG,SACTF,EAAQvyB,YAAcsyB,EAAOG,QAAQ1mC,OACrCwmC,EAAQG,YAAcC,EAAYC,uBAAuBC,EAAeP,EAAOG,SAAU,YAEzFF,EAAQvyB,YAnQZ,SAA4CsyB,GAC1C,IAAIpgC,EACA4gC,EAEJ,IAAKA,EAAK,EAAGA,EAAKC,EAAahnC,WAC7BmG,EAAM6gC,EAAaD,MAERR,KAH4BQ,GAQrCA,IAAOC,EAAahnC,SACtBmG,EAAMyK,OAAOqQ,KAAKslB,GAAQ,IAG5B,IAAInvB,EAAQmvB,EAAOpgC,GACfnG,EAASinC,EAAS7vB,GAAOpX,OACzB+Q,EAAgBm2B,EAAiB9vB,EAAOjR,GACxC8N,EAAcjU,EAAS+Q,EAE3B,GAA6B,EAAzB/Q,EAAS+Q,EACX,MAAM,IAAIpR,MAAM,iBAAiBw4B,OAAOpnB,EAAe,4BAA4BonB,OAAOn4B,IAG5F,OAAOiU,EA0OiBkzB,CAAmCZ,GAG3D,OAAOC,GA7vBT1mC,EAAQ2mC,sBAAwBA,EAChC3mC,EAAQsnC,2BAA6BA,EACrCtnC,EAAQsR,2BAkqBR,SAAoC5B,EAAI+2B,EAAQc,GAC9C,IAAIC,EAAajB,EAAwB72B,EAAI+2B,GACzCgB,EAAa32B,OAAOC,OAAO,GAAIw2B,GAAgC,IACnEE,EAAWC,QAAU52B,OAAOC,OAAO,GAAIw2B,EAAgBA,EAAcG,QAAU,GAAIF,GACnF,IAAIZ,EAAUH,EAAOG,QAErB,GAAIA,EAAS,CACX,IAAIe,EAAaX,EAAeJ,EAAS,WACzCa,EAAWb,QAAUU,EAA2B53B,EAAIi4B,EAAYj4B,EAAGk4B,sBACnEH,EAAWtzB,YAAcwzB,EAAWznC,OACpCunC,EAAWZ,YAAcC,EAAYC,uBAAuBY,QAClDF,EAAWtzB,cACrBszB,EAAWtzB,YA7Jf,SAAsCzE,EAAIg4B,GACxC,IAAIrhC,EACA4gC,EAEJ,IAAKA,EAAK,EAAGA,EAAKC,EAAahnC,WAC7BmG,EAAM6gC,EAAaD,MAERS,OAIXrhC,EAAMwhC,EAASC,aAAezhC,KAEnBqhC,KAT4BT,GAcrCA,IAAOC,EAAahnC,SACtBmG,EAAMyK,OAAOqQ,KAAKumB,GAAS,IAG7B,IAAIK,EAASL,EAAQrhC,GACrBqJ,EAAGs4B,WAAWt4B,EAAGu4B,aAAcF,EAAO13B,QACtC,IAAI63B,EAAWx4B,EAAGy4B,mBAAmBz4B,EAAGu4B,aAAcv4B,EAAG04B,aACzD14B,EAAGs4B,WAAWt4B,EAAGu4B,aAAc,MAC/B,IAAII,EA3EN,SAAmC34B,EAAI4b,GACrC,OAAIA,IAAS5b,EAAG44B,KAAa,EAEzBhd,IAAS5b,EAAG64B,cAAsB,EAElCjd,IAAS5b,EAAG84B,MAAc,EAE1Bld,IAAS5b,EAAG+4B,eAAuB,EAEnCnd,IAAS5b,EAAGg5B,IAAY,EAExBpd,IAAS5b,EAAGi5B,aAAqB,EAEjCrd,IAAS5b,EAAGk5B,MAAc,EAEvB,EA4DaC,CAA0Bn5B,EAAIq4B,EAAOzc,MACrDwd,EAAgBZ,EAAWG,EAC3Bp3B,EAAgB82B,EAAO92B,eAAiB82B,EAAOxsB,KAE/CpH,EAAc20B,EAAgB73B,EAElC,GAAIkD,EAAc,GAAM,EAIxB,OAAOA,EAHL,MAAM,IAAItU,MAAM,iBAAiBw4B,OAAOpnB,EAAe,4BAA4BonB,OAAOn4B,SA4HjE6oC,CAA6Br5B,EAAI+3B,EAAWC,UAGvE,OAAOD,GAhrBTznC,EAAQgpC,6BAodR,SAAsCt5B,EAAIu5B,EAAY3xB,EAAO4xB,GAC3D5xB,EAAQ0vB,EAAe1vB,QAERzI,IAAXq6B,GACFx5B,EAAGs4B,WAAWt4B,EAAGu4B,aAAcgB,EAAW54B,QAC1CX,EAAGy5B,cAAcz5B,EAAGu4B,aAAciB,EAAQ5xB,IAE1C8xB,EAAwB15B,EAAIA,EAAGu4B,aAAcgB,EAAW54B,OAAQiH,EAAO2xB,EAAWI,WA1dtFrpC,EAAQspC,mBA0ER,SAA4B3jB,GAC1BkiB,EAASC,aAAeniB,GA1E1B3lB,EAAQupC,sBA6ER,SAAqBC,GACnBC,EAAOC,uBAAuBF,EAAa3B,IA7E7C7nC,EAAQ2pC,kBAAoBvC,EAC5BpnC,EAAQ4pC,UAAYzC,EAEpB,IAAIL,EAAc+C,EAAwBzD,EAA4C,yBAElFqD,EAASI,EAAwBzD,EAAuC,oBAE5E,SAASyD,EAAwBtgB,GAAO,GAAIA,GAAOA,EAAIlpB,WAAc,OAAOkpB,EAAc,IAAIugB,EAAS,GAAI,GAAW,MAAPvgB,EAAe,IAAK,IAAIljB,KAAOkjB,EAAO,GAAIzY,OAAOlQ,UAAU6c,eAAexd,KAAKspB,EAAKljB,GAAM,CAAE,IAAI0jC,EAAOj5B,OAAO+M,gBAAkB/M,OAAOk5B,yBAA2Bl5B,OAAOk5B,yBAAyBzgB,EAAKljB,GAAO,GAAQ0jC,EAAKlY,KAAOkY,EAAKE,IAAOn5B,OAAO+M,eAAeisB,EAAQzjC,EAAK0jC,GAAgBD,EAAOzjC,GAAOkjB,EAAIljB,GAAoC,OAAtByjC,EAAOI,QAAU3gB,EAAYugB,EAuC7c,IAEIjC,EAAW,CACbC,aAAc,IA+BhB,SAASsB,EAAwB15B,EAAI4b,EAAMjb,EAAQiH,EAAO+xB,GACxD35B,EAAGs4B,WAAW1c,EAAMjb,GACpBX,EAAGy6B,WAAW7e,EAAMhU,EAAO+xB,GAAY35B,EAAG06B,aAe5C,SAAS9C,EAA2B53B,EAAI26B,EAAY/e,EAAM+d,GACxD,GAAII,EAAOa,SAAS56B,EAAI26B,GACtB,OAAOA,EAGT/e,EAAOA,GAAQ5b,EAAGu4B,aAClB,IAAI53B,EAASX,EAAG66B,eAEhB,OADAnB,EAAwB15B,EAAI4b,EAAMjb,EAAQg6B,EAAYhB,GAC/Ch5B,EAGT,SAASm6B,EAAUziC,GACjB,MAAgB,YAATA,EAmCT,SAASo/B,EAAS7vB,GAChB,OAAOA,EAAMpX,OAASoX,EAAQA,EAAMpG,KAGtC,IAAIu5B,EAAa,iBACbC,EAAU,gBAEd,SAASC,EAA2B5iC,EAAM7H,GACxC,IAAI+Q,EAUJ,GAA6B,EAAzB/Q,GAPF+Q,EADEw5B,EAAWtZ,KAAKppB,GACF,EACP2iC,EAAQvZ,KAAKppB,GACN,EAEA,GAIhB,MAAM,IAAIlI,MAAM,8CAA8Cw4B,OAAOtwB,EAAM,aAAaswB,OAAOpnB,EAAe,SAASonB,OAAOn4B,EAAQ,uCAAuCm4B,OAAOpnB,EAAe,6BAGrM,OAAOA,EAGT,SAASm2B,EAAiB9vB,EAAOszB,GAC/B,OAAOtzB,EAAMrG,eAAiBqG,EAAMiE,MAAQovB,EAA2BC,EAAWzD,EAAS7vB,GAAOpX,QAGpG,SAAS8mC,EAAe1vB,EAAOvP,GAC7B,GAAI++B,EAAY+D,cAAcvzB,GAC5B,OAAOA,EAGT,GAAIwvB,EAAY+D,cAAcvzB,EAAMpG,MAClC,OAAOoG,EAAMpG,KAGXf,MAAMgL,QAAQ7D,KAChBA,EAAQ,CACNpG,KAAMoG,IAIV,IAAIwzB,EAAOxzB,EAAMgU,KAUjB,OAAO,IANHwf,EAFCA,IACCN,EAAUziC,GACLqtB,YAEAplB,eAIKsH,EAAMpG,MAyKxB,SAASq1B,EAAwB72B,EAAI+2B,GACnC,IAAIiB,EAAU,GAyDd,OAxDA52B,OAAOqQ,KAAKslB,GAAQ9xB,QAAQ,SAAUi2B,GACpC,IAAKJ,EAAUI,GAAY,CACzB,IAAItzB,EAAQmvB,EAAOmE,GACfG,EAAazzB,EAAMywB,QAAUzwB,EAAMvP,MAAQuP,EAAMyzB,YAAclD,EAASC,aAAe8C,EAE3F,GAAItzB,EAAMrT,MAAO,CACf,IAAKkM,MAAMgL,QAAQ7D,EAAMrT,SAAW6iC,EAAY+D,cAAcvzB,EAAMrT,OAClE,MAAM,IAAIpE,MAAM,0CAGlB6nC,EAAQqD,GAAc,CACpB9mC,MAAOqT,EAAMrT,WAEV,CACL,IAAIoM,EACAib,EACA0f,EACA/5B,EAEJ,GAAIqG,EAAMjH,QAAUiH,EAAMjH,kBAAkB46B,YAC1C56B,EAASiH,EAAMjH,OACfY,EAAgBqG,EAAMrG,eAAiBqG,EAAMiE,KAC7C+P,EAAOhU,EAAMgU,KACb0f,EAAgB1zB,EAAM4zB,eACjB,GAAqB,iBAAV5zB,GAA4C,iBAAfA,EAAMpG,KAAmB,CACtE,IAAIi6B,EAAY7zB,EAAMpG,MAAQoG,EAC1B8zB,EAAY9zB,EAAMgU,MAAQtb,aAC1Bk4B,EAAWiD,EAAYC,EAAUC,kBACrC/f,EAAOwb,EAAYwE,2BAA2BF,GAC9CJ,OAAoCn8B,IAApByI,EAAM4zB,UAA0B5zB,EAAM4zB,UA5QhE,SAA2CK,GACzC,OAAIA,IAAmBtW,WAKnBsW,IAAmB7b,WAsQmD8b,CAAkCJ,GACpGn6B,EAAgBqG,EAAMrG,eAAiBqG,EAAMiE,MAAQovB,EAA2BC,EAAWO,GAC3F96B,EAASX,EAAG66B,eACZ76B,EAAGs4B,WAAWt4B,EAAGu4B,aAAc53B,GAC/BX,EAAGy6B,WAAWz6B,EAAGu4B,aAAcC,EAAU5wB,EAAM+xB,UAAY35B,EAAG06B,iBACzD,CACL,IAAIC,EAAarD,EAAe1vB,EAAOszB,GACvCv6B,EAASi3B,EAA2B53B,EAAI26B,OAAYx7B,EAAWyI,EAAM+xB,UACrE/d,EAAOwb,EAAYC,uBAAuBsD,GAC1CW,OAAoCn8B,IAApByI,EAAM4zB,UAA0B5zB,EAAM4zB,UArShE,SAAuCb,GACrC,OAAIA,aAAsBpV,WAKtBoV,aAAsB3a,WA+RgD+b,CAA8BpB,GAChGp5B,EAAgBm2B,EAAiB9vB,EAAOszB,GAG1ClD,EAAQqD,GAAc,CACpB16B,OAAQA,EACRY,cAAeA,EACfqa,KAAMA,EACN4f,UAAWF,EACXU,OAAQp0B,EAAMo0B,QAAU,EACxBxC,OAAQ5xB,EAAM4xB,QAAU,EACxB/3B,aAA2BtC,IAAlByI,EAAMnG,aAAwBtC,EAAYyI,EAAMnG,QACzDk4B,SAAU/xB,EAAM+xB,cAKxB35B,EAAGs4B,WAAWt4B,EAAGu4B,aAAc,MACxBP,EAsET,IAAIR,EAAe,CAAC,WAAY,YAAa,cA4N7C,SAASP,EAAsBj3B,EAAI4H,EAAOszB,GACxC,IAAItf,EAAqB,YAAdsf,EAA0Bl7B,EAAGk4B,qBAAuBl4B,EAAGu4B,aAElE,OAAOX,EAA2B53B,EADjBs3B,EAAe1vB,EAAOszB,GACWtf,KA8C9CqgB,gBAKA,SAAUvrC,EAAQJ,EAASomC,GAEjC,aAGApmC,EAAQK,YAAa,EACrBL,EAAQiU,eAAiBA,EACzBjU,EAAQ4rC,eAwHR,SAAwBl8B,EAAIm8B,GAC1B,IAAIC,EAAsB,KACtBC,EAAqB,KACzBF,EAAcl3B,QAAQ,SAAUq3B,GAC9B,IAAsB,IAAlBA,EAAOC,OAAX,CAIA,IAAIC,EAAcF,EAAOE,YACrBzE,EAAauE,EAAOG,iBAAmBH,EAAOvE,WAC9C2E,GAAc,EACd9gB,OAAuBzc,IAAhBm9B,EAAO1gB,KAAqB5b,EAAGwE,UAAY83B,EAAO1gB,KAEzD4gB,IAAgBJ,IAClBA,EAAsBI,EACtBx8B,EAAGmE,WAAWq4B,EAAYp4B,SAK1Bs4B,GAAc,IAIZA,GAAe3E,IAAesE,IAC5BA,GAAsBA,EAAmBM,oBAAsB5E,EAAW4E,mBAC5E38B,EAAG48B,gBAAgB,MAGrBP,EAAqBtE,EACrB8E,EAASx4B,wBAAwBrE,EAAIw8B,EAAazE,IAIpD8E,EAASv4B,YAAYk4B,EAAaF,EAAO74B,UAEzCc,EAAevE,EAAI+3B,EAAYnc,EAAM0gB,EAAOhoB,MAAOgoB,EAAO9C,OAAQ8C,EAAOQ,kBAGvET,EAAmBM,mBACrB38B,EAAG48B,gBAAgB,OA9JvB,IAAIC,EAEJ,SAAiChjB,GAAO,CAAA,GAAIA,GAAOA,EAAIlpB,WAAc,OAAOkpB,EAAc,IAAIugB,EAAS,GAAI,GAAW,MAAPvgB,EAAe,IAAK,IAAIljB,KAAOkjB,EAAO,GAAIzY,OAAOlQ,UAAU6c,eAAexd,KAAKspB,EAAKljB,GAAM,CAAE,IAAI0jC,EAAOj5B,OAAO+M,gBAAkB/M,OAAOk5B,yBAA2Bl5B,OAAOk5B,yBAAyBzgB,EAAKljB,GAAO,GAAQ0jC,EAAKlY,KAAOkY,EAAKE,IAAOn5B,OAAO+M,eAAeisB,EAAQzjC,EAAK0jC,GAAgBD,EAAOzjC,GAAOkjB,EAAIljB,GAAoC,OAAtByjC,EAAOI,QAAU3gB,EAAYugB,GAF9bD,CAAwBzD,EAAyC,sBAqDhF,SAASnyB,EAAevE,EAAI+3B,EAAYnc,EAAMtH,EAAOklB,EAAQsD,GAC3DlhB,OAAgBzc,IAATyc,EAAqB5b,EAAGwE,UAAYoX,EAC3C,IAAIsb,EAAUa,EAAWb,QACrBC,EAAcY,EAAWZ,YACzB1yB,OAAwBtF,IAAVmV,EAAsByjB,EAAWtzB,YAAc6P,EACjEklB,OAAoBr6B,IAAXq6B,EAAuB,EAAIA,EAEhCrC,GAAeD,OACK/3B,IAAlB29B,EACF98B,EAAG+8B,sBAAsBnhB,EAAMnX,OAA6BtF,IAAhBg4B,EAA4Bn3B,EAAG+4B,eAAiBhB,EAAWZ,YAAaqC,EAAQsD,GAE5H98B,EAAGg9B,aAAaphB,EAAMnX,OAA6BtF,IAAhBg4B,EAA4Bn3B,EAAG+4B,eAAiBhB,EAAWZ,YAAaqC,QAGvFr6B,IAAlB29B,EACF98B,EAAGi9B,oBAAoBrhB,EAAM4d,EAAQ/0B,EAAaq4B,GAElD98B,EAAGk9B,WAAWthB,EAAM4d,EAAQ/0B,KA8F5B04B,wBAKA,SAAUzsC,EAAQJ,EAASomC,GAEjC,aAGApmC,EAAQK,YAAa,EACrBL,EAAQ8sC,oBA4UR,SAA6Bp9B,EAAIq9B,EAAiB/oC,GAChDA,EAASA,GAAU0L,EAAGs9B,YAElBD,GACFr9B,EAAGu9B,gBAAgBjpC,EAAQ+oC,EAAgBG,aAC3Cx9B,EAAGwC,SAAS,EAAG,EAAG66B,EAAgBj7B,MAAOi7B,EAAgB/6B,UAEzDtC,EAAGu9B,gBAAgBjpC,EAAQ,MAC3B0L,EAAGwC,SAAS,EAAG,EAAGxC,EAAGy9B,mBAAoBz9B,EAAG09B,uBAnVhDptC,EAAQqtC,sBA4LR,SAA+B39B,EAAI49B,EAAax7B,EAAOE,GACrD,IAAIhO,EAAS0L,EAAGs9B,YACZO,EAAK79B,EAAG89B,oBACZ99B,EAAGu9B,gBAAgBjpC,EAAQupC,GAC3Bz7B,EAAQA,GAASpC,EAAGy9B,mBACpBn7B,EAASA,GAAUtC,EAAG09B,oBAEtB,IAAIK,EAAuB,EACvBV,EAAkB,CACpBG,YAAaK,EACbD,YAAa,GACbx7B,MAAOA,EACPE,OAAQA,GA2CV,OAjDAs7B,EAAcA,GAAeI,GAQjB/4B,QAAQ,SAAUg5B,GAC5B,IAAIC,EAAaD,EAAkBC,WAC/BC,EAASF,EAAkBE,OAC3BC,EA9ER,SAAqCD,GACnC,OAAOE,EAAoBF,GA6EHG,CAA4BH,GAMlD,GAHEC,EADGA,GACeG,EAAoBR,KAGnCG,EACH,GAxEN,SAA8BC,GAC5B,OAAOK,EAAoBL,GAuEnBM,CAAqBN,GACvBD,EAAal+B,EAAG0+B,qBAChB1+B,EAAG2+B,iBAAiB3+B,EAAG4+B,aAAcV,GACrCl+B,EAAG6+B,oBAAoB7+B,EAAG4+B,aAAcT,EAAQ/7B,EAAOE,OAClD,CACL,IAAIw8B,EAAiB19B,OAAOC,OAAO,GAAI48B,GACvCa,EAAe18B,MAAQA,EACvB08B,EAAex8B,OAASA,OAEInD,IAAxB2/B,EAAeC,OACjBD,EAAeC,MAAO,EACtBD,EAAe7/B,IAAM6/B,EAAe7/B,KAAO6/B,EAAeE,QAAUh/B,EAAGi/B,OACvEH,EAAeI,IAAMJ,EAAeI,KAAOJ,EAAeE,QAAUh/B,EAAGi/B,OACvEH,EAAeK,MAAQL,EAAeK,OAASL,EAAeM,MAAQp/B,EAAGq/B,cACzEP,EAAeQ,MAAQR,EAAeQ,OAASR,EAAeM,MAAQp/B,EAAGq/B,eAG3EnB,EAAaqB,EAASC,cAAcx/B,EAAI8+B,GAI5C,GAAI/E,EAAO0F,eAAez/B,EAAIk+B,GAC5Bl+B,EAAG0/B,wBAAwBprC,EAAQ8pC,EAAiBp+B,EAAG4+B,aAAcV,OAChE,CAAA,IAAInE,EAAO4F,UAAU3/B,EAAIk+B,GAG9B,MAAM,IAAI/tC,MAAM,2BAFhB6P,EAAG4/B,qBAAqBtrC,EAAQ8pC,EAAiBH,EAAkB4B,WAAa7/B,EAAG8/B,WAAY5B,EAAYD,EAAkB8B,OAAS,GAKxI1C,EAAgBO,YAAYv/B,KAAK6/B,KAE5Bb,GAlPT/sC,EAAQ0vC,sBAiSR,SAA+BhgC,EAAIq9B,EAAiBO,EAAax7B,EAAOE,GACtEF,EAAQA,GAASpC,EAAGy9B,mBACpBn7B,EAASA,GAAUtC,EAAG09B,oBACtBL,EAAgBj7B,MAAQA,EACxBi7B,EAAgB/6B,OAASA,GACzBs7B,EAAcA,GAAeI,GACjB/4B,QAAQ,SAAUg5B,EAAmBgC,GAC/C,IAAI/B,EAAab,EAAgBO,YAAYqC,GACzC9B,EAASF,EAAkBE,OAE/B,GAAIpE,EAAO0F,eAAez/B,EAAIk+B,GAC5Bl+B,EAAG2+B,iBAAiB3+B,EAAG4+B,aAAcV,GACrCl+B,EAAG6+B,oBAAoB7+B,EAAG4+B,aAAcT,EAAQ/7B,EAAOE,OAClD,CAAA,IAAIy3B,EAAO4F,UAAU3/B,EAAIk+B,GAG9B,MAAM,IAAI/tC,MAAM,2BAFhBovC,EAASW,cAAclgC,EAAIk+B,EAAYD,EAAmB77B,EAAOE,OA7SvE,IAAIi9B,EAAWpF,EAAwBzD,EAAyC,sBAE5EqD,EAASI,EAAwBzD,EAAuC,oBAE5E,SAASyD,EAAwBtgB,GAAO,GAAIA,GAAOA,EAAIlpB,WAAc,OAAOkpB,EAAc,IAAIugB,EAAS,GAAI,GAAW,MAAPvgB,EAAe,IAAK,IAAIljB,KAAOkjB,EAAO,GAAIzY,OAAOlQ,UAAU6c,eAAexd,KAAKspB,EAAKljB,GAAM,CAAE,IAAI0jC,EAAOj5B,OAAO+M,gBAAkB/M,OAAOk5B,yBAA2Bl5B,OAAOk5B,yBAAyBzgB,EAAKljB,GAAO,GAAQ0jC,EAAKlY,KAAOkY,EAAKE,IAAOn5B,OAAO+M,eAAeisB,EAAQzjC,EAAK0jC,GAAgBD,EAAOzjC,GAAOkjB,EAAIljB,GAAoC,OAAtByjC,EAAOI,QAAU3gB,EAAYugB,EAmC7c,IAgBImE,EAAoB,MAsDpBP,EAAqB,CAAC,CACxBG,OAjES,KAkETviB,KAtEkB,KAuElB3c,IA1CW,KA2CXmgC,KAlDkB,OAmDjB,CACDjB,OA7DkB,QA+DhBE,EAAsB,GAC1BA,EAhEoB,OAIW,MA6D/BA,EAnEoB,MAKK,MA+DzBA,EAnEqB,OAII,MAgEzBA,EA7EsB,MAYC,MAkEvBA,EAvEwB,OAKD,MAwEvB,IAAIG,EAAsB,GAC1BA,EAjFY,QAiFiB,EAC7BA,EAjFc,QAiFiB,EAC/BA,EAjFa,QAiFiB,EAC9BA,EA9EoB,QA8EiB,EACrCA,EAlFwB,QAkFiB,EACzCA,EAlFoB,OAkFiB,EACrCA,EAlFqB,QAkFiB,GA+MhC2B,kBAKA,SAAUzvC,EAAQJ,EAASomC,GAEjC,aAGApmC,EAAQK,YAAa,EACrBL,EAAQ0pC,uBA2DR,SAAgCzJ,EAAK6P,GACnCh/B,OAAOqQ,KAAK2uB,GAAKn7B,QAAQ,SAAUtO,GAC7BypC,EAAIryB,eAAepX,IAAQ45B,EAAIxiB,eAAepX,KAChDypC,EAAIzpC,GAAO45B,EAAI55B,OA7DrBrG,EAAQ+vC,oBAwCR,SAA6B3hC,EAAO6xB,EAAK6P,GACvC1hC,EAAMuG,QAAQ,SAAU5M,GACtB,IAAI9D,EAAQg8B,EAAIl4B,QAEF8G,IAAV5K,IACF6rC,EAAI/nC,GAAQ9D,MA5ClBjE,EAAQsqC,SAsER,SAAkB56B,EAAIrQ,GACpB,MAA8B,oBAAhB4rC,aAA+B5rC,aAAa4rC,aAtE5DjrC,EAAQmvC,eAyER,SAAwBz/B,EAAIrQ,GAC1B,MAAoC,oBAAtB2wC,mBAAqC3wC,aAAa2wC,mBAzElEhwC,EAAQiwC,SA4ER,SAAkBvgC,EAAIrQ,GACpB,MAA8B,oBAAhB6wC,aAA+B7wC,aAAa6wC,aA5E5DlwC,EAAQqvC,UA+ER,SAAmB3/B,EAAIrQ,GACrB,MAA+B,oBAAjB8wC,cAAgC9wC,aAAa8wC,cA/E7DnwC,EAAQowC,UAkFR,SAAmB1gC,EAAIrQ,GACrB,MAA+B,oBAAjBgxC,cAAgChxC,aAAagxC,cAlF7DrwC,EAAQ4rB,KAAO5rB,EAAQuP,WAAQ,EA4D/B,IAAIA,EAA2B,oBAAZD,SAA2BA,QAAQC,OAAkC,mBAAlBD,QAAQC,MAAuBD,QAAQC,MAAM9H,KAAK6H,SAAW,aACnItP,EAAQuP,MAAQA,EAChB,IAAIqc,EAA0B,oBAAZtc,SAA2BA,QAAQsc,MAAgC,mBAAjBtc,QAAQsc,KAAsBtc,QAAQsc,KAAKnkB,KAAK6H,SAAW,aAC/HtP,EAAQ4rB,KAAOA,GAwBT0kB,cAKA,SAAUlwC,EAAQJ,EAASomC,GAEjC,aAGApmC,EAAQK,YAAa,EACrBL,EAAQuwC,WAogCR,SAAoBlyB,EAAGmyB,EAAMC,EAAgBX,GAC3CA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAIr7B,EAAIm7B,EAAK,GACTxjC,EAAIwjC,EAAK,GACTG,EAAIH,EAAK,GACTpxC,EAAImI,KAAKqpC,KAAKv7B,EAAIA,EAAIrI,EAAIA,EAAI2jC,EAAIA,GAIlCE,GAHJx7B,GAAKjW,GAGQiW,EACTy7B,GAHJ9jC,GAAK5N,GAGQ4N,EACT+jC,GAHJJ,GAAKvxC,GAGQuxC,EACTlxC,EAAI8H,KAAKuL,IAAI29B,GACb5kC,EAAItE,KAAKsL,IAAI49B,GACbO,EAAiB,EAAIvxC,EACrBwxC,EAAMJ,GAAM,EAAIA,GAAMpxC,EACtByxC,EAAM77B,EAAIrI,EAAIgkC,EAAiBL,EAAI9kC,EACnCslC,EAAM97B,EAAIs7B,EAAIK,EAAiBhkC,EAAInB,EACnCulC,EAAM/7B,EAAIrI,EAAIgkC,EAAiBL,EAAI9kC,EACnCwlC,EAAMP,GAAM,EAAIA,GAAMrxC,EACtB6xC,EAAMtkC,EAAI2jC,EAAIK,EAAiB37B,EAAIxJ,EACnC0lC,EAAMl8B,EAAIs7B,EAAIK,EAAiBhkC,EAAInB,EACnC2lC,EAAMxkC,EAAI2jC,EAAIK,EAAiB37B,EAAIxJ,EACnC4lC,EAAMV,GAAM,EAAIA,GAAMtxC,EACtBiyC,EAAMrzB,EAAE,GACRszB,EAAMtzB,EAAE,GACRuzB,EAAMvzB,EAAE,GACRwzB,EAAMxzB,EAAE,GACRyzB,EAAMzzB,EAAE,GACR0zB,EAAM1zB,EAAE,GACR2zB,EAAM3zB,EAAE,GACR4zB,EAAM5zB,EAAE,GACR6zB,EAAM7zB,EAAE,GACR8zB,EAAM9zB,EAAE,GACR+zB,EAAM/zB,EAAE,IACRg0B,EAAMh0B,EAAE,IACZyxB,EAAI,GAAKmB,EAAMS,EAAMR,EAAMY,EAAMX,EAAMe,EACvCpC,EAAI,GAAKmB,EAAMU,EAAMT,EAAMa,EAAMZ,EAAMgB,EACvCrC,EAAI,GAAKmB,EAAMW,EAAMV,EAAMc,EAAMb,EAAMiB,EACvCtC,EAAI,GAAKmB,EAAMY,EAAMX,EAAMe,EAAMd,EAAMkB,EACvCvC,EAAI,GAAKsB,EAAMM,EAAML,EAAMS,EAAMR,EAAMY,EACvCpC,EAAI,GAAKsB,EAAMO,EAAMN,EAAMU,EAAMT,EAAMa,EACvCrC,EAAI,GAAKsB,EAAMQ,EAAMP,EAAMW,EAAMV,EAAMc,EACvCtC,EAAI,GAAKsB,EAAMS,EAAMR,EAAMY,EAAMX,EAAMe,EACvCvC,EAAI,GAAKyB,EAAMG,EAAMF,EAAMM,EAAML,EAAMS,EACvCpC,EAAI,GAAKyB,EAAMI,EAAMH,EAAMO,EAAMN,EAAMU,EACvCrC,EAAI,IAAMyB,EAAMK,EAAMJ,EAAMQ,EAAMP,EAAMW,EACxCtC,EAAI,IAAMyB,EAAMM,EAAML,EAAMS,EAAMR,EAAMY,EAEpCh0B,IAAMyxB,IACRA,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,KAGd,OAAOyxB,GA3jCT9vC,EAAQsyC,aAq9BR,SAAsB9B,EAAMC,EAAgBX,GAC1CA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAIr7B,EAAIm7B,EAAK,GACTxjC,EAAIwjC,EAAK,GACTG,EAAIH,EAAK,GACTpxC,EAAImI,KAAKqpC,KAAKv7B,EAAIA,EAAIrI,EAAIA,EAAI2jC,EAAIA,GAIlCE,GAHJx7B,GAAKjW,GAGQiW,EACTy7B,GAHJ9jC,GAAK5N,GAGQ4N,EACT+jC,GAHJJ,GAAKvxC,GAGQuxC,EACTlxC,EAAI8H,KAAKuL,IAAI29B,GACb5kC,EAAItE,KAAKsL,IAAI49B,GACbO,EAAiB,EAAIvxC,EAiBzB,OAhBAqwC,EAAI,GAAKe,GAAM,EAAIA,GAAMpxC,EACzBqwC,EAAI,GAAKz6B,EAAIrI,EAAIgkC,EAAiBL,EAAI9kC,EACtCikC,EAAI,GAAKz6B,EAAIs7B,EAAIK,EAAiBhkC,EAAInB,EACtCikC,EAAI,GAAK,EACTA,EAAI,GAAKz6B,EAAIrI,EAAIgkC,EAAiBL,EAAI9kC,EACtCikC,EAAI,GAAKgB,GAAM,EAAIA,GAAMrxC,EACzBqwC,EAAI,GAAK9iC,EAAI2jC,EAAIK,EAAiB37B,EAAIxJ,EACtCikC,EAAI,GAAK,EACTA,EAAI,GAAKz6B,EAAIs7B,EAAIK,EAAiBhkC,EAAInB,EACtCikC,EAAI,GAAK9iC,EAAI2jC,EAAIK,EAAiB37B,EAAIxJ,EACtCikC,EAAI,IAAMiB,GAAM,EAAIA,GAAMtxC,EAC1BqwC,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,GAn/BT9vC,EAAQuyC,KAAOA,EACfvyC,EAAQwyC,QA6kBR,SAAiBv2B,EAAMC,EAAOE,EAAQD,EAAKs2B,EAAMC,EAAK5C,GACpDA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAIiC,EAAKz2B,EAAQD,EACb22B,EAAKz2B,EAAMC,EACXy2B,EAAKJ,EAAOC,EAiBhB,OAhBA5C,EAAI,GAAK,EAAI2C,EAAOE,EACpB7C,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EAAI2C,EAAOG,EACpB9C,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM7zB,EAAOC,GAASy2B,EAC1B7C,EAAI,IAAM3zB,EAAMC,GAAUw2B,EAC1B9C,EAAI,IAAM4C,EAAMG,EAChB/C,EAAI,KAAO,EACXA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM2C,EAAOC,EAAMG,EACvB/C,EAAI,IAAM,EACHA,GAjmBT9vC,EAAQ8yC,QAucR,SAAiBz0B,EAAGmyB,EAAMV,GACxBA,EAAMA,GAAOiD,EAAGn1B,SAChB,IAAIynB,EAAa,EAAPmL,EAIV,OAHAV,EAAI,GAAKzxB,EAAQ,EAANgnB,GACXyK,EAAI,GAAKzxB,EAAQ,EAANgnB,GACXyK,EAAI,GAAKzxB,EAAQ,EAANgnB,GACJyK,GA5cT9vC,EAAQgzC,eAqbR,SAAwB30B,EAAGyxB,GAKzB,OAJAA,EAAMA,GAAOiD,EAAGn1B,UACZ,GAAKS,EAAE,IACXyxB,EAAI,GAAKzxB,EAAE,IACXyxB,EAAI,GAAKzxB,EAAE,IACJyxB,GAzbT9vC,EAAQizC,SAAWA,EACnBjzC,EAAQkT,QAAUA,EAClBlT,EAAQgT,OA+mBR,SAAgBJ,EAAK5O,EAAQkvC,EAAIpD,GAC/BA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAIyC,EAAQC,EACRC,EAAQC,EACRC,EAAQC,EAoBZ,OAnBAT,EAAG7H,UAAU6H,EAAGU,SAAS7gC,EAAK5O,EAAQuvC,GAAQA,GAC9CR,EAAG7H,UAAU6H,EAAGW,MAAMR,EAAIK,EAAOJ,GAAQA,GACzCJ,EAAG7H,UAAU6H,EAAGW,MAAMH,EAAOJ,EAAOE,GAAQA,GAC5CvD,EAAI,GAAKqD,EAAM,GACfrD,EAAI,GAAKqD,EAAM,GACfrD,EAAI,GAAKqD,EAAM,GACfrD,EAAI,GAAK,EACTA,EAAI,GAAKuD,EAAM,GACfvD,EAAI,GAAKuD,EAAM,GACfvD,EAAI,GAAKuD,EAAM,GACfvD,EAAI,GAAK,EACTA,EAAI,GAAKyD,EAAM,GACfzD,EAAI,GAAKyD,EAAM,GACfzD,EAAI,IAAMyD,EAAM,GAChBzD,EAAI,IAAM,EACVA,EAAI,IAAMl9B,EAAI,GACdk9B,EAAI,IAAMl9B,EAAI,GACdk9B,EAAI,IAAMl9B,EAAI,GACdk9B,EAAI,IAAM,EACHA,GAtoBT9vC,EAAQ2T,SAgVR,SAAkB/T,EAAG2V,EAAGu6B,GACtBA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAIiD,EAAM/zC,EAAE,GACRg0C,EAAMh0C,EAAE,GACRi0C,EAAMj0C,EAAE,GACRk0C,EAAMl0C,EAAE,GACRm0C,EAAMn0C,EAAE,GACRo0C,EAAMp0C,EAAE,GACRq0C,EAAMr0C,EAAE,GACRs0C,EAAMt0C,EAAE,GACRu0C,EAAMv0C,EAAE,GACRw0C,EAAMx0C,EAAE,GACRy0C,EAAMz0C,EAAE,IACR00C,EAAM10C,EAAE,IACR20C,EAAM30C,EAAE,IACR40C,EAAM50C,EAAE,IACR60C,EAAM70C,EAAE,IACR80C,EAAM90C,EAAE,IACR+0C,EAAMp/B,EAAE,GACRq/B,EAAMr/B,EAAE,GACRs/B,EAAMt/B,EAAE,GACRu/B,EAAMv/B,EAAE,GACRw/B,EAAMx/B,EAAE,GACRy/B,EAAMz/B,EAAE,GACR0/B,EAAM1/B,EAAE,GACR2/B,EAAM3/B,EAAE,GACR4/B,EAAM5/B,EAAE,GACR6/B,EAAM7/B,EAAE,GACR8/B,EAAM9/B,EAAE,IACR+/B,EAAM//B,EAAE,IACRggC,EAAMhgC,EAAE,IACRigC,EAAMjgC,EAAE,IACRkgC,EAAMlgC,EAAE,IACRmgC,EAAMngC,EAAE,IAiBZ,OAhBAu6B,EAAI,GAAK6D,EAAMgB,EAAMZ,EAAMa,EAAMT,EAAMU,EAAMN,EAAMO,EACnDhF,EAAI,GAAK8D,EAAMe,EAAMX,EAAMY,EAAMR,EAAMS,EAAML,EAAMM,EACnDhF,EAAI,GAAK+D,EAAMc,EAAMV,EAAMW,EAAMP,EAAMQ,EAAMJ,EAAMK,EACnDhF,EAAI,GAAKgE,EAAMa,EAAMT,EAAMU,EAAMN,EAAMO,EAAMH,EAAMI,EACnDhF,EAAI,GAAK6D,EAAMoB,EAAMhB,EAAMiB,EAAMb,EAAMc,EAAMV,EAAMW,EACnDpF,EAAI,GAAK8D,EAAMmB,EAAMf,EAAMgB,EAAMZ,EAAMa,EAAMT,EAAMU,EACnDpF,EAAI,GAAK+D,EAAMkB,EAAMd,EAAMe,EAAMX,EAAMY,EAAMR,EAAMS,EACnDpF,EAAI,GAAKgE,EAAMiB,EAAMb,EAAMc,EAAMV,EAAMW,EAAMP,EAAMQ,EACnDpF,EAAI,GAAK6D,EAAMwB,EAAMpB,EAAMqB,EAAMjB,EAAMkB,EAAMd,EAAMe,EACnDxF,EAAI,GAAK8D,EAAMuB,EAAMnB,EAAMoB,EAAMhB,EAAMiB,EAAMb,EAAMc,EACnDxF,EAAI,IAAM+D,EAAMsB,EAAMlB,EAAMmB,EAAMf,EAAMgB,EAAMZ,EAAMa,EACpDxF,EAAI,IAAMgE,EAAMqB,EAAMjB,EAAMkB,EAAMd,EAAMe,EAAMX,EAAMY,EACpDxF,EAAI,IAAM6D,EAAM4B,EAAMxB,EAAMyB,EAAMrB,EAAMsB,EAAMlB,EAAMmB,EACpD5F,EAAI,IAAM8D,EAAM2B,EAAMvB,EAAMwB,EAAMpB,EAAMqB,EAAMjB,EAAMkB,EACpD5F,EAAI,IAAM+D,EAAM0B,EAAMtB,EAAMuB,EAAMnB,EAAMoB,EAAMhB,EAAMiB,EACpD5F,EAAI,IAAMgE,EAAMyB,EAAMrB,EAAMsB,EAAMlB,EAAMmB,EAAMf,EAAMgB,EAC7C5F,GAjYT9vC,EAAQ21C,OAwGR,SAAgBt3B,EAAGyxB,GAkBjB,OAjBAA,EAAMA,GAAO,IAAIY,EAAQ,KACrB,IAAMryB,EAAE,GACZyxB,EAAI,IAAMzxB,EAAE,GACZyxB,EAAI,IAAMzxB,EAAE,GACZyxB,EAAI,IAAMzxB,EAAE,GACZyxB,EAAI,IAAMzxB,EAAE,GACZyxB,EAAI,IAAMzxB,EAAE,GACZyxB,EAAI,IAAMzxB,EAAE,GACZyxB,EAAI,IAAMzxB,EAAE,GACZyxB,EAAI,IAAMzxB,EAAE,GACZyxB,EAAI,IAAMzxB,EAAE,GACZyxB,EAAI,KAAOzxB,EAAE,IACbyxB,EAAI,KAAOzxB,EAAE,IACbyxB,EAAI,KAAOzxB,EAAE,IACbyxB,EAAI,KAAOzxB,EAAE,IACbyxB,EAAI,KAAOzxB,EAAE,IACbyxB,EAAI,KAAOzxB,EAAE,IACNyxB,GAzHT9vC,EAAQ41C,MA4hBR,SAAe35B,EAAMC,EAAOE,EAAQD,EAAKs2B,EAAMC,EAAK5C,GAkBlD,OAjBAA,EAAMA,GAAO,IAAIY,EAAQ,KACrB,GAAK,GAAKx0B,EAAQD,GACtB6zB,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAAK3zB,EAAMC,GACpB0zB,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,GAAK2C,EAAOC,GACtB5C,EAAI,IAAM,EACVA,EAAI,KAAO5zB,EAAQD,IAASA,EAAOC,GACnC4zB,EAAI,KAAO3zB,EAAMC,IAAWA,EAASD,GACrC2zB,EAAI,KAAO4C,EAAMD,IAASA,EAAOC,GACjC5C,EAAI,IAAM,EACHA,GA7iBT9vC,EAAQ0S,YAmfR,SAAqBmjC,EAAuBrjC,EAAQsjC,EAAOC,EAAMjG,GAC/DA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAIlxC,EAAI+H,KAAKyuC,IAAc,GAAVzuC,KAAKkJ,GAAW,GAAMolC,GACnCI,EAAW,GAAOH,EAAQC,GAiB9B,OAhBAjG,EAAI,GAAKtwC,EAAIgT,EACbs9B,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAKtwC,EACTswC,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,KAAOgG,EAAQC,GAAQE,EAC3BnG,EAAI,KAAO,EACXA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAMgG,EAAQC,EAAOE,EAAW,EACpCnG,EAAI,IAAM,EACHA,GAtgBT9vC,EAAQ0Q,QAkwBR,SAAiB2N,EAAGoyB,EAAgBX,GAClCA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAIoB,EAAMzzB,EAAE,GACR0zB,EAAM1zB,EAAE,GACR2zB,EAAM3zB,EAAE,GACR4zB,EAAM5zB,EAAE,GACR6zB,EAAM7zB,EAAE,GACR8zB,EAAM9zB,EAAE,GACR+zB,EAAM/zB,EAAE,IACRg0B,EAAMh0B,EAAE,IACR5e,EAAI8H,KAAKuL,IAAI29B,GACb5kC,EAAItE,KAAKsL,IAAI49B,GACjBX,EAAI,GAAKrwC,EAAIqyC,EAAMjmC,EAAIqmC,EACvBpC,EAAI,GAAKrwC,EAAIsyC,EAAMlmC,EAAIsmC,EACvBrC,EAAI,GAAKrwC,EAAIuyC,EAAMnmC,EAAIumC,EACvBtC,EAAI,GAAKrwC,EAAIwyC,EAAMpmC,EAAIwmC,EACvBvC,EAAI,GAAKrwC,EAAIyyC,EAAMrmC,EAAIimC,EACvBhC,EAAI,GAAKrwC,EAAI0yC,EAAMtmC,EAAIkmC,EACvBjC,EAAI,IAAMrwC,EAAI2yC,EAAMvmC,EAAImmC,EACxBlC,EAAI,IAAMrwC,EAAI4yC,EAAMxmC,EAAIomC,EAEpB5zB,IAAMyxB,IACRA,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,KAGd,OAAOyxB,GAjyBT9vC,EAAQk2C,QA60BR,SAAiB73B,EAAGoyB,EAAgBX,GAClCA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAIgB,EAAMrzB,EAAE,GACRszB,EAAMtzB,EAAE,GACRuzB,EAAMvzB,EAAE,GACRwzB,EAAMxzB,EAAE,GACR6zB,EAAM7zB,EAAE,GACR8zB,EAAM9zB,EAAE,GACR+zB,EAAM/zB,EAAE,IACRg0B,EAAMh0B,EAAE,IACR5e,EAAI8H,KAAKuL,IAAI29B,GACb5kC,EAAItE,KAAKsL,IAAI49B,GACjBX,EAAI,GAAKrwC,EAAIiyC,EAAM7lC,EAAIqmC,EACvBpC,EAAI,GAAKrwC,EAAIkyC,EAAM9lC,EAAIsmC,EACvBrC,EAAI,GAAKrwC,EAAImyC,EAAM/lC,EAAIumC,EACvBtC,EAAI,GAAKrwC,EAAIoyC,EAAMhmC,EAAIwmC,EACvBvC,EAAI,GAAKrwC,EAAIyyC,EAAMrmC,EAAI6lC,EACvB5B,EAAI,GAAKrwC,EAAI0yC,EAAMtmC,EAAI8lC,EACvB7B,EAAI,IAAMrwC,EAAI2yC,EAAMvmC,EAAI+lC,EACxB9B,EAAI,IAAMrwC,EAAI4yC,EAAMxmC,EAAIgmC,EAEpBxzB,IAAMyxB,IACRA,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,KAGd,OAAOyxB,GA52BT9vC,EAAQwQ,QAw5BR,SAAiB6N,EAAGoyB,EAAgBX,GAClCA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAIgB,EAAMrzB,EAAE,GACRszB,EAAMtzB,EAAE,GACRuzB,EAAMvzB,EAAE,GACRwzB,EAAMxzB,EAAE,GACRyzB,EAAMzzB,EAAE,GACR0zB,EAAM1zB,EAAE,GACR2zB,EAAM3zB,EAAE,GACR4zB,EAAM5zB,EAAE,GACR5e,EAAI8H,KAAKuL,IAAI29B,GACb5kC,EAAItE,KAAKsL,IAAI49B,GACjBX,EAAI,GAAKrwC,EAAIiyC,EAAM7lC,EAAIimC,EACvBhC,EAAI,GAAKrwC,EAAIkyC,EAAM9lC,EAAIkmC,EACvBjC,EAAI,GAAKrwC,EAAImyC,EAAM/lC,EAAImmC,EACvBlC,EAAI,GAAKrwC,EAAIoyC,EAAMhmC,EAAIomC,EACvBnC,EAAI,GAAKrwC,EAAIqyC,EAAMjmC,EAAI6lC,EACvB5B,EAAI,GAAKrwC,EAAIsyC,EAAMlmC,EAAI8lC,EACvB7B,EAAI,GAAKrwC,EAAIuyC,EAAMnmC,EAAI+lC,EACvB9B,EAAI,GAAKrwC,EAAIwyC,EAAMpmC,EAAIgmC,EAEnBxzB,IAAMyxB,IACRA,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,KAGd,OAAOyxB,GAv7BT9vC,EAAQm2C,UA8tBR,SAAmB1F,EAAgBX,GACjCA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAIjxC,EAAI8H,KAAKuL,IAAI29B,GACb5kC,EAAItE,KAAKsL,IAAI49B,GAiBjB,OAhBAX,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAKrwC,EACTqwC,EAAI,GAAKjkC,EACTikC,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAMjkC,EACVikC,EAAI,IAAMrwC,EACVqwC,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,GAjvBT9vC,EAAQo2C,UAyyBR,SAAmB3F,EAAgBX,GACjCA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAIjxC,EAAI8H,KAAKuL,IAAI29B,GACb5kC,EAAItE,KAAKsL,IAAI49B,GAiBjB,OAhBAX,EAAI,GAAKrwC,EACTqwC,EAAI,GAAK,EACTA,EAAI,IAAMjkC,EACVikC,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAKjkC,EACTikC,EAAI,GAAK,EACTA,EAAI,IAAMrwC,EACVqwC,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,GA5zBT9vC,EAAQq2C,UAo3BR,SAAmB5F,EAAgBX,GACjCA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAIjxC,EAAI8H,KAAKuL,IAAI29B,GACb5kC,EAAItE,KAAKsL,IAAI49B,GAiBjB,OAhBAX,EAAI,GAAKrwC,EACTqwC,EAAI,GAAKjkC,EACTikC,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAMjkC,EACVikC,EAAI,GAAKrwC,EACTqwC,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,GAv4BT9vC,EAAQ2V,MAwlCR,SAAe0I,EAAGzQ,EAAGkiC,GACnBA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAI4F,EAAK1oC,EAAE,GACP2oC,EAAK3oC,EAAE,GACP4oC,EAAK5oC,EAAE,GACXkiC,EAAI,GAAKwG,EAAKj4B,EAAE,GAChByxB,EAAI,GAAKwG,EAAKj4B,EAAE,GAChByxB,EAAI,GAAKwG,EAAKj4B,EAAE,GAChByxB,EAAI,GAAKwG,EAAKj4B,EAAE,GAChByxB,EAAI,GAAKyG,EAAKl4B,EAAE,GAChByxB,EAAI,GAAKyG,EAAKl4B,EAAE,GAChByxB,EAAI,GAAKyG,EAAKl4B,EAAE,GAChByxB,EAAI,GAAKyG,EAAKl4B,EAAE,GAChByxB,EAAI,GAAK0G,EAAKn4B,EAAE,GAChByxB,EAAI,GAAK0G,EAAKn4B,EAAE,GAChByxB,EAAI,IAAM0G,EAAKn4B,EAAE,IACjByxB,EAAI,IAAM0G,EAAKn4B,EAAE,IAEbA,IAAMyxB,IACRA,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,KAGd,OAAOyxB,GAhnCT9vC,EAAQy2C,QAsjCR,SAAiB7oC,EAAGkiC,GAkBlB,OAjBAA,EAAMA,GAAO,IAAIY,EAAQ,KACrB,GAAK9iC,EAAE,GACXkiC,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAKliC,EAAE,GACXkiC,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAMliC,EAAE,GACZkiC,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,GAvkCT9vC,EAAQ02C,QAwcR,SAAiB92C,EAAGgO,EAAG4iC,EAAMV,GACvBA,IAAQlwC,IACVkwC,EAAMyC,EAAK3yC,EAAGkwC,IAGhB,IAAIzK,EAAa,EAAPmL,EAIV,OAHAV,EAAU,EAANzK,GAAWz3B,EAAE,GACjBkiC,EAAU,EAANzK,GAAWz3B,EAAE,GACjBkiC,EAAU,EAANzK,GAAWz3B,EAAE,GACVkiC,GAhdT9vC,EAAQ22C,eA8ER,SAAwBC,GACtB,IAAIC,EAAUnG,EAEd,OADAA,EAAUkG,EACHC,GAhFT72C,EAAQ82C,eAiYR,SAAwBl3C,EAAGgO,EAAGkiC,GAC5BA,EAAMA,GAAOmD,IAETrzC,IAAMkwC,IACRA,EAAI,GAAKlwC,EAAE,GACXkwC,EAAI,GAAKlwC,EAAE,GACXkwC,EAAI,GAAKlwC,EAAE,GACXkwC,EAAI,GAAKlwC,EAAE,GACXkwC,EAAI,GAAKlwC,EAAE,GACXkwC,EAAI,GAAKlwC,EAAE,GACXkwC,EAAI,GAAKlwC,EAAE,GACXkwC,EAAI,GAAKlwC,EAAE,GACXkwC,EAAI,GAAKlwC,EAAE,GACXkwC,EAAI,GAAKlwC,EAAE,GACXkwC,EAAI,IAAMlwC,EAAE,IACZkwC,EAAI,IAAMlwC,EAAE,KAOd,OAJAkwC,EAAI,IAAMliC,EAAE,GACZkiC,EAAI,IAAMliC,EAAE,GACZkiC,EAAI,IAAMliC,EAAE,GACZkiC,EAAI,IAAM,EACHA,GAtZT9vC,EAAQ+2C,mBAopCR,SAA4B14B,EAAGzQ,EAAGkiC,GAChCA,EAAMA,GAAOiD,EAAGn1B,SAChB,IAAI04B,EAAK1oC,EAAE,GACP2oC,EAAK3oC,EAAE,GACP4oC,EAAK5oC,EAAE,GAIX,OAHAkiC,EAAI,GAAKwG,EAAKj4B,EAAE,GAAak4B,EAAKl4B,EAAE,GAAam4B,EAAKn4B,EAAE,GACxDyxB,EAAI,GAAKwG,EAAKj4B,EAAE,GAAak4B,EAAKl4B,EAAE,GAAam4B,EAAKn4B,EAAE,GACxDyxB,EAAI,GAAKwG,EAAKj4B,EAAE,GAAak4B,EAAKl4B,EAAE,GAAam4B,EAAKn4B,EAAE,IACjDyxB,GA3pCT9vC,EAAQg3C,gBA8qCR,SAAyB34B,EAAGzQ,EAAGkiC,GAC7BA,EAAMA,GAAOiD,EAAGn1B,SAChB,IAAIq5B,EAAK/jC,EAAQmL,GACbi4B,EAAK1oC,EAAE,GACP2oC,EAAK3oC,EAAE,GACP4oC,EAAK5oC,EAAE,GAIX,OAHAkiC,EAAI,GAAKwG,EAAKW,EAAG,GAAaV,EAAKU,EAAG,GAAaT,EAAKS,EAAG,GAC3DnH,EAAI,GAAKwG,EAAKW,EAAG,GAAaV,EAAKU,EAAG,GAAaT,EAAKS,EAAG,GAC3DnH,EAAI,GAAKwG,EAAKW,EAAG,GAAaV,EAAKU,EAAG,GAAaT,EAAKS,EAAG,IACpDnH,GAtrCT9vC,EAAQk3C,eAwnCR,SAAwB74B,EAAGzQ,EAAGkiC,GAC5BA,EAAMA,GAAOiD,EAAGn1B,SAChB,IAAI04B,EAAK1oC,EAAE,GACP2oC,EAAK3oC,EAAE,GACP4oC,EAAK5oC,EAAE,GACP4H,EAAI8gC,EAAKj4B,EAAE,GAAak4B,EAAKl4B,EAAE,GAAam4B,EAAKn4B,EAAE,IAAaA,EAAE,IAItE,OAHAyxB,EAAI,IAAMwG,EAAKj4B,EAAE,GAAak4B,EAAKl4B,EAAE,GAAam4B,EAAKn4B,EAAE,GAAaA,EAAE,KAAc7I,EACtFs6B,EAAI,IAAMwG,EAAKj4B,EAAE,GAAak4B,EAAKl4B,EAAE,GAAam4B,EAAKn4B,EAAE,GAAaA,EAAE,KAAc7I,EACtFs6B,EAAI,IAAMwG,EAAKj4B,EAAE,GAAak4B,EAAKl4B,EAAE,GAAam4B,EAAKn4B,EAAE,IAAaA,EAAE,KAAc7I,EAC/Es6B,GAhoCT9vC,EAAQgW,UA+pBR,SAAmBqI,EAAGzQ,EAAGkiC,GACvBA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAI4F,EAAK1oC,EAAE,GACP2oC,EAAK3oC,EAAE,GACP4oC,EAAK5oC,EAAE,GACP8jC,EAAMrzB,EAAE,GACRszB,EAAMtzB,EAAE,GACRuzB,EAAMvzB,EAAE,GACRwzB,EAAMxzB,EAAE,GACRyzB,EAAMzzB,EAAE,GACR0zB,EAAM1zB,EAAE,GACR2zB,EAAM3zB,EAAE,GACR4zB,EAAM5zB,EAAE,GACR6zB,EAAM7zB,EAAE,GACR8zB,EAAM9zB,EAAE,GACR+zB,EAAM/zB,EAAE,IACRg0B,EAAMh0B,EAAE,IACR84B,EAAM94B,EAAE,IACR+4B,EAAM/4B,EAAE,IACRg5B,EAAMh5B,EAAE,IACRi5B,EAAMj5B,EAAE,IAERA,IAAMyxB,IACRA,EAAI,GAAK4B,EACT5B,EAAI,GAAK6B,EACT7B,EAAI,GAAK8B,EACT9B,EAAI,GAAK+B,EACT/B,EAAI,GAAKgC,EACThC,EAAI,GAAKiC,EACTjC,EAAI,GAAKkC,EACTlC,EAAI,GAAKmC,EACTnC,EAAI,GAAKoC,EACTpC,EAAI,GAAKqC,EACTrC,EAAI,IAAMsC,EACVtC,EAAI,IAAMuC,GAOZ,OAJAvC,EAAI,IAAM4B,EAAM4E,EAAKxE,EAAMyE,EAAKrE,EAAMsE,EAAKW,EAC3CrH,EAAI,IAAM6B,EAAM2E,EAAKvE,EAAMwE,EAAKpE,EAAMqE,EAAKY,EAC3CtH,EAAI,IAAM8B,EAAM0E,EAAKtE,EAAMuE,EAAKnE,EAAMoE,EAAKa,EAC3CvH,EAAI,IAAM+B,EAAMyE,EAAKrE,EAAMsE,EAAKlE,EAAMmE,EAAKc,EACpCxH,GAvsBT9vC,EAAQuQ,YA+nBR,SAAqB3C,EAAGkiC,GAkBtB,OAjBAA,EAAMA,GAAO,IAAIY,EAAQ,KACrB,GAAK,EACTZ,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAMliC,EAAE,GACZkiC,EAAI,IAAMliC,EAAE,GACZkiC,EAAI,IAAMliC,EAAE,GACZkiC,EAAI,IAAM,EACHA,GAhpBT9vC,EAAQu3C,UA4KR,SAAmBl5B,EAAGyxB,GAGpB,IAFAA,EAAMA,GAAO,IAAIY,EAAQ,OAEbryB,EAAG,CACb,IAAIhf,EAmBJ,OAlBAA,EAAIgf,EAAE,GACNA,EAAE,GAAKA,EAAE,GACTA,EAAE,GAAKhf,EACPA,EAAIgf,EAAE,GACNA,EAAE,GAAKA,EAAE,GACTA,EAAE,GAAKhf,EACPA,EAAIgf,EAAE,GACNA,EAAE,GAAKA,EAAE,IACTA,EAAE,IAAMhf,EACRA,EAAIgf,EAAE,GACNA,EAAE,GAAKA,EAAE,GACTA,EAAE,GAAKhf,EACPA,EAAIgf,EAAE,GACNA,EAAE,GAAKA,EAAE,IACTA,EAAE,IAAMhf,EACRA,EAAIgf,EAAE,IACNA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMhf,EACDywC,EAGT,IAAI4B,EAAMrzB,EAAE,GACRszB,EAAMtzB,EAAE,GACRuzB,EAAMvzB,EAAE,GACRwzB,EAAMxzB,EAAE,GACRyzB,EAAMzzB,EAAE,GACR0zB,EAAM1zB,EAAE,GACR2zB,EAAM3zB,EAAE,GACR4zB,EAAM5zB,EAAE,GACR6zB,EAAM7zB,EAAE,GACR8zB,EAAM9zB,EAAE,GACR+zB,EAAM/zB,EAAE,IACRg0B,EAAMh0B,EAAE,IACR84B,EAAM94B,EAAE,IACR+4B,EAAM/4B,EAAE,IACRg5B,EAAMh5B,EAAE,IACRi5B,EAAMj5B,EAAE,IAiBZ,OAhBAyxB,EAAI,GAAK4B,EACT5B,EAAI,GAAKgC,EACThC,EAAI,GAAKoC,EACTpC,EAAI,GAAKqH,EACTrH,EAAI,GAAK6B,EACT7B,EAAI,GAAKiC,EACTjC,EAAI,GAAKqC,EACTrC,EAAI,GAAKsH,EACTtH,EAAI,GAAK8B,EACT9B,EAAI,GAAKkC,EACTlC,EAAI,IAAMsC,EACVtC,EAAI,IAAMuH,EACVvH,EAAI,IAAM+B,EACV/B,EAAI,IAAMmC,EACVnC,EAAI,IAAMuC,EACVvC,EAAI,IAAMwH,EACHxH,GApOT,IAAIiD,EAEJ,SAAiCxpB,GAAO,CAAA,GAAIA,GAAOA,EAAIlpB,WAAc,OAAOkpB,EAAc,IAAIugB,EAAS,GAAI,GAAW,MAAPvgB,EAAe,IAAK,IAAIljB,KAAOkjB,EAAO,GAAIzY,OAAOlQ,UAAU6c,eAAexd,KAAKspB,EAAKljB,GAAM,CAAE,IAAI0jC,EAAOj5B,OAAO+M,gBAAkB/M,OAAOk5B,yBAA2Bl5B,OAAOk5B,yBAAyBzgB,EAAKljB,GAAO,GAAQ0jC,EAAKlY,KAAOkY,EAAKE,IAAOn5B,OAAO+M,eAAeisB,EAAQzjC,EAAK0jC,GAAgBD,EAAOzjC,GAAOkjB,EAAIljB,GAAoC,OAAtByjC,EAAOI,QAAU3gB,EAAYugB,GAFpcD,CAAwBzD,EAAmC,gBAkDpE,IAAIsK,EAAU1gC,aACVojC,EAAUL,EAAGn1B,SACb01B,EAAUP,EAAGn1B,SACb41B,EAAUT,EAAGn1B,SA2DjB,SAAS20B,EAAKl0B,EAAGyxB,GAkBf,OAjBAA,EAAMA,GAAO,IAAIY,EAAQ,KACrB,GAAKryB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,GAAKzxB,EAAE,GACXyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACZyxB,EAAI,IAAMzxB,EAAE,IACLyxB,EAWT,SAASmD,EAASnD,GAkBhB,OAjBAA,EAAMA,GAAO,IAAIY,EAAQ,KACrB,GAAK,EACTZ,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAgFT,SAAS58B,EAAQmL,EAAGyxB,GAClBA,EAAMA,GAAO,IAAIY,EAAQ,IACzB,IAAIgB,EAAMrzB,EAAE,GACRszB,EAAMtzB,EAAE,GACRuzB,EAAMvzB,EAAE,GACRwzB,EAAMxzB,EAAE,GACRyzB,EAAMzzB,EAAE,GACR0zB,EAAM1zB,EAAE,GACR2zB,EAAM3zB,EAAE,GACR4zB,EAAM5zB,EAAE,GACR6zB,EAAM7zB,EAAE,GACR8zB,EAAM9zB,EAAE,GACR+zB,EAAM/zB,EAAE,IACRg0B,EAAMh0B,EAAE,IACR84B,EAAM94B,EAAE,IACR+4B,EAAM/4B,EAAE,IACRg5B,EAAMh5B,EAAE,IACRi5B,EAAMj5B,EAAE,IACRm5B,EAAQpF,EAAMkF,EACdG,EAAQJ,EAAMhF,EACdqF,EAAQ1F,EAAMsF,EACdK,EAAQN,EAAMpF,EACd2F,EAAQ5F,EAAMK,EACdwF,EAAQzF,EAAMH,EACd6F,EAAQlG,EAAM0F,EACdS,EAAQV,EAAMxF,EACdmG,EAAQpG,EAAMS,EACd4F,EAAQ7F,EAAMP,EACdqG,EAAStG,EAAMK,EACfkG,EAASnG,EAAMH,EACfuG,EAASlG,EAAMkF,EACfiB,EAASlB,EAAMhF,EACfmG,EAASxG,EAAMsF,EACfmB,EAASpB,EAAMpF,EACfyG,EAAS1G,EAAMK,EACfsG,EAASvG,EAAMH,EACf2G,EAAShH,EAAM0F,EACfuB,EAASxB,EAAMxF,EACfiH,EAASlH,EAAMS,EACf0G,EAAS3G,EAAMP,EACfmH,EAASpH,EAAMK,EACfgH,EAASjH,EAAMH,EACfqH,EAAKxB,EAAQzF,EAAM4F,EAAQxF,EAAMyF,EAAQR,GAAOK,EAAQ1F,EAAM2F,EAAQvF,EAAM0F,EAAQT,GACpF6B,EAAKxB,EAAQ9F,EAAMmG,EAAQ3F,EAAM8F,EAAQb,GAAOI,EAAQ7F,EAAMoG,EAAQ5F,EAAM6F,EAAQZ,GACpF8B,EAAKxB,EAAQ/F,EAAMoG,EAAQhG,EAAMmG,EAASd,GAAOO,EAAQhG,EAAMmG,EAAQ/F,EAAMoG,EAASf,GACtF+B,EAAKtB,EAAQlG,EAAMqG,EAAQjG,EAAMoG,EAAShG,GAAOyF,EAAQjG,EAAMsG,EAAQlG,EAAMmG,EAAS/F,GACtF38B,EAAI,GAAOk8B,EAAMsH,EAAKlH,EAAMmH,EAAK/G,EAAMgH,EAAK/B,EAAMgC,GAiBtD,OAhBArJ,EAAI,GAAKt6B,EAAIwjC,EACblJ,EAAI,GAAKt6B,EAAIyjC,EACbnJ,EAAI,GAAKt6B,EAAI0jC,EACbpJ,EAAI,GAAKt6B,EAAI2jC,EACbrJ,EAAI,GAAKt6B,GAAKiiC,EAAQ3F,EAAM4F,EAAQxF,EAAM2F,EAAQV,GAAOK,EAAQ1F,EAAM6F,EAAQzF,EAAM0F,EAAQT,IAC7FrH,EAAI,GAAKt6B,GAAKgiC,EAAQ9F,EAAMqG,EAAQ7F,EAAM8F,EAAQb,GAAOM,EAAQ/F,EAAMoG,EAAQ5F,EAAM+F,EAAQd,IAC7FrH,EAAI,GAAKt6B,GAAKmiC,EAAQjG,EAAMoG,EAAQhG,EAAMqG,EAAShB,GAAOO,EAAQhG,EAAMqG,EAAQjG,EAAMoG,EAASf,IAC/FrH,EAAI,GAAKt6B,GAAKoiC,EAAQlG,EAAMuG,EAAQnG,EAAMoG,EAAShG,GAAO2F,EAAQnG,EAAMsG,EAAQlG,EAAMqG,EAASjG,IAC/FpC,EAAI,GAAKt6B,GAAK4iC,EAASnG,EAAMsG,EAASlG,EAAMmG,EAASlB,GAAOe,EAASpG,EAAMqG,EAASjG,EAAMoG,EAASnB,IACnGxH,EAAI,GAAKt6B,GAAK6iC,EAASxG,EAAM6G,EAASrG,EAAMwG,EAASvB,GAAOc,EAASvG,EAAM8G,EAAStG,EAAMuG,EAAStB,IACnGxH,EAAI,IAAMt6B,GAAK8iC,EAASzG,EAAM8G,EAAS1G,EAAM6G,EAASxB,GAAOiB,EAAS1G,EAAM6G,EAASzG,EAAM8G,EAASzB,IACpGxH,EAAI,IAAMt6B,GAAKijC,EAAS5G,EAAM+G,EAAS3G,EAAM8G,EAAS1G,GAAOmG,EAAS3G,EAAMgH,EAAS5G,EAAM6G,EAASzG,IACpGvC,EAAI,IAAMt6B,GAAK8iC,EAASlG,EAAMqG,EAASpB,EAAMgB,EAASrG,GAAOwG,EAASnB,EAAMe,EAASpG,EAAMuG,EAASnG,IACpGtC,EAAI,IAAMt6B,GAAKojC,EAASvB,EAAMe,EAASxG,EAAM+G,EAASvG,GAAOsG,EAAStG,EAAMyG,EAASxB,EAAMgB,EAASzG,IACpG9B,EAAI,IAAMt6B,GAAKkjC,EAAS1G,EAAM+G,EAAS1B,EAAMkB,EAAS3G,GAAOkH,EAASzB,EAAMiB,EAAS1G,EAAM+G,EAAS3G,IACpGlC,EAAI,IAAMt6B,GAAKsjC,EAAS1G,EAAMoG,EAAS5G,EAAMiH,EAAS7G,GAAO4G,EAAS5G,EAAM+G,EAAS3G,EAAMqG,EAAS7G,IAC7F9B,IAw4BHsJ,sBAKA,SAAUh5C,EAAQJ,EAASomC,GAEjC,aAGApmC,EAAQK,YAAa,EACrBL,EAAQq5C,kBAAoBA,EAC5Br5C,EAAQs5C,0BAA4BA,EACpCt5C,EAAQu5C,mBAAqBA,EAC7Bv5C,EAAQ6Q,oBAAsBA,EAC9B7Q,EAAQw5C,qBAAuBA,EAC/Bx5C,EAAQy5C,4BAA8BA,EACtCz5C,EAAQ05C,qBAAuBA,EAC/B15C,EAAQ25C,sBAAwBA,EAChC35C,EAAQ45C,uBAAyBA,EACjC55C,EAAQ65C,oBAAsBA,EAC9B75C,EAAQ85C,mBAAqBA,EAC7B95C,EAAQ+5C,gBAmKR,SAAyBC,GACvB,IAAIpT,EAAUoT,EAASpT,QACnBqT,EAAc,GACd9lC,EAAcyyB,EAAQ1mC,OAoB1B,OADA4Q,OAAOqQ,KAAK64B,GAAUvvC,OAAOyvC,GAAevlC,QAjB5C,SAA2B8S,GAKzB,IAJA,IAAI0yB,EAAYH,EAASvyB,GACrBxW,EAAgBkpC,EAAUlpC,cAC1BmpC,EAAYd,EAA0BroC,EAAekD,EAAagmC,EAAUx8B,aAEvEspB,EAAK,EAAGA,EAAK9yB,IAAe8yB,EAInC,IAHA,IACIiC,EADMtC,EAAQK,GACCh2B,EAEVopC,EAAK,EAAGA,EAAKppC,IAAiBopC,EACrCD,EAAUrsC,KAAKosC,EAAUjR,EAASmR,IAItCJ,EAAYxyB,GAAW2yB,IAIlBH,GAzLTj6C,EAAQs6C,eAmMR,SAAwBN,GACtB,GAAIA,EAASpT,QACX,MAAM,IAAI/mC,MAAM,mEAMlB,IAHA,IAAI06C,EAAUP,EAASQ,OACnBC,EAAaF,EAAQr6C,OAEhB+mC,EAAK,EAAGA,EAAKwT,EAAYxT,GAAM,EAAG,CAEzC,IAAIyT,EAAMH,EAAQtT,EAAK,GACnB0T,EAAMJ,EAAQtT,EAAK,GACnB2T,EAAML,EAAQtT,EAAK,GACnB4T,EAAMN,EAAQtT,EAAK,GACnB6T,EAAMP,EAAQtT,EAAK,GACnB8T,EAAMR,EAAQtT,EAAK,GACnB+T,EAAMT,EAAQtT,EAAK,GACnBgU,EAAMV,EAAQtT,EAAK,GACnBiU,EAAMX,EAAQtT,EAAK,GAEnBkU,EAAKT,EAAMG,EAAMG,EACjBI,EAAKT,EAAMG,EAAMG,EACjBI,EAAKT,EAAMG,EAAMG,EAEjBh7C,EAASqH,KAAKqpC,KAAKuK,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,GAChDF,GAAMj7C,EACNk7C,GAAMl7C,EACNm7C,GAAMn7C,EAENq6C,EAAQtT,EAAK,GAAKkU,EAClBZ,EAAQtT,EAAK,GAAKmU,EAClBb,EAAQtT,EAAK,GAAKoU,EAClBd,EAAQtT,EAAK,GAAKkU,EAClBZ,EAAQtT,EAAK,GAAKmU,EAClBb,EAAQtT,EAAK,GAAKoU,EAClBd,EAAQtT,EAAK,GAAKkU,EAClBZ,EAAQtT,EAAK,GAAKmU,EAClBb,EAAQtT,EAAK,GAAKoU,EAGpB,OAAOrB,GA1OTh6C,EAAQs7C,uBAo6CR,SAAgCtB,EAAUhyC,GACxCA,EAAUA,GAAW,GACrB,IAAImM,EAAc6lC,EAASh+B,SAAS7H,YAChConC,EAAUjC,EAA0B,EAAGnlC,EAAaub,YAEpDhhB,EAAO1G,EAAQ0G,MAAQ,SAAUihC,EAAKloB,GACxC,OAAOA,EAAU,EArCrB,SAAiB+zB,GACf,OAAOj0C,KAAKuH,SAAW0sC,EAAQ,EAoCRC,CAAQ,KAAO,KAKtC,GAFAzB,EAAS0B,MAAQH,EAEbvB,EAASpT,QAEX,IAAK,IAAIK,EAAK,EAAGA,EAAK9yB,IAAe8yB,EACnCsU,EAAQxtC,KAAKW,EAAKu4B,EAAI,GAAIv4B,EAAKu4B,EAAI,GAAIv4B,EAAKu4B,EAAI,GAAIv4B,EAAKu4B,EAAI,SAO/D,IAHA,IAAI0U,EAAmB3zC,EAAQ4zC,eAAiB,EAC5CC,EAAU1nC,EAAcwnC,EAEnBG,EAAO,EAAGA,EAAOD,IAAWC,EAInC,IAFA,IAAIJ,EAAQ,CAAChtC,EAAKotC,EAAM,GAAIptC,EAAKotC,EAAM,GAAIptC,EAAKotC,EAAM,GAAIptC,EAAKotC,EAAM,IAE5DzB,EAAK,EAAGA,EAAKsB,IAAoBtB,EACxCkB,EAAQxtC,KAAK2tC,GAKnB,OAAO1B,GAl8CTh6C,EAAQ+7C,mBAAqBA,EAC7B/7C,EAAQg8C,gBAAkBA,EAC1Bh8C,EAAQi8C,kBAAoBA,EAC5Bj8C,EAAQk8C,iBAAmBA,EAC3Bl8C,EAAQm8C,eAsiDR,SAAwBC,GAyBtB,IAxBA,IACIC,EADAjuC,EAAQ,GAIRkuC,EAAQ,SAAerV,GACzB,IAAIR,EAAS2V,EAAcnV,GAC3Bn2B,OAAOqQ,KAAKslB,GAAQ9xB,QAAQ,SAAU5M,GAE/BqG,EAAMrG,KACTqG,EAAMrG,GAAQ,IAGXs0C,GAAqB,YAATt0C,IACfs0C,EAAWt0C,GAGb,IAAIw0C,EAAY9V,EAAO1+B,GACnBkJ,EAAgBm2B,EAAiBmV,EAAWx0C,GAE5CoM,EADQgzB,EAASoV,GACGr8C,OAAS+Q,EACjC7C,EAAMrG,GAAMgG,KAAKoG,MAIZ8yB,EAAK,EAAGA,EAAKmV,EAAcl8C,SAAU+mC,EAC5CqV,EAAMrV,GA8CR,IAAIuV,EAAOpuC,EAAMiuC,GACbI,EAAY,GAOhB,OANA3rC,OAAOqQ,KAAK/S,GAAOuG,QAAQ,SAAU5M,GACnC,IAAIwyB,EA5CN,SAAmCxyB,GAIjC,IAHA,IACI20C,EADAx8C,EAAS,EAGJ+mC,EAAK,EAAGA,EAAKmV,EAAcl8C,SAAU+mC,EAAI,CAChD,IACIsV,EADSH,EAAcnV,GACJl/B,GACnBuP,EAAQ6vB,EAASoV,GACrBr8C,GAAUoX,EAAMpX,OAEXw8C,IAAaH,EAAUrrC,OAC1BwrC,EAAYH,GAIhB,MAAO,CACLr8C,OAAQA,EACRy8C,KAAMD,GA2BGE,CAA0B70C,GACjC80C,EAAeC,EAAsBviB,EAAKoiB,KAAMpiB,EAAKr6B,SAxB3D,SAA8B6H,EAAMy0C,EAAMO,GAIxC,IAHA,IAAIC,EAAY,EACZ9T,EAAS,EAEJjC,EAAK,EAAGA,EAAKmV,EAAcl8C,SAAU+mC,EAAI,CAChD,IACIsV,EADSH,EAAcnV,GACJl/B,GACnBuP,EAAQ6vB,EAASoV,GAER,YAATx0C,GACFk1C,EAAa3lC,EAAOylC,EAAU7T,EAAQ8T,GACtCA,GAAaR,EAAKvV,IAElBgW,EAAa3lC,EAAOylC,EAAU7T,GAGhCA,GAAU5xB,EAAMpX,QASlBg9C,CAAqBn1C,EAAMy0C,EAAMrV,EAAS0V,IAC1CJ,EAAU10C,GAAQ80C,IAEbJ,GArnDTz8C,EAAQm9C,kBAmoDR,SAA2B1W,GACzB,IAAIgW,EAAY,GAQhB,OAPA3rC,OAAOqQ,KAAKslB,GAAQ9xB,QAAQ,SAAU5M,GACpC,IAAI20C,EAAYjW,EAAO1+B,GACnBq1C,EAAWjW,EAASuV,GACpBG,EAAeC,EAAsBJ,EAAWU,EAASl9C,QAC7D+8C,EAAaG,EAAUjW,EAAS0V,GAAe,GAC/CJ,EAAU10C,GAAQ80C,IAEbJ,GA3oDTz8C,EAAQq9C,kBAAoBr9C,EAAQs9C,qBAAuBt9C,EAAQu9C,mBAAqBv9C,EAAQw9C,sBAAwBx9C,EAAQy9C,sBAAwBz9C,EAAQ09C,yBAA2B19C,EAAQ29C,qBAAuB39C,EAAQ49C,wBAA0B59C,EAAQ69C,oBAAsB79C,EAAQ89C,uBAAyB99C,EAAQ+9C,2BAA6B/9C,EAAQg+C,8BAAgCh+C,EAAQi+C,oBAAsBj+C,EAAQk+C,uBAAyBl+C,EAAQm+C,mBAAqBn+C,EAAQo+C,sBAAwBp+C,EAAQq+C,kBAAoBr+C,EAAQs+C,qBAAuBt+C,EAAQu+C,iBAAmBv+C,EAAQw+C,yBAAsB,EAExnB,IAAI7e,EAAakK,EAAwBzD,EAA2C,wBAEhFqD,EAASI,EAAwBzD,EAAuC,oBAExEU,EAAc+C,EAAwBzD,EAA4C,yBAElF91B,EAAKu5B,EAAwBzD,EAAmC,gBAEhE2M,EAAKlJ,EAAwBzD,EAAmC,gBAEpE,SAASyD,EAAwBtgB,GAAO,GAAIA,GAAOA,EAAIlpB,WAAc,OAAOkpB,EAAc,IAAIugB,EAAS,GAAI,GAAW,MAAPvgB,EAAe,IAAK,IAAIljB,KAAOkjB,EAAO,GAAIzY,OAAOlQ,UAAU6c,eAAexd,KAAKspB,EAAKljB,GAAM,CAAE,IAAI0jC,EAAOj5B,OAAO+M,gBAAkB/M,OAAOk5B,yBAA2Bl5B,OAAOk5B,yBAAyBzgB,EAAKljB,GAAO,GAAQ0jC,EAAKlY,KAAOkY,EAAKE,IAAOn5B,OAAO+M,eAAeisB,EAAQzjC,EAAK0jC,GAAgBD,EAAOzjC,GAAOkjB,EAAIljB,GAAoC,OAAtByjC,EAAOI,QAAU3gB,EAAYugB,EAwD7c,IAAI3C,EAAWxH,EAAWiK,UAEtBxC,EAAmBzH,EAAWgK,kBAelC,SAAS8U,EAAkBpU,EAAYp5B,GACrC,IAAI2gB,EAAS,EA0Bb,OAxBAyY,EAAWt8B,KAAO,WAChB,IAAK,IAAIk5B,EAAK,EAAGA,EAAKxwB,UAAUvW,SAAU+mC,EAAI,CAC5C,IAAIhjC,EAAQwS,UAAUwwB,GAEtB,GAAIhjC,aAAiBkM,OAAS22B,EAAY+D,cAAc5mC,GACtD,IAAK,IAAIo2C,EAAK,EAAGA,EAAKp2C,EAAM/D,SAAUm6C,EACpChQ,EAAWzY,KAAY3tB,EAAMo2C,QAG/BhQ,EAAWzY,KAAY3tB,IAK7BomC,EAAWqU,MAAQ,SAAUC,GAC3B/sB,EAAS+sB,GAAa,GAGxBtU,EAAWp5B,cAAgBA,EAC3BH,OAAO+M,eAAewsB,EAAY,cAAe,CAC/CxY,IAAK,WACH,OAAO7wB,KAAKd,OAASc,KAAKiQ,cAAgB,KAGvCo5B,EA0BT,SAASiP,EAA0BroC,EAAekD,EAAayqC,GAE7D,OAAOH,EAAkB,IADdG,GAAY5uC,cACWiB,EAAgBkD,GAAclD,GAGlE,SAASipC,EAAcnyC,GACrB,MAAgB,YAATA,EAsFT,SAAS82C,EAAmBvnC,EAAOwD,EAAQgkC,GAIzC,IAHA,IAAIp9B,EAAMpK,EAAMpX,OACZ6+C,EAAM,IAAI/uC,aAAa,GAElBi3B,EAAK,EAAGA,EAAKvlB,EAAKulB,GAAM,EAC/B6X,EAAGhkC,EAAQ,CAACxD,EAAM2vB,GAAK3vB,EAAM2vB,EAAK,GAAI3vB,EAAM2vB,EAAK,IAAK8X,GACtDznC,EAAM2vB,GAAM8X,EAAI,GAChBznC,EAAM2vB,EAAK,GAAK8X,EAAI,GACpBznC,EAAM2vB,EAAK,GAAK8X,EAAI,GAIxB,SAAS/H,EAAgBC,EAAIrpC,EAAGkiC,GAC9BA,EAAMA,GAAOiD,EAAGn1B,SAChB,IAAI04B,EAAK1oC,EAAE,GACP2oC,EAAK3oC,EAAE,GACP4oC,EAAK5oC,EAAE,GAIX,OAHAkiC,EAAI,GAAKwG,EAAKW,EAAG,GAAaV,EAAKU,EAAG,GAAaT,EAAKS,EAAG,GAC3DnH,EAAI,GAAKwG,EAAKW,EAAG,GAAaV,EAAKU,EAAG,GAAaT,EAAKS,EAAG,GAC3DnH,EAAI,GAAKwG,EAAKW,EAAG,GAAaV,EAAKU,EAAG,GAAaT,EAAKS,EAAG,IACpDnH,EAWT,SAASiM,EAAmBzkC,EAAOwD,GAEjC,OADA+jC,EAAmBvnC,EAAOwD,EAAQxK,EAAGymC,oBAC9Bz/B,EAYT,SAAS0kC,EAAgB1kC,EAAOwD,GAE9B,OADA+jC,EAAmBvnC,EAAOhH,EAAG4C,QAAQ4H,GAASk8B,GACvC1/B,EAYT,SAAS2kC,EAAkB3kC,EAAOwD,GAEhC,OADA+jC,EAAmBvnC,EAAOwD,EAAQxK,EAAG4mC,gBAC9B5/B,EAkBT,SAAS4kC,EAAiBzV,EAAQ3rB,GAYhC,OAXAhK,OAAOqQ,KAAKslB,GAAQ9xB,QAAQ,SAAU5M,GACpC,IAAIuP,EAAQmvB,EAAO1+B,GAEQ,GAAvBA,EAAK0a,QAAQ,OACfw5B,EAAkB3kC,EAAOwD,GACO,GAAvB/S,EAAK0a,QAAQ,QAAyC,GAA1B1a,EAAK0a,QAAQ,UAClDs5B,EAAmBzkC,EAAOwD,GACO,GAAxB/S,EAAK0a,QAAQ,SACtBu5B,EAAgB1kC,EAAOwD,KAGpB2rB,EAgET,SAASiT,EAAqBn+B,EAAMyjC,EAASC,GAK3C,OAJA1jC,EAAOA,GAAQ,EAIR,CACLS,SAAU,CACR/K,cAAe,EACfC,KAAM,EANV8tC,EAAUA,GAAW,IAMC,GAJtBzjC,GAAQ,KADR0jC,EAAUA,GAAW,IAKsB,EAAI1jC,EAAMyjC,EAAU,EAAIzjC,EAAM0jC,GAAW,EAAI1jC,EAAMyjC,GAAW,EAAIzjC,EAAM0jC,EAAU,EAAI1jC,EAAMyjC,EAAU,EAAIzjC,EAAM0jC,EAAU,EAAI1jC,IAEvKi/B,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC1C0E,SAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAChCtY,QAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAkD7B,SAAS/1B,EAAoBiB,EAAOqtC,EAAOC,EAAmBC,EAAmBvkC,GAC/EhJ,EAAQA,GAAS,EACjBqtC,EAAQA,GAAS,EACjBC,EAAoBA,GAAqB,EACzCC,EAAoBA,GAAqB,EACzCvkC,EAASA,GAAUxK,EAAG2iC,WAMtB,IALA,IAAIqM,GAAeF,EAAoB,IAAMC,EAAoB,GAC7DE,EAAYjG,EAA0B,EAAGgG,GACzC/E,EAAUjB,EAA0B,EAAGgG,GACvCE,EAAYlG,EAA0B,EAAGgG,GAEpC3O,EAAI,EAAGA,GAAK0O,EAAmB1O,IACtC,IAAK,IAAIt7B,EAAI,EAAGA,GAAK+pC,EAAmB/pC,IAAK,CAC3C,IAAI1V,EAAI0V,EAAI+pC,EACRxxC,EAAI+iC,EAAI0O,EACZE,EAAUxxC,KAAK+D,EAAQnS,EAAY,GAARmS,EAAa,EAAGqtC,EAAQvxC,EAAY,GAARuxC,GACvD5E,EAAQxsC,KAAK,EAAG,EAAG,GACnByxC,EAAUzxC,KAAKpO,EAAGiO,GAOtB,IAHA,IAAI6xC,EAAiBL,EAAoB,EACrCxY,EAAU0S,EAA0B,EAAG8F,EAAoBC,EAAoB,EAAGjqB,aAE7EsqB,EAAK,EAAGA,EAAKL,EAAmBK,IAEvC,IAAK,IAAIC,EAAK,EAAGA,EAAKP,EAAmBO,IAGvC/Y,EAAQ74B,MAAM2xC,EAAK,GAAKD,EAAiBE,GAAKD,EAAK,GAAKD,EAAiBE,GAAKD,EAAK,GAAKD,EAAiBE,EAAK,GAE9G/Y,EAAQ74B,MAAM2xC,EAAK,GAAKD,EAAiBE,GAAKD,EAAK,GAAKD,EAAiBE,EAAK,GAAID,EAAK,GAAKD,EAAiBE,EAAK,GAUtH,OANazD,EAAiB,CAC5BlgC,SAAUujC,EACV/E,OAAQD,EACR2E,SAAUM,EACV5Y,QAASA,GACR9rB,GAoEL,SAAS0+B,EAAqB3+B,EAAQ+kC,EAAkBC,EAAoBC,EAA4BC,EAA0BC,EAA6BC,GAC7J,GAAIL,GAAoB,GAAKC,GAAsB,EACjD,MAAM,IAAIhgD,MAAM,qDAGlBigD,EAA6BA,GAA8B,EAE3DE,EAA8BA,GAA+B,EAY7D,IAVA,IAAIE,GAHJH,EAA2BA,GAA4Bx4C,KAAKkJ,IAGlBqvC,EACtCK,GAFJF,EAA4BA,GAAuC,EAAV14C,KAAKkJ,IAElBuvC,EAIxCV,GAAeM,EAAmB,IAAMC,EAAqB,GAC7DN,EAAYjG,EAA0B,EAAGgG,GACzC/E,EAAUjB,EAA0B,EAAGgG,GACvCE,EAAYlG,EAA0B,EAAGgG,GAEpCtyC,EAAI,EAAGA,GAAK6yC,EAAoB7yC,IACvC,IAAK,IAAIqI,EAAI,EAAGA,GAAKuqC,EAAkBvqC,IAAK,CAE1C,IAAI1V,EAAI0V,EAAIuqC,EACRhyC,EAAIZ,EAAI6yC,EACRO,EAAQD,EAAYxgD,EAAIqgD,EACxBK,EAAMH,EAAWtyC,EAAIkyC,EACrBQ,EAAW/4C,KAAKsL,IAAIutC,GACpBG,EAAWh5C,KAAKuL,IAAIstC,GACpBI,EAASj5C,KAAKsL,IAAIwtC,GAElBI,EAAKF,EAAWC,EAChBE,EAFSn5C,KAAKuL,IAAIutC,GAGlBM,EAAKL,EAAWE,EACpBjB,EAAUxxC,KAAK8M,EAAS4lC,EAAI5lC,EAAS6lC,EAAI7lC,EAAS8lC,GAClDpG,EAAQxsC,KAAK0yC,EAAIC,EAAIC,GACrBnB,EAAUzxC,KAAK,EAAIpO,EAAGiO,GAO1B,IAHA,IAAIgzC,EAAiBhB,EAAmB,EACpChZ,EAAU0S,EAA0B,EAAGsG,EAAmBC,EAAqB,EAAGzqB,aAE7EyrB,EAAM,EAAGA,EAAMjB,EAAkBiB,IAExC,IAAK,IAAIC,EAAK,EAAGA,EAAKjB,EAAoBiB,IAGxCla,EAAQ74B,MAAM+yC,EAAK,GAAKF,EAAiBC,GAAMC,EAAK,GAAKF,EAAiBC,EAAM,GAAIC,EAAK,GAAKF,EAAiBC,GAE/Gja,EAAQ74B,MAAM+yC,EAAK,GAAKF,EAAiBC,GAAMC,EAAK,GAAKF,EAAiBC,EAAM,GAAIC,EAAK,GAAKF,EAAiBC,EAAM,GAIzH,MAAO,CACL7kC,SAAUujC,EACV/E,OAAQD,EACR2E,SAAUM,EACV5Y,QAASA,GAUb,IAAIma,EAAoB,CAAC,CAAC,EAAG,EAAG,EAAG,GACnC,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAmCV,SAASxH,EAAmBh+B,GAY1B,IAVA,IAAIwV,GADJxV,EAAOA,GAAQ,GACA,EACXylC,EAAiB,CAAC,EAAEjwB,GAAIA,GAAIA,GAAI,EAAEA,GAAIA,GAAIA,GAAI,EAAEA,GAAIA,GAAIA,GAAI,EAAEA,GAAIA,GAAIA,GAAI,EAAEA,GAAIA,GAAIA,GAAI,EAAEA,GAAIA,GAAIA,GAAI,EAAEA,GAAIA,GAAIA,GAAI,EAAEA,GAAIA,GAAIA,IAC9HkwB,EAAc,CAAC,CAAC,EAAI,EAAI,GAAK,EAAE,EAAG,EAAI,GAAK,CAAC,EAAI,EAAI,GAAK,CAAC,GAAK,EAAG,GAAK,CAAC,EAAI,EAAI,GAAK,CAAC,EAAI,GAAK,IAC/FC,EAAW,CAAC,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,IAExC3B,EAAYjG,EAA0B,EADxB,IAEdiB,EAAUjB,EAA0B,EAFtB,IAGdkG,EAAYlG,EAA0B,EAHxB,IAId1S,EAAU0S,EAA0B,EAAG,GAAOlkB,aAEzC51B,EAAI,EAAGA,EAAI,IAAKA,EAAG,CAG1B,IAFA,IAAI2hD,EAAcJ,EAAkBvhD,GAE3BoO,EAAI,EAAGA,EAAI,IAAKA,EAAG,CAC1B,IAAIoO,EAAWglC,EAAeG,EAAYvzC,IACtC4sC,EAASyG,EAAYzhD,GACrB4hD,EAAKF,EAAStzC,GAGlB2xC,EAAUxxC,KAAKiO,GACfu+B,EAAQxsC,KAAKysC,GACbgF,EAAUzxC,KAAKqzC,GAIjB,IAAIlY,EAAS,EAAI1pC,EACjBonC,EAAQ74B,KAAc,EAATm7B,EAAqB,EAATA,EAAqB,EAATA,GACrCtC,EAAQ74B,KAAc,EAATm7B,EAAqB,EAATA,EAAqB,EAATA,GAGvC,MAAO,CACLltB,SAAUujC,EACV/E,OAAQD,EACR2E,SAAUM,EACV5Y,QAASA,GAoEb,SAAS6S,EAA4B4H,EAAcC,EAAWtvC,EAAQuvC,EAAoBC,EAAsBC,EAAYC,GAC1H,GAAIH,EAAqB,EACvB,MAAM,IAAI1hD,MAAM,2CAGlB,GAAI2hD,EAAuB,EACzB,MAAM,IAAI3hD,MAAM,6CAmBlB,IAhBA,IAAI8hD,OAAwB9yC,IAAf4yC,GAAkCA,EAC3CG,OAA8B/yC,IAAlB6yC,GAAqCA,EACjDG,GAASF,EAAS,EAAI,IAAMC,EAAY,EAAI,GAC5CtC,GAAeiC,EAAqB,IAAMC,EAAuB,EAAIK,GACrEtC,EAAYjG,EAA0B,EAAGgG,GACzC/E,EAAUjB,EAA0B,EAAGgG,GACvCE,EAAYlG,EAA0B,EAAGgG,GACzC1Y,EAAU0S,EAA0B,EAAGiI,GAAsBC,EAAuBK,GAAS,EAAGzsB,aAChG0sB,EAAkBP,EAAqB,EAEvCQ,EAAQx6C,KAAKmQ,MAAM2pC,EAAeC,EAAWtvC,GAC7CgwC,EAAWz6C,KAAKuL,IAAIivC,GACpBE,EAAW16C,KAAKsL,IAAIkvC,GAEpBnpC,EAAM4oC,GAAwBI,EAAY,EAAI,GAEzC9Q,EAHG6Q,GAAU,EAAI,EAGL7Q,GAAMl4B,IAAOk4B,EAAI,CACpC,IAAIljC,EAAIkjC,EAAK0Q,EACTx0C,EAAIgF,EAASpE,EACbs0C,OAAa,EAKfA,EAHEpR,EAAK,GACP9jC,EAAI,EACJY,EAAI,EACSyzC,GACCG,EAAL1Q,GACT9jC,EAAIgF,EACJpE,EAAI,EACS0zC,GAEAD,EAA6CvQ,EAAK0Q,GAAlCF,EAAYD,IAG/B,IAARvQ,GAAaA,IAAO0Q,EAAuB,IAE7C5zC,EADAs0C,EAAa,GAIfl1C,GAAKgF,EAAS,EAEd,IAAK,IAAIi1B,EAAK,EAAGA,EAAK6a,IAAmB7a,EAAI,CAC3C,IAAIp0B,EAAMtL,KAAKsL,IAAIo0B,EAAK1/B,KAAKkJ,GAAK,EAAI8wC,GAClCzuC,EAAMvL,KAAKuL,IAAIm0B,EAAK1/B,KAAKkJ,GAAK,EAAI8wC,GACtChC,EAAUxxC,KAAK8E,EAAMqvC,EAAYl1C,EAAG8F,EAAMovC,GAC1C3H,EAAQxsC,KAAK+iC,EAAK,GAAU0Q,EAAL1Q,EAA4B,EAAIj+B,EAAMmvC,EAAUlR,EAAK,GAAK,EAAS0Q,EAAL1Q,EAA4B,EAAImR,EAAUnR,EAAK,GAAU0Q,EAAL1Q,EAA4B,EAAIh+B,EAAMkvC,GAC/KxC,EAAUzxC,KAAKk5B,EAAKsa,EAAoB,EAAI3zC,IAIhD,IAAK,IAAIu0C,EAAM,EAAGA,EAAMX,EAAuBK,IAASM,EAEtD,IAAK,IAAIC,EAAM,EAAGA,EAAMb,IAAsBa,EAE5Cxb,EAAQ74B,KAAK+zC,GAAmBK,EAAM,GAAK,EAAIC,EAAKN,GAAmBK,EAAM,GAAK,EAAIC,EAAKN,GAAmBK,EAAM,GAAK,EAAIC,GAC7Hxb,EAAQ74B,KAAK+zC,GAAmBK,EAAM,GAAK,EAAIC,EAAKN,GAAmBK,EAAM,GAAK,EAAIC,EAAKN,GAAmBK,EAAM,GAAK,EAAIC,GAIjI,MAAO,CACLpmC,SAAUujC,EACV/E,OAAQD,EACR2E,SAAUM,EACV5Y,QAASA,GAYb,SAASyb,EAAcC,EAASC,GAC9BA,EAAUA,GAAW,GAGrB,IAFA,IAAIrxC,EAAO,GAEF+1B,EAAK,EAAGA,EAAKqb,EAAQpiD,OAAQ+mC,GAAM,EAAG,CAC7C,IAAIub,EAAYF,EAAQrb,GACpBvkC,EAAU4/C,EAAQ37C,MAAMsgC,EAAK,EAAGA,EAAK,GACzCvkC,EAAQqL,KAAKjB,MAAMpK,EAAS6/C,GAE5B,IAAK,IAAIlI,EAAK,EAAGA,EAAKmI,IAAanI,EACjCnpC,EAAKnD,KAAKjB,MAAMoE,EAAMxO,GAI1B,OAAOwO,EAkCT,SAASmoC,IACP,IAAIkG,EAAY,CAChB,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,GAAI,EAAG,EAAG,EAAG,IAAK,EAAG,GAAI,IAAK,EAAG,GAAI,EAAG,EAC5D,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,EAAG,EAC/D,GAAI,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,EAC/D,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,EAAG,GAAI,GAAI,IAAK,GACjE,GAAI,EAAG,GAAI,IAAK,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,EAAG,GAAI,IAAK,GAAI,GACpE,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACpE,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,IAAK,EAAG,GAAI,EAAG,EAAG,EAAG,IAAK,EAAG,GAAI,EAAG,EAAG,GAC3D,IAAK,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,EAAG,EAAG,IAAK,GAAI,GAAI,IAAK,EAAG,GACpE,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,GAAI,EACrE,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,GACjE,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,GACjE,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,GACjE,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,EAClE,GAAI,GAAI,EAAG,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,EAAG,GAAI,IAAK,GACpE,EAAG,IAAK,EAAG,EAAG,IAAK,GAAI,GAAI,IAAK,GAAI,EAAG,IAAK,EAAG,GAAI,IAAK,GAAI,GAAI,IAAK,EACrE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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nvar editor_1 = require(\"./styles/editor\");\r\nvar injector_1 = require(\"./styles/injector\");\r\nvar theme_default_1 = require(\"./styles/theme-default\");\r\nvar html_escape_1 = require(\"./utils/html-escape\");\r\nvar Prism = require(\"prismjs\");\r\nvar CodeFlask = /** @class */ (function () {\r\n    function CodeFlask(selectorOrElement, opts) {\r\n        if (!selectorOrElement) {\r\n            // If no selector or element is passed to CodeFlask,\r\n            // stop execution and throw error.\r\n            throw Error('CodeFlask expects a parameter which is Element or a String selector');\r\n        }\r\n        if (!opts) {\r\n            // If no selector or element is passed to CodeFlask,\r\n            // stop execution and throw error.\r\n            throw Error('CodeFlask expects an object containing options as second parameter');\r\n        }\r\n        if (selectorOrElement.nodeType) {\r\n            // If it is an element, assign it directly\r\n            this.editorRoot = selectorOrElement;\r\n        }\r\n        else {\r\n            // If it is a selector, tries to find element\r\n            var editorRoot = document.querySelector(selectorOrElement);\r\n            // If an element is found using this selector,\r\n            // assign this element as the root element\r\n            if (editorRoot) {\r\n                this.editorRoot = editorRoot;\r\n            }\r\n        }\r\n        this.opts = opts;\r\n        this.startEditor();\r\n    }\r\n    CodeFlask.prototype.startEditor = function () {\r\n        var isCSSInjected = injector_1.injectCss(editor_1.editorCss, null, this.opts.styleParent);\r\n        if (!isCSSInjected) {\r\n            throw Error('Failed to inject CodeFlask CSS.');\r\n        }\r\n        // The order matters (pre > code). Don't change it\r\n        // or things are going to break.\r\n        this.createWrapper();\r\n        this.createTextarea();\r\n        this.createPre();\r\n        this.createCode();\r\n        this.runOptions();\r\n        this.listenTextarea();\r\n        this.populateDefault();\r\n        this.updateCode(this.code);\r\n    };\r\n    CodeFlask.prototype.createWrapper = function () {\r\n        this.code = this.editorRoot.innerHTML;\r\n        this.editorRoot.innerHTML = '';\r\n        this.elWrapper = this.createElement('div', this.editorRoot);\r\n        this.elWrapper.classList.add('codeflask');\r\n    };\r\n    CodeFlask.prototype.createTextarea = function () {\r\n        this.elTextarea = this.createElement('textarea', this.elWrapper);\r\n        this.elTextarea.classList.add('codeflask__textarea', 'codeflask__flatten');\r\n    };\r\n    CodeFlask.prototype.createPre = function () {\r\n        this.elPre = this.createElement('pre', this.elWrapper);\r\n        this.elPre.classList.add('codeflask__pre', 'codeflask__flatten');\r\n    };\r\n    CodeFlask.prototype.createCode = function () {\r\n        this.elCode = this.createElement('code', this.elPre);\r\n        this.elCode.classList.add('codeflask__code', \"language-\" + (this.opts.language || 'html'));\r\n    };\r\n    CodeFlask.prototype.createLineNumbers = function () {\r\n        this.elLineNumbers = this.createElement('div', this.elWrapper);\r\n        this.elLineNumbers.classList.add('codeflask__lines');\r\n        this.setLineNumber();\r\n    };\r\n    CodeFlask.prototype.createElement = function (elementTag, whereToAppend) {\r\n        var element = document.createElement(elementTag);\r\n        whereToAppend.appendChild(element);\r\n        return element;\r\n    };\r\n    CodeFlask.prototype.runOptions = function () {\r\n        this.opts.rtl = this.opts.rtl || false;\r\n        this.opts.tabSize = this.opts.tabSize || 2;\r\n        this.opts.enableAutocorrect = this.opts.enableAutocorrect || false;\r\n        this.opts.lineNumbers = this.opts.lineNumbers || false;\r\n        this.opts.defaultTheme = this.opts.defaultTheme !== false;\r\n        this.opts.areaId = this.opts.areaId || null;\r\n        this.opts.ariaLabelledby = this.opts.ariaLabelledby || null;\r\n        this.opts.readonly = this.opts.readonly || null;\r\n        // if handleTabs is not either true or false, make it true by default\r\n        if (typeof this.opts.handleTabs !== 'boolean') {\r\n            this.opts.handleTabs = true;\r\n        }\r\n        // if handleTabs is not either true or false, make it true by default\r\n        if (typeof this.opts.handleSelfClosingCharacters !== 'boolean') {\r\n            this.opts.handleSelfClosingCharacters = true;\r\n        }\r\n        // if handleTabs is not either true or false, make it true by default\r\n        if (typeof this.opts.handleNewLineIndentation !== 'boolean') {\r\n            this.opts.handleNewLineIndentation = true;\r\n        }\r\n        if (this.opts.rtl === true) {\r\n            this.elTextarea.setAttribute('dir', 'rtl');\r\n            this.elPre.setAttribute('dir', 'rtl');\r\n        }\r\n        if (this.opts.enableAutocorrect === false) {\r\n            this.elTextarea.setAttribute('spellcheck', 'false');\r\n            this.elTextarea.setAttribute('autocapitalize', 'off');\r\n            this.elTextarea.setAttribute('autocomplete', 'off');\r\n            this.elTextarea.setAttribute('autocorrect', 'off');\r\n        }\r\n        if (this.opts.lineNumbers) {\r\n            this.elWrapper.classList.add('codeflask--has-line-numbers');\r\n            this.createLineNumbers();\r\n        }\r\n        if (this.opts.defaultTheme) {\r\n            injector_1.injectCss(theme_default_1.defaultCssTheme, 'theme-default', this.opts.styleParent);\r\n        }\r\n        if (this.opts.areaId) {\r\n            this.elTextarea.setAttribute('id', this.opts.areaId);\r\n        }\r\n        if (this.opts.ariaLabelledby) {\r\n            this.elTextarea.setAttribute('aria-labelledby', this.opts.ariaLabelledby);\r\n        }\r\n        if (this.opts.readonly) {\r\n            this.enableReadonlyMode();\r\n        }\r\n    };\r\n    CodeFlask.prototype.updateLineNumbersCount = function () {\r\n        var numberList = '';\r\n        for (var i = 1; i <= this.lineNumber; i++) {\r\n            numberList = numberList + (\"<span class=\\\"codeflask__lines__line\\\">\" + i + \"</span>\");\r\n        }\r\n        this.elLineNumbers.innerHTML = numberList;\r\n    };\r\n    CodeFlask.prototype.listenTextarea = function () {\r\n        var _this = this;\r\n        this.elTextarea.addEventListener('input', function (e) {\r\n            _this.code = e.target.value;\r\n            _this.elCode.innerHTML = html_escape_1.escapeHtml(e.target.value);\r\n            _this.highlight();\r\n            setTimeout(function () {\r\n                _this.runUpdate();\r\n                _this.setLineNumber();\r\n            }, 1);\r\n        });\r\n        this.elTextarea.addEventListener('keydown', function (e) {\r\n            _this.handleTabs(e);\r\n            _this.handleSelfClosingCharacters(e);\r\n            _this.handleNewLineIndentation(e);\r\n        });\r\n        this.elTextarea.addEventListener('scroll', function (e) {\r\n            _this.elPre.style.transform = \"translate3d(-\" + e.target.scrollLeft + \"px, -\" + e.target.scrollTop + \"px, 0)\";\r\n            if (_this.elLineNumbers) {\r\n                _this.elLineNumbers.style.transform = \"translate3d(0, -\" + e.target.scrollTop + \"px, 0)\";\r\n            }\r\n        });\r\n    };\r\n    CodeFlask.prototype.handleTabs = function (e) {\r\n        if (this.opts.handleTabs) {\r\n            if (e.keyCode !== 9) {\r\n                return;\r\n            }\r\n            e.preventDefault();\r\n            var input = this.elTextarea;\r\n            var selectionDir = input.selectionDirection;\r\n            var selStartPos = input.selectionStart;\r\n            var selEndPos = input.selectionEnd;\r\n            var inputVal = input.value;\r\n            var beforeSelection = inputVal.substr(0, selStartPos);\r\n            var selectionVal = inputVal.substring(selStartPos, selEndPos);\r\n            var afterSelection = inputVal.substring(selEndPos);\r\n            var indent = ' '.repeat(this.opts.tabSize);\r\n            if (selStartPos !== selEndPos && selectionVal.length >= indent.length) {\r\n                var currentLineStart = selStartPos - beforeSelection.split('\\n').pop().length;\r\n                var startIndentLen = indent.length;\r\n                var endIndentLen = indent.length;\r\n                // Unindent\r\n                if (e.shiftKey) {\r\n                    var currentLineStartStr = inputVal.substr(currentLineStart, indent.length);\r\n                    // Line start whit indent\r\n                    if (currentLineStartStr === indent) {\r\n                        startIndentLen = -startIndentLen;\r\n                        if (currentLineStart > selStartPos) {\r\n                            // Indent is in selection\r\n                            selectionVal = selectionVal.substring(0, currentLineStart) + selectionVal.substring(currentLineStart + indent.length);\r\n                            endIndentLen = 0;\r\n                        }\r\n                        else if (currentLineStart === selStartPos) {\r\n                            // Indent is in start of selection\r\n                            startIndentLen = 0;\r\n                            endIndentLen = 0;\r\n                            selectionVal = selectionVal.substring(indent.length);\r\n                        }\r\n                        else {\r\n                            // Indent is before selection\r\n                            endIndentLen = -endIndentLen;\r\n                            beforeSelection = beforeSelection.substring(0, currentLineStart) + beforeSelection.substring(currentLineStart + indent.length);\r\n                        }\r\n                    }\r\n                    else {\r\n                        startIndentLen = 0;\r\n                        endIndentLen = 0;\r\n                    }\r\n                    selectionVal = selectionVal.replace(new RegExp('\\n' + indent.split('').join('\\\\'), 'g'), '\\n');\r\n                }\r\n                else {\r\n                    // Indent\r\n                    beforeSelection = beforeSelection.substr(0, currentLineStart) + indent + beforeSelection.substring(currentLineStart, selStartPos);\r\n                    selectionVal = selectionVal.replace(/\\n/g, '\\n' + indent);\r\n                }\r\n                // Set new indented value\r\n                input.value = beforeSelection + selectionVal + afterSelection;\r\n                input.selectionStart = selStartPos + startIndentLen;\r\n                input.selectionEnd = selStartPos + selectionVal.length + endIndentLen;\r\n                input.selectionDirection = selectionDir;\r\n            }\r\n            else {\r\n                input.value = beforeSelection + indent + afterSelection;\r\n                input.selectionStart = selStartPos + indent.length;\r\n                input.selectionEnd = selStartPos + indent.length;\r\n            }\r\n            var newCode = input.value;\r\n            this.updateCode(newCode);\r\n            this.elTextarea.selectionEnd = selEndPos + this.opts.tabSize;\r\n        }\r\n    };\r\n    CodeFlask.prototype.handleSelfClosingCharacters = function (e) {\r\n        if (!this.opts.handleSelfClosingCharacters)\r\n            return;\r\n        var openChars = ['(', '[', '{', '<', '\\'', '\"'];\r\n        var closeChars = [')', ']', '}', '>', '\\'', '\"'];\r\n        var key = e.key;\r\n        if (!openChars.includes(key) && !closeChars.includes(key)) {\r\n            return;\r\n        }\r\n        switch (key) {\r\n            case '(':\r\n            case ')':\r\n                this.closeCharacter(key);\r\n                break;\r\n            case '[':\r\n            case ']':\r\n                this.closeCharacter(key);\r\n                break;\r\n            case '{':\r\n            case '}':\r\n                this.closeCharacter(key);\r\n                break;\r\n            case '<':\r\n            case '>':\r\n                this.closeCharacter(key);\r\n                break;\r\n            case '\\'':\r\n                this.closeCharacter(key);\r\n                break;\r\n            case '\"':\r\n                this.closeCharacter(key);\r\n                break;\r\n        }\r\n    };\r\n    CodeFlask.prototype.setLineNumber = function () {\r\n        this.lineNumber = this.code.split('\\n').length;\r\n        if (this.opts.lineNumbers) {\r\n            this.updateLineNumbersCount();\r\n        }\r\n    };\r\n    CodeFlask.prototype.handleNewLineIndentation = function (e) {\r\n        if (!this.opts.handleNewLineIndentation)\r\n            return;\r\n        if (e.keyCode !== 13) {\r\n            return;\r\n        }\r\n        e.preventDefault();\r\n        var input = this.elTextarea;\r\n        var selStartPos = input.selectionStart;\r\n        var selEndPos = input.selectionEnd;\r\n        var inputVal = input.value;\r\n        var beforeSelection = inputVal.substr(0, selStartPos);\r\n        var afterSelection = inputVal.substring(selEndPos);\r\n        var lineStart = inputVal.lastIndexOf('\\n', selStartPos - 1);\r\n        var spaceLast = lineStart + inputVal.slice(lineStart + 1).search(/[^ ]|$/);\r\n        var indent = (spaceLast > lineStart) ? (spaceLast - lineStart) : 0;\r\n        var newCode = beforeSelection + '\\n' + ' '.repeat(indent) + afterSelection;\r\n        input.value = newCode;\r\n        input.selectionStart = selStartPos + indent + 1;\r\n        input.selectionEnd = selStartPos + indent + 1;\r\n        this.updateCode(input.value);\r\n    };\r\n    CodeFlask.prototype.closeCharacter = function (char) {\r\n        var selectionStart = this.elTextarea.selectionStart;\r\n        var selectionEnd = this.elTextarea.selectionEnd;\r\n        if (!this.skipCloseChar(char)) {\r\n            var closeChar = char;\r\n            switch (char) {\r\n                case '(':\r\n                    closeChar = String.fromCharCode(char.charCodeAt() + 1);\r\n                    break;\r\n                case '<':\r\n                case '{':\r\n                case '[':\r\n                    closeChar = String.fromCharCode(char.charCodeAt() + 2);\r\n                    break;\r\n            }\r\n            var selectionText = this.code.substring(selectionStart, selectionEnd);\r\n            var newCode = \"\" + this.code.substring(0, selectionStart) + selectionText + closeChar + this.code.substring(selectionEnd);\r\n            this.updateCode(newCode);\r\n        }\r\n        else {\r\n            var skipChar = this.code.substr(selectionEnd, 1) === char;\r\n            var newSelectionEnd = skipChar ? selectionEnd + 1 : selectionEnd;\r\n            var closeChar = !skipChar && ['\\'', '\"'].includes(char) ? char : '';\r\n            var newCode = \"\" + this.code.substring(0, selectionStart) + closeChar + this.code.substring(newSelectionEnd);\r\n            this.updateCode(newCode);\r\n            this.elTextarea.selectionEnd = ++this.elTextarea.selectionStart;\r\n        }\r\n        this.elTextarea.selectionEnd = selectionStart;\r\n    };\r\n    CodeFlask.prototype.skipCloseChar = function (char) {\r\n        var selectionStart = this.elTextarea.selectionStart;\r\n        var selectionEnd = this.elTextarea.selectionEnd;\r\n        var hasSelection = Math.abs(selectionEnd - selectionStart) > 0;\r\n        return [')', '}', ']', '>'].includes(char) || (['\\'', '\"'].includes(char) && !hasSelection);\r\n    };\r\n    CodeFlask.prototype.updateCode = function (newCode) {\r\n        this.code = newCode;\r\n        this.elTextarea.value = newCode;\r\n        this.elCode.innerHTML = html_escape_1.escapeHtml(newCode);\r\n        this.highlight();\r\n        this.setLineNumber();\r\n        setTimeout(this.runUpdate.bind(this), 1);\r\n    };\r\n    CodeFlask.prototype.updateLanguage = function (newLanguage) {\r\n        var oldLanguage = this.opts.language;\r\n        this.elCode.classList.remove(\"language-\" + oldLanguage);\r\n        this.elCode.classList.add(\"language-\" + newLanguage);\r\n        this.opts.language = newLanguage;\r\n        this.highlight();\r\n    };\r\n    CodeFlask.prototype.addLanguage = function (name, options) {\r\n        Prism.languages[name] = options;\r\n    };\r\n    CodeFlask.prototype.populateDefault = function () {\r\n        this.updateCode(this.code);\r\n    };\r\n    CodeFlask.prototype.highlight = function () {\r\n        Prism.highlightElement(this.elCode, false);\r\n    };\r\n    CodeFlask.prototype.onUpdate = function (callback) {\r\n        if (callback && {}.toString.call(callback) !== '[object Function]') {\r\n            throw Error('CodeFlask expects callback of type Function');\r\n        }\r\n        this.updateCallBack = callback;\r\n    };\r\n    CodeFlask.prototype.getCode = function () {\r\n        return this.code;\r\n    };\r\n    CodeFlask.prototype.runUpdate = function () {\r\n        if (this.updateCallBack) {\r\n            this.updateCallBack(this.code);\r\n        }\r\n    };\r\n    CodeFlask.prototype.enableReadonlyMode = function () {\r\n        this.elTextarea.setAttribute('readonly', true);\r\n    };\r\n    CodeFlask.prototype.disableReadonlyMode = function () {\r\n        this.elTextarea.removeAttribute('readonly');\r\n    };\r\n    return CodeFlask;\r\n}());\r\nexports[\"default\"] = CodeFlask;\r\n\n},{\"./styles/editor\":2,\"./styles/injector\":3,\"./styles/theme-default\":4,\"./utils/html-escape\":6,\"prismjs\":10}],2:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nvar theme_default_1 = require(\"./theme-default\");\r\nvar css_supports_1 = require(\"../utils/css-supports\");\r\nvar FONT_FAMILY = \"\\\"SFMono-Regular\\\", Consolas, \\\"Liberation Mono\\\", Menlo, Courier, monospace\";\r\nvar COLOR = (css_supports_1.cssSupports('caret-color', '#000')) ? theme_default_1.BACKGROUND_COLOR : '#ccc';\r\nvar LINE_NUMBER_WIDTH = '40px';\r\nexports.editorCss = \"\\n  .codeflask {\\n    position: relative;\\n    width: 100%;\\n    height: 100%;\\n    overflow: hidden;\\n  }\\n\\n  .codeflask, .codeflask * {\\n    box-sizing: border-box;\\n  }\\n\\n  .codeflask__pre {\\n    pointer-events: none;\\n    z-index: 0;\\n    overflow: hidden;\\n  }\\n\\n  .codeflask__textarea {\\n    background: none;\\n    border: none;\\n    color: \" + COLOR + \";\\n    resize: none;\\n    font-family: \" + FONT_FAMILY + \";\\n    -webkit-appearance: pre;\\n    caret-color: #111;\\n    z-index: 0;\\n    width: 100%;\\n    height: 100%;\\n  }\\n\\n  .codeflask--has-line-numbers .codeflask__textarea {\\n    width: calc(100% - \" + LINE_NUMBER_WIDTH + \");\\n  }\\n\\n  .codeflask__code {\\n    display: block;\\n    font-family: \" + FONT_FAMILY + \";\\n    overflow: hidden;\\n  }\\n\\n  .codeflask__flatten {\\n    padding: 10px;\\n    padding-left: 0px;\\n    font-size: \" + theme_default_1.FONT_SIZE + \";\\n    line-height: \" + theme_default_1.LINE_HEIGHT + \";\\n    white-space: pre;\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    overflow: auto;\\n    margin: 0 !important;\\n    outline: none;\\n    text-align: left;\\n  }\\n\\n  .codeflask--has-line-numbers .codeflask__flatten {\\n    width: calc(100% - \" + LINE_NUMBER_WIDTH + \");\\n    left: \" + LINE_NUMBER_WIDTH + \";\\n  }\\n\\n  .codeflask__line-highlight {\\n    position: absolute;\\n    top: 10px;\\n    left: 0;\\n    width: 100%;\\n    height: \" + theme_default_1.LINE_HEIGHT + \";\\n    background: rgba(0,0,0,0.1);\\n    z-index: 1;\\n  }\\n\\n  .codeflask__lines {\\n    padding: 10px 4px;\\n    font-size: 12px;\\n    line-height: \" + theme_default_1.LINE_HEIGHT + \";\\n    font-family: 'Cousine', monospace;\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    width: \" + LINE_NUMBER_WIDTH + \";\\n    height: 100%;\\n    text-align: right;\\n    color: #999;\\n    z-index: 2;\\n  }\\n\\n  .codeflask__lines__line {\\n    display: block;\\n  }\\n\\n  .codeflask.codeflask--has-line-numbers {\\n    padding-left: \" + LINE_NUMBER_WIDTH + \";\\n  }\\n\\n  .codeflask.codeflask--has-line-numbers:before {\\n    content: '';\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    width: \" + LINE_NUMBER_WIDTH + \";\\n    height: 100%;\\n    background: #eee;\\n    z-index: 1;\\n  }\\n\";\r\n\n},{\"../utils/css-supports\":5,\"./theme-default\":4}],3:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nfunction injectCss(css, styleName, parent) {\r\n    var CSS_ID = styleName || 'codeflask-style';\r\n    var PARENT = parent || document.head;\r\n    if (!css) {\r\n        return false;\r\n    }\r\n    if (document.getElementById(CSS_ID)) {\r\n        return true;\r\n    }\r\n    var style = document.createElement('style');\r\n    style.innerHTML = css;\r\n    style.id = CSS_ID;\r\n    PARENT.appendChild(style);\r\n    return true;\r\n}\r\nexports.injectCss = injectCss;\r\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nexports.BACKGROUND_COLOR = '#fff';\r\nexports.LINE_HEIGHT = '20px';\r\nexports.FONT_SIZE = '13px';\r\nexports.defaultCssTheme = \"\\n.codeflask {\\n  background: \" + exports.BACKGROUND_COLOR + \";\\n  color: #4f559c;\\n}\\n\\n.codeflask .token.punctuation {\\n  color: #4a4a4a;\\n}\\n\\n.codeflask .token.keyword {\\n  color: #8500ff;\\n}\\n\\n.codeflask .token.operator {\\n  color: #ff5598;\\n}\\n\\n.codeflask .token.string {\\n  color: #41ad8f;\\n}\\n\\n.codeflask .token.comment {\\n  color: #9badb7;\\n}\\n\\n.codeflask .token.function {\\n  color: #8500ff;\\n}\\n\\n.codeflask .token.boolean {\\n  color: #8500ff;\\n}\\n\\n.codeflask .token.number {\\n  color: #8500ff;\\n}\\n\\n.codeflask .token.selector {\\n  color: #8500ff;\\n}\\n\\n.codeflask .token.property {\\n  color: #8500ff;\\n}\\n\\n.codeflask .token.tag {\\n  color: #8500ff;\\n}\\n\\n.codeflask .token.attr-value {\\n  color: #8500ff;\\n}\\n\";\r\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nfunction cssSupports(property, value) {\r\n    if (typeof CSS !== 'undefined') {\r\n        return CSS.supports(property, value);\r\n    }\r\n    if (typeof document === 'undefined') {\r\n        return false;\r\n    }\r\n    return toCamelCase(property) in document.body.style;\r\n}\r\nexports.cssSupports = cssSupports;\r\nfunction toCamelCase(cssProperty) {\r\n    cssProperty = cssProperty\r\n        .split('-')\r\n        .filter(function (word) { return !!word; })\r\n        .map(function (word) { return word[0].toUpperCase() + word.substr(1); })\r\n        .join('');\r\n    return cssProperty[0].toLowerCase() + cssProperty.substr(1);\r\n}\r\nexports.toCamelCase = toCamelCase;\r\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nvar entityMap = {\r\n    '&': '&amp;',\r\n    '<': '&lt;',\r\n    '>': '&gt;',\r\n    '\"': '&quot;',\r\n    \"'\": '&#39;',\r\n    '/': '&#x2F;',\r\n    '`': '&#x60;',\r\n    '=': '&#x3D;'\r\n};\r\nfunction escapeHtml(string) {\r\n    return String(string).replace(/[&<>\"'`=/]/g, function (s) {\r\n        return entityMap[s];\r\n    });\r\n}\r\nexports.escapeHtml = escapeHtml;\r\n\n},{}],7:[function(require,module,exports){\n\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar _this = this;\r\nexports.__esModule = true;\r\nvar element = function (tagName, options) {\r\n    return document.createElement(tagName, options);\r\n};\r\nvar append = function (element, newChild) {\r\n    return element.appendChild(newChild);\r\n};\r\nvar load_text = function (names) { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\r\n    switch (_a.label) {\r\n        case 0: return [4 /*yield*/, Promise.all(names.map(function (v) { return fetch(v).then(function (res) { return res.text(); }); }))];\r\n        case 1: return [2 /*return*/, _a.sent()];\r\n    }\r\n}); }); };\r\nvar rand = function (min, max) {\r\n    if (max === undefined) {\r\n        max = min;\r\n        min = 0;\r\n    }\r\n    return min + Math.random() * (max - min);\r\n};\r\nvar twgl_js_1 = require(\"twgl.js\");\r\nvar typestyle_1 = require(\"typestyle\");\r\nvar codeflask_1 = require(\"./editor/codeflask\");\r\nvar localforage_1 = require(\"localforage\");\r\nvar xterm_1 = require(\"xterm\");\r\nvar fit = require(\"xterm/lib/addons/fit/fit\");\r\nvar log = console.log, error = console.error, clear = console.clear;\r\nclear();\r\nvar instance_demo = function (gl, vs, fs) {\r\n    var program_info = twgl_js_1.createProgramInfo(gl, [vs, fs]);\r\n    var num_instances = 100000;\r\n    var inst_wto_mat4_arr = new Float32Array(num_instances * 16);\r\n    var inst_color_arr = new Array();\r\n    var r = 70;\r\n    for (var i = 0; i < num_instances; ++i) {\r\n        var mat = new Float32Array(inst_wto_mat4_arr.buffer, i * 16 * 4, 16);\r\n        twgl_js_1.m4.translation([rand(-r, r), rand(-r, r), rand(-r, r)], mat);\r\n        twgl_js_1.m4.rotateZ(mat, rand(0, Math.PI * 2), mat);\r\n        twgl_js_1.m4.rotateX(mat, rand(0, Math.PI * 2), mat);\r\n        inst_color_arr.push(rand(1), rand(1), rand(1));\r\n    }\r\n    var quad_verts = twgl_js_1.primitives.createPlaneVertices();\r\n    Object.assign(quad_verts, {\r\n        instanceWorld: {\r\n            numComponents: 16,\r\n            data: inst_wto_mat4_arr,\r\n            divisor: 1\r\n        },\r\n        instanceColor: {\r\n            numComponents: 3,\r\n            data: inst_color_arr,\r\n            divisor: 1\r\n        }\r\n    });\r\n    var buffer_info = twgl_js_1.createBufferInfoFromArrays(gl, quad_verts);\r\n    var vertex_array_info = twgl_js_1.createVertexArrayInfo(gl, program_info, buffer_info);\r\n    return function (time) {\r\n        time = time / 1000;\r\n        var ratio = window.devicePixelRatio;\r\n        var canvas = gl.canvas;\r\n        canvas.width = canvas.clientWidth * ratio;\r\n        canvas.height = canvas.clientHeight * ratio;\r\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n        gl.enable(gl.DEPTH_TEST);\r\n        //gl.enable(gl.CULL_FACE);\r\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n        // Projection matrix\r\n        var fov = 30 * Math.PI / 180;\r\n        var aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n        var zNear = 0.5;\r\n        var zFar = 500;\r\n        var projection = twgl_js_1.m4.perspective(fov, aspect, zNear, zFar);\r\n        // View matrix\r\n        var radius = 25;\r\n        var speed = time * 0.1;\r\n        var eye = [Math.sin(speed) * radius, Math.sin(speed * .7) * 10, Math.cos(speed) * radius];\r\n        var target = [0, 0, 0];\r\n        var up = [0, 1, 0];\r\n        var camera = twgl_js_1.m4.lookAt(eye, target, up);\r\n        var view = twgl_js_1.m4.inverse(camera);\r\n        var uniforms = {\r\n            u_lightWorldPos: [1, 8, -30],\r\n            u_lightColor: [1, 1, 1, 1],\r\n            u_ambient: [0, 0, 0, 1],\r\n            u_specular: [1, 1, 1, 1],\r\n            u_shininess: 50,\r\n            u_specularFactor: 1,\r\n            u_viewProjection: twgl_js_1.m4.multiply(projection, view),\r\n            u_viewInverse: camera\r\n        };\r\n        gl.useProgram(program_info.program);\r\n        twgl_js_1.setBuffersAndAttributes(gl, program_info, vertex_array_info);\r\n        twgl_js_1.setUniforms(program_info, uniforms);\r\n        twgl_js_1.drawBufferInfo(gl, vertex_array_info, gl.TRIANGLES, vertex_array_info.numElements, 0, num_instances);\r\n    };\r\n};\r\nvar RenderLoop = /** @class */ (function () {\r\n    function RenderLoop(max_frame) {\r\n        var _this = this;\r\n        this.loop = function (time) {\r\n            time /= 1000;\r\n            if (_this.max_frame < 0 || _this.frame_count < _this.max_frame) {\r\n                requestAnimationFrame(_this.loop);\r\n                if (_this.frame_count > 0) {\r\n                    try {\r\n                        _this.callback_arr.forEach(function (v) { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0: return [4 /*yield*/, v(time)];\r\n                                case 1: return [2 /*return*/, _a.sent()];\r\n                            }\r\n                        }); }); });\r\n                    }\r\n                    catch (err) {\r\n                        error(err);\r\n                    }\r\n                }\r\n                _this.frame_count += 1;\r\n                _this.prev_time = time;\r\n            }\r\n        };\r\n        this.callback_arr = [];\r\n        this.frame_count = 0;\r\n        this.max_frame = -1;\r\n        this.prev_time = 0.0;\r\n        if (typeof max_frame === 'number' && max_frame >= 0) {\r\n            this.max_frame = max_frame;\r\n        }\r\n    }\r\n    RenderLoop.prototype.start = function () {\r\n        requestAnimationFrame(this.loop);\r\n        return this;\r\n    };\r\n    ;\r\n    RenderLoop.prototype.add = function (callback) {\r\n        this.callback_arr.push(callback);\r\n        return this;\r\n    };\r\n    return RenderLoop;\r\n}());\r\nvar Element = /** @class */ (function () {\r\n    function Element(tagName, options) {\r\n        if (tagName instanceof HTMLElement) {\r\n            this.element = tagName;\r\n        }\r\n        else {\r\n            this.element = document.createElement(tagName, options);\r\n        }\r\n    }\r\n    Element.prototype.style = function (css) {\r\n        this.element.className = typestyle_1.style(css);\r\n        return this;\r\n    };\r\n    Element.prototype.child = function (element) {\r\n        if (element instanceof Element)\r\n            this.element.appendChild(element.element);\r\n        else\r\n            this.element.appendChild(element);\r\n        return this;\r\n    };\r\n    Element.prototype.content = function (text) {\r\n        this.element.textContent = text;\r\n        return this;\r\n    };\r\n    return Element;\r\n}());\r\nvar Vec2 = /** @class */ (function () {\r\n    function Vec2(x, y) {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.x = typeof x === 'number' ? x : 0;\r\n        this.y = typeof y === 'number' ? y : 0;\r\n    }\r\n    return Vec2;\r\n}());\r\nvar MatrixRP2 = /** @class */ (function () {\r\n    function MatrixRP2(a, b, c, d, e, f) {\r\n        this.a = 1;\r\n        this.b = 0;\r\n        this.c = 0;\r\n        this.d = 1;\r\n        this.e = 0;\r\n        this.f = 0;\r\n        this.a = typeof a === 'number' ? a : 1;\r\n        this.b = typeof b === 'number' ? b : 0;\r\n        this.c = typeof c === 'number' ? c : 0;\r\n        this.d = typeof d === 'number' ? d : 1;\r\n        this.e = typeof e === 'number' ? e : 0;\r\n        this.f = typeof f === 'number' ? f : 0;\r\n    }\r\n    return MatrixRP2;\r\n}());\r\nvar multiply = function (m1, m2) {\r\n    return new MatrixRP2(m1.a * m2.a + m1.c * m2.b, m1.b * m2.a + m1.d * m2.b, m1.a * m2.c + m1.c * m2.d, m1.b * m2.c + m1.d * m2.d, m1.a * m2.e + m1.c * m2.f + m1.e, m1.b * m2.e + m1.d * m2.f + m1.f);\r\n};\r\nvar scale = function (sx, sy) {\r\n    if (sx === void 0) { sx = 1; }\r\n    if (sy === void 0) { sy = 1; }\r\n    return new MatrixRP2(sx, 0, 0, sy);\r\n};\r\nvar rotate = function (angle) {\r\n    if (angle === void 0) { angle = 0; }\r\n    var _a = [Math.cos(angle), Math.sin(angle)], cos = _a[0], sin = _a[1];\r\n    return new MatrixRP2(cos, sin, -sin, cos);\r\n};\r\nvar translate = function (tx, ty) {\r\n    if (tx === void 0) { tx = 0; }\r\n    return new MatrixRP2(1, 0, 0, 1, tx, ty);\r\n};\r\nvar shear = function (shx, shy) {\r\n    return new MatrixRP2(1, shy, shx);\r\n};\r\nvar multimatrix = function () {\r\n    var matrices = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        matrices[_i] = arguments[_i];\r\n    }\r\n    switch (matrices.length) {\r\n        case 0: throw new Error('no matrices provided');\r\n        case 1: return matrices[0];\r\n        case 2: return multiply(matrices[0], matrices[1]);\r\n        default: return matrices.reduce(function (a, c, i) { return i === 0 ? c : multiply(a, c); });\r\n    }\r\n};\r\nvar drawPath = function (context, path, transform, style) {\r\n    context.save();\r\n    for (var key in style) {\r\n        if (key !== 'fill') {\r\n            context[key] = style[key];\r\n        }\r\n    }\r\n    var a = transform.a, b = transform.b, c = transform.c, d = transform.d, e = transform.e, f = transform.f;\r\n    context.transform(a, b, c, d, e, f);\r\n    context.beginPath();\r\n    if (path.length > 0) {\r\n        context.moveTo(path[0].x, path[0].y);\r\n        path.forEach(function (v) { context.lineTo(v.x, v.y); });\r\n        context.lineTo(path[0].x, path[0].y);\r\n    }\r\n    context.stroke();\r\n    if (style && style.fill === true) {\r\n        context.fill();\r\n    }\r\n    context.restore();\r\n};\r\nvar vec2Array = function () {\r\n    var array = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        array[_i] = arguments[_i];\r\n    }\r\n    return array.reduce(function (a, c, i) {\r\n        if (i % 2 == 0) {\r\n            a.push(new Vec2(c, 0));\r\n        }\r\n        else {\r\n            a[a.length - 1].y = c;\r\n        }\r\n        return a;\r\n    }, new Array());\r\n};\r\n// a bullet editor\r\nvar bullet_editor = function () { return __awaiter(_this, void 0, void 0, function () {\r\n    var canvas, crc, max_frame, render_loop, sin, cos, atan2, repeat, toward_speed_vector, game, div_editor, div_canvas, div_setting, editor_1, code_1, csk_1, saved_code, runCode_1, reload_code_button, load_code_button, clear_bullet_button, saveCode_1, bullets, drawEditor;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                canvas = new Element('canvas').style({ width: '100%', height: '100%' }).element;\r\n                crc = canvas.getContext('2d');\r\n                max_frame = -1;\r\n                render_loop = new RenderLoop(max_frame);\r\n                sin = Math.sin, cos = Math.cos, atan2 = Math.atan2;\r\n                repeat = function (period) { return function (start, end) {\r\n                    if (end < start)\r\n                        return [];\r\n                    var floor = Math.floor;\r\n                    var result = [];\r\n                    var s = (floor(start / period) + 1) * period;\r\n                    while (s < end) {\r\n                        result.push(s);\r\n                        s += period;\r\n                    }\r\n                    return result;\r\n                }; };\r\n                toward_speed_vector = function (pos, prev_pos) {\r\n                    var dot = function (x1, y1, x2, y2) { return x1 * x2 + y1 * y2; };\r\n                    var det = function (x1, y1, x2, y2) { return x1 * y2 - y1 * x2; };\r\n                    var dpv = { x: pos.x - prev_pos.x, y: pos.y - prev_pos.y };\r\n                    var sv = { x: 0, y: 1 };\r\n                    var angle = atan2(det(sv.x, sv.y, dpv.x, dpv.y), dot(sv.x, sv.y, dpv.x, dpv.y));\r\n                    return angle;\r\n                };\r\n                game = undefined;\r\n                div_editor = new Element('div').style({ paddingLeft: 10, width: '100%', height: 400 }).element;\r\n                div_canvas = new Element('div').style({ width: 400, height: 400 }).child(canvas);\r\n                div_setting = new Element('div');\r\n                new Element(document.body).style({ overflow: 'hidden', display: 'flex', flexWrap: 'wrap' })\r\n                    .child(div_editor).child(div_canvas).child(div_setting);\r\n                editor_1 = new codeflask_1[\"default\"](div_editor, { language: 'js' });\r\n                code_1 = \"// Test code\\nconst bullet = (init_time, x, y) => {\\n  const v = { x, y };\\n  return (t, pt) => {\\n    const st = t - init_time;\\n    const pst = pt - init_time;\\n    const p = { x: st * v.x, y: st * v.y };\\n    const pp = { x: pst * v.x, y: pst * v.y };\\n    return multimatrix(\\n      translate(p.x, p.y),\\n      rotate(toward_speed_vector(p, pp)),\\n    );\\n  }\\n};\\nconst spawn = (t, pt) => repeat(0.05)(pt, t).map(v => {\\n  const s = 100; // speed\\n  return [\\n    bullet(v, s * cos(v), s * sin(v)),\\n    bullet(v, -s * cos(v), s * sin(v)),\\n    bullet(v, s * cos(v), -s * sin(v)),\\n    bullet(v, -s * cos(v), -s * sin(v)),\\n  ];\\n});\\n\\n({spawn});\";\r\n                csk_1 = 'code';\r\n                return [4 /*yield*/, localforage_1.getItem(csk_1)];\r\n            case 1:\r\n                saved_code = _a.sent();\r\n                editor_1.updateCode(saved_code || code_1);\r\n                runCode_1 = function (code) {\r\n                    var game_setting = eval(code);\r\n                    game = function () { return game_setting; };\r\n                };\r\n                runCode_1(editor_1.getCode());\r\n                reload_code_button = new Element('button').content('init code').element;\r\n                reload_code_button.addEventListener('click', function () { return editor_1.updateCode(code_1); });\r\n                load_code_button = new Element('button').content('load code').element;\r\n                load_code_button.addEventListener('click', function () { return runCode_1(editor_1.getCode()); });\r\n                clear_bullet_button = new Element('button').content('clear bullet').element;\r\n                clear_bullet_button.addEventListener('click', function () { return bullets = []; });\r\n                div_setting.child(load_code_button).child(reload_code_button).child(clear_bullet_button);\r\n                saveCode_1 = function (code) { if (code) {\r\n                    localforage_1.setItem(csk_1, code);\r\n                } };\r\n                document.addEventListener('keydown', function (e) {\r\n                    if (e.key === 'Enter' && e.altKey === true ||\r\n                        e.key === 'r' && e.altKey === true ||\r\n                        e.key === 's' && e.ctrlKey === true ||\r\n                        e.key === 'Alt') {\r\n                        e.preventDefault();\r\n                    }\r\n                });\r\n                document.addEventListener('keyup', function (e) {\r\n                    if (e.key === 'Enter' && e.altKey === true ||\r\n                        e.key === 'r' && e.altKey === true ||\r\n                        e.key === 's' && e.ctrlKey === true) {\r\n                        var code_2 = editor_1.getCode();\r\n                        var result = runCode_1(code_2);\r\n                        if (e.key === 's' && e.ctrlKey === true) {\r\n                            saveCode_1(code_2);\r\n                            log(\"[\" + new Date().toLocaleTimeString() + \"] Code has been saved.\");\r\n                        }\r\n                    }\r\n                });\r\n                render_loop.start();\r\n                bullets = new Array();\r\n                drawEditor = function (time) {\r\n                    var ratio = window.devicePixelRatio || 1;\r\n                    var width = canvas.width = canvas.clientWidth * ratio;\r\n                    var height = canvas.height = canvas.clientHeight * ratio;\r\n                    var out_of_bound = function (x, y) {\r\n                        var w = width / 2, h = height / 2;\r\n                        var _a = [-w, w, -h, h], minx = _a[0], maxx = _a[1], miny = _a[2], maxy = _a[3];\r\n                        return (minx < x && x < maxx && miny < y && y < maxy) ? false : true;\r\n                    };\r\n                    // Background\r\n                    {\r\n                        // Basic transform\r\n                        crc.clearRect(0, 0, canvas.width, canvas.height);\r\n                        crc.translate(canvas.width / 2, canvas.height / 2);\r\n                        crc.scale(1, -1);\r\n                        // Grid\r\n                        var grid_style_1 = {\r\n                            strokeStyle: '#aaa', lineWidth: 1 * ratio\r\n                        };\r\n                        var ceil = Math.ceil;\r\n                        var grid_row = 15;\r\n                        var interval_1 = width / (grid_row);\r\n                        var _a = [-width / 2, -height / 2, width / 2, height / 2], sw_1 = _a[0], sh_1 = _a[1], ew_1 = _a[2], eh_1 = _a[3];\r\n                        new Array(ceil(grid_row / 2)).fill(0).map(function (v, i) { return i; }).forEach(function (v) {\r\n                            var _a = [v * interval_1, v * interval_1], x = _a[0], y = _a[1];\r\n                            drawPath(crc, vec2Array(sw_1, y, ew_1, y), new MatrixRP2(), grid_style_1);\r\n                            drawPath(crc, vec2Array(x, sh_1, x, eh_1), new MatrixRP2(), grid_style_1);\r\n                            drawPath(crc, vec2Array(sw_1, -y, ew_1, -y), new MatrixRP2(), grid_style_1);\r\n                            drawPath(crc, vec2Array(-x, sh_1, -x, eh_1), new MatrixRP2(), grid_style_1);\r\n                        });\r\n                        // Origin\r\n                        drawPath(crc, vec2Array(0, 0, 0, 0, 0, 0), new MatrixRP2(), { strokeStyle: '#777', lineWidth: 6, lineCap: 'round' });\r\n                    }\r\n                    // Game\r\n                    {\r\n                        var t_1 = time;\r\n                        var r = ratio;\r\n                        var pt_1 = render_loop.prev_time;\r\n                        var dt = t_1 - pt_1;\r\n                        // Player\r\n                        {\r\n                            var radius = 200 * ratio;\r\n                            var matrix = translate(radius * cos(time), radius * sin(time));\r\n                            var player_style = { strokeStyle: '#f00', lineWidth: 8, lineCap: 'round' };\r\n                            drawPath(crc, vec2Array(0, 0, 0, 0, 0, 0), matrix, player_style);\r\n                        }\r\n                        // Enemy\r\n                        {\r\n                            var l = 10, L = l + 2;\r\n                            var t_2 = time * 10;\r\n                            drawPath(crc, vec2Array(l, l, l, -l, -l, -l, -l, l), rotate(t_2));\r\n                            drawPath(crc, vec2Array(L, L, L, -L, -L, -L, -L, L), rotate(t_2));\r\n                        }\r\n                        // Bullet\r\n                        {\r\n                            var bullet_style_1 = { strokeStyle: 'blue', lineWidth: 1 };\r\n                            var drawBullet_1 = function (matrix, size) {\r\n                                if (size === void 0) { size = 2; }\r\n                                drawPath(crc, vec2Array(-2 * size, -size, 0, 4 * size, 2 * size, -size), multimatrix(matrix), bullet_style_1);\r\n                            };\r\n                            game().spawn(t_1, pt_1).forEach(function (v) {\r\n                                if (Array.isArray(v)) {\r\n                                    v.forEach(function (g) { return bullets.push(g); });\r\n                                }\r\n                                else {\r\n                                    bullets.push(v);\r\n                                }\r\n                            });\r\n                            bullets = bullets\r\n                                .filter(function (v) {\r\n                                var matrix = v(t_1, pt_1);\r\n                                return !out_of_bound(matrix.e, matrix.f);\r\n                            })\r\n                                .map(function (v) {\r\n                                drawBullet_1(v(t_1, pt_1));\r\n                                return v;\r\n                            });\r\n                        }\r\n                    }\r\n                };\r\n                render_loop.add(drawEditor);\r\n                return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nbullet_editor();\r\nxterm_1.Terminal.applyAddon(fit);\r\nvar term = new xterm_1.Terminal({\r\n    allowTransparency: true,\r\n    theme: {\r\n        background: 'rgb(0,0,0,0)'\r\n    }\r\n});\r\nvar div_terminal = new Element('div').style({\r\n    position: 'absolute',\r\n    left: '10%', right: '10%',\r\n    top: '10%', bottom: '10%'\r\n}).element;\r\nvar div_fullscreen = new Element('div').style({\r\n    position: 'fixed',\r\n    width: '100%', height: '100%',\r\n    background: 'rgb(0,0,0,0.8)'\r\n}).child(div_terminal).element;\r\nnew Element(document.body).child(div_fullscreen);\r\nterm.open(div_terminal);\r\nterm.on('key', function (key) {\r\n    log(key, key.charAt(0), key.charCodeAt(0));\r\n    if (key.charCodeAt(0) == 13) {\r\n        term.write('\\n');\r\n    }\r\n    term.write(key);\r\n});\r\nwindow.addEventListener('resize', function () { return term.fit(); });\r\nvar hello_word = \"Welcome to dmk.js shell!\\n\\rPress \\\"`\\\" to hide This terminal.\";\r\nwindow.addEventListener('load', function () {\r\n    term.fit();\r\n    term.write(hello_word);\r\n});\r\nwindow.addEventListener('keypress', function (event) {\r\n    if (event.key === '`') {\r\n        div_fullscreen.hidden = !div_fullscreen.hidden;\r\n    }\r\n});\r\n\n},{\"./editor/codeflask\":1,\"localforage\":9,\"twgl.js\":12,\"typestyle\":13,\"xterm\":55,\"xterm/lib/addons/fit/fit\":37}],8:[function(require,module,exports){\n(function (process){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The unique id is used for unique hashes.\n */\nvar uniqueId = 0;\n/**\n * Tag styles with this string to get unique hashes.\n */\nexports.IS_UNIQUE = '__DO_NOT_DEDUPE_STYLE__';\nvar upperCasePattern = /[A-Z]/g;\nvar msPattern = /^ms-/;\nvar interpolatePattern = /&/g;\nvar escapePattern = /[ !#$%&()*+,./;<=>?@[\\]^`{|}~\"'\\\\]/g;\nvar propLower = function (m) { return \"-\" + m.toLowerCase(); };\n/**\n * CSS properties that are valid unit-less numbers.\n *\n * Ref: https://github.com/facebook/react/blob/master/packages/react-dom/src/shared/CSSProperty.js\n */\nvar CSS_NUMBER = {\n    'animation-iteration-count': true,\n    'border-image-outset': true,\n    'border-image-slice': true,\n    'border-image-width': true,\n    'box-flex': true,\n    'box-flex-group': true,\n    'box-ordinal-group': true,\n    'column-count': true,\n    'columns': true,\n    'counter-increment': true,\n    'counter-reset': true,\n    'flex': true,\n    'flex-grow': true,\n    'flex-positive': true,\n    'flex-shrink': true,\n    'flex-negative': true,\n    'flex-order': true,\n    'font-weight': true,\n    'grid-area': true,\n    'grid-column': true,\n    'grid-column-end': true,\n    'grid-column-span': true,\n    'grid-column-start': true,\n    'grid-row': true,\n    'grid-row-end': true,\n    'grid-row-span': true,\n    'grid-row-start': true,\n    'line-clamp': true,\n    'line-height': true,\n    'opacity': true,\n    'order': true,\n    'orphans': true,\n    'tab-size': true,\n    'widows': true,\n    'z-index': true,\n    'zoom': true,\n    // SVG properties.\n    'fill-opacity': true,\n    'flood-opacity': true,\n    'stop-opacity': true,\n    'stroke-dasharray': true,\n    'stroke-dashoffset': true,\n    'stroke-miterlimit': true,\n    'stroke-opacity': true,\n    'stroke-width': true\n};\n// Add vendor prefixes to all unit-less properties.\nfor (var _i = 0, _a = Object.keys(CSS_NUMBER); _i < _a.length; _i++) {\n    var property = _a[_i];\n    for (var _b = 0, _c = ['-webkit-', '-ms-', '-moz-', '-o-', '']; _b < _c.length; _b++) {\n        var prefix = _c[_b];\n        CSS_NUMBER[prefix + property] = true;\n    }\n}\n/**\n * Escape a CSS class name.\n */\nexports.escape = function (str) { return str.replace(escapePattern, '\\\\$&'); };\n/**\n * Transform a JavaScript property into a CSS property.\n */\nfunction hyphenate(propertyName) {\n    return propertyName\n        .replace(upperCasePattern, propLower)\n        .replace(msPattern, '-ms-'); // Internet Explorer vendor prefix.\n}\nexports.hyphenate = hyphenate;\n/**\n * Generate a hash value from a string.\n */\nfunction stringHash(str) {\n    var value = 5381;\n    var len = str.length;\n    while (len--)\n        value = (value * 33) ^ str.charCodeAt(len);\n    return (value >>> 0).toString(36);\n}\nexports.stringHash = stringHash;\n/**\n * Transform a style string to a CSS string.\n */\nfunction styleToString(key, value) {\n    if (typeof value === 'number' && value !== 0 && !CSS_NUMBER.hasOwnProperty(key)) {\n        return key + \":\" + value + \"px\";\n    }\n    return key + \":\" + value;\n}\n/**\n * Sort an array of tuples by first value.\n */\nfunction sortTuples(value) {\n    return value.sort(function (a, b) { return a[0] > b[0] ? 1 : -1; });\n}\n/**\n * Categorize user styles.\n */\nfunction parseStyles(styles, hasNestedStyles) {\n    var properties = [];\n    var nestedStyles = [];\n    var isUnique = false;\n    // Sort keys before adding to styles.\n    for (var _i = 0, _a = Object.keys(styles); _i < _a.length; _i++) {\n        var key = _a[_i];\n        var value = styles[key];\n        if (value !== null && value !== undefined) {\n            if (key === exports.IS_UNIQUE) {\n                isUnique = true;\n            }\n            else if (typeof value === 'object' && !Array.isArray(value)) {\n                nestedStyles.push([key.trim(), value]);\n            }\n            else {\n                properties.push([hyphenate(key.trim()), value]);\n            }\n        }\n    }\n    return {\n        style: stringifyProperties(sortTuples(properties)),\n        nested: hasNestedStyles ? nestedStyles : sortTuples(nestedStyles),\n        isUnique: isUnique\n    };\n}\n/**\n * Stringify an array of property tuples.\n */\nfunction stringifyProperties(properties) {\n    return properties.map(function (_a) {\n        var name = _a[0], value = _a[1];\n        if (!Array.isArray(value))\n            return styleToString(name, value);\n        return value.map(function (x) { return styleToString(name, x); }).join(';');\n    }).join(';');\n}\n/**\n * Interpolate CSS selectors.\n */\nfunction interpolate(selector, parent) {\n    if (selector.indexOf('&') === -1)\n        return parent + \" \" + selector;\n    return selector.replace(interpolatePattern, parent);\n}\n/**\n * Recursive loop building styles with deferred selectors.\n */\nfunction stylize(selector, styles, rulesList, stylesList, parent) {\n    var _a = parseStyles(styles, selector !== ''), style = _a.style, nested = _a.nested, isUnique = _a.isUnique;\n    var pid = style;\n    if (selector.charCodeAt(0) === 64 /* @ */) {\n        var child = { selector: selector, styles: [], rules: [], style: parent ? '' : style };\n        rulesList.push(child);\n        // Nested styles support (e.g. `.foo > @media > .bar`).\n        if (style && parent)\n            child.styles.push({ selector: parent, style: style, isUnique: isUnique });\n        for (var _i = 0, nested_1 = nested; _i < nested_1.length; _i++) {\n            var _b = nested_1[_i], name = _b[0], value = _b[1];\n            pid += name + stylize(name, value, child.rules, child.styles, parent);\n        }\n    }\n    else {\n        var key = parent ? interpolate(selector, parent) : selector;\n        if (style)\n            stylesList.push({ selector: key, style: style, isUnique: isUnique });\n        for (var _c = 0, nested_2 = nested; _c < nested_2.length; _c++) {\n            var _d = nested_2[_c], name = _d[0], value = _d[1];\n            pid += name + stylize(name, value, rulesList, stylesList, key);\n        }\n    }\n    return pid;\n}\n/**\n * Transform `stylize` tree into style objects.\n */\nfunction composeStylize(cache, pid, rulesList, stylesList, className, isStyle) {\n    for (var _i = 0, stylesList_1 = stylesList; _i < stylesList_1.length; _i++) {\n        var _a = stylesList_1[_i], selector = _a.selector, style = _a.style, isUnique = _a.isUnique;\n        var key = isStyle ? interpolate(selector, className) : selector;\n        var id = isUnique ? \"u\\0\" + (++uniqueId).toString(36) : \"s\\0\" + pid + \"\\0\" + style;\n        var item = new Style(style, id);\n        item.add(new Selector(key, \"k\\0\" + pid + \"\\0\" + key));\n        cache.add(item);\n    }\n    for (var _b = 0, rulesList_1 = rulesList; _b < rulesList_1.length; _b++) {\n        var _c = rulesList_1[_b], selector = _c.selector, style = _c.style, rules = _c.rules, styles = _c.styles;\n        var item = new Rule(selector, style, \"r\\0\" + pid + \"\\0\" + selector + \"\\0\" + style);\n        composeStylize(item, pid, rules, styles, className, isStyle);\n        cache.add(item);\n    }\n}\n/**\n * Cache to list to styles.\n */\nfunction join(arr) {\n    var res = '';\n    for (var i = 0; i < arr.length; i++)\n        res += arr[i];\n    return res;\n}\n/**\n * Noop changes.\n */\nvar noopChanges = {\n    add: function () { return undefined; },\n    change: function () { return undefined; },\n    remove: function () { return undefined; }\n};\n/**\n * Implement a cache/event emitter.\n */\nvar Cache = /** @class */ (function () {\n    function Cache(changes) {\n        if (changes === void 0) { changes = noopChanges; }\n        this.changes = changes;\n        this.sheet = [];\n        this.changeId = 0;\n        this._keys = [];\n        this._children = Object.create(null);\n        this._counters = Object.create(null);\n    }\n    Cache.prototype.add = function (style) {\n        var count = this._counters[style.id] || 0;\n        var item = this._children[style.id] || style.clone();\n        this._counters[style.id] = count + 1;\n        if (count === 0) {\n            this._children[item.id] = item;\n            this._keys.push(item.id);\n            this.sheet.push(item.getStyles());\n            this.changeId++;\n            this.changes.add(item, this._keys.length - 1);\n        }\n        else if (item instanceof Cache && style instanceof Cache) {\n            var curIndex = this._keys.indexOf(style.id);\n            var prevItemChangeId = item.changeId;\n            item.merge(style);\n            if (item.changeId !== prevItemChangeId) {\n                this.sheet.splice(curIndex, 1, item.getStyles());\n                this.changeId++;\n                this.changes.change(item, curIndex, curIndex);\n            }\n        }\n        return item;\n    };\n    Cache.prototype.remove = function (style) {\n        var count = this._counters[style.id];\n        if (count !== undefined && count > 0) {\n            this._counters[style.id] = count - 1;\n            var item = this._children[style.id];\n            var index = this._keys.indexOf(item.id);\n            if (count === 1) {\n                delete this._counters[style.id];\n                delete this._children[style.id];\n                this._keys.splice(index, 1);\n                this.sheet.splice(index, 1);\n                this.changeId++;\n                this.changes.remove(item, index);\n            }\n            else if (item instanceof Cache && style instanceof Cache) {\n                var prevChangeId = item.changeId;\n                item.unmerge(style);\n                if (item.changeId !== prevChangeId) {\n                    this.sheet.splice(index, 1, item.getStyles());\n                    this.changeId++;\n                    this.changes.change(item, index, index);\n                }\n            }\n        }\n    };\n    Cache.prototype.values = function () {\n        var _this = this;\n        return this._keys.map(function (key) { return _this._children[key]; });\n    };\n    Cache.prototype.merge = function (cache) {\n        for (var _i = 0, _a = cache.values(); _i < _a.length; _i++) {\n            var item = _a[_i];\n            this.add(item);\n        }\n        return this;\n    };\n    Cache.prototype.unmerge = function (cache) {\n        for (var _i = 0, _a = cache.values(); _i < _a.length; _i++) {\n            var item = _a[_i];\n            this.remove(item);\n        }\n        return this;\n    };\n    Cache.prototype.clone = function () {\n        return new Cache().merge(this);\n    };\n    return Cache;\n}());\nexports.Cache = Cache;\n/**\n * Selector is a dumb class made to represent nested CSS selectors.\n */\nvar Selector = /** @class */ (function () {\n    function Selector(selector, id) {\n        this.selector = selector;\n        this.id = id;\n    }\n    Selector.prototype.getStyles = function () {\n        return this.selector;\n    };\n    Selector.prototype.clone = function () {\n        return new Selector(this.selector, this.id);\n    };\n    return Selector;\n}());\nexports.Selector = Selector;\n/**\n * The style container registers a style string with selectors.\n */\nvar Style = /** @class */ (function (_super) {\n    __extends(Style, _super);\n    function Style(style, id) {\n        var _this = _super.call(this) || this;\n        _this.style = style;\n        _this.id = id;\n        return _this;\n    }\n    Style.prototype.getStyles = function () {\n        return this.sheet.join(',') + \"{\" + this.style + \"}\";\n    };\n    Style.prototype.clone = function () {\n        return new Style(this.style, this.id).merge(this);\n    };\n    return Style;\n}(Cache));\nexports.Style = Style;\n/**\n * Implement rule logic for style output.\n */\nvar Rule = /** @class */ (function (_super) {\n    __extends(Rule, _super);\n    function Rule(rule, style, id) {\n        var _this = _super.call(this) || this;\n        _this.rule = rule;\n        _this.style = style;\n        _this.id = id;\n        return _this;\n    }\n    Rule.prototype.getStyles = function () {\n        return this.rule + \"{\" + this.style + join(this.sheet) + \"}\";\n    };\n    Rule.prototype.clone = function () {\n        return new Rule(this.rule, this.style, this.id).merge(this);\n    };\n    return Rule;\n}(Cache));\nexports.Rule = Rule;\n/**\n * The FreeStyle class implements the API for everything else.\n */\nvar FreeStyle = /** @class */ (function (_super) {\n    __extends(FreeStyle, _super);\n    function FreeStyle(hash, debug, id, changes) {\n        var _this = _super.call(this, changes) || this;\n        _this.hash = hash;\n        _this.debug = debug;\n        _this.id = id;\n        return _this;\n    }\n    FreeStyle.prototype.registerStyle = function (styles, displayName) {\n        var rulesList = [];\n        var stylesList = [];\n        var pid = stylize('&', styles, rulesList, stylesList);\n        var hash = \"f\" + this.hash(pid);\n        var id = this.debug && displayName ? displayName + \"_\" + hash : hash;\n        composeStylize(this, pid, rulesList, stylesList, \".\" + exports.escape(id), true);\n        return id;\n    };\n    FreeStyle.prototype.registerKeyframes = function (keyframes, displayName) {\n        return this.registerHashRule('@keyframes', keyframes, displayName);\n    };\n    FreeStyle.prototype.registerHashRule = function (prefix, styles, displayName) {\n        var rulesList = [];\n        var stylesList = [];\n        var pid = stylize('', styles, rulesList, stylesList);\n        var hash = \"f\" + this.hash(pid);\n        var id = this.debug && displayName ? displayName + \"_\" + hash : hash;\n        var rule = new Rule(prefix + \" \" + exports.escape(id), '', \"h\\0\" + pid + \"\\0\" + prefix);\n        composeStylize(rule, pid, rulesList, stylesList, '', false);\n        this.add(rule);\n        return id;\n    };\n    FreeStyle.prototype.registerRule = function (rule, styles) {\n        var rulesList = [];\n        var stylesList = [];\n        var pid = stylize(rule, styles, rulesList, stylesList);\n        composeStylize(this, pid, rulesList, stylesList, '', false);\n    };\n    FreeStyle.prototype.registerCss = function (styles) {\n        return this.registerRule('', styles);\n    };\n    FreeStyle.prototype.getStyles = function () {\n        return join(this.sheet);\n    };\n    FreeStyle.prototype.clone = function () {\n        return new FreeStyle(this.hash, this.debug, this.id, this.changes).merge(this);\n    };\n    return FreeStyle;\n}(Cache));\nexports.FreeStyle = FreeStyle;\n/**\n * Exports a simple function to create a new instance.\n */\nfunction create(hash, debug, changes) {\n    if (hash === void 0) { hash = stringHash; }\n    if (debug === void 0) { debug = typeof process !== 'undefined' && process.env.NODE_ENV !== 'production'; }\n    if (changes === void 0) { changes = noopChanges; }\n    return new FreeStyle(hash, debug, \"f\" + (++uniqueId).toString(36), changes);\n}\nexports.create = create;\n\n}).call(this,require('_process'))\n},{\"_process\":11}],9:[function(require,module,exports){\n(function (global){\n/*!\n    localForage -- Offline Storage, Improved\n    Version 1.7.3\n    https://localforage.github.io/localForage\n    (c) 2013-2017 Mozilla, Apache License 2.0\n*/\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.localforage = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw (f.code=\"MODULE_NOT_FOUND\", f)}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n(function (global){\n'use strict';\nvar Mutation = global.MutationObserver || global.WebKitMutationObserver;\n\nvar scheduleDrain;\n\n{\n  if (Mutation) {\n    var called = 0;\n    var observer = new Mutation(nextTick);\n    var element = global.document.createTextNode('');\n    observer.observe(element, {\n      characterData: true\n    });\n    scheduleDrain = function () {\n      element.data = (called = ++called % 2);\n    };\n  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {\n    var channel = new global.MessageChannel();\n    channel.port1.onmessage = nextTick;\n    scheduleDrain = function () {\n      channel.port2.postMessage(0);\n    };\n  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {\n    scheduleDrain = function () {\n\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var scriptEl = global.document.createElement('script');\n      scriptEl.onreadystatechange = function () {\n        nextTick();\n\n        scriptEl.onreadystatechange = null;\n        scriptEl.parentNode.removeChild(scriptEl);\n        scriptEl = null;\n      };\n      global.document.documentElement.appendChild(scriptEl);\n    };\n  } else {\n    scheduleDrain = function () {\n      setTimeout(nextTick, 0);\n    };\n  }\n}\n\nvar draining;\nvar queue = [];\n//named nextTick for less confusing stack traces\nfunction nextTick() {\n  draining = true;\n  var i, oldQueue;\n  var len = queue.length;\n  while (len) {\n    oldQueue = queue;\n    queue = [];\n    i = -1;\n    while (++i < len) {\n      oldQueue[i]();\n    }\n    len = queue.length;\n  }\n  draining = false;\n}\n\nmodule.exports = immediate;\nfunction immediate(task) {\n  if (queue.push(task) === 1 && !draining) {\n    scheduleDrain();\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],2:[function(_dereq_,module,exports){\n'use strict';\nvar immediate = _dereq_(1);\n\n/* istanbul ignore next */\nfunction INTERNAL() {}\n\nvar handlers = {};\n\nvar REJECTED = ['REJECTED'];\nvar FULFILLED = ['FULFILLED'];\nvar PENDING = ['PENDING'];\n\nmodule.exports = Promise;\n\nfunction Promise(resolver) {\n  if (typeof resolver !== 'function') {\n    throw new TypeError('resolver must be a function');\n  }\n  this.state = PENDING;\n  this.queue = [];\n  this.outcome = void 0;\n  if (resolver !== INTERNAL) {\n    safelyResolveThenable(this, resolver);\n  }\n}\n\nPromise.prototype[\"catch\"] = function (onRejected) {\n  return this.then(null, onRejected);\n};\nPromise.prototype.then = function (onFulfilled, onRejected) {\n  if (typeof onFulfilled !== 'function' && this.state === FULFILLED ||\n    typeof onRejected !== 'function' && this.state === REJECTED) {\n    return this;\n  }\n  var promise = new this.constructor(INTERNAL);\n  if (this.state !== PENDING) {\n    var resolver = this.state === FULFILLED ? onFulfilled : onRejected;\n    unwrap(promise, resolver, this.outcome);\n  } else {\n    this.queue.push(new QueueItem(promise, onFulfilled, onRejected));\n  }\n\n  return promise;\n};\nfunction QueueItem(promise, onFulfilled, onRejected) {\n  this.promise = promise;\n  if (typeof onFulfilled === 'function') {\n    this.onFulfilled = onFulfilled;\n    this.callFulfilled = this.otherCallFulfilled;\n  }\n  if (typeof onRejected === 'function') {\n    this.onRejected = onRejected;\n    this.callRejected = this.otherCallRejected;\n  }\n}\nQueueItem.prototype.callFulfilled = function (value) {\n  handlers.resolve(this.promise, value);\n};\nQueueItem.prototype.otherCallFulfilled = function (value) {\n  unwrap(this.promise, this.onFulfilled, value);\n};\nQueueItem.prototype.callRejected = function (value) {\n  handlers.reject(this.promise, value);\n};\nQueueItem.prototype.otherCallRejected = function (value) {\n  unwrap(this.promise, this.onRejected, value);\n};\n\nfunction unwrap(promise, func, value) {\n  immediate(function () {\n    var returnValue;\n    try {\n      returnValue = func(value);\n    } catch (e) {\n      return handlers.reject(promise, e);\n    }\n    if (returnValue === promise) {\n      handlers.reject(promise, new TypeError('Cannot resolve promise with itself'));\n    } else {\n      handlers.resolve(promise, returnValue);\n    }\n  });\n}\n\nhandlers.resolve = function (self, value) {\n  var result = tryCatch(getThen, value);\n  if (result.status === 'error') {\n    return handlers.reject(self, result.value);\n  }\n  var thenable = result.value;\n\n  if (thenable) {\n    safelyResolveThenable(self, thenable);\n  } else {\n    self.state = FULFILLED;\n    self.outcome = value;\n    var i = -1;\n    var len = self.queue.length;\n    while (++i < len) {\n      self.queue[i].callFulfilled(value);\n    }\n  }\n  return self;\n};\nhandlers.reject = function (self, error) {\n  self.state = REJECTED;\n  self.outcome = error;\n  var i = -1;\n  var len = self.queue.length;\n  while (++i < len) {\n    self.queue[i].callRejected(error);\n  }\n  return self;\n};\n\nfunction getThen(obj) {\n  // Make sure we only access the accessor once as required by the spec\n  var then = obj && obj.then;\n  if (obj && (typeof obj === 'object' || typeof obj === 'function') && typeof then === 'function') {\n    return function appyThen() {\n      then.apply(obj, arguments);\n    };\n  }\n}\n\nfunction safelyResolveThenable(self, thenable) {\n  // Either fulfill, reject or reject with error\n  var called = false;\n  function onError(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.reject(self, value);\n  }\n\n  function onSuccess(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.resolve(self, value);\n  }\n\n  function tryToUnwrap() {\n    thenable(onSuccess, onError);\n  }\n\n  var result = tryCatch(tryToUnwrap);\n  if (result.status === 'error') {\n    onError(result.value);\n  }\n}\n\nfunction tryCatch(func, value) {\n  var out = {};\n  try {\n    out.value = func(value);\n    out.status = 'success';\n  } catch (e) {\n    out.status = 'error';\n    out.value = e;\n  }\n  return out;\n}\n\nPromise.resolve = resolve;\nfunction resolve(value) {\n  if (value instanceof this) {\n    return value;\n  }\n  return handlers.resolve(new this(INTERNAL), value);\n}\n\nPromise.reject = reject;\nfunction reject(reason) {\n  var promise = new this(INTERNAL);\n  return handlers.reject(promise, reason);\n}\n\nPromise.all = all;\nfunction all(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var values = new Array(len);\n  var resolved = 0;\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    allResolver(iterable[i], i);\n  }\n  return promise;\n  function allResolver(value, i) {\n    self.resolve(value).then(resolveFromAll, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n    function resolveFromAll(outValue) {\n      values[i] = outValue;\n      if (++resolved === len && !called) {\n        called = true;\n        handlers.resolve(promise, values);\n      }\n    }\n  }\n}\n\nPromise.race = race;\nfunction race(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    resolver(iterable[i]);\n  }\n  return promise;\n  function resolver(value) {\n    self.resolve(value).then(function (response) {\n      if (!called) {\n        called = true;\n        handlers.resolve(promise, response);\n      }\n    }, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n  }\n}\n\n},{\"1\":1}],3:[function(_dereq_,module,exports){\n(function (global){\n'use strict';\nif (typeof global.Promise !== 'function') {\n  global.Promise = _dereq_(2);\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"2\":2}],4:[function(_dereq_,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction getIDB() {\n    /* global indexedDB,webkitIndexedDB,mozIndexedDB,OIndexedDB,msIndexedDB */\n    try {\n        if (typeof indexedDB !== 'undefined') {\n            return indexedDB;\n        }\n        if (typeof webkitIndexedDB !== 'undefined') {\n            return webkitIndexedDB;\n        }\n        if (typeof mozIndexedDB !== 'undefined') {\n            return mozIndexedDB;\n        }\n        if (typeof OIndexedDB !== 'undefined') {\n            return OIndexedDB;\n        }\n        if (typeof msIndexedDB !== 'undefined') {\n            return msIndexedDB;\n        }\n    } catch (e) {\n        return;\n    }\n}\n\nvar idb = getIDB();\n\nfunction isIndexedDBValid() {\n    try {\n        // Initialize IndexedDB; fall back to vendor-prefixed versions\n        // if needed.\n        if (!idb) {\n            return false;\n        }\n        // We mimic PouchDB here;\n        //\n        // We test for openDatabase because IE Mobile identifies itself\n        // as Safari. Oh the lulz...\n        var isSafari = typeof openDatabase !== 'undefined' && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);\n\n        var hasFetch = typeof fetch === 'function' && fetch.toString().indexOf('[native code') !== -1;\n\n        // Safari <10.1 does not meet our requirements for IDB support (#5572)\n        // since Safari 10.1 shipped with fetch, we can use that to detect it\n        return (!isSafari || hasFetch) && typeof indexedDB !== 'undefined' &&\n        // some outdated implementations of IDB that appear on Samsung\n        // and HTC Android devices <4.4 are missing IDBKeyRange\n        // See: https://github.com/mozilla/localForage/issues/128\n        // See: https://github.com/mozilla/localForage/issues/272\n        typeof IDBKeyRange !== 'undefined';\n    } catch (e) {\n        return false;\n    }\n}\n\n// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor. (i.e.\n// old QtWebKit versions, at least).\n// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor. (i.e.\n// old QtWebKit versions, at least).\nfunction createBlob(parts, properties) {\n    /* global BlobBuilder,MSBlobBuilder,MozBlobBuilder,WebKitBlobBuilder */\n    parts = parts || [];\n    properties = properties || {};\n    try {\n        return new Blob(parts, properties);\n    } catch (e) {\n        if (e.name !== 'TypeError') {\n            throw e;\n        }\n        var Builder = typeof BlobBuilder !== 'undefined' ? BlobBuilder : typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : WebKitBlobBuilder;\n        var builder = new Builder();\n        for (var i = 0; i < parts.length; i += 1) {\n            builder.append(parts[i]);\n        }\n        return builder.getBlob(properties.type);\n    }\n}\n\n// This is CommonJS because lie is an external dependency, so Rollup\n// can just ignore it.\nif (typeof Promise === 'undefined') {\n    // In the \"nopromises\" build this will just throw if you don't have\n    // a global promise object, but it would throw anyway later.\n    _dereq_(3);\n}\nvar Promise$1 = Promise;\n\nfunction executeCallback(promise, callback) {\n    if (callback) {\n        promise.then(function (result) {\n            callback(null, result);\n        }, function (error) {\n            callback(error);\n        });\n    }\n}\n\nfunction executeTwoCallbacks(promise, callback, errorCallback) {\n    if (typeof callback === 'function') {\n        promise.then(callback);\n    }\n\n    if (typeof errorCallback === 'function') {\n        promise[\"catch\"](errorCallback);\n    }\n}\n\nfunction normalizeKey(key) {\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    return key;\n}\n\nfunction getCallback() {\n    if (arguments.length && typeof arguments[arguments.length - 1] === 'function') {\n        return arguments[arguments.length - 1];\n    }\n}\n\n// Some code originally from async_storage.js in\n// [Gaia](https://github.com/mozilla-b2g/gaia).\n\nvar DETECT_BLOB_SUPPORT_STORE = 'local-forage-detect-blob-support';\nvar supportsBlobs = void 0;\nvar dbContexts = {};\nvar toString = Object.prototype.toString;\n\n// Transaction Modes\nvar READ_ONLY = 'readonly';\nvar READ_WRITE = 'readwrite';\n\n// Transform a binary string to an array buffer, because otherwise\n// weird stuff happens when you try to work with the binary string directly.\n// It is known.\n// From http://stackoverflow.com/questions/14967647/ (continues on next line)\n// encode-decode-image-with-base64-breaks-image (2013-04-21)\nfunction _binStringToArrayBuffer(bin) {\n    var length = bin.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    for (var i = 0; i < length; i++) {\n        arr[i] = bin.charCodeAt(i);\n    }\n    return buf;\n}\n\n//\n// Blobs are not supported in all versions of IndexedDB, notably\n// Chrome <37 and Android <5. In those versions, storing a blob will throw.\n//\n// Various other blob bugs exist in Chrome v37-42 (inclusive).\n// Detecting them is expensive and confusing to users, and Chrome 37-42\n// is at very low usage worldwide, so we do a hacky userAgent check instead.\n//\n// content-type bug: https://code.google.com/p/chromium/issues/detail?id=408120\n// 404 bug: https://code.google.com/p/chromium/issues/detail?id=447916\n// FileReader bug: https://code.google.com/p/chromium/issues/detail?id=447836\n//\n// Code borrowed from PouchDB. See:\n// https://github.com/pouchdb/pouchdb/blob/master/packages/node_modules/pouchdb-adapter-idb/src/blobSupport.js\n//\nfunction _checkBlobSupportWithoutCaching(idb) {\n    return new Promise$1(function (resolve) {\n        var txn = idb.transaction(DETECT_BLOB_SUPPORT_STORE, READ_WRITE);\n        var blob = createBlob(['']);\n        txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, 'key');\n\n        txn.onabort = function (e) {\n            // If the transaction aborts now its due to not being able to\n            // write to the database, likely due to the disk being full\n            e.preventDefault();\n            e.stopPropagation();\n            resolve(false);\n        };\n\n        txn.oncomplete = function () {\n            var matchedChrome = navigator.userAgent.match(/Chrome\\/(\\d+)/);\n            var matchedEdge = navigator.userAgent.match(/Edge\\//);\n            // MS Edge pretends to be Chrome 42:\n            // https://msdn.microsoft.com/en-us/library/hh869301%28v=vs.85%29.aspx\n            resolve(matchedEdge || !matchedChrome || parseInt(matchedChrome[1], 10) >= 43);\n        };\n    })[\"catch\"](function () {\n        return false; // error, so assume unsupported\n    });\n}\n\nfunction _checkBlobSupport(idb) {\n    if (typeof supportsBlobs === 'boolean') {\n        return Promise$1.resolve(supportsBlobs);\n    }\n    return _checkBlobSupportWithoutCaching(idb).then(function (value) {\n        supportsBlobs = value;\n        return supportsBlobs;\n    });\n}\n\nfunction _deferReadiness(dbInfo) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Create a deferred object representing the current database operation.\n    var deferredOperation = {};\n\n    deferredOperation.promise = new Promise$1(function (resolve, reject) {\n        deferredOperation.resolve = resolve;\n        deferredOperation.reject = reject;\n    });\n\n    // Enqueue the deferred operation.\n    dbContext.deferredOperations.push(deferredOperation);\n\n    // Chain its promise to the database readiness.\n    if (!dbContext.dbReady) {\n        dbContext.dbReady = deferredOperation.promise;\n    } else {\n        dbContext.dbReady = dbContext.dbReady.then(function () {\n            return deferredOperation.promise;\n        });\n    }\n}\n\nfunction _advanceReadiness(dbInfo) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Dequeue a deferred operation.\n    var deferredOperation = dbContext.deferredOperations.pop();\n\n    // Resolve its promise (which is part of the database readiness\n    // chain of promises).\n    if (deferredOperation) {\n        deferredOperation.resolve();\n        return deferredOperation.promise;\n    }\n}\n\nfunction _rejectReadiness(dbInfo, err) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Dequeue a deferred operation.\n    var deferredOperation = dbContext.deferredOperations.pop();\n\n    // Reject its promise (which is part of the database readiness\n    // chain of promises).\n    if (deferredOperation) {\n        deferredOperation.reject(err);\n        return deferredOperation.promise;\n    }\n}\n\nfunction _getConnection(dbInfo, upgradeNeeded) {\n    return new Promise$1(function (resolve, reject) {\n        dbContexts[dbInfo.name] = dbContexts[dbInfo.name] || createDbContext();\n\n        if (dbInfo.db) {\n            if (upgradeNeeded) {\n                _deferReadiness(dbInfo);\n                dbInfo.db.close();\n            } else {\n                return resolve(dbInfo.db);\n            }\n        }\n\n        var dbArgs = [dbInfo.name];\n\n        if (upgradeNeeded) {\n            dbArgs.push(dbInfo.version);\n        }\n\n        var openreq = idb.open.apply(idb, dbArgs);\n\n        if (upgradeNeeded) {\n            openreq.onupgradeneeded = function (e) {\n                var db = openreq.result;\n                try {\n                    db.createObjectStore(dbInfo.storeName);\n                    if (e.oldVersion <= 1) {\n                        // Added when support for blob shims was added\n                        db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);\n                    }\n                } catch (ex) {\n                    if (ex.name === 'ConstraintError') {\n                        console.warn('The database \"' + dbInfo.name + '\"' + ' has been upgraded from version ' + e.oldVersion + ' to version ' + e.newVersion + ', but the storage \"' + dbInfo.storeName + '\" already exists.');\n                    } else {\n                        throw ex;\n                    }\n                }\n            };\n        }\n\n        openreq.onerror = function (e) {\n            e.preventDefault();\n            reject(openreq.error);\n        };\n\n        openreq.onsuccess = function () {\n            resolve(openreq.result);\n            _advanceReadiness(dbInfo);\n        };\n    });\n}\n\nfunction _getOriginalConnection(dbInfo) {\n    return _getConnection(dbInfo, false);\n}\n\nfunction _getUpgradedConnection(dbInfo) {\n    return _getConnection(dbInfo, true);\n}\n\nfunction _isUpgradeNeeded(dbInfo, defaultVersion) {\n    if (!dbInfo.db) {\n        return true;\n    }\n\n    var isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);\n    var isDowngrade = dbInfo.version < dbInfo.db.version;\n    var isUpgrade = dbInfo.version > dbInfo.db.version;\n\n    if (isDowngrade) {\n        // If the version is not the default one\n        // then warn for impossible downgrade.\n        if (dbInfo.version !== defaultVersion) {\n            console.warn('The database \"' + dbInfo.name + '\"' + \" can't be downgraded from version \" + dbInfo.db.version + ' to version ' + dbInfo.version + '.');\n        }\n        // Align the versions to prevent errors.\n        dbInfo.version = dbInfo.db.version;\n    }\n\n    if (isUpgrade || isNewStore) {\n        // If the store is new then increment the version (if needed).\n        // This will trigger an \"upgradeneeded\" event which is required\n        // for creating a store.\n        if (isNewStore) {\n            var incVersion = dbInfo.db.version + 1;\n            if (incVersion > dbInfo.version) {\n                dbInfo.version = incVersion;\n            }\n        }\n\n        return true;\n    }\n\n    return false;\n}\n\n// encode a blob for indexeddb engines that don't support blobs\nfunction _encodeBlob(blob) {\n    return new Promise$1(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onerror = reject;\n        reader.onloadend = function (e) {\n            var base64 = btoa(e.target.result || '');\n            resolve({\n                __local_forage_encoded_blob: true,\n                data: base64,\n                type: blob.type\n            });\n        };\n        reader.readAsBinaryString(blob);\n    });\n}\n\n// decode an encoded blob\nfunction _decodeBlob(encodedBlob) {\n    var arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));\n    return createBlob([arrayBuff], { type: encodedBlob.type });\n}\n\n// is this one of our fancy encoded blobs?\nfunction _isEncodedBlob(value) {\n    return value && value.__local_forage_encoded_blob;\n}\n\n// Specialize the default `ready()` function by making it dependent\n// on the current database operations. Thus, the driver will be actually\n// ready when it's been initialized (default) *and* there are no pending\n// operations on the database (initiated by some other instances).\nfunction _fullyReady(callback) {\n    var self = this;\n\n    var promise = self._initReady().then(function () {\n        var dbContext = dbContexts[self._dbInfo.name];\n\n        if (dbContext && dbContext.dbReady) {\n            return dbContext.dbReady;\n        }\n    });\n\n    executeTwoCallbacks(promise, callback, callback);\n    return promise;\n}\n\n// Try to establish a new db connection to replace the\n// current one which is broken (i.e. experiencing\n// InvalidStateError while creating a transaction).\nfunction _tryReconnect(dbInfo) {\n    _deferReadiness(dbInfo);\n\n    var dbContext = dbContexts[dbInfo.name];\n    var forages = dbContext.forages;\n\n    for (var i = 0; i < forages.length; i++) {\n        var forage = forages[i];\n        if (forage._dbInfo.db) {\n            forage._dbInfo.db.close();\n            forage._dbInfo.db = null;\n        }\n    }\n    dbInfo.db = null;\n\n    return _getOriginalConnection(dbInfo).then(function (db) {\n        dbInfo.db = db;\n        if (_isUpgradeNeeded(dbInfo)) {\n            // Reopen the database for upgrading.\n            return _getUpgradedConnection(dbInfo);\n        }\n        return db;\n    }).then(function (db) {\n        // store the latest db reference\n        // in case the db was upgraded\n        dbInfo.db = dbContext.db = db;\n        for (var i = 0; i < forages.length; i++) {\n            forages[i]._dbInfo.db = db;\n        }\n    })[\"catch\"](function (err) {\n        _rejectReadiness(dbInfo, err);\n        throw err;\n    });\n}\n\n// FF doesn't like Promises (micro-tasks) and IDDB store operations,\n// so we have to do it with callbacks\nfunction createTransaction(dbInfo, mode, callback, retries) {\n    if (retries === undefined) {\n        retries = 1;\n    }\n\n    try {\n        var tx = dbInfo.db.transaction(dbInfo.storeName, mode);\n        callback(null, tx);\n    } catch (err) {\n        if (retries > 0 && (!dbInfo.db || err.name === 'InvalidStateError' || err.name === 'NotFoundError')) {\n            return Promise$1.resolve().then(function () {\n                if (!dbInfo.db || err.name === 'NotFoundError' && !dbInfo.db.objectStoreNames.contains(dbInfo.storeName) && dbInfo.version <= dbInfo.db.version) {\n                    // increase the db version, to create the new ObjectStore\n                    if (dbInfo.db) {\n                        dbInfo.version = dbInfo.db.version + 1;\n                    }\n                    // Reopen the database for upgrading.\n                    return _getUpgradedConnection(dbInfo);\n                }\n            }).then(function () {\n                return _tryReconnect(dbInfo).then(function () {\n                    createTransaction(dbInfo, mode, callback, retries - 1);\n                });\n            })[\"catch\"](callback);\n        }\n\n        callback(err);\n    }\n}\n\nfunction createDbContext() {\n    return {\n        // Running localForages sharing a database.\n        forages: [],\n        // Shared database.\n        db: null,\n        // Database readiness (promise).\n        dbReady: null,\n        // Deferred operations on the database.\n        deferredOperations: []\n    };\n}\n\n// Open the IndexedDB database (automatically creates one if one didn't\n// previously exist), using any options set in the config.\nfunction _initStorage(options) {\n    var self = this;\n    var dbInfo = {\n        db: null\n    };\n\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = options[i];\n        }\n    }\n\n    // Get the current context of the database;\n    var dbContext = dbContexts[dbInfo.name];\n\n    // ...or create a new context.\n    if (!dbContext) {\n        dbContext = createDbContext();\n        // Register the new context in the global container.\n        dbContexts[dbInfo.name] = dbContext;\n    }\n\n    // Register itself as a running localForage in the current context.\n    dbContext.forages.push(self);\n\n    // Replace the default `ready()` function with the specialized one.\n    if (!self._initReady) {\n        self._initReady = self.ready;\n        self.ready = _fullyReady;\n    }\n\n    // Create an array of initialization states of the related localForages.\n    var initPromises = [];\n\n    function ignoreErrors() {\n        // Don't handle errors here,\n        // just makes sure related localForages aren't pending.\n        return Promise$1.resolve();\n    }\n\n    for (var j = 0; j < dbContext.forages.length; j++) {\n        var forage = dbContext.forages[j];\n        if (forage !== self) {\n            // Don't wait for itself...\n            initPromises.push(forage._initReady()[\"catch\"](ignoreErrors));\n        }\n    }\n\n    // Take a snapshot of the related localForages.\n    var forages = dbContext.forages.slice(0);\n\n    // Initialize the connection process only when\n    // all the related localForages aren't pending.\n    return Promise$1.all(initPromises).then(function () {\n        dbInfo.db = dbContext.db;\n        // Get the connection or open a new one without upgrade.\n        return _getOriginalConnection(dbInfo);\n    }).then(function (db) {\n        dbInfo.db = db;\n        if (_isUpgradeNeeded(dbInfo, self._defaultConfig.version)) {\n            // Reopen the database for upgrading.\n            return _getUpgradedConnection(dbInfo);\n        }\n        return db;\n    }).then(function (db) {\n        dbInfo.db = dbContext.db = db;\n        self._dbInfo = dbInfo;\n        // Share the final connection amongst related localForages.\n        for (var k = 0; k < forages.length; k++) {\n            var forage = forages[k];\n            if (forage !== self) {\n                // Self is already up-to-date.\n                forage._dbInfo.db = dbInfo.db;\n                forage._dbInfo.version = dbInfo.version;\n            }\n        }\n    });\n}\n\nfunction getItem(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.get(key);\n\n                    req.onsuccess = function () {\n                        var value = req.result;\n                        if (value === undefined) {\n                            value = null;\n                        }\n                        if (_isEncodedBlob(value)) {\n                            value = _decodeBlob(value);\n                        }\n                        resolve(value);\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Iterate over all items stored in database.\nfunction iterate(iterator, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.openCursor();\n                    var iterationNumber = 1;\n\n                    req.onsuccess = function () {\n                        var cursor = req.result;\n\n                        if (cursor) {\n                            var value = cursor.value;\n                            if (_isEncodedBlob(value)) {\n                                value = _decodeBlob(value);\n                            }\n                            var result = iterator(value, cursor.key, iterationNumber++);\n\n                            // when the iterator callback retuns any\n                            // (non-`undefined`) value, then we stop\n                            // the iteration immediately\n                            if (result !== void 0) {\n                                resolve(result);\n                            } else {\n                                cursor[\"continue\"]();\n                            }\n                        } else {\n                            resolve();\n                        }\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n\n    return promise;\n}\n\nfunction setItem(key, value, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        var dbInfo;\n        self.ready().then(function () {\n            dbInfo = self._dbInfo;\n            if (toString.call(value) === '[object Blob]') {\n                return _checkBlobSupport(dbInfo.db).then(function (blobSupport) {\n                    if (blobSupport) {\n                        return value;\n                    }\n                    return _encodeBlob(value);\n                });\n            }\n            return value;\n        }).then(function (value) {\n            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n\n                    // The reason we don't _save_ null is because IE 10 does\n                    // not support saving the `null` type in IndexedDB. How\n                    // ironic, given the bug below!\n                    // See: https://github.com/mozilla/localForage/issues/161\n                    if (value === null) {\n                        value = undefined;\n                    }\n\n                    var req = store.put(value, key);\n\n                    transaction.oncomplete = function () {\n                        // Cast to undefined so the value passed to\n                        // callback/promise is the same as what one would get out\n                        // of `getItem()` later. This leads to some weirdness\n                        // (setItem('foo', undefined) will return `null`), but\n                        // it's not my fault localStorage is our baseline and that\n                        // it's weird.\n                        if (value === undefined) {\n                            value = null;\n                        }\n\n                        resolve(value);\n                    };\n                    transaction.onabort = transaction.onerror = function () {\n                        var err = req.error ? req.error : req.transaction.error;\n                        reject(err);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction removeItem(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    // We use a Grunt task to make this safe for IE and some\n                    // versions of Android (including those used by Cordova).\n                    // Normally IE won't like `.delete()` and will insist on\n                    // using `['delete']()`, but we have a build step that\n                    // fixes this for us now.\n                    var req = store[\"delete\"](key);\n                    transaction.oncomplete = function () {\n                        resolve();\n                    };\n\n                    transaction.onerror = function () {\n                        reject(req.error);\n                    };\n\n                    // The request will be also be aborted if we've exceeded our storage\n                    // space.\n                    transaction.onabort = function () {\n                        var err = req.error ? req.error : req.transaction.error;\n                        reject(err);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction clear(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.clear();\n\n                    transaction.oncomplete = function () {\n                        resolve();\n                    };\n\n                    transaction.onabort = transaction.onerror = function () {\n                        var err = req.error ? req.error : req.transaction.error;\n                        reject(err);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction length(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.count();\n\n                    req.onsuccess = function () {\n                        resolve(req.result);\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction key(n, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        if (n < 0) {\n            resolve(null);\n\n            return;\n        }\n\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var advanced = false;\n                    var req = store.openCursor();\n\n                    req.onsuccess = function () {\n                        var cursor = req.result;\n                        if (!cursor) {\n                            // this means there weren't enough keys\n                            resolve(null);\n\n                            return;\n                        }\n\n                        if (n === 0) {\n                            // We have the first key, return it if that's what they\n                            // wanted.\n                            resolve(cursor.key);\n                        } else {\n                            if (!advanced) {\n                                // Otherwise, ask the cursor to skip ahead n\n                                // records.\n                                advanced = true;\n                                cursor.advance(n);\n                            } else {\n                                // When we get here, we've got the nth key.\n                                resolve(cursor.key);\n                            }\n                        }\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.openCursor();\n                    var keys = [];\n\n                    req.onsuccess = function () {\n                        var cursor = req.result;\n\n                        if (!cursor) {\n                            resolve(keys);\n                            return;\n                        }\n\n                        keys.push(cursor.key);\n                        cursor[\"continue\"]();\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction dropInstance(options, callback) {\n    callback = getCallback.apply(this, arguments);\n\n    var currentConfig = this.config();\n    options = typeof options !== 'function' && options || {};\n    if (!options.name) {\n        options.name = options.name || currentConfig.name;\n        options.storeName = options.storeName || currentConfig.storeName;\n    }\n\n    var self = this;\n    var promise;\n    if (!options.name) {\n        promise = Promise$1.reject('Invalid arguments');\n    } else {\n        var isCurrentDb = options.name === currentConfig.name && self._dbInfo.db;\n\n        var dbPromise = isCurrentDb ? Promise$1.resolve(self._dbInfo.db) : _getOriginalConnection(options).then(function (db) {\n            var dbContext = dbContexts[options.name];\n            var forages = dbContext.forages;\n            dbContext.db = db;\n            for (var i = 0; i < forages.length; i++) {\n                forages[i]._dbInfo.db = db;\n            }\n            return db;\n        });\n\n        if (!options.storeName) {\n            promise = dbPromise.then(function (db) {\n                _deferReadiness(options);\n\n                var dbContext = dbContexts[options.name];\n                var forages = dbContext.forages;\n\n                db.close();\n                for (var i = 0; i < forages.length; i++) {\n                    var forage = forages[i];\n                    forage._dbInfo.db = null;\n                }\n\n                var dropDBPromise = new Promise$1(function (resolve, reject) {\n                    var req = idb.deleteDatabase(options.name);\n\n                    req.onerror = req.onblocked = function (err) {\n                        var db = req.result;\n                        if (db) {\n                            db.close();\n                        }\n                        reject(err);\n                    };\n\n                    req.onsuccess = function () {\n                        var db = req.result;\n                        if (db) {\n                            db.close();\n                        }\n                        resolve(db);\n                    };\n                });\n\n                return dropDBPromise.then(function (db) {\n                    dbContext.db = db;\n                    for (var i = 0; i < forages.length; i++) {\n                        var _forage = forages[i];\n                        _advanceReadiness(_forage._dbInfo);\n                    }\n                })[\"catch\"](function (err) {\n                    (_rejectReadiness(options, err) || Promise$1.resolve())[\"catch\"](function () {});\n                    throw err;\n                });\n            });\n        } else {\n            promise = dbPromise.then(function (db) {\n                if (!db.objectStoreNames.contains(options.storeName)) {\n                    return;\n                }\n\n                var newVersion = db.version + 1;\n\n                _deferReadiness(options);\n\n                var dbContext = dbContexts[options.name];\n                var forages = dbContext.forages;\n\n                db.close();\n                for (var i = 0; i < forages.length; i++) {\n                    var forage = forages[i];\n                    forage._dbInfo.db = null;\n                    forage._dbInfo.version = newVersion;\n                }\n\n                var dropObjectPromise = new Promise$1(function (resolve, reject) {\n                    var req = idb.open(options.name, newVersion);\n\n                    req.onerror = function (err) {\n                        var db = req.result;\n                        db.close();\n                        reject(err);\n                    };\n\n                    req.onupgradeneeded = function () {\n                        var db = req.result;\n                        db.deleteObjectStore(options.storeName);\n                    };\n\n                    req.onsuccess = function () {\n                        var db = req.result;\n                        db.close();\n                        resolve(db);\n                    };\n                });\n\n                return dropObjectPromise.then(function (db) {\n                    dbContext.db = db;\n                    for (var j = 0; j < forages.length; j++) {\n                        var _forage2 = forages[j];\n                        _forage2._dbInfo.db = db;\n                        _advanceReadiness(_forage2._dbInfo);\n                    }\n                })[\"catch\"](function (err) {\n                    (_rejectReadiness(options, err) || Promise$1.resolve())[\"catch\"](function () {});\n                    throw err;\n                });\n            });\n        }\n    }\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar asyncStorage = {\n    _driver: 'asyncStorage',\n    _initStorage: _initStorage,\n    _support: isIndexedDBValid(),\n    iterate: iterate,\n    getItem: getItem,\n    setItem: setItem,\n    removeItem: removeItem,\n    clear: clear,\n    length: length,\n    key: key,\n    keys: keys,\n    dropInstance: dropInstance\n};\n\nfunction isWebSQLValid() {\n    return typeof openDatabase === 'function';\n}\n\n// Sadly, the best way to save binary data in WebSQL/localStorage is serializing\n// it to Base64, so this is how we store it to prevent very strange errors with less\n// verbose ways of binary <-> string data storage.\nvar BASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nvar BLOB_TYPE_PREFIX = '~~local_forage_type~';\nvar BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;\n\nvar SERIALIZED_MARKER = '__lfsc__:';\nvar SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;\n\n// OMG the serializations!\nvar TYPE_ARRAYBUFFER = 'arbf';\nvar TYPE_BLOB = 'blob';\nvar TYPE_INT8ARRAY = 'si08';\nvar TYPE_UINT8ARRAY = 'ui08';\nvar TYPE_UINT8CLAMPEDARRAY = 'uic8';\nvar TYPE_INT16ARRAY = 'si16';\nvar TYPE_INT32ARRAY = 'si32';\nvar TYPE_UINT16ARRAY = 'ur16';\nvar TYPE_UINT32ARRAY = 'ui32';\nvar TYPE_FLOAT32ARRAY = 'fl32';\nvar TYPE_FLOAT64ARRAY = 'fl64';\nvar TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;\n\nvar toString$1 = Object.prototype.toString;\n\nfunction stringToBuffer(serializedString) {\n    // Fill the string into a ArrayBuffer.\n    var bufferLength = serializedString.length * 0.75;\n    var len = serializedString.length;\n    var i;\n    var p = 0;\n    var encoded1, encoded2, encoded3, encoded4;\n\n    if (serializedString[serializedString.length - 1] === '=') {\n        bufferLength--;\n        if (serializedString[serializedString.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    var buffer = new ArrayBuffer(bufferLength);\n    var bytes = new Uint8Array(buffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = BASE_CHARS.indexOf(serializedString[i]);\n        encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);\n        encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);\n        encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);\n\n        /*jslint bitwise: true */\n        bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n        bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n        bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n    }\n    return buffer;\n}\n\n// Converts a buffer to a string to store, serialized, in the backend\n// storage library.\nfunction bufferToString(buffer) {\n    // base64-arraybuffer\n    var bytes = new Uint8Array(buffer);\n    var base64String = '';\n    var i;\n\n    for (i = 0; i < bytes.length; i += 3) {\n        /*jslint bitwise: true */\n        base64String += BASE_CHARS[bytes[i] >> 2];\n        base64String += BASE_CHARS[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];\n        base64String += BASE_CHARS[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];\n        base64String += BASE_CHARS[bytes[i + 2] & 63];\n    }\n\n    if (bytes.length % 3 === 2) {\n        base64String = base64String.substring(0, base64String.length - 1) + '=';\n    } else if (bytes.length % 3 === 1) {\n        base64String = base64String.substring(0, base64String.length - 2) + '==';\n    }\n\n    return base64String;\n}\n\n// Serialize a value, afterwards executing a callback (which usually\n// instructs the `setItem()` callback/promise to be executed). This is how\n// we store binary data with localStorage.\nfunction serialize(value, callback) {\n    var valueType = '';\n    if (value) {\n        valueType = toString$1.call(value);\n    }\n\n    // Cannot use `value instanceof ArrayBuffer` or such here, as these\n    // checks fail when running the tests using casper.js...\n    //\n    // TODO: See why those tests fail and use a better solution.\n    if (value && (valueType === '[object ArrayBuffer]' || value.buffer && toString$1.call(value.buffer) === '[object ArrayBuffer]')) {\n        // Convert binary arrays to a string and prefix the string with\n        // a special marker.\n        var buffer;\n        var marker = SERIALIZED_MARKER;\n\n        if (value instanceof ArrayBuffer) {\n            buffer = value;\n            marker += TYPE_ARRAYBUFFER;\n        } else {\n            buffer = value.buffer;\n\n            if (valueType === '[object Int8Array]') {\n                marker += TYPE_INT8ARRAY;\n            } else if (valueType === '[object Uint8Array]') {\n                marker += TYPE_UINT8ARRAY;\n            } else if (valueType === '[object Uint8ClampedArray]') {\n                marker += TYPE_UINT8CLAMPEDARRAY;\n            } else if (valueType === '[object Int16Array]') {\n                marker += TYPE_INT16ARRAY;\n            } else if (valueType === '[object Uint16Array]') {\n                marker += TYPE_UINT16ARRAY;\n            } else if (valueType === '[object Int32Array]') {\n                marker += TYPE_INT32ARRAY;\n            } else if (valueType === '[object Uint32Array]') {\n                marker += TYPE_UINT32ARRAY;\n            } else if (valueType === '[object Float32Array]') {\n                marker += TYPE_FLOAT32ARRAY;\n            } else if (valueType === '[object Float64Array]') {\n                marker += TYPE_FLOAT64ARRAY;\n            } else {\n                callback(new Error('Failed to get type for BinaryArray'));\n            }\n        }\n\n        callback(marker + bufferToString(buffer));\n    } else if (valueType === '[object Blob]') {\n        // Conver the blob to a binaryArray and then to a string.\n        var fileReader = new FileReader();\n\n        fileReader.onload = function () {\n            // Backwards-compatible prefix for the blob type.\n            var str = BLOB_TYPE_PREFIX + value.type + '~' + bufferToString(this.result);\n\n            callback(SERIALIZED_MARKER + TYPE_BLOB + str);\n        };\n\n        fileReader.readAsArrayBuffer(value);\n    } else {\n        try {\n            callback(JSON.stringify(value));\n        } catch (e) {\n            console.error(\"Couldn't convert value into a JSON string: \", value);\n\n            callback(null, e);\n        }\n    }\n}\n\n// Deserialize data we've inserted into a value column/field. We place\n// special markers into our strings to mark them as encoded; this isn't\n// as nice as a meta field, but it's the only sane thing we can do whilst\n// keeping localStorage support intact.\n//\n// Oftentimes this will just deserialize JSON content, but if we have a\n// special marker (SERIALIZED_MARKER, defined above), we will extract\n// some kind of arraybuffer/binary data/typed array out of the string.\nfunction deserialize(value) {\n    // If we haven't marked this string as being specially serialized (i.e.\n    // something other than serialized JSON), we can just return it and be\n    // done with it.\n    if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {\n        return JSON.parse(value);\n    }\n\n    // The following code deals with deserializing some kind of Blob or\n    // TypedArray. First we separate out the type of data we're dealing\n    // with from the data itself.\n    var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);\n    var type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);\n\n    var blobType;\n    // Backwards-compatible blob type serialization strategy.\n    // DBs created with older versions of localForage will simply not have the blob type.\n    if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {\n        var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);\n        blobType = matcher[1];\n        serializedString = serializedString.substring(matcher[0].length);\n    }\n    var buffer = stringToBuffer(serializedString);\n\n    // Return the right type based on the code/type set during\n    // serialization.\n    switch (type) {\n        case TYPE_ARRAYBUFFER:\n            return buffer;\n        case TYPE_BLOB:\n            return createBlob([buffer], { type: blobType });\n        case TYPE_INT8ARRAY:\n            return new Int8Array(buffer);\n        case TYPE_UINT8ARRAY:\n            return new Uint8Array(buffer);\n        case TYPE_UINT8CLAMPEDARRAY:\n            return new Uint8ClampedArray(buffer);\n        case TYPE_INT16ARRAY:\n            return new Int16Array(buffer);\n        case TYPE_UINT16ARRAY:\n            return new Uint16Array(buffer);\n        case TYPE_INT32ARRAY:\n            return new Int32Array(buffer);\n        case TYPE_UINT32ARRAY:\n            return new Uint32Array(buffer);\n        case TYPE_FLOAT32ARRAY:\n            return new Float32Array(buffer);\n        case TYPE_FLOAT64ARRAY:\n            return new Float64Array(buffer);\n        default:\n            throw new Error('Unkown type: ' + type);\n    }\n}\n\nvar localforageSerializer = {\n    serialize: serialize,\n    deserialize: deserialize,\n    stringToBuffer: stringToBuffer,\n    bufferToString: bufferToString\n};\n\n/*\n * Includes code from:\n *\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n\nfunction createDbTable(t, dbInfo, callback, errorCallback) {\n    t.executeSql('CREATE TABLE IF NOT EXISTS ' + dbInfo.storeName + ' ' + '(id INTEGER PRIMARY KEY, key unique, value)', [], callback, errorCallback);\n}\n\n// Open the WebSQL database (automatically creates one if one didn't\n// previously exist), using any options set in the config.\nfunction _initStorage$1(options) {\n    var self = this;\n    var dbInfo = {\n        db: null\n    };\n\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = typeof options[i] !== 'string' ? options[i].toString() : options[i];\n        }\n    }\n\n    var dbInfoPromise = new Promise$1(function (resolve, reject) {\n        // Open the database; the openDatabase API will automatically\n        // create it for us if it doesn't exist.\n        try {\n            dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);\n        } catch (e) {\n            return reject(e);\n        }\n\n        // Create our key/value table if it doesn't exist.\n        dbInfo.db.transaction(function (t) {\n            createDbTable(t, dbInfo, function () {\n                self._dbInfo = dbInfo;\n                resolve();\n            }, function (t, error) {\n                reject(error);\n            });\n        }, reject);\n    });\n\n    dbInfo.serializer = localforageSerializer;\n    return dbInfoPromise;\n}\n\nfunction tryExecuteSql(t, dbInfo, sqlStatement, args, callback, errorCallback) {\n    t.executeSql(sqlStatement, args, callback, function (t, error) {\n        if (error.code === error.SYNTAX_ERR) {\n            t.executeSql('SELECT name FROM sqlite_master ' + \"WHERE type='table' AND name = ?\", [dbInfo.storeName], function (t, results) {\n                if (!results.rows.length) {\n                    // if the table is missing (was deleted)\n                    // re-create it table and retry\n                    createDbTable(t, dbInfo, function () {\n                        t.executeSql(sqlStatement, args, callback, errorCallback);\n                    }, errorCallback);\n                } else {\n                    errorCallback(t, error);\n                }\n            }, errorCallback);\n        } else {\n            errorCallback(t, error);\n        }\n    }, errorCallback);\n}\n\nfunction getItem$1(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'SELECT * FROM ' + dbInfo.storeName + ' WHERE key = ? LIMIT 1', [key], function (t, results) {\n                    var result = results.rows.length ? results.rows.item(0).value : null;\n\n                    // Check to see if this is serialized content we need to\n                    // unpack.\n                    if (result) {\n                        result = dbInfo.serializer.deserialize(result);\n                    }\n\n                    resolve(result);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction iterate$1(iterator, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'SELECT * FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var rows = results.rows;\n                    var length = rows.length;\n\n                    for (var i = 0; i < length; i++) {\n                        var item = rows.item(i);\n                        var result = item.value;\n\n                        // Check to see if this is serialized content\n                        // we need to unpack.\n                        if (result) {\n                            result = dbInfo.serializer.deserialize(result);\n                        }\n\n                        result = iterator(result, item.key, i + 1);\n\n                        // void(0) prevents problems with redefinition\n                        // of `undefined`.\n                        if (result !== void 0) {\n                            resolve(result);\n                            return;\n                        }\n                    }\n\n                    resolve();\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction _setItem(key, value, callback, retriesLeft) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            // The localStorage API doesn't return undefined values in an\n            // \"expected\" way, so undefined is always cast to null in all\n            // drivers. See: https://github.com/mozilla/localForage/pull/42\n            if (value === undefined) {\n                value = null;\n            }\n\n            // Save the original value to pass to the callback.\n            var originalValue = value;\n\n            var dbInfo = self._dbInfo;\n            dbInfo.serializer.serialize(value, function (value, error) {\n                if (error) {\n                    reject(error);\n                } else {\n                    dbInfo.db.transaction(function (t) {\n                        tryExecuteSql(t, dbInfo, 'INSERT OR REPLACE INTO ' + dbInfo.storeName + ' ' + '(key, value) VALUES (?, ?)', [key, value], function () {\n                            resolve(originalValue);\n                        }, function (t, error) {\n                            reject(error);\n                        });\n                    }, function (sqlError) {\n                        // The transaction failed; check\n                        // to see if it's a quota error.\n                        if (sqlError.code === sqlError.QUOTA_ERR) {\n                            // We reject the callback outright for now, but\n                            // it's worth trying to re-run the transaction.\n                            // Even if the user accepts the prompt to use\n                            // more storage on Safari, this error will\n                            // be called.\n                            //\n                            // Try to re-run the transaction.\n                            if (retriesLeft > 0) {\n                                resolve(_setItem.apply(self, [key, originalValue, callback, retriesLeft - 1]));\n                                return;\n                            }\n                            reject(sqlError);\n                        }\n                    });\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction setItem$1(key, value, callback) {\n    return _setItem.apply(this, [key, value, callback, 1]);\n}\n\nfunction removeItem$1(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'DELETE FROM ' + dbInfo.storeName + ' WHERE key = ?', [key], function () {\n                    resolve();\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Deletes every item in the table.\n// TODO: Find out if this resets the AUTO_INCREMENT number.\nfunction clear$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'DELETE FROM ' + dbInfo.storeName, [], function () {\n                    resolve();\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Does a simple `COUNT(key)` to get the number of items stored in\n// localForage.\nfunction length$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                // Ahhh, SQL makes this one soooooo easy.\n                tryExecuteSql(t, dbInfo, 'SELECT COUNT(key) as c FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var result = results.rows.item(0).c;\n                    resolve(result);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Return the key located at key index X; essentially gets the key from a\n// `WHERE id = ?`. This is the most efficient way I can think to implement\n// this rarely-used (in my experience) part of the API, but it can seem\n// inconsistent, because we do `INSERT OR REPLACE INTO` on `setItem()`, so\n// the ID of each key will change every time it's updated. Perhaps a stored\n// procedure for the `setItem()` SQL would solve this problem?\n// TODO: Don't change ID on `setItem()`.\nfunction key$1(n, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'SELECT key FROM ' + dbInfo.storeName + ' WHERE id = ? LIMIT 1', [n + 1], function (t, results) {\n                    var result = results.rows.length ? results.rows.item(0).key : null;\n                    resolve(result);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'SELECT key FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var keys = [];\n\n                    for (var i = 0; i < results.rows.length; i++) {\n                        keys.push(results.rows.item(i).key);\n                    }\n\n                    resolve(keys);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// https://www.w3.org/TR/webdatabase/#databases\n// > There is no way to enumerate or delete the databases available for an origin from this API.\nfunction getAllStoreNames(db) {\n    return new Promise$1(function (resolve, reject) {\n        db.transaction(function (t) {\n            t.executeSql('SELECT name FROM sqlite_master ' + \"WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'\", [], function (t, results) {\n                var storeNames = [];\n\n                for (var i = 0; i < results.rows.length; i++) {\n                    storeNames.push(results.rows.item(i).name);\n                }\n\n                resolve({\n                    db: db,\n                    storeNames: storeNames\n                });\n            }, function (t, error) {\n                reject(error);\n            });\n        }, function (sqlError) {\n            reject(sqlError);\n        });\n    });\n}\n\nfunction dropInstance$1(options, callback) {\n    callback = getCallback.apply(this, arguments);\n\n    var currentConfig = this.config();\n    options = typeof options !== 'function' && options || {};\n    if (!options.name) {\n        options.name = options.name || currentConfig.name;\n        options.storeName = options.storeName || currentConfig.storeName;\n    }\n\n    var self = this;\n    var promise;\n    if (!options.name) {\n        promise = Promise$1.reject('Invalid arguments');\n    } else {\n        promise = new Promise$1(function (resolve) {\n            var db;\n            if (options.name === currentConfig.name) {\n                // use the db reference of the current instance\n                db = self._dbInfo.db;\n            } else {\n                db = openDatabase(options.name, '', '', 0);\n            }\n\n            if (!options.storeName) {\n                // drop all database tables\n                resolve(getAllStoreNames(db));\n            } else {\n                resolve({\n                    db: db,\n                    storeNames: [options.storeName]\n                });\n            }\n        }).then(function (operationInfo) {\n            return new Promise$1(function (resolve, reject) {\n                operationInfo.db.transaction(function (t) {\n                    function dropTable(storeName) {\n                        return new Promise$1(function (resolve, reject) {\n                            t.executeSql('DROP TABLE IF EXISTS ' + storeName, [], function () {\n                                resolve();\n                            }, function (t, error) {\n                                reject(error);\n                            });\n                        });\n                    }\n\n                    var operations = [];\n                    for (var i = 0, len = operationInfo.storeNames.length; i < len; i++) {\n                        operations.push(dropTable(operationInfo.storeNames[i]));\n                    }\n\n                    Promise$1.all(operations).then(function () {\n                        resolve();\n                    })[\"catch\"](function (e) {\n                        reject(e);\n                    });\n                }, function (sqlError) {\n                    reject(sqlError);\n                });\n            });\n        });\n    }\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar webSQLStorage = {\n    _driver: 'webSQLStorage',\n    _initStorage: _initStorage$1,\n    _support: isWebSQLValid(),\n    iterate: iterate$1,\n    getItem: getItem$1,\n    setItem: setItem$1,\n    removeItem: removeItem$1,\n    clear: clear$1,\n    length: length$1,\n    key: key$1,\n    keys: keys$1,\n    dropInstance: dropInstance$1\n};\n\nfunction isLocalStorageValid() {\n    try {\n        return typeof localStorage !== 'undefined' && 'setItem' in localStorage &&\n        // in IE8 typeof localStorage.setItem === 'object'\n        !!localStorage.setItem;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction _getKeyPrefix(options, defaultConfig) {\n    var keyPrefix = options.name + '/';\n\n    if (options.storeName !== defaultConfig.storeName) {\n        keyPrefix += options.storeName + '/';\n    }\n    return keyPrefix;\n}\n\n// Check if localStorage throws when saving an item\nfunction checkIfLocalStorageThrows() {\n    var localStorageTestKey = '_localforage_support_test';\n\n    try {\n        localStorage.setItem(localStorageTestKey, true);\n        localStorage.removeItem(localStorageTestKey);\n\n        return false;\n    } catch (e) {\n        return true;\n    }\n}\n\n// Check if localStorage is usable and allows to save an item\n// This method checks if localStorage is usable in Safari Private Browsing\n// mode, or in any other case where the available quota for localStorage\n// is 0 and there wasn't any saved items yet.\nfunction _isLocalStorageUsable() {\n    return !checkIfLocalStorageThrows() || localStorage.length > 0;\n}\n\n// Config the localStorage backend, using options set in the config.\nfunction _initStorage$2(options) {\n    var self = this;\n    var dbInfo = {};\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = options[i];\n        }\n    }\n\n    dbInfo.keyPrefix = _getKeyPrefix(options, self._defaultConfig);\n\n    if (!_isLocalStorageUsable()) {\n        return Promise$1.reject();\n    }\n\n    self._dbInfo = dbInfo;\n    dbInfo.serializer = localforageSerializer;\n\n    return Promise$1.resolve();\n}\n\n// Remove all keys from the datastore, effectively destroying all data in\n// the app's key/value store!\nfunction clear$2(callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var keyPrefix = self._dbInfo.keyPrefix;\n\n        for (var i = localStorage.length - 1; i >= 0; i--) {\n            var key = localStorage.key(i);\n\n            if (key.indexOf(keyPrefix) === 0) {\n                localStorage.removeItem(key);\n            }\n        }\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Retrieve an item from the store. Unlike the original async_storage\n// library in Gaia, we don't modify return values at all. If a key's value\n// is `undefined`, we pass that value to the callback function.\nfunction getItem$2(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var result = localStorage.getItem(dbInfo.keyPrefix + key);\n\n        // If a result was found, parse it from the serialized\n        // string into a JS object. If result isn't truthy, the key\n        // is likely undefined and we'll pass it straight to the\n        // callback.\n        if (result) {\n            result = dbInfo.serializer.deserialize(result);\n        }\n\n        return result;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Iterate over all items in the store.\nfunction iterate$2(iterator, callback) {\n    var self = this;\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var keyPrefix = dbInfo.keyPrefix;\n        var keyPrefixLength = keyPrefix.length;\n        var length = localStorage.length;\n\n        // We use a dedicated iterator instead of the `i` variable below\n        // so other keys we fetch in localStorage aren't counted in\n        // the `iterationNumber` argument passed to the `iterate()`\n        // callback.\n        //\n        // See: github.com/mozilla/localForage/pull/435#discussion_r38061530\n        var iterationNumber = 1;\n\n        for (var i = 0; i < length; i++) {\n            var key = localStorage.key(i);\n            if (key.indexOf(keyPrefix) !== 0) {\n                continue;\n            }\n            var value = localStorage.getItem(key);\n\n            // If a result was found, parse it from the serialized\n            // string into a JS object. If result isn't truthy, the\n            // key is likely undefined and we'll pass it straight\n            // to the iterator.\n            if (value) {\n                value = dbInfo.serializer.deserialize(value);\n            }\n\n            value = iterator(value, key.substring(keyPrefixLength), iterationNumber++);\n\n            if (value !== void 0) {\n                return value;\n            }\n        }\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Same as localStorage's key() method, except takes a callback.\nfunction key$2(n, callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var result;\n        try {\n            result = localStorage.key(n);\n        } catch (error) {\n            result = null;\n        }\n\n        // Remove the prefix from the key, if a key is found.\n        if (result) {\n            result = result.substring(dbInfo.keyPrefix.length);\n        }\n\n        return result;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys$2(callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var length = localStorage.length;\n        var keys = [];\n\n        for (var i = 0; i < length; i++) {\n            var itemKey = localStorage.key(i);\n            if (itemKey.indexOf(dbInfo.keyPrefix) === 0) {\n                keys.push(itemKey.substring(dbInfo.keyPrefix.length));\n            }\n        }\n\n        return keys;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Supply the number of keys in the datastore to the callback function.\nfunction length$2(callback) {\n    var self = this;\n    var promise = self.keys().then(function (keys) {\n        return keys.length;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Remove an item from the store, nice and simple.\nfunction removeItem$2(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        localStorage.removeItem(dbInfo.keyPrefix + key);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Set a key's value and run an optional callback once the value is set.\n// Unlike Gaia's implementation, the callback function is passed the value,\n// in case you want to operate on that value only after you're sure it\n// saved, or something like that.\nfunction setItem$2(key, value, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = self.ready().then(function () {\n        // Convert undefined values to null.\n        // https://github.com/mozilla/localForage/pull/42\n        if (value === undefined) {\n            value = null;\n        }\n\n        // Save the original value to pass to the callback.\n        var originalValue = value;\n\n        return new Promise$1(function (resolve, reject) {\n            var dbInfo = self._dbInfo;\n            dbInfo.serializer.serialize(value, function (value, error) {\n                if (error) {\n                    reject(error);\n                } else {\n                    try {\n                        localStorage.setItem(dbInfo.keyPrefix + key, value);\n                        resolve(originalValue);\n                    } catch (e) {\n                        // localStorage capacity exceeded.\n                        // TODO: Make this a specific error/event.\n                        if (e.name === 'QuotaExceededError' || e.name === 'NS_ERROR_DOM_QUOTA_REACHED') {\n                            reject(e);\n                        }\n                        reject(e);\n                    }\n                }\n            });\n        });\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction dropInstance$2(options, callback) {\n    callback = getCallback.apply(this, arguments);\n\n    options = typeof options !== 'function' && options || {};\n    if (!options.name) {\n        var currentConfig = this.config();\n        options.name = options.name || currentConfig.name;\n        options.storeName = options.storeName || currentConfig.storeName;\n    }\n\n    var self = this;\n    var promise;\n    if (!options.name) {\n        promise = Promise$1.reject('Invalid arguments');\n    } else {\n        promise = new Promise$1(function (resolve) {\n            if (!options.storeName) {\n                resolve(options.name + '/');\n            } else {\n                resolve(_getKeyPrefix(options, self._defaultConfig));\n            }\n        }).then(function (keyPrefix) {\n            for (var i = localStorage.length - 1; i >= 0; i--) {\n                var key = localStorage.key(i);\n\n                if (key.indexOf(keyPrefix) === 0) {\n                    localStorage.removeItem(key);\n                }\n            }\n        });\n    }\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar localStorageWrapper = {\n    _driver: 'localStorageWrapper',\n    _initStorage: _initStorage$2,\n    _support: isLocalStorageValid(),\n    iterate: iterate$2,\n    getItem: getItem$2,\n    setItem: setItem$2,\n    removeItem: removeItem$2,\n    clear: clear$2,\n    length: length$2,\n    key: key$2,\n    keys: keys$2,\n    dropInstance: dropInstance$2\n};\n\nvar sameValue = function sameValue(x, y) {\n    return x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);\n};\n\nvar includes = function includes(array, searchElement) {\n    var len = array.length;\n    var i = 0;\n    while (i < len) {\n        if (sameValue(array[i], searchElement)) {\n            return true;\n        }\n        i++;\n    }\n\n    return false;\n};\n\nvar isArray = Array.isArray || function (arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n};\n\n// Drivers are stored here when `defineDriver()` is called.\n// They are shared across all instances of localForage.\nvar DefinedDrivers = {};\n\nvar DriverSupport = {};\n\nvar DefaultDrivers = {\n    INDEXEDDB: asyncStorage,\n    WEBSQL: webSQLStorage,\n    LOCALSTORAGE: localStorageWrapper\n};\n\nvar DefaultDriverOrder = [DefaultDrivers.INDEXEDDB._driver, DefaultDrivers.WEBSQL._driver, DefaultDrivers.LOCALSTORAGE._driver];\n\nvar OptionalDriverMethods = ['dropInstance'];\n\nvar LibraryMethods = ['clear', 'getItem', 'iterate', 'key', 'keys', 'length', 'removeItem', 'setItem'].concat(OptionalDriverMethods);\n\nvar DefaultConfig = {\n    description: '',\n    driver: DefaultDriverOrder.slice(),\n    name: 'localforage',\n    // Default DB size is _JUST UNDER_ 5MB, as it's the highest size\n    // we can use without a prompt.\n    size: 4980736,\n    storeName: 'keyvaluepairs',\n    version: 1.0\n};\n\nfunction callWhenReady(localForageInstance, libraryMethod) {\n    localForageInstance[libraryMethod] = function () {\n        var _args = arguments;\n        return localForageInstance.ready().then(function () {\n            return localForageInstance[libraryMethod].apply(localForageInstance, _args);\n        });\n    };\n}\n\nfunction extend() {\n    for (var i = 1; i < arguments.length; i++) {\n        var arg = arguments[i];\n\n        if (arg) {\n            for (var _key in arg) {\n                if (arg.hasOwnProperty(_key)) {\n                    if (isArray(arg[_key])) {\n                        arguments[0][_key] = arg[_key].slice();\n                    } else {\n                        arguments[0][_key] = arg[_key];\n                    }\n                }\n            }\n        }\n    }\n\n    return arguments[0];\n}\n\nvar LocalForage = function () {\n    function LocalForage(options) {\n        _classCallCheck(this, LocalForage);\n\n        for (var driverTypeKey in DefaultDrivers) {\n            if (DefaultDrivers.hasOwnProperty(driverTypeKey)) {\n                var driver = DefaultDrivers[driverTypeKey];\n                var driverName = driver._driver;\n                this[driverTypeKey] = driverName;\n\n                if (!DefinedDrivers[driverName]) {\n                    // we don't need to wait for the promise,\n                    // since the default drivers can be defined\n                    // in a blocking manner\n                    this.defineDriver(driver);\n                }\n            }\n        }\n\n        this._defaultConfig = extend({}, DefaultConfig);\n        this._config = extend({}, this._defaultConfig, options);\n        this._driverSet = null;\n        this._initDriver = null;\n        this._ready = false;\n        this._dbInfo = null;\n\n        this._wrapLibraryMethodsWithReady();\n        this.setDriver(this._config.driver)[\"catch\"](function () {});\n    }\n\n    // Set any config values for localForage; can be called anytime before\n    // the first API call (e.g. `getItem`, `setItem`).\n    // We loop through options so we don't overwrite existing config\n    // values.\n\n\n    LocalForage.prototype.config = function config(options) {\n        // If the options argument is an object, we use it to set values.\n        // Otherwise, we return either a specified config value or all\n        // config values.\n        if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n            // If localforage is ready and fully initialized, we can't set\n            // any new configuration values. Instead, we return an error.\n            if (this._ready) {\n                return new Error(\"Can't call config() after localforage \" + 'has been used.');\n            }\n\n            for (var i in options) {\n                if (i === 'storeName') {\n                    options[i] = options[i].replace(/\\W/g, '_');\n                }\n\n                if (i === 'version' && typeof options[i] !== 'number') {\n                    return new Error('Database version must be a number.');\n                }\n\n                this._config[i] = options[i];\n            }\n\n            // after all config options are set and\n            // the driver option is used, try setting it\n            if ('driver' in options && options.driver) {\n                return this.setDriver(this._config.driver);\n            }\n\n            return true;\n        } else if (typeof options === 'string') {\n            return this._config[options];\n        } else {\n            return this._config;\n        }\n    };\n\n    // Used to define a custom driver, shared across all instances of\n    // localForage.\n\n\n    LocalForage.prototype.defineDriver = function defineDriver(driverObject, callback, errorCallback) {\n        var promise = new Promise$1(function (resolve, reject) {\n            try {\n                var driverName = driverObject._driver;\n                var complianceError = new Error('Custom driver not compliant; see ' + 'https://mozilla.github.io/localForage/#definedriver');\n\n                // A driver name should be defined and not overlap with the\n                // library-defined, default drivers.\n                if (!driverObject._driver) {\n                    reject(complianceError);\n                    return;\n                }\n\n                var driverMethods = LibraryMethods.concat('_initStorage');\n                for (var i = 0, len = driverMethods.length; i < len; i++) {\n                    var driverMethodName = driverMethods[i];\n\n                    // when the property is there,\n                    // it should be a method even when optional\n                    var isRequired = !includes(OptionalDriverMethods, driverMethodName);\n                    if ((isRequired || driverObject[driverMethodName]) && typeof driverObject[driverMethodName] !== 'function') {\n                        reject(complianceError);\n                        return;\n                    }\n                }\n\n                var configureMissingMethods = function configureMissingMethods() {\n                    var methodNotImplementedFactory = function methodNotImplementedFactory(methodName) {\n                        return function () {\n                            var error = new Error('Method ' + methodName + ' is not implemented by the current driver');\n                            var promise = Promise$1.reject(error);\n                            executeCallback(promise, arguments[arguments.length - 1]);\n                            return promise;\n                        };\n                    };\n\n                    for (var _i = 0, _len = OptionalDriverMethods.length; _i < _len; _i++) {\n                        var optionalDriverMethod = OptionalDriverMethods[_i];\n                        if (!driverObject[optionalDriverMethod]) {\n                            driverObject[optionalDriverMethod] = methodNotImplementedFactory(optionalDriverMethod);\n                        }\n                    }\n                };\n\n                configureMissingMethods();\n\n                var setDriverSupport = function setDriverSupport(support) {\n                    if (DefinedDrivers[driverName]) {\n                        console.info('Redefining LocalForage driver: ' + driverName);\n                    }\n                    DefinedDrivers[driverName] = driverObject;\n                    DriverSupport[driverName] = support;\n                    // don't use a then, so that we can define\n                    // drivers that have simple _support methods\n                    // in a blocking manner\n                    resolve();\n                };\n\n                if ('_support' in driverObject) {\n                    if (driverObject._support && typeof driverObject._support === 'function') {\n                        driverObject._support().then(setDriverSupport, reject);\n                    } else {\n                        setDriverSupport(!!driverObject._support);\n                    }\n                } else {\n                    setDriverSupport(true);\n                }\n            } catch (e) {\n                reject(e);\n            }\n        });\n\n        executeTwoCallbacks(promise, callback, errorCallback);\n        return promise;\n    };\n\n    LocalForage.prototype.driver = function driver() {\n        return this._driver || null;\n    };\n\n    LocalForage.prototype.getDriver = function getDriver(driverName, callback, errorCallback) {\n        var getDriverPromise = DefinedDrivers[driverName] ? Promise$1.resolve(DefinedDrivers[driverName]) : Promise$1.reject(new Error('Driver not found.'));\n\n        executeTwoCallbacks(getDriverPromise, callback, errorCallback);\n        return getDriverPromise;\n    };\n\n    LocalForage.prototype.getSerializer = function getSerializer(callback) {\n        var serializerPromise = Promise$1.resolve(localforageSerializer);\n        executeTwoCallbacks(serializerPromise, callback);\n        return serializerPromise;\n    };\n\n    LocalForage.prototype.ready = function ready(callback) {\n        var self = this;\n\n        var promise = self._driverSet.then(function () {\n            if (self._ready === null) {\n                self._ready = self._initDriver();\n            }\n\n            return self._ready;\n        });\n\n        executeTwoCallbacks(promise, callback, callback);\n        return promise;\n    };\n\n    LocalForage.prototype.setDriver = function setDriver(drivers, callback, errorCallback) {\n        var self = this;\n\n        if (!isArray(drivers)) {\n            drivers = [drivers];\n        }\n\n        var supportedDrivers = this._getSupportedDrivers(drivers);\n\n        function setDriverToConfig() {\n            self._config.driver = self.driver();\n        }\n\n        function extendSelfWithDriver(driver) {\n            self._extend(driver);\n            setDriverToConfig();\n\n            self._ready = self._initStorage(self._config);\n            return self._ready;\n        }\n\n        function initDriver(supportedDrivers) {\n            return function () {\n                var currentDriverIndex = 0;\n\n                function driverPromiseLoop() {\n                    while (currentDriverIndex < supportedDrivers.length) {\n                        var driverName = supportedDrivers[currentDriverIndex];\n                        currentDriverIndex++;\n\n                        self._dbInfo = null;\n                        self._ready = null;\n\n                        return self.getDriver(driverName).then(extendSelfWithDriver)[\"catch\"](driverPromiseLoop);\n                    }\n\n                    setDriverToConfig();\n                    var error = new Error('No available storage method found.');\n                    self._driverSet = Promise$1.reject(error);\n                    return self._driverSet;\n                }\n\n                return driverPromiseLoop();\n            };\n        }\n\n        // There might be a driver initialization in progress\n        // so wait for it to finish in order to avoid a possible\n        // race condition to set _dbInfo\n        var oldDriverSetDone = this._driverSet !== null ? this._driverSet[\"catch\"](function () {\n            return Promise$1.resolve();\n        }) : Promise$1.resolve();\n\n        this._driverSet = oldDriverSetDone.then(function () {\n            var driverName = supportedDrivers[0];\n            self._dbInfo = null;\n            self._ready = null;\n\n            return self.getDriver(driverName).then(function (driver) {\n                self._driver = driver._driver;\n                setDriverToConfig();\n                self._wrapLibraryMethodsWithReady();\n                self._initDriver = initDriver(supportedDrivers);\n            });\n        })[\"catch\"](function () {\n            setDriverToConfig();\n            var error = new Error('No available storage method found.');\n            self._driverSet = Promise$1.reject(error);\n            return self._driverSet;\n        });\n\n        executeTwoCallbacks(this._driverSet, callback, errorCallback);\n        return this._driverSet;\n    };\n\n    LocalForage.prototype.supports = function supports(driverName) {\n        return !!DriverSupport[driverName];\n    };\n\n    LocalForage.prototype._extend = function _extend(libraryMethodsAndProperties) {\n        extend(this, libraryMethodsAndProperties);\n    };\n\n    LocalForage.prototype._getSupportedDrivers = function _getSupportedDrivers(drivers) {\n        var supportedDrivers = [];\n        for (var i = 0, len = drivers.length; i < len; i++) {\n            var driverName = drivers[i];\n            if (this.supports(driverName)) {\n                supportedDrivers.push(driverName);\n            }\n        }\n        return supportedDrivers;\n    };\n\n    LocalForage.prototype._wrapLibraryMethodsWithReady = function _wrapLibraryMethodsWithReady() {\n        // Add a stub for each driver API method that delays the call to the\n        // corresponding driver method until localForage is ready. These stubs\n        // will be replaced by the driver methods as soon as the driver is\n        // loaded, so there is no performance impact.\n        for (var i = 0, len = LibraryMethods.length; i < len; i++) {\n            callWhenReady(this, LibraryMethods[i]);\n        }\n    };\n\n    LocalForage.prototype.createInstance = function createInstance(options) {\n        return new LocalForage(options);\n    };\n\n    return LocalForage;\n}();\n\n// The actual localForage object that we expose as a module or via a\n// global. It's extended by pulling in one of our other libraries.\n\n\nvar localforage_js = new LocalForage();\n\nmodule.exports = localforage_js;\n\n},{\"3\":3}]},{},[4])(4)\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],10:[function(require,module,exports){\n(function (global){\n\n/* **********************************************\n     Begin prism-core.js\n********************************************** */\n\nvar _self = (typeof window !== 'undefined')\n\t? window   // if in browser\n\t: (\n\t\t(typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope)\n\t\t? self // if in worker\n\t\t: {}   // if in node js\n\t);\n\n/**\n * Prism: Lightweight, robust, elegant syntax highlighting\n * MIT license http://www.opensource.org/licenses/mit-license.php/\n * @author Lea Verou http://lea.verou.me\n */\n\nvar Prism = (function (_self){\n\n// Private helper vars\nvar lang = /\\blang(?:uage)?-([\\w-]+)\\b/i;\nvar uniqueId = 0;\n\nvar _ = {\n\tmanual: _self.Prism && _self.Prism.manual,\n\tdisableWorkerMessageHandler: _self.Prism && _self.Prism.disableWorkerMessageHandler,\n\tutil: {\n\t\tencode: function (tokens) {\n\t\t\tif (tokens instanceof Token) {\n\t\t\t\treturn new Token(tokens.type, _.util.encode(tokens.content), tokens.alias);\n\t\t\t} else if (Array.isArray(tokens)) {\n\t\t\t\treturn tokens.map(_.util.encode);\n\t\t\t} else {\n\t\t\t\treturn tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\\u00a0/g, ' ');\n\t\t\t}\n\t\t},\n\n\t\ttype: function (o) {\n\t\t\treturn Object.prototype.toString.call(o).slice(8, -1);\n\t\t},\n\n\t\tobjId: function (obj) {\n\t\t\tif (!obj['__id']) {\n\t\t\t\tObject.defineProperty(obj, '__id', { value: ++uniqueId });\n\t\t\t}\n\t\t\treturn obj['__id'];\n\t\t},\n\n\t\t// Deep clone a language definition (e.g. to extend it)\n\t\tclone: function deepClone(o, visited) {\n\t\t\tvar clone, id, type = _.util.type(o);\n\t\t\tvisited = visited || {};\n\n\t\t\tswitch (type) {\n\t\t\t\tcase 'Object':\n\t\t\t\t\tid = _.util.objId(o);\n\t\t\t\t\tif (visited[id]) {\n\t\t\t\t\t\treturn visited[id];\n\t\t\t\t\t}\n\t\t\t\t\tclone = {};\n\t\t\t\t\tvisited[id] = clone;\n\n\t\t\t\t\tfor (var key in o) {\n\t\t\t\t\t\tif (o.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tclone[key] = deepClone(o[key], visited);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn clone;\n\n\t\t\t\tcase 'Array':\n\t\t\t\t\tid = _.util.objId(o);\n\t\t\t\t\tif (visited[id]) {\n\t\t\t\t\t\treturn visited[id];\n\t\t\t\t\t}\n\t\t\t\t\tclone = [];\n\t\t\t\t\tvisited[id] = clone;\n\n\t\t\t\t\to.forEach(function (v, i) {\n\t\t\t\t\t\tclone[i] = deepClone(v, visited);\n\t\t\t\t\t});\n\n\t\t\t\t\treturn clone;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn o;\n\t\t\t}\n\t\t}\n\t},\n\n\tlanguages: {\n\t\textend: function (id, redef) {\n\t\t\tvar lang = _.util.clone(_.languages[id]);\n\n\t\t\tfor (var key in redef) {\n\t\t\t\tlang[key] = redef[key];\n\t\t\t}\n\n\t\t\treturn lang;\n\t\t},\n\n\t\t/**\n\t\t * Insert a token before another token in a language literal\n\t\t * As this needs to recreate the object (we cannot actually insert before keys in object literals),\n\t\t * we cannot just provide an object, we need an object and a key.\n\t\t * @param inside The key (or language id) of the parent\n\t\t * @param before The key to insert before.\n\t\t * @param insert Object with the key/value pairs to insert\n\t\t * @param root The object that contains `inside`. If equal to Prism.languages, it can be omitted.\n\t\t */\n\t\tinsertBefore: function (inside, before, insert, root) {\n\t\t\troot = root || _.languages;\n\t\t\tvar grammar = root[inside];\n\t\t\tvar ret = {};\n\n\t\t\tfor (var token in grammar) {\n\t\t\t\tif (grammar.hasOwnProperty(token)) {\n\n\t\t\t\t\tif (token == before) {\n\t\t\t\t\t\tfor (var newToken in insert) {\n\t\t\t\t\t\t\tif (insert.hasOwnProperty(newToken)) {\n\t\t\t\t\t\t\t\tret[newToken] = insert[newToken];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Do not insert token which also occur in insert. See #1525\n\t\t\t\t\tif (!insert.hasOwnProperty(token)) {\n\t\t\t\t\t\tret[token] = grammar[token];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar old = root[inside];\n\t\t\troot[inside] = ret;\n\n\t\t\t// Update references in other language definitions\n\t\t\t_.languages.DFS(_.languages, function(key, value) {\n\t\t\t\tif (value === old && key != inside) {\n\t\t\t\t\tthis[key] = ret;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn ret;\n\t\t},\n\n\t\t// Traverse a language definition with Depth First Search\n\t\tDFS: function DFS(o, callback, type, visited) {\n\t\t\tvisited = visited || {};\n\n\t\t\tvar objId = _.util.objId;\n\n\t\t\tfor (var i in o) {\n\t\t\t\tif (o.hasOwnProperty(i)) {\n\t\t\t\t\tcallback.call(o, i, o[i], type || i);\n\n\t\t\t\t\tvar property = o[i],\n\t\t\t\t\t    propertyType = _.util.type(property);\n\n\t\t\t\t\tif (propertyType === 'Object' && !visited[objId(property)]) {\n\t\t\t\t\t\tvisited[objId(property)] = true;\n\t\t\t\t\t\tDFS(property, callback, null, visited);\n\t\t\t\t\t}\n\t\t\t\t\telse if (propertyType === 'Array' && !visited[objId(property)]) {\n\t\t\t\t\t\tvisited[objId(property)] = true;\n\t\t\t\t\t\tDFS(property, callback, i, visited);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tplugins: {},\n\n\thighlightAll: function(async, callback) {\n\t\t_.highlightAllUnder(document, async, callback);\n\t},\n\n\thighlightAllUnder: function(container, async, callback) {\n\t\tvar env = {\n\t\t\tcallback: callback,\n\t\t\tselector: 'code[class*=\"language-\"], [class*=\"language-\"] code, code[class*=\"lang-\"], [class*=\"lang-\"] code'\n\t\t};\n\n\t\t_.hooks.run(\"before-highlightall\", env);\n\n\t\tvar elements = env.elements || container.querySelectorAll(env.selector);\n\n\t\tfor (var i=0, element; element = elements[i++];) {\n\t\t\t_.highlightElement(element, async === true, env.callback);\n\t\t}\n\t},\n\n\thighlightElement: function(element, async, callback) {\n\t\t// Find language\n\t\tvar language, grammar, parent = element;\n\n\t\twhile (parent && !lang.test(parent.className)) {\n\t\t\tparent = parent.parentNode;\n\t\t}\n\n\t\tif (parent) {\n\t\t\tlanguage = (parent.className.match(lang) || [,''])[1].toLowerCase();\n\t\t\tgrammar = _.languages[language];\n\t\t}\n\n\t\t// Set language on the element, if not present\n\t\telement.className = element.className.replace(lang, '').replace(/\\s+/g, ' ') + ' language-' + language;\n\n\t\tif (element.parentNode) {\n\t\t\t// Set language on the parent, for styling\n\t\t\tparent = element.parentNode;\n\n\t\t\tif (/pre/i.test(parent.nodeName)) {\n\t\t\t\tparent.className = parent.className.replace(lang, '').replace(/\\s+/g, ' ') + ' language-' + language;\n\t\t\t}\n\t\t}\n\n\t\tvar code = element.textContent;\n\n\t\tvar env = {\n\t\t\telement: element,\n\t\t\tlanguage: language,\n\t\t\tgrammar: grammar,\n\t\t\tcode: code\n\t\t};\n\n\t\tvar insertHighlightedCode = function (highlightedCode) {\n\t\t\tenv.highlightedCode = highlightedCode;\n\n\t\t\t_.hooks.run('before-insert', env);\n\n\t\t\tenv.element.innerHTML = env.highlightedCode;\n\n\t\t\t_.hooks.run('after-highlight', env);\n\t\t\t_.hooks.run('complete', env);\n\t\t\tcallback && callback.call(env.element);\n\t\t}\n\n\t\t_.hooks.run('before-sanity-check', env);\n\n\t\tif (!env.code) {\n\t\t\t_.hooks.run('complete', env);\n\t\t\treturn;\n\t\t}\n\n\t\t_.hooks.run('before-highlight', env);\n\n\t\tif (!env.grammar) {\n\t\t\tinsertHighlightedCode(_.util.encode(env.code));\n\t\t\treturn;\n\t\t}\n\n\t\tif (async && _self.Worker) {\n\t\t\tvar worker = new Worker(_.filename);\n\n\t\t\tworker.onmessage = function(evt) {\n\t\t\t\tinsertHighlightedCode(evt.data);\n\t\t\t};\n\n\t\t\tworker.postMessage(JSON.stringify({\n\t\t\t\tlanguage: env.language,\n\t\t\t\tcode: env.code,\n\t\t\t\timmediateClose: true\n\t\t\t}));\n\t\t}\n\t\telse {\n\t\t\tinsertHighlightedCode(_.highlight(env.code, env.grammar, env.language));\n\t\t}\n\t},\n\n\thighlight: function (text, grammar, language) {\n\t\tvar env = {\n\t\t\tcode: text,\n\t\t\tgrammar: grammar,\n\t\t\tlanguage: language\n\t\t};\n\t\t_.hooks.run('before-tokenize', env);\n\t\tenv.tokens = _.tokenize(env.code, env.grammar);\n\t\t_.hooks.run('after-tokenize', env);\n\t\treturn Token.stringify(_.util.encode(env.tokens), env.language);\n\t},\n\n\tmatchGrammar: function (text, strarr, grammar, index, startPos, oneshot, target) {\n\t\tfor (var token in grammar) {\n\t\t\tif(!grammar.hasOwnProperty(token) || !grammar[token]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (token == target) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar patterns = grammar[token];\n\t\t\tpatterns = (_.util.type(patterns) === \"Array\") ? patterns : [patterns];\n\n\t\t\tfor (var j = 0; j < patterns.length; ++j) {\n\t\t\t\tvar pattern = patterns[j],\n\t\t\t\t\tinside = pattern.inside,\n\t\t\t\t\tlookbehind = !!pattern.lookbehind,\n\t\t\t\t\tgreedy = !!pattern.greedy,\n\t\t\t\t\tlookbehindLength = 0,\n\t\t\t\t\talias = pattern.alias;\n\n\t\t\t\tif (greedy && !pattern.pattern.global) {\n\t\t\t\t\t// Without the global flag, lastIndex won't work\n\t\t\t\t\tvar flags = pattern.pattern.toString().match(/[imuy]*$/)[0];\n\t\t\t\t\tpattern.pattern = RegExp(pattern.pattern.source, flags + \"g\");\n\t\t\t\t}\n\n\t\t\t\tpattern = pattern.pattern || pattern;\n\n\t\t\t\t// Don’t cache length as it changes during the loop\n\t\t\t\tfor (var i = index, pos = startPos; i < strarr.length; pos += strarr[i].length, ++i) {\n\n\t\t\t\t\tvar str = strarr[i];\n\n\t\t\t\t\tif (strarr.length > text.length) {\n\t\t\t\t\t\t// Something went terribly wrong, ABORT, ABORT!\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (str instanceof Token) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (greedy && i != strarr.length - 1) {\n\t\t\t\t\t\tpattern.lastIndex = pos;\n\t\t\t\t\t\tvar match = pattern.exec(text);\n\t\t\t\t\t\tif (!match) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar from = match.index + (lookbehind ? match[1].length : 0),\n\t\t\t\t\t\t    to = match.index + match[0].length,\n\t\t\t\t\t\t    k = i,\n\t\t\t\t\t\t    p = pos;\n\n\t\t\t\t\t\tfor (var len = strarr.length; k < len && (p < to || (!strarr[k].type && !strarr[k - 1].greedy)); ++k) {\n\t\t\t\t\t\t\tp += strarr[k].length;\n\t\t\t\t\t\t\t// Move the index i to the element in strarr that is closest to from\n\t\t\t\t\t\t\tif (from >= p) {\n\t\t\t\t\t\t\t\t++i;\n\t\t\t\t\t\t\t\tpos = p;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If strarr[i] is a Token, then the match starts inside another Token, which is invalid\n\t\t\t\t\t\tif (strarr[i] instanceof Token) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Number of tokens to delete and replace with the new match\n\t\t\t\t\t\tdelNum = k - i;\n\t\t\t\t\t\tstr = text.slice(pos, p);\n\t\t\t\t\t\tmatch.index -= pos;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpattern.lastIndex = 0;\n\n\t\t\t\t\t\tvar match = pattern.exec(str),\n\t\t\t\t\t\t\tdelNum = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!match) {\n\t\t\t\t\t\tif (oneshot) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(lookbehind) {\n\t\t\t\t\t\tlookbehindLength = match[1] ? match[1].length : 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar from = match.index + lookbehindLength,\n\t\t\t\t\t    match = match[0].slice(lookbehindLength),\n\t\t\t\t\t    to = from + match.length,\n\t\t\t\t\t    before = str.slice(0, from),\n\t\t\t\t\t    after = str.slice(to);\n\n\t\t\t\t\tvar args = [i, delNum];\n\n\t\t\t\t\tif (before) {\n\t\t\t\t\t\t++i;\n\t\t\t\t\t\tpos += before.length;\n\t\t\t\t\t\targs.push(before);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar wrapped = new Token(token, inside? _.tokenize(match, inside) : match, alias, match, greedy);\n\n\t\t\t\t\targs.push(wrapped);\n\n\t\t\t\t\tif (after) {\n\t\t\t\t\t\targs.push(after);\n\t\t\t\t\t}\n\n\t\t\t\t\tArray.prototype.splice.apply(strarr, args);\n\n\t\t\t\t\tif (delNum != 1)\n\t\t\t\t\t\t_.matchGrammar(text, strarr, grammar, i, pos, true, token);\n\n\t\t\t\t\tif (oneshot)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\ttokenize: function(text, grammar) {\n\t\tvar strarr = [text];\n\n\t\tvar rest = grammar.rest;\n\n\t\tif (rest) {\n\t\t\tfor (var token in rest) {\n\t\t\t\tgrammar[token] = rest[token];\n\t\t\t}\n\n\t\t\tdelete grammar.rest;\n\t\t}\n\n\t\t_.matchGrammar(text, strarr, grammar, 0, 0, false);\n\n\t\treturn strarr;\n\t},\n\n\thooks: {\n\t\tall: {},\n\n\t\tadd: function (name, callback) {\n\t\t\tvar hooks = _.hooks.all;\n\n\t\t\thooks[name] = hooks[name] || [];\n\n\t\t\thooks[name].push(callback);\n\t\t},\n\n\t\trun: function (name, env) {\n\t\t\tvar callbacks = _.hooks.all[name];\n\n\t\t\tif (!callbacks || !callbacks.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (var i=0, callback; callback = callbacks[i++];) {\n\t\t\t\tcallback(env);\n\t\t\t}\n\t\t}\n\t},\n\n\tToken: Token\n};\n\n_self.Prism = _;\n\nfunction Token(type, content, alias, matchedStr, greedy) {\n\tthis.type = type;\n\tthis.content = content;\n\tthis.alias = alias;\n\t// Copy of the full string this token was created from\n\tthis.length = (matchedStr || \"\").length|0;\n\tthis.greedy = !!greedy;\n}\n\nToken.stringify = function(o, language, parent) {\n\tif (typeof o == 'string') {\n\t\treturn o;\n\t}\n\n\tif (Array.isArray(o)) {\n\t\treturn o.map(function(element) {\n\t\t\treturn Token.stringify(element, language, o);\n\t\t}).join('');\n\t}\n\n\tvar env = {\n\t\ttype: o.type,\n\t\tcontent: Token.stringify(o.content, language, parent),\n\t\ttag: 'span',\n\t\tclasses: ['token', o.type],\n\t\tattributes: {},\n\t\tlanguage: language,\n\t\tparent: parent\n\t};\n\n\tif (o.alias) {\n\t\tvar aliases = Array.isArray(o.alias) ? o.alias : [o.alias];\n\t\tArray.prototype.push.apply(env.classes, aliases);\n\t}\n\n\t_.hooks.run('wrap', env);\n\n\tvar attributes = Object.keys(env.attributes).map(function(name) {\n\t\treturn name + '=\"' + (env.attributes[name] || '').replace(/\"/g, '&quot;') + '\"';\n\t}).join(' ');\n\n\treturn '<' + env.tag + ' class=\"' + env.classes.join(' ') + '\"' + (attributes ? ' ' + attributes : '') + '>' + env.content + '</' + env.tag + '>';\n\n};\n\nif (!_self.document) {\n\tif (!_self.addEventListener) {\n\t\t// in Node.js\n\t\treturn _;\n\t}\n\n\tif (!_.disableWorkerMessageHandler) {\n\t\t// In worker\n\t\t_self.addEventListener('message', function (evt) {\n\t\t\tvar message = JSON.parse(evt.data),\n\t\t\t\tlang = message.language,\n\t\t\t\tcode = message.code,\n\t\t\t\timmediateClose = message.immediateClose;\n\n\t\t\t_self.postMessage(_.highlight(code, _.languages[lang], lang));\n\t\t\tif (immediateClose) {\n\t\t\t\t_self.close();\n\t\t\t}\n\t\t}, false);\n\t}\n\n\treturn _;\n}\n\n//Get current script and highlight\nvar script = document.currentScript || [].slice.call(document.getElementsByTagName(\"script\")).pop();\n\nif (script) {\n\t_.filename = script.src;\n\n\tif (!_.manual && !script.hasAttribute('data-manual')) {\n\t\tif(document.readyState !== \"loading\") {\n\t\t\tif (window.requestAnimationFrame) {\n\t\t\t\twindow.requestAnimationFrame(_.highlightAll);\n\t\t\t} else {\n\t\t\t\twindow.setTimeout(_.highlightAll, 16);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tdocument.addEventListener('DOMContentLoaded', _.highlightAll);\n\t\t}\n\t}\n}\n\nreturn _;\n\n})(_self);\n\nif (typeof module !== 'undefined' && module.exports) {\n\tmodule.exports = Prism;\n}\n\n// hack for components to work correctly in node.js\nif (typeof global !== 'undefined') {\n\tglobal.Prism = Prism;\n}\n\n\n/* **********************************************\n     Begin prism-markup.js\n********************************************** */\n\nPrism.languages.markup = {\n\t'comment': /<!--[\\s\\S]*?-->/,\n\t'prolog': /<\\?[\\s\\S]+?\\?>/,\n\t'doctype': /<!DOCTYPE[\\s\\S]+?>/i,\n\t'cdata': /<!\\[CDATA\\[[\\s\\S]*?]]>/i,\n\t'tag': {\n\t\tpattern: /<\\/?(?!\\d)[^\\s>\\/=$<%]+(?:\\s(?:\\s*[^\\s>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))|(?=[\\s/>])))+)?\\s*\\/?>/i,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'tag': {\n\t\t\t\tpattern: /^<\\/?[^\\s>\\/]+/i,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': /^<\\/?/,\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\n\t\t\t\t}\n\t\t\t},\n\t\t\t'attr-value': {\n\t\t\t\tpattern: /=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+)/i,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': [\n\t\t\t\t\t\t/^=/,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: /^(\\s*)[\"']|[\"']$/,\n\t\t\t\t\t\t\tlookbehind: true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t},\n\t\t\t'punctuation': /\\/?>/,\n\t\t\t'attr-name': {\n\t\t\t\tpattern: /[^\\s>\\/]+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t},\n\t'entity': /&#?[\\da-z]{1,8};/i\n};\n\nPrism.languages.markup['tag'].inside['attr-value'].inside['entity'] =\n\tPrism.languages.markup['entity'];\n\n// Plugin to make entity title show the real entity, idea by Roman Komarov\nPrism.hooks.add('wrap', function(env) {\n\n\tif (env.type === 'entity') {\n\t\tenv.attributes['title'] = env.content.replace(/&amp;/, '&');\n\t}\n});\n\nObject.defineProperty(Prism.languages.markup.tag, 'addInlined', {\n\t/**\n\t * Adds an inlined language to markup.\n\t *\n\t * An example of an inlined language is CSS with `<style>` tags.\n\t *\n\t * @param {string} tagName The name of the tag that contains the inlined language. This name will be treated as\n\t * case insensitive.\n\t * @param {string} lang The language key.\n\t * @example\n\t * addInlined('style', 'css');\n\t */\n\tvalue: function addInlined(tagName, lang) {\n\t\tvar includedCdataInside = {};\n\t\tincludedCdataInside['language-' + lang] = {\n\t\t\tpattern: /(^<!\\[CDATA\\[)[\\s\\S]+?(?=\\]\\]>$)/i,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages[lang]\n\t\t};\n\t\tincludedCdataInside['cdata'] = /^<!\\[CDATA\\[|\\]\\]>$/i;\n\n\t\tvar inside = {\n\t\t\t'included-cdata': {\n\t\t\t\tpattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n\t\t\t\tinside: includedCdataInside\n\t\t\t}\n\t\t};\n\t\tinside['language-' + lang] = {\n\t\t\tpattern: /[\\s\\S]+/,\n\t\t\tinside: Prism.languages[lang]\n\t\t};\n\n\t\tvar def = {};\n\t\tdef[tagName] = {\n\t\t\tpattern: RegExp(/(<__[\\s\\S]*?>)(?:<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\s*|[\\s\\S])*?(?=<\\/__>)/.source.replace(/__/g, tagName), 'i'),\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true,\n\t\t\tinside: inside\n\t\t};\n\n\t\tPrism.languages.insertBefore('markup', 'cdata', def);\n\t}\n});\n\nPrism.languages.xml = Prism.languages.extend('markup', {});\nPrism.languages.html = Prism.languages.markup;\nPrism.languages.mathml = Prism.languages.markup;\nPrism.languages.svg = Prism.languages.markup;\n\n\n/* **********************************************\n     Begin prism-css.js\n********************************************** */\n\n(function (Prism) {\n\n\tvar string = /(\"|')(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/;\n\n\tPrism.languages.css = {\n\t\t'comment': /\\/\\*[\\s\\S]*?\\*\\//,\n\t\t'atrule': {\n\t\t\tpattern: /@[\\w-]+?[\\s\\S]*?(?:;|(?=\\s*\\{))/i,\n\t\t\tinside: {\n\t\t\t\t'rule': /@[\\w-]+/\n\t\t\t\t// See rest below\n\t\t\t}\n\t\t},\n\t\t'url': RegExp('url\\\\((?:' + string.source + '|.*?)\\\\)', 'i'),\n\t\t'selector': RegExp('[^{}\\\\s](?:[^{};\"\\']|' + string.source + ')*?(?=\\\\s*\\\\{)'),\n\t\t'string': {\n\t\t\tpattern: string,\n\t\t\tgreedy: true\n\t\t},\n\t\t'property': /[-_a-z\\xA0-\\uFFFF][-\\w\\xA0-\\uFFFF]*(?=\\s*:)/i,\n\t\t'important': /!important\\b/i,\n\t\t'function': /[-a-z0-9]+(?=\\()/i,\n\t\t'punctuation': /[(){};:,]/\n\t};\n\n\tPrism.languages.css['atrule'].inside.rest = Prism.languages.css;\n\n\tvar markup = Prism.languages.markup;\n\tif (markup) {\n\t\tmarkup.tag.addInlined('style', 'css');\n\n\t\tPrism.languages.insertBefore('inside', 'attr-value', {\n\t\t\t'style-attr': {\n\t\t\t\tpattern: /\\s*style=(\"|')(?:\\\\[\\s\\S]|(?!\\1)[^\\\\])*\\1/i,\n\t\t\t\tinside: {\n\t\t\t\t\t'attr-name': {\n\t\t\t\t\t\tpattern: /^\\s*style/i,\n\t\t\t\t\t\tinside: markup.tag.inside\n\t\t\t\t\t},\n\t\t\t\t\t'punctuation': /^\\s*=\\s*['\"]|['\"]\\s*$/,\n\t\t\t\t\t'attr-value': {\n\t\t\t\t\t\tpattern: /.+/i,\n\t\t\t\t\t\tinside: Prism.languages.css\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\talias: 'language-css'\n\t\t\t}\n\t\t}, markup.tag);\n\t}\n\n}(Prism));\n\n\n/* **********************************************\n     Begin prism-clike.js\n********************************************** */\n\nPrism.languages.clike = {\n\t'comment': [\n\t\t{\n\t\t\tpattern: /(^|[^\\\\])\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n\t\t\tlookbehind: true\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^\\\\:])\\/\\/.*/,\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true\n\t\t}\n\t],\n\t'string': {\n\t\tpattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n\t\tgreedy: true\n\t},\n\t'class-name': {\n\t\tpattern: /((?:\\b(?:class|interface|extends|implements|trait|instanceof|new)\\s+)|(?:catch\\s+\\())[\\w.\\\\]+/i,\n\t\tlookbehind: true,\n\t\tinside: {\n\t\t\tpunctuation: /[.\\\\]/\n\t\t}\n\t},\n\t'keyword': /\\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\\b/,\n\t'boolean': /\\b(?:true|false)\\b/,\n\t'function': /\\w+(?=\\()/,\n\t'number': /\\b0x[\\da-f]+\\b|(?:\\b\\d+\\.?\\d*|\\B\\.\\d+)(?:e[+-]?\\d+)?/i,\n\t'operator': /--?|\\+\\+?|!=?=?|<=?|>=?|==?=?|&&?|\\|\\|?|\\?|\\*|\\/|~|\\^|%/,\n\t'punctuation': /[{}[\\];(),.:]/\n};\n\n\n/* **********************************************\n     Begin prism-javascript.js\n********************************************** */\n\nPrism.languages.javascript = Prism.languages.extend('clike', {\n\t'class-name': [\n\t\tPrism.languages.clike['class-name'],\n\t\t{\n\t\t\tpattern: /(^|[^$\\w\\xA0-\\uFFFF])[_$A-Z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*(?=\\.(?:prototype|constructor))/,\n\t\t\tlookbehind: true\n\t\t}\n\t],\n\t'keyword': [\n\t\t{\n\t\t\tpattern: /((?:^|})\\s*)(?:catch|finally)\\b/,\n\t\t\tlookbehind: true\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^.])\\b(?:as|async(?=\\s*(?:function\\b|\\(|[$\\w\\xA0-\\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\\b/,\n\t\t\tlookbehind: true\n\t\t},\n\t],\n\t'number': /\\b(?:(?:0[xX][\\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+)n?|\\d+n|NaN|Infinity)\\b|(?:\\b\\d+\\.?\\d*|\\B\\.\\d+)(?:[Ee][+-]?\\d+)?/,\n\t// Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)\n\t'function': /[_$a-zA-Z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*(?=\\s*(?:\\.\\s*(?:apply|bind|call)\\s*)?\\()/,\n\t'operator': /-[-=]?|\\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\\|[|=]?|\\*\\*?=?|\\/=?|~|\\^=?|%=?|\\?|\\.{3}/\n});\n\nPrism.languages.javascript['class-name'][0].pattern = /(\\b(?:class|interface|extends|implements|instanceof|new)\\s+)[\\w.\\\\]+/\n\nPrism.languages.insertBefore('javascript', 'keyword', {\n\t'regex': {\n\t\tpattern: /((?:^|[^$\\w\\xA0-\\uFFFF.\"'\\])\\s])\\s*)\\/(\\[(?:[^\\]\\\\\\r\\n]|\\\\.)*]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[gimyu]{0,5}(?=\\s*($|[\\r\\n,.;})\\]]))/,\n\t\tlookbehind: true,\n\t\tgreedy: true\n\t},\n\t// This must be declared before keyword because we use \"function\" inside the look-forward\n\t'function-variable': {\n\t\tpattern: /[_$a-zA-Z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*(?=\\s*[=:]\\s*(?:async\\s*)?(?:\\bfunction\\b|(?:\\((?:[^()]|\\([^()]*\\))*\\)|[_$a-zA-Z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*)\\s*=>))/,\n\t\talias: 'function'\n\t},\n\t'parameter': [\n\t\t{\n\t\t\tpattern: /(function(?:\\s+[_$A-Za-z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*)?\\s*\\(\\s*)(?!\\s)(?:[^()]|\\([^()]*\\))+?(?=\\s*\\))/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /[_$a-z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*(?=\\s*=>)/i,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /(\\(\\s*)(?!\\s)(?:[^()]|\\([^()]*\\))+?(?=\\s*\\)\\s*=>)/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /((?:\\b|\\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\\w\\xA0-\\uFFFF]))(?:[_$A-Za-z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*\\s*)\\(\\s*)(?!\\s)(?:[^()]|\\([^()]*\\))+?(?=\\s*\\)\\s*\\{)/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t}\n\t],\n\t'constant': /\\b[A-Z](?:[A-Z_]|\\dx?)*\\b/\n});\n\nPrism.languages.insertBefore('javascript', 'string', {\n\t'template-string': {\n\t\tpattern: /`(?:\\\\[\\s\\S]|\\${[^}]+}|[^\\\\`])*`/,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'interpolation': {\n\t\t\t\tpattern: /\\${[^}]+}/,\n\t\t\t\tinside: {\n\t\t\t\t\t'interpolation-punctuation': {\n\t\t\t\t\t\tpattern: /^\\${|}$/,\n\t\t\t\t\t\talias: 'punctuation'\n\t\t\t\t\t},\n\t\t\t\t\trest: Prism.languages.javascript\n\t\t\t\t}\n\t\t\t},\n\t\t\t'string': /[\\s\\S]+/\n\t\t}\n\t}\n});\n\nif (Prism.languages.markup) {\n\tPrism.languages.markup.tag.addInlined('script', 'javascript');\n}\n\nPrism.languages.js = Prism.languages.javascript;\n\n\n/* **********************************************\n     Begin prism-file-highlight.js\n********************************************** */\n\n(function () {\n\tif (typeof self === 'undefined' || !self.Prism || !self.document || !document.querySelector) {\n\t\treturn;\n\t}\n\n\t/**\n\t * @param {Element} [container=document]\n\t */\n\tself.Prism.fileHighlight = function(container) {\n\t\tcontainer = container || document;\n\n\t\tvar Extensions = {\n\t\t\t'js': 'javascript',\n\t\t\t'py': 'python',\n\t\t\t'rb': 'ruby',\n\t\t\t'ps1': 'powershell',\n\t\t\t'psm1': 'powershell',\n\t\t\t'sh': 'bash',\n\t\t\t'bat': 'batch',\n\t\t\t'h': 'c',\n\t\t\t'tex': 'latex'\n\t\t};\n\n\t\tArray.prototype.slice.call(container.querySelectorAll('pre[data-src]')).forEach(function (pre) {\n\t\t\t// ignore if already loaded\n\t\t\tif (pre.hasAttribute('data-src-loaded')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// load current\n\t\t\tvar src = pre.getAttribute('data-src');\n\n\t\t\tvar language, parent = pre;\n\t\t\tvar lang = /\\blang(?:uage)?-([\\w-]+)\\b/i;\n\t\t\twhile (parent && !lang.test(parent.className)) {\n\t\t\t\tparent = parent.parentNode;\n\t\t\t}\n\n\t\t\tif (parent) {\n\t\t\t\tlanguage = (pre.className.match(lang) || [, ''])[1];\n\t\t\t}\n\n\t\t\tif (!language) {\n\t\t\t\tvar extension = (src.match(/\\.(\\w+)$/) || [, ''])[1];\n\t\t\t\tlanguage = Extensions[extension] || extension;\n\t\t\t}\n\n\t\t\tvar code = document.createElement('code');\n\t\t\tcode.className = 'language-' + language;\n\n\t\t\tpre.textContent = '';\n\n\t\t\tcode.textContent = 'Loading…';\n\n\t\t\tpre.appendChild(code);\n\n\t\t\tvar xhr = new XMLHttpRequest();\n\n\t\t\txhr.open('GET', src, true);\n\n\t\t\txhr.onreadystatechange = function () {\n\t\t\t\tif (xhr.readyState == 4) {\n\n\t\t\t\t\tif (xhr.status < 400 && xhr.responseText) {\n\t\t\t\t\t\tcode.textContent = xhr.responseText;\n\n\t\t\t\t\t\tPrism.highlightElement(code);\n\t\t\t\t\t\t// mark as loaded\n\t\t\t\t\t\tpre.setAttribute('data-src-loaded', '');\n\t\t\t\t\t}\n\t\t\t\t\telse if (xhr.status >= 400) {\n\t\t\t\t\t\tcode.textContent = '✖ Error ' + xhr.status + ' while fetching file: ' + xhr.statusText;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tcode.textContent = '✖ Error: File does not exist or is empty';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhr.send(null);\n\t\t});\n\n\t\tif (Prism.plugins.toolbar) {\n\t\t\tPrism.plugins.toolbar.registerButton('download-file', function (env) {\n\t\t\t\tvar pre = env.element.parentNode;\n\t\t\t\tif (!pre || !/pre/i.test(pre.nodeName) || !pre.hasAttribute('data-src') || !pre.hasAttribute('data-download-link')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar src = pre.getAttribute('data-src');\n\t\t\t\tvar a = document.createElement('a');\n\t\t\t\ta.textContent = pre.getAttribute('data-download-link-label') || 'Download';\n\t\t\t\ta.setAttribute('download', '');\n\t\t\t\ta.href = src;\n\t\t\t\treturn a;\n\t\t\t});\n\t\t}\n\n\t};\n\n\tdocument.addEventListener('DOMContentLoaded', function () {\n\t\t// execute inside handler, for dropping Event as argument\n\t\tself.Prism.fileHighlight();\n\t});\n\n})();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],11:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],12:[function(require,module,exports){\n/*!\n * @license twgl.js 4.10.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.\n * Available via the MIT license.\n * see: http://github.com/greggman/twgl.js for details\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"twgl\"] = factory();\n\telse\n\t\troot[\"twgl\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./src/twgl-full.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./src/attributes.js\":\n/*!***************************!*\\\n  !*** ./src/attributes.js ***!\n  \\***************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.createAttribsFromArrays = createAttribsFromArrays;\nexports.createBuffersFromArrays = createBuffersFromArrays;\nexports.createBufferFromArray = createBufferFromArray;\nexports.createBufferFromTypedArray = createBufferFromTypedArray;\nexports.createBufferInfoFromArrays = createBufferInfoFromArrays;\nexports.setAttribInfoBufferFromArray = setAttribInfoBufferFromArray;\nexports.setAttributePrefix = setAttributePrefix;\nexports.setAttributeDefaults_ = setDefaults;\nexports.getNumComponents_ = getNumComponents;\nexports.getArray_ = getArray;\n\nvar typedArrays = _interopRequireWildcard(__webpack_require__(/*! ./typedarrays.js */ \"./src/typedarrays.js\"));\n\nvar helper = _interopRequireWildcard(__webpack_require__(/*! ./helper.js */ \"./src/helper.js\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Low level attribute and buffer related functions\n *\n * You should generally not need to use these functions. They are provided\n * for those cases where you're doing something out of the ordinary\n * and you need lower level access.\n *\n * For backward compatibily they are available at both `twgl.attributes` and `twgl`\n * itself\n *\n * See {@link module:twgl} for core functions\n *\n * @module twgl/attributes\n */\n// make sure we don't see a global gl\nvar gl = undefined; // eslint-disable-line\n\nvar defaults = {\n  attribPrefix: \"\"\n};\n/**\n * Sets the default attrib prefix\n *\n * When writing shaders I prefer to name attributes with `a_`, uniforms with `u_` and varyings with `v_`\n * as it makes it clear where they came from. But, when building geometry I prefer using unprefixed names.\n *\n * In otherwords I'll create arrays of geometry like this\n *\n *     var arrays = {\n *       position: ...\n *       normal: ...\n *       texcoord: ...\n *     };\n *\n * But need those mapped to attributes and my attributes start with `a_`.\n *\n * @deprecated see {@link module:twgl.setDefaults}\n * @param {string} prefix prefix for attribs\n * @memberOf module:twgl/attributes\n */\n\nfunction setAttributePrefix(prefix) {\n  defaults.attribPrefix = prefix;\n}\n\nfunction setDefaults(newDefaults) {\n  helper.copyExistingProperties(newDefaults, defaults);\n}\n\nfunction setBufferFromTypedArray(gl, type, buffer, array, drawType) {\n  gl.bindBuffer(type, buffer);\n  gl.bufferData(type, array, drawType || gl.STATIC_DRAW);\n}\n/**\n * Given typed array creates a WebGLBuffer and copies the typed array\n * into it.\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @param {ArrayBuffer|SharedArrayBuffer|ArrayBufferView|WebGLBuffer} typedArray the typed array. Note: If a WebGLBuffer is passed in it will just be returned. No action will be taken\n * @param {number} [type] the GL bind type for the buffer. Default = `gl.ARRAY_BUFFER`.\n * @param {number} [drawType] the GL draw type for the buffer. Default = 'gl.STATIC_DRAW`.\n * @return {WebGLBuffer} the created WebGLBuffer\n * @memberOf module:twgl/attributes\n */\n\n\nfunction createBufferFromTypedArray(gl, typedArray, type, drawType) {\n  if (helper.isBuffer(gl, typedArray)) {\n    return typedArray;\n  }\n\n  type = type || gl.ARRAY_BUFFER;\n  var buffer = gl.createBuffer();\n  setBufferFromTypedArray(gl, type, buffer, typedArray, drawType);\n  return buffer;\n}\n\nfunction isIndices(name) {\n  return name === \"indices\";\n} // This is really just a guess. Though I can't really imagine using\n// anything else? Maybe for some compression?\n\n\nfunction getNormalizationForTypedArray(typedArray) {\n  if (typedArray instanceof Int8Array) {\n    return true;\n  } // eslint-disable-line\n\n\n  if (typedArray instanceof Uint8Array) {\n    return true;\n  } // eslint-disable-line\n\n\n  return false;\n} // This is really just a guess. Though I can't really imagine using\n// anything else? Maybe for some compression?\n\n\nfunction getNormalizationForTypedArrayType(typedArrayType) {\n  if (typedArrayType === Int8Array) {\n    return true;\n  } // eslint-disable-line\n\n\n  if (typedArrayType === Uint8Array) {\n    return true;\n  } // eslint-disable-line\n\n\n  return false;\n}\n\nfunction getArray(array) {\n  return array.length ? array : array.data;\n}\n\nvar texcoordRE = /coord|texture/i;\nvar colorRE = /color|colour/i;\n\nfunction guessNumComponentsFromName(name, length) {\n  var numComponents;\n\n  if (texcoordRE.test(name)) {\n    numComponents = 2;\n  } else if (colorRE.test(name)) {\n    numComponents = 4;\n  } else {\n    numComponents = 3; // position, normals, indices ...\n  }\n\n  if (length % numComponents > 0) {\n    throw new Error(\"Can not guess numComponents for attribute '\".concat(name, \"'. Tried \").concat(numComponents, \" but \").concat(length, \" values is not evenly divisible by \").concat(numComponents, \". You should specify it.\"));\n  }\n\n  return numComponents;\n}\n\nfunction getNumComponents(array, arrayName) {\n  return array.numComponents || array.size || guessNumComponentsFromName(arrayName, getArray(array).length);\n}\n\nfunction makeTypedArray(array, name) {\n  if (typedArrays.isArrayBuffer(array)) {\n    return array;\n  }\n\n  if (typedArrays.isArrayBuffer(array.data)) {\n    return array.data;\n  }\n\n  if (Array.isArray(array)) {\n    array = {\n      data: array\n    };\n  }\n\n  var Type = array.type;\n\n  if (!Type) {\n    if (isIndices(name)) {\n      Type = Uint16Array;\n    } else {\n      Type = Float32Array;\n    }\n  }\n\n  return new Type(array.data);\n}\n/**\n * The info for an attribute. This is effectively just the arguments to `gl.vertexAttribPointer` plus the WebGLBuffer\n * for the attribute.\n *\n * @typedef {Object} AttribInfo\n * @property {number[]|ArrayBufferView} [value] a constant value for the attribute. Note: if this is set the attribute will be\n *    disabled and set to this constant value and all other values will be ignored.\n * @property {number} [numComponents] the number of components for this attribute.\n * @property {number} [size] synonym for `numComponents`.\n * @property {number} [type] the type of the attribute (eg. `gl.FLOAT`, `gl.UNSIGNED_BYTE`, etc...) Default = `gl.FLOAT`\n * @property {boolean} [normalize] whether or not to normalize the data. Default = false\n * @property {number} [offset] offset into buffer in bytes. Default = 0\n * @property {number} [stride] the stride in bytes per element. Default = 0\n * @property {number} [divisor] the divisor in instances. Default = undefined. Note: undefined = don't call gl.vertexAttribDivisor\n *    where as anything else = do call it with this value\n * @property {WebGLBuffer} buffer the buffer that contains the data for this attribute\n * @property {number} [drawType] the draw type passed to gl.bufferData. Default = gl.STATIC_DRAW\n * @memberOf module:twgl\n */\n\n/**\n * Use this type of array spec when TWGL can't guess the type or number of compoments of an array\n * @typedef {Object} FullArraySpec\n * @property {number[]|ArrayBufferView} [value] a constant value for the attribute. Note: if this is set the attribute will be\n *    disabled and set to this constant value and all other values will be ignored.\n * @property {(number|number[]|ArrayBufferView)} data The data of the array. A number alone becomes the number of elements of type.\n * @property {number} [numComponents] number of components for `vertexAttribPointer`. Default is based on the name of the array.\n *    If `coord` is in the name assumes `numComponents = 2`.\n *    If `color` is in the name assumes `numComponents = 4`.\n *    otherwise assumes `numComponents = 3`\n * @property {constructor} [type] type. This is only used if `data` is a JavaScript array. It is the constructor for the typedarray. (eg. `Uint8Array`).\n * For example if you want colors in a `Uint8Array` you might have a `FullArraySpec` like `{ type: Uint8Array, data: [255,0,255,255, ...], }`.\n * @property {number} [size] synonym for `numComponents`.\n * @property {boolean} [normalize] normalize for `vertexAttribPointer`. Default is true if type is `Int8Array` or `Uint8Array` otherwise false.\n * @property {number} [stride] stride for `vertexAttribPointer`. Default = 0\n * @property {number} [offset] offset for `vertexAttribPointer`. Default = 0\n * @property {number} [divisor] divisor for `vertexAttribDivisor`. Default = undefined. Note: undefined = don't call gl.vertexAttribDivisor\n *    where as anything else = do call it with this value\n * @property {string} [attrib] name of attribute this array maps to. Defaults to same name as array prefixed by the default attribPrefix.\n * @property {string} [name] synonym for `attrib`.\n * @property {string} [attribName] synonym for `attrib`.\n * @property {WebGLBuffer} [buffer] Buffer to use for this attribute. This lets you use your own buffer\n *    but you will need to supply `numComponents` and `type`. You can effectively pass an `AttribInfo`\n *    to provide this. Example:\n *\n *         const bufferInfo1 = twgl.createBufferInfoFromArrays(gl, {\n *           position: [1, 2, 3, ... ],\n *         });\n *         const bufferInfo2 = twgl.createBufferInfoFromArrays(gl, {\n *           position: bufferInfo1.attribs.position,  // use the same buffer from bufferInfo1\n *         });\n *\n * @memberOf module:twgl\n */\n\n/**\n * An individual array in {@link module:twgl.Arrays}\n *\n * When passed to {@link module:twgl.createBufferInfoFromArrays} if an ArraySpec is `number[]` or `ArrayBufferView`\n * the types will be guessed based on the name. `indices` will be `Uint16Array`, everything else will\n * be `Float32Array`. If an ArraySpec is a number it's the number of floats for an empty (zeroed) buffer.\n *\n * @typedef {(number|number[]|ArrayBufferView|module:twgl.FullArraySpec)} ArraySpec\n * @memberOf module:twgl\n */\n\n/**\n * This is a JavaScript object of arrays by name. The names should match your shader's attributes. If your\n * attributes have a common prefix you can specify it by calling {@link module:twgl.setAttributePrefix}.\n *\n *     Bare JavaScript Arrays\n *\n *         var arrays = {\n *            position: [-1, 1, 0],\n *            normal: [0, 1, 0],\n *            ...\n *         }\n *\n *     Bare TypedArrays\n *\n *         var arrays = {\n *            position: new Float32Array([-1, 1, 0]),\n *            color: new Uint8Array([255, 128, 64, 255]),\n *            ...\n *         }\n *\n * *   Will guess at `numComponents` if not specified based on name.\n *\n *     If `coord` is in the name assumes `numComponents = 2`\n *\n *     If `color` is in the name assumes `numComponents = 4`\n *\n *     otherwise assumes `numComponents = 3`\n *\n * Objects with various fields. See {@link module:twgl.FullArraySpec}.\n *\n *     var arrays = {\n *       position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },\n *       texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },\n *       normal:   { numComponents: 3, data: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],     },\n *       indices:  { numComponents: 3, data: [0, 1, 2, 1, 2, 3],                       },\n *     };\n *\n * @typedef {Object.<string, module:twgl.ArraySpec>} Arrays\n * @memberOf module:twgl\n */\n\n/**\n * Creates a set of attribute data and WebGLBuffers from set of arrays\n *\n * Given\n *\n *      var arrays = {\n *        position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },\n *        texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },\n *        normal:   { numComponents: 3, data: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],     },\n *        color:    { numComponents: 4, data: [255, 255, 255, 255, 255, 0, 0, 255, 0, 0, 255, 255], type: Uint8Array, },\n *        indices:  { numComponents: 3, data: [0, 1, 2, 1, 2, 3],                       },\n *      };\n *\n * returns something like\n *\n *      var attribs = {\n *        position: { numComponents: 3, type: gl.FLOAT,         normalize: false, buffer: WebGLBuffer, },\n *        texcoord: { numComponents: 2, type: gl.FLOAT,         normalize: false, buffer: WebGLBuffer, },\n *        normal:   { numComponents: 3, type: gl.FLOAT,         normalize: false, buffer: WebGLBuffer, },\n *        color:    { numComponents: 4, type: gl.UNSIGNED_BYTE, normalize: true,  buffer: WebGLBuffer, },\n *      };\n *\n * notes:\n *\n * *   Arrays can take various forms\n *\n *     Bare JavaScript Arrays\n *\n *         var arrays = {\n *            position: [-1, 1, 0],\n *            normal: [0, 1, 0],\n *            ...\n *         }\n *\n *     Bare TypedArrays\n *\n *         var arrays = {\n *            position: new Float32Array([-1, 1, 0]),\n *            color: new Uint8Array([255, 128, 64, 255]),\n *            ...\n *         }\n *\n * *   Will guess at `numComponents` if not specified based on name.\n *\n *     If `coord` is in the name assumes `numComponents = 2`\n *\n *     If `color` is in the name assumes `numComponents = 4`\n *\n *     otherwise assumes `numComponents = 3`\n *\n * @param {WebGLRenderingContext} gl The webgl rendering context.\n * @param {module:twgl.Arrays} arrays The arrays\n * @param {module:twgl.BufferInfo} [srcBufferInfo] a BufferInfo to copy from\n *   This lets you share buffers. Any arrays you supply will override\n *   the buffers from srcBufferInfo.\n * @return {Object.<string, module:twgl.AttribInfo>} the attribs\n * @memberOf module:twgl/attributes\n */\n\n\nfunction createAttribsFromArrays(gl, arrays) {\n  var attribs = {};\n  Object.keys(arrays).forEach(function (arrayName) {\n    if (!isIndices(arrayName)) {\n      var array = arrays[arrayName];\n      var attribName = array.attrib || array.name || array.attribName || defaults.attribPrefix + arrayName;\n\n      if (array.value) {\n        if (!Array.isArray(array.value) && !typedArrays.isArrayBuffer(array.value)) {\n          throw new Error('array.value is not array or typedarray');\n        }\n\n        attribs[attribName] = {\n          value: array.value\n        };\n      } else {\n        var buffer;\n        var type;\n        var normalization;\n        var numComponents;\n\n        if (array.buffer && array.buffer instanceof WebGLBuffer) {\n          buffer = array.buffer;\n          numComponents = array.numComponents || array.size;\n          type = array.type;\n          normalization = array.normalize;\n        } else if (typeof array === \"number\" || typeof array.data === \"number\") {\n          var numValues = array.data || array;\n          var arrayType = array.type || Float32Array;\n          var numBytes = numValues * arrayType.BYTES_PER_ELEMENT;\n          type = typedArrays.getGLTypeForTypedArrayType(arrayType);\n          normalization = array.normalize !== undefined ? array.normalize : getNormalizationForTypedArrayType(arrayType);\n          numComponents = array.numComponents || array.size || guessNumComponentsFromName(arrayName, numValues);\n          buffer = gl.createBuffer();\n          gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n          gl.bufferData(gl.ARRAY_BUFFER, numBytes, array.drawType || gl.STATIC_DRAW);\n        } else {\n          var typedArray = makeTypedArray(array, arrayName);\n          buffer = createBufferFromTypedArray(gl, typedArray, undefined, array.drawType);\n          type = typedArrays.getGLTypeForTypedArray(typedArray);\n          normalization = array.normalize !== undefined ? array.normalize : getNormalizationForTypedArray(typedArray);\n          numComponents = getNumComponents(array, arrayName);\n        }\n\n        attribs[attribName] = {\n          buffer: buffer,\n          numComponents: numComponents,\n          type: type,\n          normalize: normalization,\n          stride: array.stride || 0,\n          offset: array.offset || 0,\n          divisor: array.divisor === undefined ? undefined : array.divisor,\n          drawType: array.drawType\n        };\n      }\n    }\n  });\n  gl.bindBuffer(gl.ARRAY_BUFFER, null);\n  return attribs;\n}\n/**\n * Sets the contents of a buffer attached to an attribInfo\n *\n * This is helper function to dynamically update a buffer.\n *\n * Let's say you make a bufferInfo\n *\n *     var arrays = {\n *        position: new Float32Array([0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0]),\n *        texcoord: new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]),\n *        normal:   new Float32Array([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]),\n *        indices:  new Uint16Array([0, 1, 2, 1, 2, 3]),\n *     };\n *     var bufferInfo = twgl.createBufferInfoFromArrays(gl, arrays);\n *\n *  And you want to dynamically upate the positions. You could do this\n *\n *     // assuming arrays.position has already been updated with new data.\n *     twgl.setAttribInfoBufferFromArray(gl, bufferInfo.attribs.position, arrays.position);\n *\n * @param {WebGLRenderingContext} gl\n * @param {AttribInfo} attribInfo The attribInfo who's buffer contents to set. NOTE: If you have an attribute prefix\n *   the name of the attribute will include the prefix.\n * @param {ArraySpec} array Note: it is arguably ineffient to pass in anything but a typed array because anything\n *    else will have to be converted to a typed array before it can be used by WebGL. During init time that\n *    inefficiency is usually not important but if you're updating data dynamically best to be efficient.\n * @param {number} [offset] an optional offset into the buffer. This is only an offset into the WebGL buffer\n *    not the array. To pass in an offset into the array itself use a typed array and create an `ArrayBufferView`\n *    for the portion of the array you want to use.\n *\n *        var someArray = new Float32Array(1000); // an array with 1000 floats\n *        var someSubArray = new Float32Array(someArray.buffer, offsetInBytes, sizeInUnits); // a view into someArray\n *\n *    Now you can pass `someSubArray` into setAttribInfoBufferFromArray`\n * @memberOf module:twgl/attributes\n */\n\n\nfunction setAttribInfoBufferFromArray(gl, attribInfo, array, offset) {\n  array = makeTypedArray(array);\n\n  if (offset !== undefined) {\n    gl.bindBuffer(gl.ARRAY_BUFFER, attribInfo.buffer);\n    gl.bufferSubData(gl.ARRAY_BUFFER, offset, array);\n  } else {\n    setBufferFromTypedArray(gl, gl.ARRAY_BUFFER, attribInfo.buffer, array, attribInfo.drawType);\n  }\n}\n\nfunction getBytesPerValueForGLType(gl, type) {\n  if (type === gl.BYTE) return 1; // eslint-disable-line\n\n  if (type === gl.UNSIGNED_BYTE) return 1; // eslint-disable-line\n\n  if (type === gl.SHORT) return 2; // eslint-disable-line\n\n  if (type === gl.UNSIGNED_SHORT) return 2; // eslint-disable-line\n\n  if (type === gl.INT) return 4; // eslint-disable-line\n\n  if (type === gl.UNSIGNED_INT) return 4; // eslint-disable-line\n\n  if (type === gl.FLOAT) return 4; // eslint-disable-line\n\n  return 0;\n} // Tries to get the number of elements from a set of arrays.\n\n\nvar positionKeys = ['position', 'positions', 'a_position'];\n\nfunction getNumElementsFromNonIndexedArrays(arrays) {\n  var key;\n  var ii;\n\n  for (ii = 0; ii < positionKeys.length; ++ii) {\n    key = positionKeys[ii];\n\n    if (key in arrays) {\n      break;\n    }\n  }\n\n  if (ii === positionKeys.length) {\n    key = Object.keys(arrays)[0];\n  }\n\n  var array = arrays[key];\n  var length = getArray(array).length;\n  var numComponents = getNumComponents(array, key);\n  var numElements = length / numComponents;\n\n  if (length % numComponents > 0) {\n    throw new Error(\"numComponents \".concat(numComponents, \" not correct for length \").concat(length));\n  }\n\n  return numElements;\n}\n\nfunction getNumElementsFromAttributes(gl, attribs) {\n  var key;\n  var ii;\n\n  for (ii = 0; ii < positionKeys.length; ++ii) {\n    key = positionKeys[ii];\n\n    if (key in attribs) {\n      break;\n    }\n\n    key = defaults.attribPrefix + key;\n\n    if (key in attribs) {\n      break;\n    }\n  }\n\n  if (ii === positionKeys.length) {\n    key = Object.keys(attribs)[0];\n  }\n\n  var attrib = attribs[key];\n  gl.bindBuffer(gl.ARRAY_BUFFER, attrib.buffer);\n  var numBytes = gl.getBufferParameter(gl.ARRAY_BUFFER, gl.BUFFER_SIZE);\n  gl.bindBuffer(gl.ARRAY_BUFFER, null);\n  var bytesPerValue = getBytesPerValueForGLType(gl, attrib.type);\n  var totalElements = numBytes / bytesPerValue;\n  var numComponents = attrib.numComponents || attrib.size; // TODO: check stride\n\n  var numElements = totalElements / numComponents;\n\n  if (numElements % 1 !== 0) {\n    throw new Error(\"numComponents \".concat(numComponents, \" not correct for length \").concat(length));\n  }\n\n  return numElements;\n}\n/**\n * @typedef {Object} BufferInfo\n * @property {number} numElements The number of elements to pass to `gl.drawArrays` or `gl.drawElements`.\n * @property {number} [elementType] The type of indices `UNSIGNED_BYTE`, `UNSIGNED_SHORT` etc..\n * @property {WebGLBuffer} [indices] The indices `ELEMENT_ARRAY_BUFFER` if any indices exist.\n * @property {Object.<string, module:twgl.AttribInfo>} [attribs] The attribs approriate to call `setAttributes`\n * @memberOf module:twgl\n */\n\n/**\n * Creates a BufferInfo from an object of arrays.\n *\n * This can be passed to {@link module:twgl.setBuffersAndAttributes} and to\n * {@link module:twgl:drawBufferInfo}.\n *\n * Given an object like\n *\n *     var arrays = {\n *       position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },\n *       texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },\n *       normal:   { numComponents: 3, data: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],     },\n *       indices:  { numComponents: 3, data: [0, 1, 2, 1, 2, 3],                       },\n *     };\n *\n *  Creates an BufferInfo like this\n *\n *     bufferInfo = {\n *       numElements: 4,        // or whatever the number of elements is\n *       indices: WebGLBuffer,  // this property will not exist if there are no indices\n *       attribs: {\n *         a_position: { buffer: WebGLBuffer, numComponents: 3, },\n *         a_normal:   { buffer: WebGLBuffer, numComponents: 3, },\n *         a_texcoord: { buffer: WebGLBuffer, numComponents: 2, },\n *       },\n *     };\n *\n *  The properties of arrays can be JavaScript arrays in which case the number of components\n *  will be guessed.\n *\n *     var arrays = {\n *        position: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0],\n *        texcoord: [0, 0, 0, 1, 1, 0, 1, 1],\n *        normal:   [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],\n *        indices:  [0, 1, 2, 1, 2, 3],\n *     };\n *\n *  They can also by TypedArrays\n *\n *     var arrays = {\n *        position: new Float32Array([0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0]),\n *        texcoord: new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]),\n *        normal:   new Float32Array([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]),\n *        indices:  new Uint16Array([0, 1, 2, 1, 2, 3]),\n *     };\n *\n *  Or augmentedTypedArrays\n *\n *     var positions = createAugmentedTypedArray(3, 4);\n *     var texcoords = createAugmentedTypedArray(2, 4);\n *     var normals   = createAugmentedTypedArray(3, 4);\n *     var indices   = createAugmentedTypedArray(3, 2, Uint16Array);\n *\n *     positions.push([0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0]);\n *     texcoords.push([0, 0, 0, 1, 1, 0, 1, 1]);\n *     normals.push([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]);\n *     indices.push([0, 1, 2, 1, 2, 3]);\n *\n *     var arrays = {\n *        position: positions,\n *        texcoord: texcoords,\n *        normal:   normals,\n *        indices:  indices,\n *     };\n *\n * For the last example it is equivalent to\n *\n *     var bufferInfo = {\n *       attribs: {\n *         a_position: { numComponents: 3, buffer: gl.createBuffer(), },\n *         a_texcoods: { numComponents: 2, buffer: gl.createBuffer(), },\n *         a_normals: { numComponents: 3, buffer: gl.createBuffer(), },\n *       },\n *       indices: gl.createBuffer(),\n *       numElements: 6,\n *     };\n *\n *     gl.bindBuffer(gl.ARRAY_BUFFER, bufferInfo.attribs.a_position.buffer);\n *     gl.bufferData(gl.ARRAY_BUFFER, arrays.position, gl.STATIC_DRAW);\n *     gl.bindBuffer(gl.ARRAY_BUFFER, bufferInfo.attribs.a_texcoord.buffer);\n *     gl.bufferData(gl.ARRAY_BUFFER, arrays.texcoord, gl.STATIC_DRAW);\n *     gl.bindBuffer(gl.ARRAY_BUFFER, bufferInfo.attribs.a_normal.buffer);\n *     gl.bufferData(gl.ARRAY_BUFFER, arrays.normal, gl.STATIC_DRAW);\n *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, bufferInfo.indices);\n *     gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, arrays.indices, gl.STATIC_DRAW);\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @param {module:twgl.Arrays} arrays Your data\n * @param {module:twgl.BufferInfo} [srcBufferInfo] An existing\n *        buffer info to start from. WebGLBuffers etc specified\n *        in the srcBufferInfo will be used in a new BufferInfo\n *        with any arrays specfied overriding the ones in\n *        srcBufferInfo.\n * @return {module:twgl.BufferInfo} A BufferInfo\n * @memberOf module:twgl/attributes\n */\n\n\nfunction createBufferInfoFromArrays(gl, arrays, srcBufferInfo) {\n  var newAttribs = createAttribsFromArrays(gl, arrays);\n  var bufferInfo = Object.assign({}, srcBufferInfo ? srcBufferInfo : {});\n  bufferInfo.attribs = Object.assign({}, srcBufferInfo ? srcBufferInfo.attribs : {}, newAttribs);\n  var indices = arrays.indices;\n\n  if (indices) {\n    var newIndices = makeTypedArray(indices, \"indices\");\n    bufferInfo.indices = createBufferFromTypedArray(gl, newIndices, gl.ELEMENT_ARRAY_BUFFER);\n    bufferInfo.numElements = newIndices.length;\n    bufferInfo.elementType = typedArrays.getGLTypeForTypedArray(newIndices);\n  } else if (!bufferInfo.numElements) {\n    bufferInfo.numElements = getNumElementsFromAttributes(gl, bufferInfo.attribs);\n  }\n\n  return bufferInfo;\n}\n/**\n * Creates a buffer from an array, typed array, or array spec\n *\n * Given something like this\n *\n *     [1, 2, 3],\n *\n * or\n *\n *     new Uint16Array([1,2,3]);\n *\n * or\n *\n *     {\n *        data: [1, 2, 3],\n *        type: Uint8Array,\n *     }\n *\n * returns a WebGLBuffer that constains the given data.\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext.\n * @param {module:twgl.ArraySpec} array an array, typed array, or array spec.\n * @param {string} arrayName name of array. Used to guess the type if type can not be dervied other wise.\n * @return {WebGLBuffer} a WebGLBuffer containing the data in array.\n * @memberOf module:twgl/attributes\n */\n\n\nfunction createBufferFromArray(gl, array, arrayName) {\n  var type = arrayName === \"indices\" ? gl.ELEMENT_ARRAY_BUFFER : gl.ARRAY_BUFFER;\n  var typedArray = makeTypedArray(array, arrayName);\n  return createBufferFromTypedArray(gl, typedArray, type);\n}\n/**\n * Creates buffers from arrays or typed arrays\n *\n * Given something like this\n *\n *     var arrays = {\n *        positions: [1, 2, 3],\n *        normals: [0, 0, 1],\n *     }\n *\n * returns something like\n *\n *     buffers = {\n *       positions: WebGLBuffer,\n *       normals: WebGLBuffer,\n *     }\n *\n * If the buffer is named 'indices' it will be made an ELEMENT_ARRAY_BUFFER.\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext.\n * @param {module:twgl.Arrays} arrays\n * @return {Object<string, WebGLBuffer>} returns an object with one WebGLBuffer per array\n * @memberOf module:twgl/attributes\n */\n\n\nfunction createBuffersFromArrays(gl, arrays) {\n  var buffers = {};\n  Object.keys(arrays).forEach(function (key) {\n    buffers[key] = createBufferFromArray(gl, arrays[key], key);\n  }); // Ugh!\n\n  if (arrays.indices) {\n    buffers.numElements = arrays.indices.length;\n    buffers.elementType = typedArrays.getGLTypeForTypedArray(makeTypedArray(arrays.indices), 'indices');\n  } else {\n    buffers.numElements = getNumElementsFromNonIndexedArrays(arrays);\n  }\n\n  return buffers;\n}\n\n/***/ }),\n\n/***/ \"./src/draw.js\":\n/*!*********************!*\\\n  !*** ./src/draw.js ***!\n  \\*********************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.drawBufferInfo = drawBufferInfo;\nexports.drawObjectList = drawObjectList;\n\nvar programs = _interopRequireWildcard(__webpack_require__(/*! ./programs.js */ \"./src/programs.js\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Drawing related functions\n *\n * For backward compatibily they are available at both `twgl.draw` and `twgl`\n * itself\n *\n * See {@link module:twgl} for core functions\n *\n * @module twgl/draw\n */\n\n/**\n * Calls `gl.drawElements` or `gl.drawArrays`, whichever is appropriate\n *\n * normally you'd call `gl.drawElements` or `gl.drawArrays` yourself\n * but calling this means if you switch from indexed data to non-indexed\n * data you don't have to remember to update your draw call.\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @param {(module:twgl.BufferInfo|module:twgl.VertexArrayInfo)} bufferInfo A BufferInfo as returned from {@link module:twgl.createBufferInfoFromArrays} or\n *   a VertexArrayInfo as returned from {@link module:twgl.createVertexArrayInfo}\n * @param {number} [type] eg (gl.TRIANGLES, gl.LINES, gl.POINTS, gl.TRIANGLE_STRIP, ...). Defaults to `gl.TRIANGLES`\n * @param {number} [count] An optional count. Defaults to bufferInfo.numElements\n * @param {number} [offset] An optional offset. Defaults to 0.\n * @param {number} [instanceCount] An optional instanceCount. if set then `drawArraysInstanced` or `drawElementsInstanced` will be called\n * @memberOf module:twgl/draw\n */\nfunction drawBufferInfo(gl, bufferInfo, type, count, offset, instanceCount) {\n  type = type === undefined ? gl.TRIANGLES : type;\n  var indices = bufferInfo.indices;\n  var elementType = bufferInfo.elementType;\n  var numElements = count === undefined ? bufferInfo.numElements : count;\n  offset = offset === undefined ? 0 : offset;\n\n  if (elementType || indices) {\n    if (instanceCount !== undefined) {\n      gl.drawElementsInstanced(type, numElements, elementType === undefined ? gl.UNSIGNED_SHORT : bufferInfo.elementType, offset, instanceCount);\n    } else {\n      gl.drawElements(type, numElements, elementType === undefined ? gl.UNSIGNED_SHORT : bufferInfo.elementType, offset);\n    }\n  } else {\n    if (instanceCount !== undefined) {\n      gl.drawArraysInstanced(type, offset, numElements, instanceCount);\n    } else {\n      gl.drawArrays(type, offset, numElements);\n    }\n  }\n}\n/**\n * A DrawObject is useful for putting objects in to an array and passing them to {@link module:twgl.drawObjectList}.\n *\n * You need either a `BufferInfo` or a `VertexArrayInfo`.\n *\n * @typedef {Object} DrawObject\n * @property {boolean} [active] whether or not to draw. Default = `true` (must be `false` to be not true). In otherwords `undefined` = `true`\n * @property {number} [type] type to draw eg. `gl.TRIANGLES`, `gl.LINES`, etc...\n * @property {module:twgl.ProgramInfo} programInfo A ProgramInfo as returned from {@link module:twgl.createProgramInfo}\n * @property {module:twgl.BufferInfo} [bufferInfo] A BufferInfo as returned from {@link module:twgl.createBufferInfoFromArrays}\n * @property {module:twgl.VertexArrayInfo} [vertexArrayInfo] A VertexArrayInfo as returned from {@link module:twgl.createVertexArrayInfo}\n * @property {Object<string, ?>} uniforms The values for the uniforms.\n *   You can pass multiple objects by putting them in an array. For example\n *\n *     var sharedUniforms = {\n *       u_fogNear: 10,\n *       u_projection: ...\n *       ...\n *     };\n *\n *     var localUniforms = {\n *       u_world: ...\n *       u_diffuseColor: ...\n *     };\n *\n *     var drawObj = {\n *       ...\n *       uniforms: [sharedUniforms, localUniforms],\n *     };\n *\n * @property {number} [offset] the offset to pass to `gl.drawArrays` or `gl.drawElements`. Defaults to 0.\n * @property {number} [count] the count to pass to `gl.drawArrays` or `gl.drawElemnts`. Defaults to bufferInfo.numElements.\n * @property {number} [instanceCount] the number of instances. Defaults to undefined.\n * @memberOf module:twgl\n */\n\n/**\n * Draws a list of objects\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @param {DrawObject[]} objectsToDraw an array of objects to draw.\n * @memberOf module:twgl/draw\n */\n\n\nfunction drawObjectList(gl, objectsToDraw) {\n  var lastUsedProgramInfo = null;\n  var lastUsedBufferInfo = null;\n  objectsToDraw.forEach(function (object) {\n    if (object.active === false) {\n      return;\n    }\n\n    var programInfo = object.programInfo;\n    var bufferInfo = object.vertexArrayInfo || object.bufferInfo;\n    var bindBuffers = false;\n    var type = object.type === undefined ? gl.TRIANGLES : object.type;\n\n    if (programInfo !== lastUsedProgramInfo) {\n      lastUsedProgramInfo = programInfo;\n      gl.useProgram(programInfo.program); // We have to rebind buffers when changing programs because we\n      // only bind buffers the program uses. So if 2 programs use the same\n      // bufferInfo but the 1st one uses only positions the when the\n      // we switch to the 2nd one some of the attributes will not be on.\n\n      bindBuffers = true;\n    } // Setup all the needed attributes.\n\n\n    if (bindBuffers || bufferInfo !== lastUsedBufferInfo) {\n      if (lastUsedBufferInfo && lastUsedBufferInfo.vertexArrayObject && !bufferInfo.vertexArrayObject) {\n        gl.bindVertexArray(null);\n      }\n\n      lastUsedBufferInfo = bufferInfo;\n      programs.setBuffersAndAttributes(gl, programInfo, bufferInfo);\n    } // Set the uniforms.\n\n\n    programs.setUniforms(programInfo, object.uniforms); // Draw\n\n    drawBufferInfo(gl, bufferInfo, type, object.count, object.offset, object.instanceCount);\n  });\n\n  if (lastUsedBufferInfo.vertexArrayObject) {\n    gl.bindVertexArray(null);\n  }\n}\n\n/***/ }),\n\n/***/ \"./src/framebuffers.js\":\n/*!*****************************!*\\\n  !*** ./src/framebuffers.js ***!\n  \\*****************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.bindFramebufferInfo = bindFramebufferInfo;\nexports.createFramebufferInfo = createFramebufferInfo;\nexports.resizeFramebufferInfo = resizeFramebufferInfo;\n\nvar textures = _interopRequireWildcard(__webpack_require__(/*! ./textures.js */ \"./src/textures.js\"));\n\nvar helper = _interopRequireWildcard(__webpack_require__(/*! ./helper.js */ \"./src/helper.js\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Framebuffer related functions\n *\n * For backward compatibily they are available at both `twgl.framebuffer` and `twgl`\n * itself\n *\n * See {@link module:twgl} for core functions\n *\n * @module twgl/framebuffers\n */\n// make sure we don't see a global gl\nvar gl = undefined; // eslint-disable-line\n\nvar UNSIGNED_BYTE = 0x1401;\n/* PixelFormat */\n\nvar DEPTH_COMPONENT = 0x1902;\nvar RGBA = 0x1908;\n/* Framebuffer Object. */\n\nvar RGBA4 = 0x8056;\nvar RGB5_A1 = 0x8057;\nvar RGB565 = 0x8D62;\nvar DEPTH_COMPONENT16 = 0x81A5;\nvar STENCIL_INDEX = 0x1901;\nvar STENCIL_INDEX8 = 0x8D48;\nvar DEPTH_STENCIL = 0x84F9;\nvar COLOR_ATTACHMENT0 = 0x8CE0;\nvar DEPTH_ATTACHMENT = 0x8D00;\nvar STENCIL_ATTACHMENT = 0x8D20;\nvar DEPTH_STENCIL_ATTACHMENT = 0x821A;\n/* TextureWrapMode */\n\nvar REPEAT = 0x2901; // eslint-disable-line\n\nvar CLAMP_TO_EDGE = 0x812F;\nvar MIRRORED_REPEAT = 0x8370; // eslint-disable-line\n\n/* TextureMagFilter */\n\nvar NEAREST = 0x2600; // eslint-disable-line\n\nvar LINEAR = 0x2601;\n/* TextureMinFilter */\n\nvar NEAREST_MIPMAP_NEAREST = 0x2700; // eslint-disable-line\n\nvar LINEAR_MIPMAP_NEAREST = 0x2701; // eslint-disable-line\n\nvar NEAREST_MIPMAP_LINEAR = 0x2702; // eslint-disable-line\n\nvar LINEAR_MIPMAP_LINEAR = 0x2703; // eslint-disable-line\n\n/**\n * The options for a framebuffer attachment.\n *\n * Note: For a `format` that is a texture include all the texture\n * options from {@link module:twgl.TextureOptions} for example\n * `min`, `mag`, `clamp`, etc... Note that unlike {@link module:twgl.TextureOptions}\n * `auto` defaults to `false` for attachment textures but `min` and `mag` default\n * to `gl.LINEAR` and `wrap` defaults to `CLAMP_TO_EDGE`\n *\n * @typedef {Object} AttachmentOptions\n * @property {number} [attach] The attachment point. Defaults\n *   to `gl.COLOR_ATTACTMENT0 + ndx` unless type is a depth or stencil type\n *   then it's gl.DEPTH_ATTACHMENT or `gl.DEPTH_STENCIL_ATTACHMENT` depending\n *   on the format or attachment type.\n * @property {number} [format] The format. If one of `gl.RGBA4`,\n *   `gl.RGB565`, `gl.RGB5_A1`, `gl.DEPTH_COMPONENT16`,\n *   `gl.STENCIL_INDEX8` or `gl.DEPTH_STENCIL` then will create a\n *   renderbuffer. Otherwise will create a texture. Default = `gl.RGBA`\n * @property {number} [type] The type. Used for texture. Default = `gl.UNSIGNED_BYTE`.\n * @property {number} [target] The texture target for `gl.framebufferTexture2D`.\n *   Defaults to `gl.TEXTURE_2D`. Set to appropriate face for cube maps.\n * @property {number} [level] level for `gl.framebufferTexture2D`. Defaults to 0.\n * @property {WebGLObject} [attachment] An existing renderbuffer or texture.\n *    If provided will attach this Object. This allows you to share\n *    attachemnts across framebuffers.\n * @memberOf module:twgl\n */\n\nvar defaultAttachments = [{\n  format: RGBA,\n  type: UNSIGNED_BYTE,\n  min: LINEAR,\n  wrap: CLAMP_TO_EDGE\n}, {\n  format: DEPTH_STENCIL\n}];\nvar attachmentsByFormat = {};\nattachmentsByFormat[DEPTH_STENCIL] = DEPTH_STENCIL_ATTACHMENT;\nattachmentsByFormat[STENCIL_INDEX] = STENCIL_ATTACHMENT;\nattachmentsByFormat[STENCIL_INDEX8] = STENCIL_ATTACHMENT;\nattachmentsByFormat[DEPTH_COMPONENT] = DEPTH_ATTACHMENT;\nattachmentsByFormat[DEPTH_COMPONENT16] = DEPTH_ATTACHMENT;\n\nfunction getAttachmentPointForFormat(format) {\n  return attachmentsByFormat[format];\n}\n\nvar renderbufferFormats = {};\nrenderbufferFormats[RGBA4] = true;\nrenderbufferFormats[RGB5_A1] = true;\nrenderbufferFormats[RGB565] = true;\nrenderbufferFormats[DEPTH_STENCIL] = true;\nrenderbufferFormats[DEPTH_COMPONENT16] = true;\nrenderbufferFormats[STENCIL_INDEX] = true;\nrenderbufferFormats[STENCIL_INDEX8] = true;\n\nfunction isRenderbufferFormat(format) {\n  return renderbufferFormats[format];\n}\n/**\n * @typedef {Object} FramebufferInfo\n * @property {WebGLFramebuffer} framebuffer The WebGLFramebuffer for this framebufferInfo\n * @property {WebGLObject[]} attachments The created attachments in the same order as passed in to {@link module:twgl.createFramebufferInfo}.\n * @memberOf module:twgl\n */\n\n/**\n * Creates a framebuffer and attachments.\n *\n * This returns a {@link module:twgl.FramebufferInfo} because it needs to return the attachments as well as the framebuffer.\n *\n * The simplest usage\n *\n *     // create an RGBA/UNSIGNED_BYTE texture and DEPTH_STENCIL renderbuffer\n *     const fbi = twgl.createFramebufferInfo(gl);\n *\n * More complex usage\n *\n *     // create an RGB565 renderbuffer and a STENCIL_INDEX8 renderbuffer\n *     const attachments = [\n *       { format: RGB565, mag: NEAREST },\n *       { format: STENCIL_INDEX8 },\n *     ]\n *     const fbi = twgl.createFramebufferInfo(gl, attachments);\n *\n * Passing in a specific size\n *\n *     const width = 256;\n *     const height = 256;\n *     const fbi = twgl.createFramebufferInfo(gl, attachments, width, height);\n *\n * **Note!!** It is up to you to check if the framebuffer is renderable by calling `gl.checkFramebufferStatus`.\n * [WebGL only guarantees 3 combinations of attachments work](https://www.khronos.org/registry/webgl/specs/latest/1.0/#6.6).\n *\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {module:twgl.AttachmentOptions[]} [attachments] which attachments to create. If not provided the default is a framebuffer with an\n *    `RGBA`, `UNSIGNED_BYTE` texture `COLOR_ATTACHMENT0` and a `DEPTH_STENCIL` renderbuffer `DEPTH_STENCIL_ATTACHMENT`.\n * @param {number} [width] the width for the attachments. Default = size of drawingBuffer\n * @param {number} [height] the height for the attachments. Defautt = size of drawingBuffer\n * @return {module:twgl.FramebufferInfo} the framebuffer and attachments.\n * @memberOf module:twgl/framebuffers\n */\n\n\nfunction createFramebufferInfo(gl, attachments, width, height) {\n  var target = gl.FRAMEBUFFER;\n  var fb = gl.createFramebuffer();\n  gl.bindFramebuffer(target, fb);\n  width = width || gl.drawingBufferWidth;\n  height = height || gl.drawingBufferHeight;\n  attachments = attachments || defaultAttachments;\n  var colorAttachmentCount = 0;\n  var framebufferInfo = {\n    framebuffer: fb,\n    attachments: [],\n    width: width,\n    height: height\n  };\n  attachments.forEach(function (attachmentOptions) {\n    var attachment = attachmentOptions.attachment;\n    var format = attachmentOptions.format;\n    var attachmentPoint = getAttachmentPointForFormat(format);\n\n    if (!attachmentPoint) {\n      attachmentPoint = COLOR_ATTACHMENT0 + colorAttachmentCount++;\n    }\n\n    if (!attachment) {\n      if (isRenderbufferFormat(format)) {\n        attachment = gl.createRenderbuffer();\n        gl.bindRenderbuffer(gl.RENDERBUFFER, attachment);\n        gl.renderbufferStorage(gl.RENDERBUFFER, format, width, height);\n      } else {\n        var textureOptions = Object.assign({}, attachmentOptions);\n        textureOptions.width = width;\n        textureOptions.height = height;\n\n        if (textureOptions.auto === undefined) {\n          textureOptions.auto = false;\n          textureOptions.min = textureOptions.min || textureOptions.minMag || gl.LINEAR;\n          textureOptions.mag = textureOptions.mag || textureOptions.minMag || gl.LINEAR;\n          textureOptions.wrapS = textureOptions.wrapS || textureOptions.wrap || gl.CLAMP_TO_EDGE;\n          textureOptions.wrapT = textureOptions.wrapT || textureOptions.wrap || gl.CLAMP_TO_EDGE;\n        }\n\n        attachment = textures.createTexture(gl, textureOptions);\n      }\n    }\n\n    if (helper.isRenderbuffer(gl, attachment)) {\n      gl.framebufferRenderbuffer(target, attachmentPoint, gl.RENDERBUFFER, attachment);\n    } else if (helper.isTexture(gl, attachment)) {\n      gl.framebufferTexture2D(target, attachmentPoint, attachmentOptions.texTarget || gl.TEXTURE_2D, attachment, attachmentOptions.level || 0);\n    } else {\n      throw new Error('unknown attachment type');\n    }\n\n    framebufferInfo.attachments.push(attachment);\n  });\n  return framebufferInfo;\n}\n/**\n * Resizes the attachments of a framebuffer.\n *\n * You need to pass in the same `attachments` as you passed in {@link module:twgl.createFramebufferInfo}\n * because TWGL has no idea the format/type of each attachment.\n *\n * The simplest usage\n *\n *     // create an RGBA/UNSIGNED_BYTE texture and DEPTH_STENCIL renderbuffer\n *     const fbi = twgl.createFramebufferInfo(gl);\n *\n *     ...\n *\n *     function render() {\n *       if (twgl.resizeCanvasToDisplaySize(gl.canvas)) {\n *         // resize the attachments\n *         twgl.resizeFramebufferInfo(gl, fbi);\n *       }\n *\n * More complex usage\n *\n *     // create an RGB565 renderbuffer and a STENCIL_INDEX8 renderbuffer\n *     const attachments = [\n *       { format: RGB565, mag: NEAREST },\n *       { format: STENCIL_INDEX8 },\n *     ]\n *     const fbi = twgl.createFramebufferInfo(gl, attachments);\n *\n *     ...\n *\n *     function render() {\n *       if (twgl.resizeCanvasToDisplaySize(gl.canvas)) {\n *         // resize the attachments to match\n *         twgl.resizeFramebufferInfo(gl, fbi, attachments);\n *       }\n *\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {module:twgl.FramebufferInfo} framebufferInfo a framebufferInfo as returned from {@link module:twgl.createFramebufferInfo}.\n * @param {module:twgl.AttachmentOptions[]} [attachments] the same attachments options as passed to {@link module:twgl.createFramebufferInfo}.\n * @param {number} [width] the width for the attachments. Default = size of drawingBuffer\n * @param {number} [height] the height for the attachments. Defautt = size of drawingBuffer\n * @memberOf module:twgl/framebuffers\n */\n\n\nfunction resizeFramebufferInfo(gl, framebufferInfo, attachments, width, height) {\n  width = width || gl.drawingBufferWidth;\n  height = height || gl.drawingBufferHeight;\n  framebufferInfo.width = width;\n  framebufferInfo.height = height;\n  attachments = attachments || defaultAttachments;\n  attachments.forEach(function (attachmentOptions, ndx) {\n    var attachment = framebufferInfo.attachments[ndx];\n    var format = attachmentOptions.format;\n\n    if (helper.isRenderbuffer(gl, attachment)) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, attachment);\n      gl.renderbufferStorage(gl.RENDERBUFFER, format, width, height);\n    } else if (helper.isTexture(gl, attachment)) {\n      textures.resizeTexture(gl, attachment, attachmentOptions, width, height);\n    } else {\n      throw new Error('unknown attachment type');\n    }\n  });\n}\n/**\n * Binds a framebuffer\n *\n * This function pretty much soley exists because I spent hours\n * trying to figure out why something I wrote wasn't working only\n * to realize I forget to set the viewport dimensions.\n * My hope is this function will fix that.\n *\n * It is effectively the same as\n *\n *     gl.bindFramebuffer(gl.FRAMEBUFFER, someFramebufferInfo.framebuffer);\n *     gl.viewport(0, 0, someFramebufferInfo.width, someFramebufferInfo.height);\n *\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {module:twgl.FramebufferInfo} [framebufferInfo] a framebufferInfo as returned from {@link module:twgl.createFramebufferInfo}.\n *   If not passed will bind the canvas.\n * @param {number} [target] The target. If not passed `gl.FRAMEBUFFER` will be used.\n * @memberOf module:twgl/framebuffers\n */\n\n\nfunction bindFramebufferInfo(gl, framebufferInfo, target) {\n  target = target || gl.FRAMEBUFFER;\n\n  if (framebufferInfo) {\n    gl.bindFramebuffer(target, framebufferInfo.framebuffer);\n    gl.viewport(0, 0, framebufferInfo.width, framebufferInfo.height);\n  } else {\n    gl.bindFramebuffer(target, null);\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n  }\n}\n\n/***/ }),\n\n/***/ \"./src/helper.js\":\n/*!***********************!*\\\n  !*** ./src/helper.js ***!\n  \\***********************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.copyExistingProperties = copyExistingProperties;\nexports.copyNamedProperties = copyNamedProperties;\nexports.isBuffer = isBuffer;\nexports.isRenderbuffer = isRenderbuffer;\nexports.isShader = isShader;\nexports.isTexture = isTexture;\nexports.isSampler = isSampler;\nexports.warn = exports.error = void 0;\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint no-console: \"off\" */\n\n/**\n * Copy named properties\n *\n * @param {string[]} names names of properties to copy\n * @param {object} src object to copy properties from\n * @param {object} dst object to copy properties to\n * @private\n */\nfunction copyNamedProperties(names, src, dst) {\n  names.forEach(function (name) {\n    var value = src[name];\n\n    if (value !== undefined) {\n      dst[name] = value;\n    }\n  });\n}\n/**\n * Copies properties from source to dest only if a matching key is in dest\n *\n * @param {Object.<string, ?>} src the source\n * @param {Object.<string, ?>} dst the dest\n * @private\n */\n\n\nfunction copyExistingProperties(src, dst) {\n  Object.keys(dst).forEach(function (key) {\n    if (dst.hasOwnProperty(key) && src.hasOwnProperty(key)) {\n      dst[key] = src[key];\n    }\n  });\n}\n\nvar error = typeof console !== 'undefined' && console.error && typeof console.error === \"function\" ? console.error.bind(console) : function () {};\nexports.error = error;\nvar warn = typeof console !== 'undefined' && console.warn && typeof console.warn === \"function\" ? console.warn.bind(console) : function () {};\nexports.warn = warn;\n\nfunction isBuffer(gl, t) {\n  return typeof WebGLBuffer !== 'undefined' && t instanceof WebGLBuffer;\n}\n\nfunction isRenderbuffer(gl, t) {\n  return typeof WebGLRenderbuffer !== 'undefined' && t instanceof WebGLRenderbuffer;\n}\n\nfunction isShader(gl, t) {\n  return typeof WebGLShader !== 'undefined' && t instanceof WebGLShader;\n}\n\nfunction isTexture(gl, t) {\n  return typeof WebGLTexture !== 'undefined' && t instanceof WebGLTexture;\n}\n\nfunction isSampler(gl, t) {\n  return typeof WebGLSampler !== 'undefined' && t instanceof WebGLSampler;\n}\n\n/***/ }),\n\n/***/ \"./src/m4.js\":\n/*!*******************!*\\\n  !*** ./src/m4.js ***!\n  \\*******************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.axisRotate = axisRotate;\nexports.axisRotation = axisRotation;\nexports.copy = copy;\nexports.frustum = frustum;\nexports.getAxis = getAxis;\nexports.getTranslation = getTranslation;\nexports.identity = identity;\nexports.inverse = inverse;\nexports.lookAt = lookAt;\nexports.multiply = multiply;\nexports.negate = negate;\nexports.ortho = ortho;\nexports.perspective = perspective;\nexports.rotateX = rotateX;\nexports.rotateY = rotateY;\nexports.rotateZ = rotateZ;\nexports.rotationX = rotationX;\nexports.rotationY = rotationY;\nexports.rotationZ = rotationZ;\nexports.scale = scale;\nexports.scaling = scaling;\nexports.setAxis = setAxis;\nexports.setDefaultType = setDefaultType;\nexports.setTranslation = setTranslation;\nexports.transformDirection = transformDirection;\nexports.transformNormal = transformNormal;\nexports.transformPoint = transformPoint;\nexports.translate = translate;\nexports.translation = translation;\nexports.transpose = transpose;\n\nvar v3 = _interopRequireWildcard(__webpack_require__(/*! ./v3.js */ \"./src/v3.js\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * 4x4 Matrix math math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new matrix. In other words you can do this\n *\n *     const mat = m4.translation([1, 2, 3]);  // Creates a new translation matrix\n *\n * or\n *\n *     const mat = m4.create();\n *     m4.translation([1, 2, 3], mat);  // Puts translation matrix in mat.\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always save to pass any matrix as the destination. So for example\n *\n *     const mat = m4.identity();\n *     const trans = m4.translation([1, 2, 3]);\n *     m4.multiply(mat, trans, mat);  // Multiplies mat * trans and puts result in mat.\n *\n * @module twgl/m4\n */\nvar MatType = Float32Array;\nvar tempV3a = v3.create();\nvar tempV3b = v3.create();\nvar tempV3c = v3.create();\n/**\n * A JavaScript array with 16 values or a Float32Array with 16 values.\n * When created by the library will create the default type which is `Float32Array`\n * but can be set by calling {@link module:twgl/m4.setDefaultType}.\n * @typedef {(number[]|Float32Array)} Mat4\n * @memberOf module:twgl/m4\n */\n\n/**\n * Sets the type this library creates for a Mat4\n * @param {constructor} ctor the constructor for the type. Either `Float32Array` or `Array`\n * @return {constructor} previous constructor for Mat4\n * @memberOf module:twgl/m4\n */\n\nfunction setDefaultType(ctor) {\n  var oldType = MatType;\n  MatType = ctor;\n  return oldType;\n}\n/**\n * Negates a matrix.\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} -m.\n * @memberOf module:twgl/m4\n */\n\n\nfunction negate(m, dst) {\n  dst = dst || new MatType(16);\n  dst[0] = -m[0];\n  dst[1] = -m[1];\n  dst[2] = -m[2];\n  dst[3] = -m[3];\n  dst[4] = -m[4];\n  dst[5] = -m[5];\n  dst[6] = -m[6];\n  dst[7] = -m[7];\n  dst[8] = -m[8];\n  dst[9] = -m[9];\n  dst[10] = -m[10];\n  dst[11] = -m[11];\n  dst[12] = -m[12];\n  dst[13] = -m[13];\n  dst[14] = -m[14];\n  dst[15] = -m[15];\n  return dst;\n}\n/**\n * Copies a matrix.\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {module:twgl/m4.Mat4} [dst] The matrix.\n * @return {module:twgl/m4.Mat4} A copy of m.\n * @memberOf module:twgl/m4\n */\n\n\nfunction copy(m, dst) {\n  dst = dst || new MatType(16);\n  dst[0] = m[0];\n  dst[1] = m[1];\n  dst[2] = m[2];\n  dst[3] = m[3];\n  dst[4] = m[4];\n  dst[5] = m[5];\n  dst[6] = m[6];\n  dst[7] = m[7];\n  dst[8] = m[8];\n  dst[9] = m[9];\n  dst[10] = m[10];\n  dst[11] = m[11];\n  dst[12] = m[12];\n  dst[13] = m[13];\n  dst[14] = m[14];\n  dst[15] = m[15];\n  return dst;\n}\n/**\n * Creates an n-by-n identity matrix.\n *\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} An n-by-n identity matrix.\n * @memberOf module:twgl/m4\n */\n\n\nfunction identity(dst) {\n  dst = dst || new MatType(16);\n  dst[0] = 1;\n  dst[1] = 0;\n  dst[2] = 0;\n  dst[3] = 0;\n  dst[4] = 0;\n  dst[5] = 1;\n  dst[6] = 0;\n  dst[7] = 0;\n  dst[8] = 0;\n  dst[9] = 0;\n  dst[10] = 1;\n  dst[11] = 0;\n  dst[12] = 0;\n  dst[13] = 0;\n  dst[14] = 0;\n  dst[15] = 1;\n  return dst;\n}\n/**\n * Takes the transpose of a matrix.\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} The transpose of m.\n * @memberOf module:twgl/m4\n */\n\n\nfunction transpose(m, dst) {\n  dst = dst || new MatType(16);\n\n  if (dst === m) {\n    var t;\n    t = m[1];\n    m[1] = m[4];\n    m[4] = t;\n    t = m[2];\n    m[2] = m[8];\n    m[8] = t;\n    t = m[3];\n    m[3] = m[12];\n    m[12] = t;\n    t = m[6];\n    m[6] = m[9];\n    m[9] = t;\n    t = m[7];\n    m[7] = m[13];\n    m[13] = t;\n    t = m[11];\n    m[11] = m[14];\n    m[14] = t;\n    return dst;\n  }\n\n  var m00 = m[0 * 4 + 0];\n  var m01 = m[0 * 4 + 1];\n  var m02 = m[0 * 4 + 2];\n  var m03 = m[0 * 4 + 3];\n  var m10 = m[1 * 4 + 0];\n  var m11 = m[1 * 4 + 1];\n  var m12 = m[1 * 4 + 2];\n  var m13 = m[1 * 4 + 3];\n  var m20 = m[2 * 4 + 0];\n  var m21 = m[2 * 4 + 1];\n  var m22 = m[2 * 4 + 2];\n  var m23 = m[2 * 4 + 3];\n  var m30 = m[3 * 4 + 0];\n  var m31 = m[3 * 4 + 1];\n  var m32 = m[3 * 4 + 2];\n  var m33 = m[3 * 4 + 3];\n  dst[0] = m00;\n  dst[1] = m10;\n  dst[2] = m20;\n  dst[3] = m30;\n  dst[4] = m01;\n  dst[5] = m11;\n  dst[6] = m21;\n  dst[7] = m31;\n  dst[8] = m02;\n  dst[9] = m12;\n  dst[10] = m22;\n  dst[11] = m32;\n  dst[12] = m03;\n  dst[13] = m13;\n  dst[14] = m23;\n  dst[15] = m33;\n  return dst;\n}\n/**\n * Computes the inverse of a 4-by-4 matrix.\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} The inverse of m.\n * @memberOf module:twgl/m4\n */\n\n\nfunction inverse(m, dst) {\n  dst = dst || new MatType(16);\n  var m00 = m[0 * 4 + 0];\n  var m01 = m[0 * 4 + 1];\n  var m02 = m[0 * 4 + 2];\n  var m03 = m[0 * 4 + 3];\n  var m10 = m[1 * 4 + 0];\n  var m11 = m[1 * 4 + 1];\n  var m12 = m[1 * 4 + 2];\n  var m13 = m[1 * 4 + 3];\n  var m20 = m[2 * 4 + 0];\n  var m21 = m[2 * 4 + 1];\n  var m22 = m[2 * 4 + 2];\n  var m23 = m[2 * 4 + 3];\n  var m30 = m[3 * 4 + 0];\n  var m31 = m[3 * 4 + 1];\n  var m32 = m[3 * 4 + 2];\n  var m33 = m[3 * 4 + 3];\n  var tmp_0 = m22 * m33;\n  var tmp_1 = m32 * m23;\n  var tmp_2 = m12 * m33;\n  var tmp_3 = m32 * m13;\n  var tmp_4 = m12 * m23;\n  var tmp_5 = m22 * m13;\n  var tmp_6 = m02 * m33;\n  var tmp_7 = m32 * m03;\n  var tmp_8 = m02 * m23;\n  var tmp_9 = m22 * m03;\n  var tmp_10 = m02 * m13;\n  var tmp_11 = m12 * m03;\n  var tmp_12 = m20 * m31;\n  var tmp_13 = m30 * m21;\n  var tmp_14 = m10 * m31;\n  var tmp_15 = m30 * m11;\n  var tmp_16 = m10 * m21;\n  var tmp_17 = m20 * m11;\n  var tmp_18 = m00 * m31;\n  var tmp_19 = m30 * m01;\n  var tmp_20 = m00 * m21;\n  var tmp_21 = m20 * m01;\n  var tmp_22 = m00 * m11;\n  var tmp_23 = m10 * m01;\n  var t0 = tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31 - (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\n  var t1 = tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31 - (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\n  var t2 = tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31 - (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\n  var t3 = tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21 - (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\n  var d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\n  dst[0] = d * t0;\n  dst[1] = d * t1;\n  dst[2] = d * t2;\n  dst[3] = d * t3;\n  dst[4] = d * (tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30 - (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30));\n  dst[5] = d * (tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30 - (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30));\n  dst[6] = d * (tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30 - (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30));\n  dst[7] = d * (tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20 - (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20));\n  dst[8] = d * (tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33 - (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33));\n  dst[9] = d * (tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33 - (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33));\n  dst[10] = d * (tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33 - (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33));\n  dst[11] = d * (tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23 - (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23));\n  dst[12] = d * (tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12 - (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22));\n  dst[13] = d * (tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22 - (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02));\n  dst[14] = d * (tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02 - (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12));\n  dst[15] = d * (tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12 - (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02));\n  return dst;\n}\n/**\n * Multiplies two 4-by-4 matrices with a on the left and b on the right\n * @param {module:twgl/m4.Mat4} a The matrix on the left.\n * @param {module:twgl/m4.Mat4} b The matrix on the right.\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} The matrix product of a and b.\n * @memberOf module:twgl/m4\n */\n\n\nfunction multiply(a, b, dst) {\n  dst = dst || new MatType(16);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4 + 0];\n  var a11 = a[4 + 1];\n  var a12 = a[4 + 2];\n  var a13 = a[4 + 3];\n  var a20 = a[8 + 0];\n  var a21 = a[8 + 1];\n  var a22 = a[8 + 2];\n  var a23 = a[8 + 3];\n  var a30 = a[12 + 0];\n  var a31 = a[12 + 1];\n  var a32 = a[12 + 2];\n  var a33 = a[12 + 3];\n  var b00 = b[0];\n  var b01 = b[1];\n  var b02 = b[2];\n  var b03 = b[3];\n  var b10 = b[4 + 0];\n  var b11 = b[4 + 1];\n  var b12 = b[4 + 2];\n  var b13 = b[4 + 3];\n  var b20 = b[8 + 0];\n  var b21 = b[8 + 1];\n  var b22 = b[8 + 2];\n  var b23 = b[8 + 3];\n  var b30 = b[12 + 0];\n  var b31 = b[12 + 1];\n  var b32 = b[12 + 2];\n  var b33 = b[12 + 3];\n  dst[0] = a00 * b00 + a10 * b01 + a20 * b02 + a30 * b03;\n  dst[1] = a01 * b00 + a11 * b01 + a21 * b02 + a31 * b03;\n  dst[2] = a02 * b00 + a12 * b01 + a22 * b02 + a32 * b03;\n  dst[3] = a03 * b00 + a13 * b01 + a23 * b02 + a33 * b03;\n  dst[4] = a00 * b10 + a10 * b11 + a20 * b12 + a30 * b13;\n  dst[5] = a01 * b10 + a11 * b11 + a21 * b12 + a31 * b13;\n  dst[6] = a02 * b10 + a12 * b11 + a22 * b12 + a32 * b13;\n  dst[7] = a03 * b10 + a13 * b11 + a23 * b12 + a33 * b13;\n  dst[8] = a00 * b20 + a10 * b21 + a20 * b22 + a30 * b23;\n  dst[9] = a01 * b20 + a11 * b21 + a21 * b22 + a31 * b23;\n  dst[10] = a02 * b20 + a12 * b21 + a22 * b22 + a32 * b23;\n  dst[11] = a03 * b20 + a13 * b21 + a23 * b22 + a33 * b23;\n  dst[12] = a00 * b30 + a10 * b31 + a20 * b32 + a30 * b33;\n  dst[13] = a01 * b30 + a11 * b31 + a21 * b32 + a31 * b33;\n  dst[14] = a02 * b30 + a12 * b31 + a22 * b32 + a32 * b33;\n  dst[15] = a03 * b30 + a13 * b31 + a23 * b32 + a33 * b33;\n  return dst;\n}\n/**\n * Sets the translation component of a 4-by-4 matrix to the given\n * vector.\n * @param {module:twgl/m4.Mat4} a The matrix.\n * @param {module:twgl/v3.Vec3} v The vector.\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none, a new one is created.\n * @return {module:twgl/m4.Mat4} a once modified.\n * @memberOf module:twgl/m4\n */\n\n\nfunction setTranslation(a, v, dst) {\n  dst = dst || identity();\n\n  if (a !== dst) {\n    dst[0] = a[0];\n    dst[1] = a[1];\n    dst[2] = a[2];\n    dst[3] = a[3];\n    dst[4] = a[4];\n    dst[5] = a[5];\n    dst[6] = a[6];\n    dst[7] = a[7];\n    dst[8] = a[8];\n    dst[9] = a[9];\n    dst[10] = a[10];\n    dst[11] = a[11];\n  }\n\n  dst[12] = v[0];\n  dst[13] = v[1];\n  dst[14] = v[2];\n  dst[15] = 1;\n  return dst;\n}\n/**\n * Returns the translation component of a 4-by-4 matrix as a vector with 3\n * entries.\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {module:twgl/v3.Vec3} [dst] vector.\n * @return {module:twgl/v3.Vec3} The translation component of m.\n * @memberOf module:twgl/m4\n */\n\n\nfunction getTranslation(m, dst) {\n  dst = dst || v3.create();\n  dst[0] = m[12];\n  dst[1] = m[13];\n  dst[2] = m[14];\n  return dst;\n}\n/**\n * Returns an axis of a 4x4 matrix as a vector with 3 entries\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {number} axis The axis 0 = x, 1 = y, 2 = z;\n * @return {module:twgl/v3.Vec3} [dst] vector.\n * @return {module:twgl/v3.Vec3} The axis component of m.\n * @memberOf module:twgl/m4\n */\n\n\nfunction getAxis(m, axis, dst) {\n  dst = dst || v3.create();\n  var off = axis * 4;\n  dst[0] = m[off + 0];\n  dst[1] = m[off + 1];\n  dst[2] = m[off + 2];\n  return dst;\n}\n/**\n * Sets an axis of a 4x4 matrix as a vector with 3 entries\n * @param {module:twgl/v3.Vec3} v the axis vector\n * @param {number} axis The axis  0 = x, 1 = y, 2 = z;\n * @param {module:twgl/m4.Mat4} [dst] The matrix to set. If none, a new one is created.\n * @return {module:twgl/m4.Mat4} dst\n * @memberOf module:twgl/m4\n */\n\n\nfunction setAxis(a, v, axis, dst) {\n  if (dst !== a) {\n    dst = copy(a, dst);\n  }\n\n  var off = axis * 4;\n  dst[off + 0] = v[0];\n  dst[off + 1] = v[1];\n  dst[off + 2] = v[2];\n  return dst;\n}\n/**\n * Computes a 4-by-4 perspective transformation matrix given the angular height\n * of the frustum, the aspect ratio, and the near and far clipping planes.  The\n * arguments define a frustum extending in the negative z direction.  The given\n * angle is the vertical angle of the frustum, and the horizontal angle is\n * determined to produce the given aspect ratio.  The arguments near and far are\n * the distances to the near and far clipping planes.  Note that near and far\n * are not z coordinates, but rather they are distances along the negative\n * z-axis.  The matrix generated sends the viewing frustum to the unit box.\n * We assume a unit box extending from -1 to 1 in the x and y dimensions and\n * from 0 to 1 in the z dimension.\n * @param {number} fieldOfViewYInRadians The camera angle from top to bottom (in radians).\n * @param {number} aspect The aspect ratio width / height.\n * @param {number} zNear The depth (negative z coordinate)\n *     of the near clipping plane.\n * @param {number} zFar The depth (negative z coordinate)\n *     of the far clipping plane.\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} The perspective matrix.\n * @memberOf module:twgl/m4\n */\n\n\nfunction perspective(fieldOfViewYInRadians, aspect, zNear, zFar, dst) {\n  dst = dst || new MatType(16);\n  var f = Math.tan(Math.PI * 0.5 - 0.5 * fieldOfViewYInRadians);\n  var rangeInv = 1.0 / (zNear - zFar);\n  dst[0] = f / aspect;\n  dst[1] = 0;\n  dst[2] = 0;\n  dst[3] = 0;\n  dst[4] = 0;\n  dst[5] = f;\n  dst[6] = 0;\n  dst[7] = 0;\n  dst[8] = 0;\n  dst[9] = 0;\n  dst[10] = (zNear + zFar) * rangeInv;\n  dst[11] = -1;\n  dst[12] = 0;\n  dst[13] = 0;\n  dst[14] = zNear * zFar * rangeInv * 2;\n  dst[15] = 0;\n  return dst;\n}\n/**\n * Computes a 4-by-4 othogonal transformation matrix given the left, right,\n * bottom, and top dimensions of the near clipping plane as well as the\n * near and far clipping plane distances.\n * @param {number} left Left side of the near clipping plane viewport.\n * @param {number} right Right side of the near clipping plane viewport.\n * @param {number} bottom Bottom of the near clipping plane viewport.\n * @param {number} top Top of the near clipping plane viewport.\n * @param {number} near The depth (negative z coordinate)\n *     of the near clipping plane.\n * @param {number} far The depth (negative z coordinate)\n *     of the far clipping plane.\n * @param {module:twgl/m4.Mat4} [dst] Output matrix.\n * @return {module:twgl/m4.Mat4} The perspective matrix.\n * @memberOf module:twgl/m4\n */\n\n\nfunction ortho(left, right, bottom, top, near, far, dst) {\n  dst = dst || new MatType(16);\n  dst[0] = 2 / (right - left);\n  dst[1] = 0;\n  dst[2] = 0;\n  dst[3] = 0;\n  dst[4] = 0;\n  dst[5] = 2 / (top - bottom);\n  dst[6] = 0;\n  dst[7] = 0;\n  dst[8] = 0;\n  dst[9] = 0;\n  dst[10] = 2 / (near - far);\n  dst[11] = 0;\n  dst[12] = (right + left) / (left - right);\n  dst[13] = (top + bottom) / (bottom - top);\n  dst[14] = (far + near) / (near - far);\n  dst[15] = 1;\n  return dst;\n}\n/**\n * Computes a 4-by-4 perspective transformation matrix given the left, right,\n * top, bottom, near and far clipping planes. The arguments define a frustum\n * extending in the negative z direction. The arguments near and far are the\n * distances to the near and far clipping planes. Note that near and far are not\n * z coordinates, but rather they are distances along the negative z-axis. The\n * matrix generated sends the viewing frustum to the unit box. We assume a unit\n * box extending from -1 to 1 in the x and y dimensions and from 0 to 1 in the z\n * dimension.\n * @param {number} left The x coordinate of the left plane of the box.\n * @param {number} right The x coordinate of the right plane of the box.\n * @param {number} bottom The y coordinate of the bottom plane of the box.\n * @param {number} top The y coordinate of the right plane of the box.\n * @param {number} near The negative z coordinate of the near plane of the box.\n * @param {number} far The negative z coordinate of the far plane of the box.\n * @param {module:twgl/m4.Mat4} [dst] Output matrix.\n * @return {module:twgl/m4.Mat4} The perspective projection matrix.\n * @memberOf module:twgl/m4\n */\n\n\nfunction frustum(left, right, bottom, top, near, far, dst) {\n  dst = dst || new MatType(16);\n  var dx = right - left;\n  var dy = top - bottom;\n  var dz = near - far;\n  dst[0] = 2 * near / dx;\n  dst[1] = 0;\n  dst[2] = 0;\n  dst[3] = 0;\n  dst[4] = 0;\n  dst[5] = 2 * near / dy;\n  dst[6] = 0;\n  dst[7] = 0;\n  dst[8] = (left + right) / dx;\n  dst[9] = (top + bottom) / dy;\n  dst[10] = far / dz;\n  dst[11] = -1;\n  dst[12] = 0;\n  dst[13] = 0;\n  dst[14] = near * far / dz;\n  dst[15] = 0;\n  return dst;\n}\n/**\n * Computes a 4-by-4 look-at transformation.\n *\n * This is a matrix which positions the camera itself. If you want\n * a view matrix (a matrix which moves things in front of the camera)\n * take the inverse of this.\n *\n * @param {module:twgl/v3.Vec3} eye The position of the eye.\n * @param {module:twgl/v3.Vec3} target The position meant to be viewed.\n * @param {module:twgl/v3.Vec3} up A vector pointing up.\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} The look-at matrix.\n * @memberOf module:twgl/m4\n */\n\n\nfunction lookAt(eye, target, up, dst) {\n  dst = dst || new MatType(16);\n  var xAxis = tempV3a;\n  var yAxis = tempV3b;\n  var zAxis = tempV3c;\n  v3.normalize(v3.subtract(eye, target, zAxis), zAxis);\n  v3.normalize(v3.cross(up, zAxis, xAxis), xAxis);\n  v3.normalize(v3.cross(zAxis, xAxis, yAxis), yAxis);\n  dst[0] = xAxis[0];\n  dst[1] = xAxis[1];\n  dst[2] = xAxis[2];\n  dst[3] = 0;\n  dst[4] = yAxis[0];\n  dst[5] = yAxis[1];\n  dst[6] = yAxis[2];\n  dst[7] = 0;\n  dst[8] = zAxis[0];\n  dst[9] = zAxis[1];\n  dst[10] = zAxis[2];\n  dst[11] = 0;\n  dst[12] = eye[0];\n  dst[13] = eye[1];\n  dst[14] = eye[2];\n  dst[15] = 1;\n  return dst;\n}\n/**\n * Creates a 4-by-4 matrix which translates by the given vector v.\n * @param {module:twgl/v3.Vec3} v The vector by\n *     which to translate.\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} The translation matrix.\n * @memberOf module:twgl/m4\n */\n\n\nfunction translation(v, dst) {\n  dst = dst || new MatType(16);\n  dst[0] = 1;\n  dst[1] = 0;\n  dst[2] = 0;\n  dst[3] = 0;\n  dst[4] = 0;\n  dst[5] = 1;\n  dst[6] = 0;\n  dst[7] = 0;\n  dst[8] = 0;\n  dst[9] = 0;\n  dst[10] = 1;\n  dst[11] = 0;\n  dst[12] = v[0];\n  dst[13] = v[1];\n  dst[14] = v[2];\n  dst[15] = 1;\n  return dst;\n}\n/**\n * Modifies the given 4-by-4 matrix by translation by the given vector v.\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {module:twgl/v3.Vec3} v The vector by\n *     which to translate.\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} m once modified.\n * @memberOf module:twgl/m4\n */\n\n\nfunction translate(m, v, dst) {\n  dst = dst || new MatType(16);\n  var v0 = v[0];\n  var v1 = v[1];\n  var v2 = v[2];\n  var m00 = m[0];\n  var m01 = m[1];\n  var m02 = m[2];\n  var m03 = m[3];\n  var m10 = m[1 * 4 + 0];\n  var m11 = m[1 * 4 + 1];\n  var m12 = m[1 * 4 + 2];\n  var m13 = m[1 * 4 + 3];\n  var m20 = m[2 * 4 + 0];\n  var m21 = m[2 * 4 + 1];\n  var m22 = m[2 * 4 + 2];\n  var m23 = m[2 * 4 + 3];\n  var m30 = m[3 * 4 + 0];\n  var m31 = m[3 * 4 + 1];\n  var m32 = m[3 * 4 + 2];\n  var m33 = m[3 * 4 + 3];\n\n  if (m !== dst) {\n    dst[0] = m00;\n    dst[1] = m01;\n    dst[2] = m02;\n    dst[3] = m03;\n    dst[4] = m10;\n    dst[5] = m11;\n    dst[6] = m12;\n    dst[7] = m13;\n    dst[8] = m20;\n    dst[9] = m21;\n    dst[10] = m22;\n    dst[11] = m23;\n  }\n\n  dst[12] = m00 * v0 + m10 * v1 + m20 * v2 + m30;\n  dst[13] = m01 * v0 + m11 * v1 + m21 * v2 + m31;\n  dst[14] = m02 * v0 + m12 * v1 + m22 * v2 + m32;\n  dst[15] = m03 * v0 + m13 * v1 + m23 * v2 + m33;\n  return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the x-axis by the given angle.\n * @param {number} angleInRadians The angle by which to rotate (in radians).\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} The rotation matrix.\n * @memberOf module:twgl/m4\n */\n\n\nfunction rotationX(angleInRadians, dst) {\n  dst = dst || new MatType(16);\n  var c = Math.cos(angleInRadians);\n  var s = Math.sin(angleInRadians);\n  dst[0] = 1;\n  dst[1] = 0;\n  dst[2] = 0;\n  dst[3] = 0;\n  dst[4] = 0;\n  dst[5] = c;\n  dst[6] = s;\n  dst[7] = 0;\n  dst[8] = 0;\n  dst[9] = -s;\n  dst[10] = c;\n  dst[11] = 0;\n  dst[12] = 0;\n  dst[13] = 0;\n  dst[14] = 0;\n  dst[15] = 1;\n  return dst;\n}\n/**\n * Modifies the given 4-by-4 matrix by a rotation around the x-axis by the given\n * angle.\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {number} angleInRadians The angle by which to rotate (in radians).\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} m once modified.\n * @memberOf module:twgl/m4\n */\n\n\nfunction rotateX(m, angleInRadians, dst) {\n  dst = dst || new MatType(16);\n  var m10 = m[4];\n  var m11 = m[5];\n  var m12 = m[6];\n  var m13 = m[7];\n  var m20 = m[8];\n  var m21 = m[9];\n  var m22 = m[10];\n  var m23 = m[11];\n  var c = Math.cos(angleInRadians);\n  var s = Math.sin(angleInRadians);\n  dst[4] = c * m10 + s * m20;\n  dst[5] = c * m11 + s * m21;\n  dst[6] = c * m12 + s * m22;\n  dst[7] = c * m13 + s * m23;\n  dst[8] = c * m20 - s * m10;\n  dst[9] = c * m21 - s * m11;\n  dst[10] = c * m22 - s * m12;\n  dst[11] = c * m23 - s * m13;\n\n  if (m !== dst) {\n    dst[0] = m[0];\n    dst[1] = m[1];\n    dst[2] = m[2];\n    dst[3] = m[3];\n    dst[12] = m[12];\n    dst[13] = m[13];\n    dst[14] = m[14];\n    dst[15] = m[15];\n  }\n\n  return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the y-axis by the given angle.\n * @param {number} angleInRadians The angle by which to rotate (in radians).\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} The rotation matrix.\n * @memberOf module:twgl/m4\n */\n\n\nfunction rotationY(angleInRadians, dst) {\n  dst = dst || new MatType(16);\n  var c = Math.cos(angleInRadians);\n  var s = Math.sin(angleInRadians);\n  dst[0] = c;\n  dst[1] = 0;\n  dst[2] = -s;\n  dst[3] = 0;\n  dst[4] = 0;\n  dst[5] = 1;\n  dst[6] = 0;\n  dst[7] = 0;\n  dst[8] = s;\n  dst[9] = 0;\n  dst[10] = c;\n  dst[11] = 0;\n  dst[12] = 0;\n  dst[13] = 0;\n  dst[14] = 0;\n  dst[15] = 1;\n  return dst;\n}\n/**\n * Modifies the given 4-by-4 matrix by a rotation around the y-axis by the given\n * angle.\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {number} angleInRadians The angle by which to rotate (in radians).\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} m once modified.\n * @memberOf module:twgl/m4\n */\n\n\nfunction rotateY(m, angleInRadians, dst) {\n  dst = dst || new MatType(16);\n  var m00 = m[0 * 4 + 0];\n  var m01 = m[0 * 4 + 1];\n  var m02 = m[0 * 4 + 2];\n  var m03 = m[0 * 4 + 3];\n  var m20 = m[2 * 4 + 0];\n  var m21 = m[2 * 4 + 1];\n  var m22 = m[2 * 4 + 2];\n  var m23 = m[2 * 4 + 3];\n  var c = Math.cos(angleInRadians);\n  var s = Math.sin(angleInRadians);\n  dst[0] = c * m00 - s * m20;\n  dst[1] = c * m01 - s * m21;\n  dst[2] = c * m02 - s * m22;\n  dst[3] = c * m03 - s * m23;\n  dst[8] = c * m20 + s * m00;\n  dst[9] = c * m21 + s * m01;\n  dst[10] = c * m22 + s * m02;\n  dst[11] = c * m23 + s * m03;\n\n  if (m !== dst) {\n    dst[4] = m[4];\n    dst[5] = m[5];\n    dst[6] = m[6];\n    dst[7] = m[7];\n    dst[12] = m[12];\n    dst[13] = m[13];\n    dst[14] = m[14];\n    dst[15] = m[15];\n  }\n\n  return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the z-axis by the given angle.\n * @param {number} angleInRadians The angle by which to rotate (in radians).\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} The rotation matrix.\n * @memberOf module:twgl/m4\n */\n\n\nfunction rotationZ(angleInRadians, dst) {\n  dst = dst || new MatType(16);\n  var c = Math.cos(angleInRadians);\n  var s = Math.sin(angleInRadians);\n  dst[0] = c;\n  dst[1] = s;\n  dst[2] = 0;\n  dst[3] = 0;\n  dst[4] = -s;\n  dst[5] = c;\n  dst[6] = 0;\n  dst[7] = 0;\n  dst[8] = 0;\n  dst[9] = 0;\n  dst[10] = 1;\n  dst[11] = 0;\n  dst[12] = 0;\n  dst[13] = 0;\n  dst[14] = 0;\n  dst[15] = 1;\n  return dst;\n}\n/**\n * Modifies the given 4-by-4 matrix by a rotation around the z-axis by the given\n * angle.\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {number} angleInRadians The angle by which to rotate (in radians).\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} m once modified.\n * @memberOf module:twgl/m4\n */\n\n\nfunction rotateZ(m, angleInRadians, dst) {\n  dst = dst || new MatType(16);\n  var m00 = m[0 * 4 + 0];\n  var m01 = m[0 * 4 + 1];\n  var m02 = m[0 * 4 + 2];\n  var m03 = m[0 * 4 + 3];\n  var m10 = m[1 * 4 + 0];\n  var m11 = m[1 * 4 + 1];\n  var m12 = m[1 * 4 + 2];\n  var m13 = m[1 * 4 + 3];\n  var c = Math.cos(angleInRadians);\n  var s = Math.sin(angleInRadians);\n  dst[0] = c * m00 + s * m10;\n  dst[1] = c * m01 + s * m11;\n  dst[2] = c * m02 + s * m12;\n  dst[3] = c * m03 + s * m13;\n  dst[4] = c * m10 - s * m00;\n  dst[5] = c * m11 - s * m01;\n  dst[6] = c * m12 - s * m02;\n  dst[7] = c * m13 - s * m03;\n\n  if (m !== dst) {\n    dst[8] = m[8];\n    dst[9] = m[9];\n    dst[10] = m[10];\n    dst[11] = m[11];\n    dst[12] = m[12];\n    dst[13] = m[13];\n    dst[14] = m[14];\n    dst[15] = m[15];\n  }\n\n  return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the given axis by the given\n * angle.\n * @param {module:twgl/v3.Vec3} axis The axis\n *     about which to rotate.\n * @param {number} angleInRadians The angle by which to rotate (in radians).\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} A matrix which rotates angle radians\n *     around the axis.\n * @memberOf module:twgl/m4\n */\n\n\nfunction axisRotation(axis, angleInRadians, dst) {\n  dst = dst || new MatType(16);\n  var x = axis[0];\n  var y = axis[1];\n  var z = axis[2];\n  var n = Math.sqrt(x * x + y * y + z * z);\n  x /= n;\n  y /= n;\n  z /= n;\n  var xx = x * x;\n  var yy = y * y;\n  var zz = z * z;\n  var c = Math.cos(angleInRadians);\n  var s = Math.sin(angleInRadians);\n  var oneMinusCosine = 1 - c;\n  dst[0] = xx + (1 - xx) * c;\n  dst[1] = x * y * oneMinusCosine + z * s;\n  dst[2] = x * z * oneMinusCosine - y * s;\n  dst[3] = 0;\n  dst[4] = x * y * oneMinusCosine - z * s;\n  dst[5] = yy + (1 - yy) * c;\n  dst[6] = y * z * oneMinusCosine + x * s;\n  dst[7] = 0;\n  dst[8] = x * z * oneMinusCosine + y * s;\n  dst[9] = y * z * oneMinusCosine - x * s;\n  dst[10] = zz + (1 - zz) * c;\n  dst[11] = 0;\n  dst[12] = 0;\n  dst[13] = 0;\n  dst[14] = 0;\n  dst[15] = 1;\n  return dst;\n}\n/**\n * Modifies the given 4-by-4 matrix by rotation around the given axis by the\n * given angle.\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {module:twgl/v3.Vec3} axis The axis\n *     about which to rotate.\n * @param {number} angleInRadians The angle by which to rotate (in radians).\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} m once modified.\n * @memberOf module:twgl/m4\n */\n\n\nfunction axisRotate(m, axis, angleInRadians, dst) {\n  dst = dst || new MatType(16);\n  var x = axis[0];\n  var y = axis[1];\n  var z = axis[2];\n  var n = Math.sqrt(x * x + y * y + z * z);\n  x /= n;\n  y /= n;\n  z /= n;\n  var xx = x * x;\n  var yy = y * y;\n  var zz = z * z;\n  var c = Math.cos(angleInRadians);\n  var s = Math.sin(angleInRadians);\n  var oneMinusCosine = 1 - c;\n  var r00 = xx + (1 - xx) * c;\n  var r01 = x * y * oneMinusCosine + z * s;\n  var r02 = x * z * oneMinusCosine - y * s;\n  var r10 = x * y * oneMinusCosine - z * s;\n  var r11 = yy + (1 - yy) * c;\n  var r12 = y * z * oneMinusCosine + x * s;\n  var r20 = x * z * oneMinusCosine + y * s;\n  var r21 = y * z * oneMinusCosine - x * s;\n  var r22 = zz + (1 - zz) * c;\n  var m00 = m[0];\n  var m01 = m[1];\n  var m02 = m[2];\n  var m03 = m[3];\n  var m10 = m[4];\n  var m11 = m[5];\n  var m12 = m[6];\n  var m13 = m[7];\n  var m20 = m[8];\n  var m21 = m[9];\n  var m22 = m[10];\n  var m23 = m[11];\n  dst[0] = r00 * m00 + r01 * m10 + r02 * m20;\n  dst[1] = r00 * m01 + r01 * m11 + r02 * m21;\n  dst[2] = r00 * m02 + r01 * m12 + r02 * m22;\n  dst[3] = r00 * m03 + r01 * m13 + r02 * m23;\n  dst[4] = r10 * m00 + r11 * m10 + r12 * m20;\n  dst[5] = r10 * m01 + r11 * m11 + r12 * m21;\n  dst[6] = r10 * m02 + r11 * m12 + r12 * m22;\n  dst[7] = r10 * m03 + r11 * m13 + r12 * m23;\n  dst[8] = r20 * m00 + r21 * m10 + r22 * m20;\n  dst[9] = r20 * m01 + r21 * m11 + r22 * m21;\n  dst[10] = r20 * m02 + r21 * m12 + r22 * m22;\n  dst[11] = r20 * m03 + r21 * m13 + r22 * m23;\n\n  if (m !== dst) {\n    dst[12] = m[12];\n    dst[13] = m[13];\n    dst[14] = m[14];\n    dst[15] = m[15];\n  }\n\n  return dst;\n}\n/**\n * Creates a 4-by-4 matrix which scales in each dimension by an amount given by\n * the corresponding entry in the given vector; assumes the vector has three\n * entries.\n * @param {module:twgl/v3.Vec3} v A vector of\n *     three entries specifying the factor by which to scale in each dimension.\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} The scaling matrix.\n * @memberOf module:twgl/m4\n */\n\n\nfunction scaling(v, dst) {\n  dst = dst || new MatType(16);\n  dst[0] = v[0];\n  dst[1] = 0;\n  dst[2] = 0;\n  dst[3] = 0;\n  dst[4] = 0;\n  dst[5] = v[1];\n  dst[6] = 0;\n  dst[7] = 0;\n  dst[8] = 0;\n  dst[9] = 0;\n  dst[10] = v[2];\n  dst[11] = 0;\n  dst[12] = 0;\n  dst[13] = 0;\n  dst[14] = 0;\n  dst[15] = 1;\n  return dst;\n}\n/**\n * Modifies the given 4-by-4 matrix, scaling in each dimension by an amount\n * given by the corresponding entry in the given vector; assumes the vector has\n * three entries.\n * @param {module:twgl/m4.Mat4} m The matrix to be modified.\n * @param {module:twgl/v3.Vec3} v A vector of three entries specifying the\n *     factor by which to scale in each dimension.\n * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If none new one is created..\n * @return {module:twgl/m4.Mat4} m once modified.\n * @memberOf module:twgl/m4\n */\n\n\nfunction scale(m, v, dst) {\n  dst = dst || new MatType(16);\n  var v0 = v[0];\n  var v1 = v[1];\n  var v2 = v[2];\n  dst[0] = v0 * m[0 * 4 + 0];\n  dst[1] = v0 * m[0 * 4 + 1];\n  dst[2] = v0 * m[0 * 4 + 2];\n  dst[3] = v0 * m[0 * 4 + 3];\n  dst[4] = v1 * m[1 * 4 + 0];\n  dst[5] = v1 * m[1 * 4 + 1];\n  dst[6] = v1 * m[1 * 4 + 2];\n  dst[7] = v1 * m[1 * 4 + 3];\n  dst[8] = v2 * m[2 * 4 + 0];\n  dst[9] = v2 * m[2 * 4 + 1];\n  dst[10] = v2 * m[2 * 4 + 2];\n  dst[11] = v2 * m[2 * 4 + 3];\n\n  if (m !== dst) {\n    dst[12] = m[12];\n    dst[13] = m[13];\n    dst[14] = m[14];\n    dst[15] = m[15];\n  }\n\n  return dst;\n}\n/**\n * Takes a 4-by-4 matrix and a vector with 3 entries,\n * interprets the vector as a point, transforms that point by the matrix, and\n * returns the result as a vector with 3 entries.\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {module:twgl/v3.Vec3} v The point.\n * @param {module:twgl/v3.Vec3} [dst] optional vec3 to store result\n * @return {module:twgl/v3.Vec3} dst or new vec3 if not provided\n * @memberOf module:twgl/m4\n */\n\n\nfunction transformPoint(m, v, dst) {\n  dst = dst || v3.create();\n  var v0 = v[0];\n  var v1 = v[1];\n  var v2 = v[2];\n  var d = v0 * m[0 * 4 + 3] + v1 * m[1 * 4 + 3] + v2 * m[2 * 4 + 3] + m[3 * 4 + 3];\n  dst[0] = (v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0] + m[3 * 4 + 0]) / d;\n  dst[1] = (v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1] + m[3 * 4 + 1]) / d;\n  dst[2] = (v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2] + m[3 * 4 + 2]) / d;\n  return dst;\n}\n/**\n * Takes a 4-by-4 matrix and a vector with 3 entries, interprets the vector as a\n * direction, transforms that direction by the matrix, and returns the result;\n * assumes the transformation of 3-dimensional space represented by the matrix\n * is parallel-preserving, i.e. any combination of rotation, scaling and\n * translation, but not a perspective distortion. Returns a vector with 3\n * entries.\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {module:twgl/v3.Vec3} v The direction.\n * @param {module:twgl/v3.Vec3} [dst] optional Vec3 to store result\n * @return {module:twgl/v3.Vec3} dst or new Vec3 if not provided\n * @memberOf module:twgl/m4\n */\n\n\nfunction transformDirection(m, v, dst) {\n  dst = dst || v3.create();\n  var v0 = v[0];\n  var v1 = v[1];\n  var v2 = v[2];\n  dst[0] = v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0];\n  dst[1] = v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1];\n  dst[2] = v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2];\n  return dst;\n}\n/**\n * Takes a 4-by-4 matrix m and a vector v with 3 entries, interprets the vector\n * as a normal to a surface, and computes a vector which is normal upon\n * transforming that surface by the matrix. The effect of this function is the\n * same as transforming v (as a direction) by the inverse-transpose of m.  This\n * function assumes the transformation of 3-dimensional space represented by the\n * matrix is parallel-preserving, i.e. any combination of rotation, scaling and\n * translation, but not a perspective distortion.  Returns a vector with 3\n * entries.\n * @param {module:twgl/m4.Mat4} m The matrix.\n * @param {module:twgl/v3.Vec3} v The normal.\n * @param {module:twgl/v3.Vec3} [dst] The direction.\n * @return {module:twgl/v3.Vec3} The transformed direction.\n * @memberOf module:twgl/m4\n */\n\n\nfunction transformNormal(m, v, dst) {\n  dst = dst || v3.create();\n  var mi = inverse(m);\n  var v0 = v[0];\n  var v1 = v[1];\n  var v2 = v[2];\n  dst[0] = v0 * mi[0 * 4 + 0] + v1 * mi[0 * 4 + 1] + v2 * mi[0 * 4 + 2];\n  dst[1] = v0 * mi[1 * 4 + 0] + v1 * mi[1 * 4 + 1] + v2 * mi[1 * 4 + 2];\n  dst[2] = v0 * mi[2 * 4 + 0] + v1 * mi[2 * 4 + 1] + v2 * mi[2 * 4 + 2];\n  return dst;\n}\n\n/***/ }),\n\n/***/ \"./src/primitives.js\":\n/*!***************************!*\\\n  !*** ./src/primitives.js ***!\n  \\***************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.create3DFVertices = create3DFVertices;\nexports.createAugmentedTypedArray = createAugmentedTypedArray;\nexports.createCubeVertices = createCubeVertices;\nexports.createPlaneVertices = createPlaneVertices;\nexports.createSphereVertices = createSphereVertices;\nexports.createTruncatedConeVertices = createTruncatedConeVertices;\nexports.createXYQuadVertices = createXYQuadVertices;\nexports.createCresentVertices = createCresentVertices;\nexports.createCylinderVertices = createCylinderVertices;\nexports.createTorusVertices = createTorusVertices;\nexports.createDiscVertices = createDiscVertices;\nexports.deindexVertices = deindexVertices;\nexports.flattenNormals = flattenNormals;\nexports.makeRandomVertexColors = makeRandomVertexColors;\nexports.reorientDirections = reorientDirections;\nexports.reorientNormals = reorientNormals;\nexports.reorientPositions = reorientPositions;\nexports.reorientVertices = reorientVertices;\nexports.concatVertices = concatVertices;\nexports.duplicateVertices = duplicateVertices;\nexports.createDiscBuffers = exports.createDiscBufferInfo = exports.createTorusBuffers = exports.createTorusBufferInfo = exports.createCylinderBuffers = exports.createCylinderBufferInfo = exports.createCresentBuffers = exports.createCresentBufferInfo = exports.createXYQuadBuffers = exports.createXYQuadBufferInfo = exports.createTruncatedConeBuffers = exports.createTruncatedConeBufferInfo = exports.createSphereBuffers = exports.createSphereBufferInfo = exports.createPlaneBuffers = exports.createPlaneBufferInfo = exports.createCubeBuffers = exports.createCubeBufferInfo = exports.create3DFBuffers = exports.create3DFBufferInfo = void 0;\n\nvar attributes = _interopRequireWildcard(__webpack_require__(/*! ./attributes.js */ \"./src/attributes.js\"));\n\nvar helper = _interopRequireWildcard(__webpack_require__(/*! ./helper.js */ \"./src/helper.js\"));\n\nvar typedArrays = _interopRequireWildcard(__webpack_require__(/*! ./typedarrays.js */ \"./src/typedarrays.js\"));\n\nvar m4 = _interopRequireWildcard(__webpack_require__(/*! ./m4.js */ \"./src/m4.js\"));\n\nvar v3 = _interopRequireWildcard(__webpack_require__(/*! ./v3.js */ \"./src/v3.js\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Various functions to make simple primitives\n *\n * note: Most primitive functions come in 3 styles\n *\n * *  `createSomeShapeBufferInfo`\n *\n *    These functions are almost always the functions you want to call. They\n *    create vertices then make WebGLBuffers and create {@link module:twgl.AttribInfo}s\n *    returing a {@link module:twgl.BufferInfo} you can pass to {@link module:twgl.setBuffersAndAttributes}\n *    and {@link module:twgl.drawBufferInfo} etc...\n *\n * *  `createSomeShapeBuffers`\n *\n *    These create WebGLBuffers and put your data in them but nothing else.\n *    It's a shortcut to doing it yourself if you don't want to use\n *    the higher level functions.\n *\n * *  `createSomeShapeVertices`\n *\n *    These just create vertices, no buffers. This allows you to manipulate the vertices\n *    or add more data before generating a {@link module:twgl.BufferInfo}. Once you're finished\n *    manipulating the vertices call {@link module:twgl.createBufferInfoFromArrays}.\n *\n *    example:\n *\n *        const arrays = twgl.primitives.createPlaneArrays(1);\n *        twgl.primitives.reorientVertices(arrays, m4.rotationX(Math.PI * 0.5));\n *        const bufferInfo = twgl.createBufferInfoFromArrays(gl, arrays);\n *\n * @module twgl/primitives\n */\nvar getArray = attributes.getArray_; // eslint-disable-line\n\nvar getNumComponents = attributes.getNumComponents_; // eslint-disable-line\n\n/**\n * @typedef {(Int8Array|Uint8Array|Int16Array|Uint16Array|Int32Array|Uint32Array|Float32Array)} TypedArray\n */\n\n/**\n * Add `push` to a typed array. It just keeps a 'cursor'\n * and allows use to `push` values into the array so we\n * don't have to manually compute offsets\n * @param {TypedArray} typedArray TypedArray to augment\n * @param {number} numComponents number of components.\n * @private\n */\n\nfunction augmentTypedArray(typedArray, numComponents) {\n  var cursor = 0;\n\n  typedArray.push = function () {\n    for (var ii = 0; ii < arguments.length; ++ii) {\n      var value = arguments[ii];\n\n      if (value instanceof Array || typedArrays.isArrayBuffer(value)) {\n        for (var jj = 0; jj < value.length; ++jj) {\n          typedArray[cursor++] = value[jj];\n        }\n      } else {\n        typedArray[cursor++] = value;\n      }\n    }\n  };\n\n  typedArray.reset = function (opt_index) {\n    cursor = opt_index || 0;\n  };\n\n  typedArray.numComponents = numComponents;\n  Object.defineProperty(typedArray, 'numElements', {\n    get: function get() {\n      return this.length / this.numComponents | 0;\n    }\n  });\n  return typedArray;\n}\n/**\n * creates a typed array with a `push` function attached\n * so that you can easily *push* values.\n *\n * `push` can take multiple arguments. If an argument is an array each element\n * of the array will be added to the typed array.\n *\n * Example:\n *\n *     const array = createAugmentedTypedArray(3, 2);  // creates a Float32Array with 6 values\n *     array.push(1, 2, 3);\n *     array.push([4, 5, 6]);\n *     // array now contains [1, 2, 3, 4, 5, 6]\n *\n * Also has `numComponents` and `numElements` properties.\n *\n * @param {number} numComponents number of components\n * @param {number} numElements number of elements. The total size of the array will be `numComponents * numElements`.\n * @param {constructor} opt_type A constructor for the type. Default = `Float32Array`.\n * @return {ArrayBufferView} A typed array.\n * @memberOf module:twgl/primitives\n */\n\n\nfunction createAugmentedTypedArray(numComponents, numElements, opt_type) {\n  var Type = opt_type || Float32Array;\n  return augmentTypedArray(new Type(numComponents * numElements), numComponents);\n}\n\nfunction allButIndices(name) {\n  return name !== \"indices\";\n}\n/**\n * Given indexed vertices creates a new set of vertices unindexed by expanding the indexed vertices.\n * @param {Object.<string, TypedArray>} vertices The indexed vertices to deindex\n * @return {Object.<string, TypedArray>} The deindexed vertices\n * @memberOf module:twgl/primitives\n */\n\n\nfunction deindexVertices(vertices) {\n  var indices = vertices.indices;\n  var newVertices = {};\n  var numElements = indices.length;\n\n  function expandToUnindexed(channel) {\n    var srcBuffer = vertices[channel];\n    var numComponents = srcBuffer.numComponents;\n    var dstBuffer = createAugmentedTypedArray(numComponents, numElements, srcBuffer.constructor);\n\n    for (var ii = 0; ii < numElements; ++ii) {\n      var ndx = indices[ii];\n      var offset = ndx * numComponents;\n\n      for (var jj = 0; jj < numComponents; ++jj) {\n        dstBuffer.push(srcBuffer[offset + jj]);\n      }\n    }\n\n    newVertices[channel] = dstBuffer;\n  }\n\n  Object.keys(vertices).filter(allButIndices).forEach(expandToUnindexed);\n  return newVertices;\n}\n/**\n * flattens the normals of deindexed vertices in place.\n * @param {Object.<string, TypedArray>} vertices The deindexed vertices who's normals to flatten\n * @return {Object.<string, TypedArray>} The flattened vertices (same as was passed in)\n * @memberOf module:twgl/primitives\n */\n\n\nfunction flattenNormals(vertices) {\n  if (vertices.indices) {\n    throw new Error('can not flatten normals of indexed vertices. deindex them first');\n  }\n\n  var normals = vertices.normal;\n  var numNormals = normals.length;\n\n  for (var ii = 0; ii < numNormals; ii += 9) {\n    // pull out the 3 normals for this triangle\n    var nax = normals[ii + 0];\n    var nay = normals[ii + 1];\n    var naz = normals[ii + 2];\n    var nbx = normals[ii + 3];\n    var nby = normals[ii + 4];\n    var nbz = normals[ii + 5];\n    var ncx = normals[ii + 6];\n    var ncy = normals[ii + 7];\n    var ncz = normals[ii + 8]; // add them\n\n    var nx = nax + nbx + ncx;\n    var ny = nay + nby + ncy;\n    var nz = naz + nbz + ncz; // normalize them\n\n    var length = Math.sqrt(nx * nx + ny * ny + nz * nz);\n    nx /= length;\n    ny /= length;\n    nz /= length; // copy them back in\n\n    normals[ii + 0] = nx;\n    normals[ii + 1] = ny;\n    normals[ii + 2] = nz;\n    normals[ii + 3] = nx;\n    normals[ii + 4] = ny;\n    normals[ii + 5] = nz;\n    normals[ii + 6] = nx;\n    normals[ii + 7] = ny;\n    normals[ii + 8] = nz;\n  }\n\n  return vertices;\n}\n\nfunction applyFuncToV3Array(array, matrix, fn) {\n  var len = array.length;\n  var tmp = new Float32Array(3);\n\n  for (var ii = 0; ii < len; ii += 3) {\n    fn(matrix, [array[ii], array[ii + 1], array[ii + 2]], tmp);\n    array[ii] = tmp[0];\n    array[ii + 1] = tmp[1];\n    array[ii + 2] = tmp[2];\n  }\n}\n\nfunction transformNormal(mi, v, dst) {\n  dst = dst || v3.create();\n  var v0 = v[0];\n  var v1 = v[1];\n  var v2 = v[2];\n  dst[0] = v0 * mi[0 * 4 + 0] + v1 * mi[0 * 4 + 1] + v2 * mi[0 * 4 + 2];\n  dst[1] = v0 * mi[1 * 4 + 0] + v1 * mi[1 * 4 + 1] + v2 * mi[1 * 4 + 2];\n  dst[2] = v0 * mi[2 * 4 + 0] + v1 * mi[2 * 4 + 1] + v2 * mi[2 * 4 + 2];\n  return dst;\n}\n/**\n * Reorients directions by the given matrix..\n * @param {(number[]|TypedArray)} array The array. Assumes value floats per element.\n * @param {module:twgl/m4.Mat4} matrix A matrix to multiply by.\n * @return {(number[]|TypedArray)} the same array that was passed in\n * @memberOf module:twgl/primitives\n */\n\n\nfunction reorientDirections(array, matrix) {\n  applyFuncToV3Array(array, matrix, m4.transformDirection);\n  return array;\n}\n/**\n * Reorients normals by the inverse-transpose of the given\n * matrix..\n * @param {(number[]|TypedArray)} array The array. Assumes value floats per element.\n * @param {module:twgl/m4.Mat4} matrix A matrix to multiply by.\n * @return {(number[]|TypedArray)} the same array that was passed in\n * @memberOf module:twgl/primitives\n */\n\n\nfunction reorientNormals(array, matrix) {\n  applyFuncToV3Array(array, m4.inverse(matrix), transformNormal);\n  return array;\n}\n/**\n * Reorients positions by the given matrix. In other words, it\n * multiplies each vertex by the given matrix.\n * @param {(number[]|TypedArray)} array The array. Assumes value floats per element.\n * @param {module:twgl/m4.Mat4} matrix A matrix to multiply by.\n * @return {(number[]|TypedArray)} the same array that was passed in\n * @memberOf module:twgl/primitives\n */\n\n\nfunction reorientPositions(array, matrix) {\n  applyFuncToV3Array(array, matrix, m4.transformPoint);\n  return array;\n}\n/**\n * @typedef {(number[]|TypedArray)} NativeArrayOrTypedArray\n */\n\n/**\n * Reorients arrays by the given matrix. Assumes arrays have\n * names that contains 'pos' could be reoriented as positions,\n * 'binorm' or 'tan' as directions, and 'norm' as normals.\n *\n * @param {Object.<string, NativeArrayOrTypedArray>} arrays The vertices to reorient\n * @param {module:twgl/m4.Mat4} matrix matrix to reorient by.\n * @return {Object.<string, NativeArrayOrTypedArray>} same arrays that were passed in.\n * @memberOf module:twgl/primitives\n */\n\n\nfunction reorientVertices(arrays, matrix) {\n  Object.keys(arrays).forEach(function (name) {\n    var array = arrays[name];\n\n    if (name.indexOf(\"pos\") >= 0) {\n      reorientPositions(array, matrix);\n    } else if (name.indexOf(\"tan\") >= 0 || name.indexOf(\"binorm\") >= 0) {\n      reorientDirections(array, matrix);\n    } else if (name.indexOf(\"norm\") >= 0) {\n      reorientNormals(array, matrix);\n    }\n  });\n  return arrays;\n}\n/**\n * Creates XY quad BufferInfo\n *\n * The default with no parameters will return a 2x2 quad with values from -1 to +1.\n * If you want a unit quad with that goes from 0 to 1 you'd call it with\n *\n *     twgl.primitives.createXYQuadBufferInfo(gl, 1, 0.5, 0.5);\n *\n * If you want a unit quad centered above 0,0 you'd call it with\n *\n *     twgl.primitives.createXYQuadBufferInfo(gl, 1, 0, 0.5);\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} [size] the size across the quad. Defaults to 2 which means vertices will go from -1 to +1\n * @param {number} [xOffset] the amount to offset the quad in X\n * @param {number} [yOffset] the amount to offset the quad in Y\n * @return {Object.<string, WebGLBuffer>} the created XY Quad BufferInfo\n * @memberOf module:twgl/primitives\n * @function createXYQuadBufferInfo\n */\n\n/**\n * Creates XY quad Buffers\n *\n * The default with no parameters will return a 2x2 quad with values from -1 to +1.\n * If you want a unit quad with that goes from 0 to 1 you'd call it with\n *\n *     twgl.primitives.createXYQuadBufferInfo(gl, 1, 0.5, 0.5);\n *\n * If you want a unit quad centered above 0,0 you'd call it with\n *\n *     twgl.primitives.createXYQuadBufferInfo(gl, 1, 0, 0.5);\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} [size] the size across the quad. Defaults to 2 which means vertices will go from -1 to +1\n * @param {number} [xOffset] the amount to offset the quad in X\n * @param {number} [yOffset] the amount to offset the quad in Y\n * @return {module:twgl.BufferInfo} the created XY Quad buffers\n * @memberOf module:twgl/primitives\n * @function createXYQuadBuffers\n */\n\n/**\n * Creates XY quad vertices\n *\n * The default with no parameters will return a 2x2 quad with values from -1 to +1.\n * If you want a unit quad with that goes from 0 to 1 you'd call it with\n *\n *     twgl.primitives.createXYQuadVertices(1, 0.5, 0.5);\n *\n * If you want a unit quad centered above 0,0 you'd call it with\n *\n *     twgl.primitives.createXYQuadVertices(1, 0, 0.5);\n *\n * @param {number} [size] the size across the quad. Defaults to 2 which means vertices will go from -1 to +1\n * @param {number} [xOffset] the amount to offset the quad in X\n * @param {number} [yOffset] the amount to offset the quad in Y\n * @return {Object.<string, TypedArray>} the created XY Quad vertices\n * @memberOf module:twgl/primitives\n */\n\n\nfunction createXYQuadVertices(size, xOffset, yOffset) {\n  size = size || 2;\n  xOffset = xOffset || 0;\n  yOffset = yOffset || 0;\n  size *= 0.5;\n  return {\n    position: {\n      numComponents: 2,\n      data: [xOffset + -1 * size, yOffset + -1 * size, xOffset + 1 * size, yOffset + -1 * size, xOffset + -1 * size, yOffset + 1 * size, xOffset + 1 * size, yOffset + 1 * size]\n    },\n    normal: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],\n    texcoord: [0, 0, 1, 0, 0, 1, 1, 1],\n    indices: [0, 1, 2, 2, 1, 3]\n  };\n}\n/**\n * Creates XZ plane BufferInfo.\n *\n * The created plane has position, normal, and texcoord data\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} [width] Width of the plane. Default = 1\n * @param {number} [depth] Depth of the plane. Default = 1\n * @param {number} [subdivisionsWidth] Number of steps across the plane. Default = 1\n * @param {number} [subdivisionsDepth] Number of steps down the plane. Default = 1\n * @param {module:twgl/m4.Mat4} [matrix] A matrix by which to multiply all the vertices.\n * @return {module:twgl.BufferInfo} The created plane BufferInfo.\n * @memberOf module:twgl/primitives\n * @function createPlaneBufferInfo\n */\n\n/**\n * Creates XZ plane buffers.\n *\n * The created plane has position, normal, and texcoord data\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} [width] Width of the plane. Default = 1\n * @param {number} [depth] Depth of the plane. Default = 1\n * @param {number} [subdivisionsWidth] Number of steps across the plane. Default = 1\n * @param {number} [subdivisionsDepth] Number of steps down the plane. Default = 1\n * @param {module:twgl/m4.Mat4} [matrix] A matrix by which to multiply all the vertices.\n * @return {Object.<string, WebGLBuffer>} The created plane buffers.\n * @memberOf module:twgl/primitives\n * @function createPlaneBuffers\n */\n\n/**\n * Creates XZ plane vertices.\n *\n * The created plane has position, normal, and texcoord data\n *\n * @param {number} [width] Width of the plane. Default = 1\n * @param {number} [depth] Depth of the plane. Default = 1\n * @param {number} [subdivisionsWidth] Number of steps across the plane. Default = 1\n * @param {number} [subdivisionsDepth] Number of steps down the plane. Default = 1\n * @param {module:twgl/m4.Mat4} [matrix] A matrix by which to multiply all the vertices.\n * @return {Object.<string, TypedArray>} The created plane vertices.\n * @memberOf module:twgl/primitives\n */\n\n\nfunction createPlaneVertices(width, depth, subdivisionsWidth, subdivisionsDepth, matrix) {\n  width = width || 1;\n  depth = depth || 1;\n  subdivisionsWidth = subdivisionsWidth || 1;\n  subdivisionsDepth = subdivisionsDepth || 1;\n  matrix = matrix || m4.identity();\n  var numVertices = (subdivisionsWidth + 1) * (subdivisionsDepth + 1);\n  var positions = createAugmentedTypedArray(3, numVertices);\n  var normals = createAugmentedTypedArray(3, numVertices);\n  var texcoords = createAugmentedTypedArray(2, numVertices);\n\n  for (var z = 0; z <= subdivisionsDepth; z++) {\n    for (var x = 0; x <= subdivisionsWidth; x++) {\n      var u = x / subdivisionsWidth;\n      var v = z / subdivisionsDepth;\n      positions.push(width * u - width * 0.5, 0, depth * v - depth * 0.5);\n      normals.push(0, 1, 0);\n      texcoords.push(u, v);\n    }\n  }\n\n  var numVertsAcross = subdivisionsWidth + 1;\n  var indices = createAugmentedTypedArray(3, subdivisionsWidth * subdivisionsDepth * 2, Uint16Array);\n\n  for (var _z = 0; _z < subdivisionsDepth; _z++) {\n    // eslint-disable-line\n    for (var _x = 0; _x < subdivisionsWidth; _x++) {\n      // eslint-disable-line\n      // Make triangle 1 of quad.\n      indices.push((_z + 0) * numVertsAcross + _x, (_z + 1) * numVertsAcross + _x, (_z + 0) * numVertsAcross + _x + 1); // Make triangle 2 of quad.\n\n      indices.push((_z + 1) * numVertsAcross + _x, (_z + 1) * numVertsAcross + _x + 1, (_z + 0) * numVertsAcross + _x + 1);\n    }\n  }\n\n  var arrays = reorientVertices({\n    position: positions,\n    normal: normals,\n    texcoord: texcoords,\n    indices: indices\n  }, matrix);\n  return arrays;\n}\n/**\n * Creates sphere BufferInfo.\n *\n * The created sphere has position, normal, and texcoord data\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} radius radius of the sphere.\n * @param {number} subdivisionsAxis number of steps around the sphere.\n * @param {number} subdivisionsHeight number of vertically on the sphere.\n * @param {number} [opt_startLatitudeInRadians] where to start the\n *     top of the sphere. Default = 0.\n * @param {number} [opt_endLatitudeInRadians] Where to end the\n *     bottom of the sphere. Default = Math.PI.\n * @param {number} [opt_startLongitudeInRadians] where to start\n *     wrapping the sphere. Default = 0.\n * @param {number} [opt_endLongitudeInRadians] where to end\n *     wrapping the sphere. Default = 2 * Math.PI.\n * @return {module:twgl.BufferInfo} The created sphere BufferInfo.\n * @memberOf module:twgl/primitives\n * @function createSphereBufferInfo\n */\n\n/**\n * Creates sphere buffers.\n *\n * The created sphere has position, normal, and texcoord data\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} radius radius of the sphere.\n * @param {number} subdivisionsAxis number of steps around the sphere.\n * @param {number} subdivisionsHeight number of vertically on the sphere.\n * @param {number} [opt_startLatitudeInRadians] where to start the\n *     top of the sphere. Default = 0.\n * @param {number} [opt_endLatitudeInRadians] Where to end the\n *     bottom of the sphere. Default = Math.PI.\n * @param {number} [opt_startLongitudeInRadians] where to start\n *     wrapping the sphere. Default = 0.\n * @param {number} [opt_endLongitudeInRadians] where to end\n *     wrapping the sphere. Default = 2 * Math.PI.\n * @return {Object.<string, WebGLBuffer>} The created sphere buffers.\n * @memberOf module:twgl/primitives\n * @function createSphereBuffers\n */\n\n/**\n * Creates sphere vertices.\n *\n * The created sphere has position, normal, and texcoord data\n *\n * @param {number} radius radius of the sphere.\n * @param {number} subdivisionsAxis number of steps around the sphere.\n * @param {number} subdivisionsHeight number of vertically on the sphere.\n * @param {number} [opt_startLatitudeInRadians] where to start the\n *     top of the sphere. Default = 0.\n * @param {number} [opt_endLatitudeInRadians] Where to end the\n *     bottom of the sphere. Default = Math.PI.\n * @param {number} [opt_startLongitudeInRadians] where to start\n *     wrapping the sphere. Default = 0.\n * @param {number} [opt_endLongitudeInRadians] where to end\n *     wrapping the sphere. Default = 2 * Math.PI.\n * @return {Object.<string, TypedArray>} The created sphere vertices.\n * @memberOf module:twgl/primitives\n */\n\n\nfunction createSphereVertices(radius, subdivisionsAxis, subdivisionsHeight, opt_startLatitudeInRadians, opt_endLatitudeInRadians, opt_startLongitudeInRadians, opt_endLongitudeInRadians) {\n  if (subdivisionsAxis <= 0 || subdivisionsHeight <= 0) {\n    throw new Error('subdivisionAxis and subdivisionHeight must be > 0');\n  }\n\n  opt_startLatitudeInRadians = opt_startLatitudeInRadians || 0;\n  opt_endLatitudeInRadians = opt_endLatitudeInRadians || Math.PI;\n  opt_startLongitudeInRadians = opt_startLongitudeInRadians || 0;\n  opt_endLongitudeInRadians = opt_endLongitudeInRadians || Math.PI * 2;\n  var latRange = opt_endLatitudeInRadians - opt_startLatitudeInRadians;\n  var longRange = opt_endLongitudeInRadians - opt_startLongitudeInRadians; // We are going to generate our sphere by iterating through its\n  // spherical coordinates and generating 2 triangles for each quad on a\n  // ring of the sphere.\n\n  var numVertices = (subdivisionsAxis + 1) * (subdivisionsHeight + 1);\n  var positions = createAugmentedTypedArray(3, numVertices);\n  var normals = createAugmentedTypedArray(3, numVertices);\n  var texcoords = createAugmentedTypedArray(2, numVertices); // Generate the individual vertices in our vertex buffer.\n\n  for (var y = 0; y <= subdivisionsHeight; y++) {\n    for (var x = 0; x <= subdivisionsAxis; x++) {\n      // Generate a vertex based on its spherical coordinates\n      var u = x / subdivisionsAxis;\n      var v = y / subdivisionsHeight;\n      var theta = longRange * u + opt_startLongitudeInRadians;\n      var phi = latRange * v + opt_startLatitudeInRadians;\n      var sinTheta = Math.sin(theta);\n      var cosTheta = Math.cos(theta);\n      var sinPhi = Math.sin(phi);\n      var cosPhi = Math.cos(phi);\n      var ux = cosTheta * sinPhi;\n      var uy = cosPhi;\n      var uz = sinTheta * sinPhi;\n      positions.push(radius * ux, radius * uy, radius * uz);\n      normals.push(ux, uy, uz);\n      texcoords.push(1 - u, v);\n    }\n  }\n\n  var numVertsAround = subdivisionsAxis + 1;\n  var indices = createAugmentedTypedArray(3, subdivisionsAxis * subdivisionsHeight * 2, Uint16Array);\n\n  for (var _x2 = 0; _x2 < subdivisionsAxis; _x2++) {\n    // eslint-disable-line\n    for (var _y = 0; _y < subdivisionsHeight; _y++) {\n      // eslint-disable-line\n      // Make triangle 1 of quad.\n      indices.push((_y + 0) * numVertsAround + _x2, (_y + 0) * numVertsAround + _x2 + 1, (_y + 1) * numVertsAround + _x2); // Make triangle 2 of quad.\n\n      indices.push((_y + 1) * numVertsAround + _x2, (_y + 0) * numVertsAround + _x2 + 1, (_y + 1) * numVertsAround + _x2 + 1);\n    }\n  }\n\n  return {\n    position: positions,\n    normal: normals,\n    texcoord: texcoords,\n    indices: indices\n  };\n}\n/**\n * Array of the indices of corners of each face of a cube.\n * @type {Array.<number[]>}\n * @private\n */\n\n\nvar CUBE_FACE_INDICES = [[3, 7, 5, 1], // right\n[6, 2, 0, 4], // left\n[6, 7, 3, 2], // ??\n[0, 1, 5, 4], // ??\n[7, 6, 4, 5], // front\n[2, 3, 1, 0]];\n/**\n * Creates a BufferInfo for a cube.\n *\n * The cube is created around the origin. (-size / 2, size / 2).\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} [size] width, height and depth of the cube.\n * @return {module:twgl.BufferInfo} The created BufferInfo.\n * @memberOf module:twgl/primitives\n * @function createCubeBufferInfo\n */\n\n/**\n * Creates the buffers and indices for a cube.\n *\n * The cube is created around the origin. (-size / 2, size / 2).\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} [size] width, height and depth of the cube.\n * @return {Object.<string, WebGLBuffer>} The created buffers.\n * @memberOf module:twgl/primitives\n * @function createCubeBuffers\n */\n\n/**\n * Creates the vertices and indices for a cube.\n *\n * The cube is created around the origin. (-size / 2, size / 2).\n *\n * @param {number} [size] width, height and depth of the cube.\n * @return {Object.<string, TypedArray>} The created vertices.\n * @memberOf module:twgl/primitives\n */\n\nfunction createCubeVertices(size) {\n  size = size || 1;\n  var k = size / 2;\n  var cornerVertices = [[-k, -k, -k], [+k, -k, -k], [-k, +k, -k], [+k, +k, -k], [-k, -k, +k], [+k, -k, +k], [-k, +k, +k], [+k, +k, +k]];\n  var faceNormals = [[+1, +0, +0], [-1, +0, +0], [+0, +1, +0], [+0, -1, +0], [+0, +0, +1], [+0, +0, -1]];\n  var uvCoords = [[1, 0], [0, 0], [0, 1], [1, 1]];\n  var numVertices = 6 * 4;\n  var positions = createAugmentedTypedArray(3, numVertices);\n  var normals = createAugmentedTypedArray(3, numVertices);\n  var texcoords = createAugmentedTypedArray(2, numVertices);\n  var indices = createAugmentedTypedArray(3, 6 * 2, Uint16Array);\n\n  for (var f = 0; f < 6; ++f) {\n    var faceIndices = CUBE_FACE_INDICES[f];\n\n    for (var v = 0; v < 4; ++v) {\n      var position = cornerVertices[faceIndices[v]];\n      var normal = faceNormals[f];\n      var uv = uvCoords[v]; // Each face needs all four vertices because the normals and texture\n      // coordinates are not all the same.\n\n      positions.push(position);\n      normals.push(normal);\n      texcoords.push(uv);\n    } // Two triangles make a square face.\n\n\n    var offset = 4 * f;\n    indices.push(offset + 0, offset + 1, offset + 2);\n    indices.push(offset + 0, offset + 2, offset + 3);\n  }\n\n  return {\n    position: positions,\n    normal: normals,\n    texcoord: texcoords,\n    indices: indices\n  };\n}\n/**\n * Creates a BufferInfo for a truncated cone, which is like a cylinder\n * except that it has different top and bottom radii. A truncated cone\n * can also be used to create cylinders and regular cones. The\n * truncated cone will be created centered about the origin, with the\n * y axis as its vertical axis.\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} bottomRadius Bottom radius of truncated cone.\n * @param {number} topRadius Top radius of truncated cone.\n * @param {number} height Height of truncated cone.\n * @param {number} radialSubdivisions The number of subdivisions around the\n *     truncated cone.\n * @param {number} verticalSubdivisions The number of subdivisions down the\n *     truncated cone.\n * @param {boolean} [opt_topCap] Create top cap. Default = true.\n * @param {boolean} [opt_bottomCap] Create bottom cap. Default = true.\n * @return {module:twgl.BufferInfo} The created cone BufferInfo.\n * @memberOf module:twgl/primitives\n * @function createTruncatedConeBufferInfo\n */\n\n/**\n * Creates buffers for a truncated cone, which is like a cylinder\n * except that it has different top and bottom radii. A truncated cone\n * can also be used to create cylinders and regular cones. The\n * truncated cone will be created centered about the origin, with the\n * y axis as its vertical axis.\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} bottomRadius Bottom radius of truncated cone.\n * @param {number} topRadius Top radius of truncated cone.\n * @param {number} height Height of truncated cone.\n * @param {number} radialSubdivisions The number of subdivisions around the\n *     truncated cone.\n * @param {number} verticalSubdivisions The number of subdivisions down the\n *     truncated cone.\n * @param {boolean} [opt_topCap] Create top cap. Default = true.\n * @param {boolean} [opt_bottomCap] Create bottom cap. Default = true.\n * @return {Object.<string, WebGLBuffer>} The created cone buffers.\n * @memberOf module:twgl/primitives\n * @function createTruncatedConeBuffers\n */\n\n/**\n * Creates vertices for a truncated cone, which is like a cylinder\n * except that it has different top and bottom radii. A truncated cone\n * can also be used to create cylinders and regular cones. The\n * truncated cone will be created centered about the origin, with the\n * y axis as its vertical axis. .\n *\n * @param {number} bottomRadius Bottom radius of truncated cone.\n * @param {number} topRadius Top radius of truncated cone.\n * @param {number} height Height of truncated cone.\n * @param {number} radialSubdivisions The number of subdivisions around the\n *     truncated cone.\n * @param {number} verticalSubdivisions The number of subdivisions down the\n *     truncated cone.\n * @param {boolean} [opt_topCap] Create top cap. Default = true.\n * @param {boolean} [opt_bottomCap] Create bottom cap. Default = true.\n * @return {Object.<string, TypedArray>} The created cone vertices.\n * @memberOf module:twgl/primitives\n */\n\n\nfunction createTruncatedConeVertices(bottomRadius, topRadius, height, radialSubdivisions, verticalSubdivisions, opt_topCap, opt_bottomCap) {\n  if (radialSubdivisions < 3) {\n    throw new Error('radialSubdivisions must be 3 or greater');\n  }\n\n  if (verticalSubdivisions < 1) {\n    throw new Error('verticalSubdivisions must be 1 or greater');\n  }\n\n  var topCap = opt_topCap === undefined ? true : opt_topCap;\n  var bottomCap = opt_bottomCap === undefined ? true : opt_bottomCap;\n  var extra = (topCap ? 2 : 0) + (bottomCap ? 2 : 0);\n  var numVertices = (radialSubdivisions + 1) * (verticalSubdivisions + 1 + extra);\n  var positions = createAugmentedTypedArray(3, numVertices);\n  var normals = createAugmentedTypedArray(3, numVertices);\n  var texcoords = createAugmentedTypedArray(2, numVertices);\n  var indices = createAugmentedTypedArray(3, radialSubdivisions * (verticalSubdivisions + extra) * 2, Uint16Array);\n  var vertsAroundEdge = radialSubdivisions + 1; // The slant of the cone is constant across its surface\n\n  var slant = Math.atan2(bottomRadius - topRadius, height);\n  var cosSlant = Math.cos(slant);\n  var sinSlant = Math.sin(slant);\n  var start = topCap ? -2 : 0;\n  var end = verticalSubdivisions + (bottomCap ? 2 : 0);\n\n  for (var yy = start; yy <= end; ++yy) {\n    var v = yy / verticalSubdivisions;\n    var y = height * v;\n    var ringRadius = void 0;\n\n    if (yy < 0) {\n      y = 0;\n      v = 1;\n      ringRadius = bottomRadius;\n    } else if (yy > verticalSubdivisions) {\n      y = height;\n      v = 1;\n      ringRadius = topRadius;\n    } else {\n      ringRadius = bottomRadius + (topRadius - bottomRadius) * (yy / verticalSubdivisions);\n    }\n\n    if (yy === -2 || yy === verticalSubdivisions + 2) {\n      ringRadius = 0;\n      v = 0;\n    }\n\n    y -= height / 2;\n\n    for (var ii = 0; ii < vertsAroundEdge; ++ii) {\n      var sin = Math.sin(ii * Math.PI * 2 / radialSubdivisions);\n      var cos = Math.cos(ii * Math.PI * 2 / radialSubdivisions);\n      positions.push(sin * ringRadius, y, cos * ringRadius);\n      normals.push(yy < 0 || yy > verticalSubdivisions ? 0 : sin * cosSlant, yy < 0 ? -1 : yy > verticalSubdivisions ? 1 : sinSlant, yy < 0 || yy > verticalSubdivisions ? 0 : cos * cosSlant);\n      texcoords.push(ii / radialSubdivisions, 1 - v);\n    }\n  }\n\n  for (var _yy = 0; _yy < verticalSubdivisions + extra; ++_yy) {\n    // eslint-disable-line\n    for (var _ii = 0; _ii < radialSubdivisions; ++_ii) {\n      // eslint-disable-line\n      indices.push(vertsAroundEdge * (_yy + 0) + 0 + _ii, vertsAroundEdge * (_yy + 0) + 1 + _ii, vertsAroundEdge * (_yy + 1) + 1 + _ii);\n      indices.push(vertsAroundEdge * (_yy + 0) + 0 + _ii, vertsAroundEdge * (_yy + 1) + 1 + _ii, vertsAroundEdge * (_yy + 1) + 0 + _ii);\n    }\n  }\n\n  return {\n    position: positions,\n    normal: normals,\n    texcoord: texcoords,\n    indices: indices\n  };\n}\n/**\n * Expands RLE data\n * @param {number[]} rleData data in format of run-length, x, y, z, run-length, x, y, z\n * @param {number[]} [padding] value to add each entry with.\n * @return {number[]} the expanded rleData\n * @private\n */\n\n\nfunction expandRLEData(rleData, padding) {\n  padding = padding || [];\n  var data = [];\n\n  for (var ii = 0; ii < rleData.length; ii += 4) {\n    var runLength = rleData[ii];\n    var element = rleData.slice(ii + 1, ii + 4);\n    element.push.apply(element, padding);\n\n    for (var jj = 0; jj < runLength; ++jj) {\n      data.push.apply(data, element);\n    }\n  }\n\n  return data;\n}\n/**\n * Creates 3D 'F' BufferInfo.\n * An 'F' is useful because you can easily tell which way it is oriented.\n * The created 'F' has position, normal, texcoord, and color buffers.\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @return {module:twgl.BufferInfo} The created BufferInfo.\n * @memberOf module:twgl/primitives\n * @function create3DFBufferInfo\n */\n\n/**\n * Creates 3D 'F' buffers.\n * An 'F' is useful because you can easily tell which way it is oriented.\n * The created 'F' has position, normal, texcoord, and color buffers.\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @return {Object.<string, WebGLBuffer>} The created buffers.\n * @memberOf module:twgl/primitives\n * @function create3DFBuffers\n */\n\n/**\n * Creates 3D 'F' vertices.\n * An 'F' is useful because you can easily tell which way it is oriented.\n * The created 'F' has position, normal, texcoord, and color arrays.\n *\n * @return {Object.<string, TypedArray>} The created vertices.\n * @memberOf module:twgl/primitives\n */\n\n\nfunction create3DFVertices() {\n  var positions = [// left column front\n  0, 0, 0, 0, 150, 0, 30, 0, 0, 0, 150, 0, 30, 150, 0, 30, 0, 0, // top rung front\n  30, 0, 0, 30, 30, 0, 100, 0, 0, 30, 30, 0, 100, 30, 0, 100, 0, 0, // middle rung front\n  30, 60, 0, 30, 90, 0, 67, 60, 0, 30, 90, 0, 67, 90, 0, 67, 60, 0, // left column back\n  0, 0, 30, 30, 0, 30, 0, 150, 30, 0, 150, 30, 30, 0, 30, 30, 150, 30, // top rung back\n  30, 0, 30, 100, 0, 30, 30, 30, 30, 30, 30, 30, 100, 0, 30, 100, 30, 30, // middle rung back\n  30, 60, 30, 67, 60, 30, 30, 90, 30, 30, 90, 30, 67, 60, 30, 67, 90, 30, // top\n  0, 0, 0, 100, 0, 0, 100, 0, 30, 0, 0, 0, 100, 0, 30, 0, 0, 30, // top rung front\n  100, 0, 0, 100, 30, 0, 100, 30, 30, 100, 0, 0, 100, 30, 30, 100, 0, 30, // under top rung\n  30, 30, 0, 30, 30, 30, 100, 30, 30, 30, 30, 0, 100, 30, 30, 100, 30, 0, // between top rung and middle\n  30, 30, 0, 30, 60, 30, 30, 30, 30, 30, 30, 0, 30, 60, 0, 30, 60, 30, // top of middle rung\n  30, 60, 0, 67, 60, 30, 30, 60, 30, 30, 60, 0, 67, 60, 0, 67, 60, 30, // front of middle rung\n  67, 60, 0, 67, 90, 30, 67, 60, 30, 67, 60, 0, 67, 90, 0, 67, 90, 30, // bottom of middle rung.\n  30, 90, 0, 30, 90, 30, 67, 90, 30, 30, 90, 0, 67, 90, 30, 67, 90, 0, // front of bottom\n  30, 90, 0, 30, 150, 30, 30, 90, 30, 30, 90, 0, 30, 150, 0, 30, 150, 30, // bottom\n  0, 150, 0, 0, 150, 30, 30, 150, 30, 0, 150, 0, 30, 150, 30, 30, 150, 0, // left side\n  0, 0, 0, 0, 0, 30, 0, 150, 30, 0, 0, 0, 0, 150, 30, 0, 150, 0];\n  var texcoords = [// left column front\n  0.22, 0.19, 0.22, 0.79, 0.34, 0.19, 0.22, 0.79, 0.34, 0.79, 0.34, 0.19, // top rung front\n  0.34, 0.19, 0.34, 0.31, 0.62, 0.19, 0.34, 0.31, 0.62, 0.31, 0.62, 0.19, // middle rung front\n  0.34, 0.43, 0.34, 0.55, 0.49, 0.43, 0.34, 0.55, 0.49, 0.55, 0.49, 0.43, // left column back\n  0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, // top rung back\n  0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, // middle rung back\n  0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, // top\n  0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, // top rung front\n  0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, // under top rung\n  0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, // between top rung and middle\n  0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, // top of middle rung\n  0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, // front of middle rung\n  0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, // bottom of middle rung.\n  0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, // front of bottom\n  0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, // bottom\n  0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, // left side\n  0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0];\n  var normals = expandRLEData([// left column front\n  // top rung front\n  // middle rung front\n  18, 0, 0, 1, // left column back\n  // top rung back\n  // middle rung back\n  18, 0, 0, -1, // top\n  6, 0, 1, 0, // top rung front\n  6, 1, 0, 0, // under top rung\n  6, 0, -1, 0, // between top rung and middle\n  6, 1, 0, 0, // top of middle rung\n  6, 0, 1, 0, // front of middle rung\n  6, 1, 0, 0, // bottom of middle rung.\n  6, 0, -1, 0, // front of bottom\n  6, 1, 0, 0, // bottom\n  6, 0, -1, 0, // left side\n  6, -1, 0, 0]);\n  var colors = expandRLEData([// left column front\n  // top rung front\n  // middle rung front\n  18, 200, 70, 120, // left column back\n  // top rung back\n  // middle rung back\n  18, 80, 70, 200, // top\n  6, 70, 200, 210, // top rung front\n  6, 200, 200, 70, // under top rung\n  6, 210, 100, 70, // between top rung and middle\n  6, 210, 160, 70, // top of middle rung\n  6, 70, 180, 210, // front of middle rung\n  6, 100, 70, 210, // bottom of middle rung.\n  6, 76, 210, 100, // front of bottom\n  6, 140, 210, 80, // bottom\n  6, 90, 130, 110, // left side\n  6, 160, 160, 220], [255]);\n  var numVerts = positions.length / 3;\n  var arrays = {\n    position: createAugmentedTypedArray(3, numVerts),\n    texcoord: createAugmentedTypedArray(2, numVerts),\n    normal: createAugmentedTypedArray(3, numVerts),\n    color: createAugmentedTypedArray(4, numVerts, Uint8Array),\n    indices: createAugmentedTypedArray(3, numVerts / 3, Uint16Array)\n  };\n  arrays.position.push(positions);\n  arrays.texcoord.push(texcoords);\n  arrays.normal.push(normals);\n  arrays.color.push(colors);\n\n  for (var ii = 0; ii < numVerts; ++ii) {\n    arrays.indices.push(ii);\n  }\n\n  return arrays;\n}\n/**\n * Creates cresent BufferInfo.\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} verticalRadius The vertical radius of the cresent.\n * @param {number} outerRadius The outer radius of the cresent.\n * @param {number} innerRadius The inner radius of the cresent.\n * @param {number} thickness The thickness of the cresent.\n * @param {number} subdivisionsDown number of steps around the cresent.\n * @param {number} [startOffset] Where to start arc. Default 0.\n * @param {number} [endOffset] Where to end arg. Default 1.\n * @return {module:twgl.BufferInfo} The created BufferInfo.\n * @memberOf module:twgl/primitives\n * @function createCresentBufferInfo\n */\n\n/**\n * Creates cresent buffers.\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} verticalRadius The vertical radius of the cresent.\n * @param {number} outerRadius The outer radius of the cresent.\n * @param {number} innerRadius The inner radius of the cresent.\n * @param {number} thickness The thickness of the cresent.\n * @param {number} subdivisionsDown number of steps around the cresent.\n * @param {number} [startOffset] Where to start arc. Default 0.\n * @param {number} [endOffset] Where to end arg. Default 1.\n * @return {Object.<string, WebGLBuffer>} The created buffers.\n * @memberOf module:twgl/primitives\n * @function createCresentBuffers\n */\n\n/**\n * Creates cresent vertices.\n *\n * @param {number} verticalRadius The vertical radius of the cresent.\n * @param {number} outerRadius The outer radius of the cresent.\n * @param {number} innerRadius The inner radius of the cresent.\n * @param {number} thickness The thickness of the cresent.\n * @param {number} subdivisionsDown number of steps around the cresent.\n * @param {number} [startOffset] Where to start arc. Default 0.\n * @param {number} [endOffset] Where to end arg. Default 1.\n * @return {Object.<string, TypedArray>} The created vertices.\n * @memberOf module:twgl/primitives\n */\n\n\nfunction createCresentVertices(verticalRadius, outerRadius, innerRadius, thickness, subdivisionsDown, startOffset, endOffset) {\n  if (subdivisionsDown <= 0) {\n    throw new Error('subdivisionDown must be > 0');\n  }\n\n  startOffset = startOffset || 0;\n  endOffset = endOffset || 1;\n  var subdivisionsThick = 2;\n  var offsetRange = endOffset - startOffset;\n  var numVertices = (subdivisionsDown + 1) * 2 * (2 + subdivisionsThick);\n  var positions = createAugmentedTypedArray(3, numVertices);\n  var normals = createAugmentedTypedArray(3, numVertices);\n  var texcoords = createAugmentedTypedArray(2, numVertices);\n\n  function lerp(a, b, s) {\n    return a + (b - a) * s;\n  }\n\n  function createArc(arcRadius, x, normalMult, normalAdd, uMult, uAdd) {\n    for (var z = 0; z <= subdivisionsDown; z++) {\n      var uBack = x / (subdivisionsThick - 1);\n      var v = z / subdivisionsDown;\n      var xBack = (uBack - 0.5) * 2;\n      var angle = (startOffset + v * offsetRange) * Math.PI;\n      var s = Math.sin(angle);\n      var c = Math.cos(angle);\n      var radius = lerp(verticalRadius, arcRadius, s);\n      var px = xBack * thickness;\n      var py = c * verticalRadius;\n      var pz = s * radius;\n      positions.push(px, py, pz);\n      var n = v3.add(v3.multiply([0, s, c], normalMult), normalAdd);\n      normals.push(n);\n      texcoords.push(uBack * uMult + uAdd, v);\n    }\n  } // Generate the individual vertices in our vertex buffer.\n\n\n  for (var x = 0; x < subdivisionsThick; x++) {\n    var uBack = (x / (subdivisionsThick - 1) - 0.5) * 2;\n    createArc(outerRadius, x, [1, 1, 1], [0, 0, 0], 1, 0);\n    createArc(outerRadius, x, [0, 0, 0], [uBack, 0, 0], 0, 0);\n    createArc(innerRadius, x, [1, 1, 1], [0, 0, 0], 1, 0);\n    createArc(innerRadius, x, [0, 0, 0], [uBack, 0, 0], 0, 1);\n  } // Do outer surface.\n\n\n  var indices = createAugmentedTypedArray(3, subdivisionsDown * 2 * (2 + subdivisionsThick), Uint16Array);\n\n  function createSurface(leftArcOffset, rightArcOffset) {\n    for (var z = 0; z < subdivisionsDown; ++z) {\n      // Make triangle 1 of quad.\n      indices.push(leftArcOffset + z + 0, leftArcOffset + z + 1, rightArcOffset + z + 0); // Make triangle 2 of quad.\n\n      indices.push(leftArcOffset + z + 1, rightArcOffset + z + 1, rightArcOffset + z + 0);\n    }\n  }\n\n  var numVerticesDown = subdivisionsDown + 1; // front\n\n  createSurface(numVerticesDown * 0, numVerticesDown * 4); // right\n\n  createSurface(numVerticesDown * 5, numVerticesDown * 7); // back\n\n  createSurface(numVerticesDown * 6, numVerticesDown * 2); // left\n\n  createSurface(numVerticesDown * 3, numVerticesDown * 1);\n  return {\n    position: positions,\n    normal: normals,\n    texcoord: texcoords,\n    indices: indices\n  };\n}\n/**\n * Creates cylinder BufferInfo. The cylinder will be created around the origin\n * along the y-axis.\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} radius Radius of cylinder.\n * @param {number} height Height of cylinder.\n * @param {number} radialSubdivisions The number of subdivisions around the cylinder.\n * @param {number} verticalSubdivisions The number of subdivisions down the cylinder.\n * @param {boolean} [topCap] Create top cap. Default = true.\n * @param {boolean} [bottomCap] Create bottom cap. Default = true.\n * @return {module:twgl.BufferInfo} The created BufferInfo.\n * @memberOf module:twgl/primitives\n * @function createCylinderBufferInfo\n */\n\n/**\n * Creates cylinder buffers. The cylinder will be created around the origin\n * along the y-axis.\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} radius Radius of cylinder.\n * @param {number} height Height of cylinder.\n * @param {number} radialSubdivisions The number of subdivisions around the cylinder.\n * @param {number} verticalSubdivisions The number of subdivisions down the cylinder.\n * @param {boolean} [topCap] Create top cap. Default = true.\n * @param {boolean} [bottomCap] Create bottom cap. Default = true.\n * @return {Object.<string, WebGLBuffer>} The created buffers.\n * @memberOf module:twgl/primitives\n * @function createCylinderBuffers\n */\n\n/**\n * Creates cylinder vertices. The cylinder will be created around the origin\n * along the y-axis.\n *\n * @param {number} radius Radius of cylinder.\n * @param {number} height Height of cylinder.\n * @param {number} radialSubdivisions The number of subdivisions around the cylinder.\n * @param {number} verticalSubdivisions The number of subdivisions down the cylinder.\n * @param {boolean} [topCap] Create top cap. Default = true.\n * @param {boolean} [bottomCap] Create bottom cap. Default = true.\n * @return {Object.<string, TypedArray>} The created vertices.\n * @memberOf module:twgl/primitives\n */\n\n\nfunction createCylinderVertices(radius, height, radialSubdivisions, verticalSubdivisions, topCap, bottomCap) {\n  return createTruncatedConeVertices(radius, radius, height, radialSubdivisions, verticalSubdivisions, topCap, bottomCap);\n}\n/**\n * Creates BufferInfo for a torus\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} radius radius of center of torus circle.\n * @param {number} thickness radius of torus ring.\n * @param {number} radialSubdivisions The number of subdivisions around the torus.\n * @param {number} bodySubdivisions The number of subdivisions around the body torus.\n * @param {boolean} [startAngle] start angle in radians. Default = 0.\n * @param {boolean} [endAngle] end angle in radians. Default = Math.PI * 2.\n * @return {module:twgl.BufferInfo} The created BufferInfo.\n * @memberOf module:twgl/primitives\n * @function createTorusBufferInfo\n */\n\n/**\n * Creates buffers for a torus\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} radius radius of center of torus circle.\n * @param {number} thickness radius of torus ring.\n * @param {number} radialSubdivisions The number of subdivisions around the torus.\n * @param {number} bodySubdivisions The number of subdivisions around the body torus.\n * @param {boolean} [startAngle] start angle in radians. Default = 0.\n * @param {boolean} [endAngle] end angle in radians. Default = Math.PI * 2.\n * @return {Object.<string, WebGLBuffer>} The created buffers.\n * @memberOf module:twgl/primitives\n * @function createTorusBuffers\n */\n\n/**\n * Creates vertices for a torus\n *\n * @param {number} radius radius of center of torus circle.\n * @param {number} thickness radius of torus ring.\n * @param {number} radialSubdivisions The number of subdivisions around the torus.\n * @param {number} bodySubdivisions The number of subdivisions around the body torus.\n * @param {boolean} [startAngle] start angle in radians. Default = 0.\n * @param {boolean} [endAngle] end angle in radians. Default = Math.PI * 2.\n * @return {Object.<string, TypedArray>} The created vertices.\n * @memberOf module:twgl/primitives\n */\n\n\nfunction createTorusVertices(radius, thickness, radialSubdivisions, bodySubdivisions, startAngle, endAngle) {\n  if (radialSubdivisions < 3) {\n    throw new Error('radialSubdivisions must be 3 or greater');\n  }\n\n  if (bodySubdivisions < 3) {\n    throw new Error('verticalSubdivisions must be 3 or greater');\n  }\n\n  startAngle = startAngle || 0;\n  endAngle = endAngle || Math.PI * 2;\n  var range = endAngle - startAngle;\n  var radialParts = radialSubdivisions + 1;\n  var bodyParts = bodySubdivisions + 1;\n  var numVertices = radialParts * bodyParts;\n  var positions = createAugmentedTypedArray(3, numVertices);\n  var normals = createAugmentedTypedArray(3, numVertices);\n  var texcoords = createAugmentedTypedArray(2, numVertices);\n  var indices = createAugmentedTypedArray(3, radialSubdivisions * bodySubdivisions * 2, Uint16Array);\n\n  for (var slice = 0; slice < bodyParts; ++slice) {\n    var v = slice / bodySubdivisions;\n    var sliceAngle = v * Math.PI * 2;\n    var sliceSin = Math.sin(sliceAngle);\n    var ringRadius = radius + sliceSin * thickness;\n    var ny = Math.cos(sliceAngle);\n    var y = ny * thickness;\n\n    for (var ring = 0; ring < radialParts; ++ring) {\n      var u = ring / radialSubdivisions;\n      var ringAngle = startAngle + u * range;\n      var xSin = Math.sin(ringAngle);\n      var zCos = Math.cos(ringAngle);\n      var x = xSin * ringRadius;\n      var z = zCos * ringRadius;\n      var nx = xSin * sliceSin;\n      var nz = zCos * sliceSin;\n      positions.push(x, y, z);\n      normals.push(nx, ny, nz);\n      texcoords.push(u, 1 - v);\n    }\n  }\n\n  for (var _slice = 0; _slice < bodySubdivisions; ++_slice) {\n    // eslint-disable-line\n    for (var _ring = 0; _ring < radialSubdivisions; ++_ring) {\n      // eslint-disable-line\n      var nextRingIndex = 1 + _ring;\n      var nextSliceIndex = 1 + _slice;\n      indices.push(radialParts * _slice + _ring, radialParts * nextSliceIndex + _ring, radialParts * _slice + nextRingIndex);\n      indices.push(radialParts * nextSliceIndex + _ring, radialParts * nextSliceIndex + nextRingIndex, radialParts * _slice + nextRingIndex);\n    }\n  }\n\n  return {\n    position: positions,\n    normal: normals,\n    texcoord: texcoords,\n    indices: indices\n  };\n}\n/**\n * Creates a disc BufferInfo. The disc will be in the xz plane, centered at\n * the origin. When creating, at least 3 divisions, or pie\n * pieces, need to be specified, otherwise the triangles making\n * up the disc will be degenerate. You can also specify the\n * number of radial pieces `stacks`. A value of 1 for\n * stacks will give you a simple disc of pie pieces.  If you\n * want to create an annulus you can set `innerRadius` to a\n * value > 0. Finally, `stackPower` allows you to have the widths\n * increase or decrease as you move away from the center. This\n * is particularly useful when using the disc as a ground plane\n * with a fixed camera such that you don't need the resolution\n * of small triangles near the perimeter. For example, a value\n * of 2 will produce stacks whose ouside radius increases with\n * the square of the stack index. A value of 1 will give uniform\n * stacks.\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} radius Radius of the ground plane.\n * @param {number} divisions Number of triangles in the ground plane (at least 3).\n * @param {number} [stacks] Number of radial divisions (default=1).\n * @param {number} [innerRadius] Default 0.\n * @param {number} [stackPower] Power to raise stack size to for decreasing width.\n * @return {module:twgl.BufferInfo} The created BufferInfo.\n * @memberOf module:twgl/primitives\n * @function createDiscBufferInfo\n */\n\n/**\n * Creates disc buffers. The disc will be in the xz plane, centered at\n * the origin. When creating, at least 3 divisions, or pie\n * pieces, need to be specified, otherwise the triangles making\n * up the disc will be degenerate. You can also specify the\n * number of radial pieces `stacks`. A value of 1 for\n * stacks will give you a simple disc of pie pieces.  If you\n * want to create an annulus you can set `innerRadius` to a\n * value > 0. Finally, `stackPower` allows you to have the widths\n * increase or decrease as you move away from the center. This\n * is particularly useful when using the disc as a ground plane\n * with a fixed camera such that you don't need the resolution\n * of small triangles near the perimeter. For example, a value\n * of 2 will produce stacks whose ouside radius increases with\n * the square of the stack index. A value of 1 will give uniform\n * stacks.\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext.\n * @param {number} radius Radius of the ground plane.\n * @param {number} divisions Number of triangles in the ground plane (at least 3).\n * @param {number} [stacks] Number of radial divisions (default=1).\n * @param {number} [innerRadius] Default 0.\n * @param {number} [stackPower] Power to raise stack size to for decreasing width.\n * @return {Object.<string, WebGLBuffer>} The created buffers.\n * @memberOf module:twgl/primitives\n * @function createDiscBuffers\n */\n\n/**\n * Creates disc vertices. The disc will be in the xz plane, centered at\n * the origin. When creating, at least 3 divisions, or pie\n * pieces, need to be specified, otherwise the triangles making\n * up the disc will be degenerate. You can also specify the\n * number of radial pieces `stacks`. A value of 1 for\n * stacks will give you a simple disc of pie pieces.  If you\n * want to create an annulus you can set `innerRadius` to a\n * value > 0. Finally, `stackPower` allows you to have the widths\n * increase or decrease as you move away from the center. This\n * is particularly useful when using the disc as a ground plane\n * with a fixed camera such that you don't need the resolution\n * of small triangles near the perimeter. For example, a value\n * of 2 will produce stacks whose ouside radius increases with\n * the square of the stack index. A value of 1 will give uniform\n * stacks.\n *\n * @param {number} radius Radius of the ground plane.\n * @param {number} divisions Number of triangles in the ground plane (at least 3).\n * @param {number} [stacks] Number of radial divisions (default=1).\n * @param {number} [innerRadius] Default 0.\n * @param {number} [stackPower] Power to raise stack size to for decreasing width.\n * @return {Object.<string, TypedArray>} The created vertices.\n * @memberOf module:twgl/primitives\n */\n\n\nfunction createDiscVertices(radius, divisions, stacks, innerRadius, stackPower) {\n  if (divisions < 3) {\n    throw new Error('divisions must be at least 3');\n  }\n\n  stacks = stacks ? stacks : 1;\n  stackPower = stackPower ? stackPower : 1;\n  innerRadius = innerRadius ? innerRadius : 0; // Note: We don't share the center vertex because that would\n  // mess up texture coordinates.\n\n  var numVertices = (divisions + 1) * (stacks + 1);\n  var positions = createAugmentedTypedArray(3, numVertices);\n  var normals = createAugmentedTypedArray(3, numVertices);\n  var texcoords = createAugmentedTypedArray(2, numVertices);\n  var indices = createAugmentedTypedArray(3, stacks * divisions * 2, Uint16Array);\n  var firstIndex = 0;\n  var radiusSpan = radius - innerRadius;\n  var pointsPerStack = divisions + 1; // Build the disk one stack at a time.\n\n  for (var stack = 0; stack <= stacks; ++stack) {\n    var stackRadius = innerRadius + radiusSpan * Math.pow(stack / stacks, stackPower);\n\n    for (var i = 0; i <= divisions; ++i) {\n      var theta = 2.0 * Math.PI * i / divisions;\n      var x = stackRadius * Math.cos(theta);\n      var z = stackRadius * Math.sin(theta);\n      positions.push(x, 0, z);\n      normals.push(0, 1, 0);\n      texcoords.push(1 - i / divisions, stack / stacks);\n\n      if (stack > 0 && i !== divisions) {\n        // a, b, c and d are the indices of the vertices of a quad.  unless\n        // the current stack is the one closest to the center, in which case\n        // the vertices a and b connect to the center vertex.\n        var a = firstIndex + (i + 1);\n        var b = firstIndex + i;\n        var c = firstIndex + i - pointsPerStack;\n        var d = firstIndex + (i + 1) - pointsPerStack; // Make a quad of the vertices a, b, c, d.\n\n        indices.push(a, b, c);\n        indices.push(a, c, d);\n      }\n    }\n\n    firstIndex += divisions + 1;\n  }\n\n  return {\n    position: positions,\n    normal: normals,\n    texcoord: texcoords,\n    indices: indices\n  };\n}\n/**\n * creates a random integer between 0 and range - 1 inclusive.\n * @param {number} range\n * @return {number} random value between 0 and range - 1 inclusive.\n * @private\n */\n\n\nfunction randInt(range) {\n  return Math.random() * range | 0;\n}\n/**\n * Used to supply random colors\n * @callback RandomColorFunc\n * @param {number} ndx index of triangle/quad if unindexed or index of vertex if indexed\n * @param {number} channel 0 = red, 1 = green, 2 = blue, 3 = alpha\n * @return {number} a number from 0 to 255\n * @memberOf module:twgl/primitives\n */\n\n/**\n * @typedef {Object} RandomVerticesOptions\n * @property {number} [vertsPerColor] Defaults to 3 for non-indexed vertices\n * @property {module:twgl/primitives.RandomColorFunc} [rand] A function to generate random numbers\n * @memberOf module:twgl/primitives\n */\n\n/**\n * Creates an augmentedTypedArray of random vertex colors.\n * If the vertices are indexed (have an indices array) then will\n * just make random colors. Otherwise assumes they are triangles\n * and makes one random color for every 3 vertices.\n * @param {Object.<string, AugmentedTypedArray>} vertices Vertices as returned from one of the createXXXVertices functions.\n * @param {module:twgl/primitives.RandomVerticesOptions} [options] options.\n * @return {Object.<string, AugmentedTypedArray>} same vertices as passed in with `color` added.\n * @memberOf module:twgl/primitives\n */\n\n\nfunction makeRandomVertexColors(vertices, options) {\n  options = options || {};\n  var numElements = vertices.position.numElements;\n  var vcolors = createAugmentedTypedArray(4, numElements, Uint8Array);\n\n  var rand = options.rand || function (ndx, channel) {\n    return channel < 3 ? randInt(256) : 255;\n  };\n\n  vertices.color = vcolors;\n\n  if (vertices.indices) {\n    // just make random colors if index\n    for (var ii = 0; ii < numElements; ++ii) {\n      vcolors.push(rand(ii, 0), rand(ii, 1), rand(ii, 2), rand(ii, 3));\n    }\n  } else {\n    // make random colors per triangle\n    var numVertsPerColor = options.vertsPerColor || 3;\n    var numSets = numElements / numVertsPerColor;\n\n    for (var _ii2 = 0; _ii2 < numSets; ++_ii2) {\n      // eslint-disable-line\n      var color = [rand(_ii2, 0), rand(_ii2, 1), rand(_ii2, 2), rand(_ii2, 3)];\n\n      for (var jj = 0; jj < numVertsPerColor; ++jj) {\n        vcolors.push(color);\n      }\n    }\n  }\n\n  return vertices;\n}\n/**\n * creates a function that calls fn to create vertices and then\n * creates a buffers for them\n * @private\n */\n\n\nfunction createBufferFunc(fn) {\n  return function (gl) {\n    var arrays = fn.apply(this, Array.prototype.slice.call(arguments, 1));\n    return attributes.createBuffersFromArrays(gl, arrays);\n  };\n}\n/**\n * creates a function that calls fn to create vertices and then\n * creates a bufferInfo object for them\n * @private\n */\n\n\nfunction createBufferInfoFunc(fn) {\n  return function (gl) {\n    var arrays = fn.apply(null, Array.prototype.slice.call(arguments, 1));\n    return attributes.createBufferInfoFromArrays(gl, arrays);\n  };\n}\n\nvar arraySpecPropertyNames = [\"numComponents\", \"size\", \"type\", \"normalize\", \"stride\", \"offset\", \"attrib\", \"name\", \"attribName\"];\n/**\n * Copy elements from one array to another\n *\n * @param {Array|TypedArray} src source array\n * @param {Array|TypedArray} dst dest array\n * @param {number} dstNdx index in dest to copy src\n * @param {number} [offset] offset to add to copied values\n * @private\n */\n\nfunction copyElements(src, dst, dstNdx, offset) {\n  offset = offset || 0;\n  var length = src.length;\n\n  for (var ii = 0; ii < length; ++ii) {\n    dst[dstNdx + ii] = src[ii] + offset;\n  }\n}\n/**\n * Creates an array of the same time\n *\n * @param {(number[]|ArrayBufferView|module:twgl.FullArraySpec)} srcArray array who's type to copy\n * @param {number} length size of new array\n * @return {(number[]|ArrayBufferView|module:twgl.FullArraySpec)} array with same type as srcArray\n * @private\n */\n\n\nfunction createArrayOfSameType(srcArray, length) {\n  var arraySrc = getArray(srcArray);\n  var newArray = new arraySrc.constructor(length);\n  var newArraySpec = newArray; // If it appears to have been augmented make new one augemented\n\n  if (arraySrc.numComponents && arraySrc.numElements) {\n    augmentTypedArray(newArray, arraySrc.numComponents);\n  } // If it was a fullspec make new one a fullspec\n\n\n  if (srcArray.data) {\n    newArraySpec = {\n      data: newArray\n    };\n    helper.copyNamedProperties(arraySpecPropertyNames, srcArray, newArraySpec);\n  }\n\n  return newArraySpec;\n}\n/**\n * Concatinates sets of vertices\n *\n * Assumes the vertices match in composition. For example\n * if one set of vertices has positions, normals, and indices\n * all sets of vertices must have positions, normals, and indices\n * and of the same type.\n *\n * Example:\n *\n *      const cubeVertices = twgl.primtiives.createCubeVertices(2);\n *      const sphereVertices = twgl.primitives.createSphereVertices(1, 10, 10);\n *      // move the sphere 2 units up\n *      twgl.primitives.reorientVertices(\n *          sphereVertices, twgl.m4.translation([0, 2, 0]));\n *      // merge the sphere with the cube\n *      const cubeSphereVertices = twgl.primitives.concatVertices(\n *          [cubeVertices, sphereVertices]);\n *      // turn them into WebGL buffers and attrib data\n *      const bufferInfo = twgl.createBufferInfoFromArrays(gl, cubeSphereVertices);\n *\n * @param {module:twgl.Arrays[]} arrays Array of arrays of vertices\n * @return {module:twgl.Arrays} The concatinated vertices.\n * @memberOf module:twgl/primitives\n */\n\n\nfunction concatVertices(arrayOfArrays) {\n  var names = {};\n  var baseName; // get names of all arrays.\n  // and numElements for each set of vertices\n\n  var _loop = function _loop(ii) {\n    var arrays = arrayOfArrays[ii];\n    Object.keys(arrays).forEach(function (name) {\n      // eslint-disable-line\n      if (!names[name]) {\n        names[name] = [];\n      }\n\n      if (!baseName && name !== 'indices') {\n        baseName = name;\n      }\n\n      var arrayInfo = arrays[name];\n      var numComponents = getNumComponents(arrayInfo, name);\n      var array = getArray(arrayInfo);\n      var numElements = array.length / numComponents;\n      names[name].push(numElements);\n    });\n  };\n\n  for (var ii = 0; ii < arrayOfArrays.length; ++ii) {\n    _loop(ii);\n  } // compute length of combined array\n  // and return one for reference\n\n\n  function getLengthOfCombinedArrays(name) {\n    var length = 0;\n    var arraySpec;\n\n    for (var ii = 0; ii < arrayOfArrays.length; ++ii) {\n      var arrays = arrayOfArrays[ii];\n      var arrayInfo = arrays[name];\n      var array = getArray(arrayInfo);\n      length += array.length;\n\n      if (!arraySpec || arrayInfo.data) {\n        arraySpec = arrayInfo;\n      }\n    }\n\n    return {\n      length: length,\n      spec: arraySpec\n    };\n  }\n\n  function copyArraysToNewArray(name, base, newArray) {\n    var baseIndex = 0;\n    var offset = 0;\n\n    for (var ii = 0; ii < arrayOfArrays.length; ++ii) {\n      var arrays = arrayOfArrays[ii];\n      var arrayInfo = arrays[name];\n      var array = getArray(arrayInfo);\n\n      if (name === 'indices') {\n        copyElements(array, newArray, offset, baseIndex);\n        baseIndex += base[ii];\n      } else {\n        copyElements(array, newArray, offset);\n      }\n\n      offset += array.length;\n    }\n  }\n\n  var base = names[baseName];\n  var newArrays = {};\n  Object.keys(names).forEach(function (name) {\n    var info = getLengthOfCombinedArrays(name);\n    var newArraySpec = createArrayOfSameType(info.spec, info.length);\n    copyArraysToNewArray(name, base, getArray(newArraySpec));\n    newArrays[name] = newArraySpec;\n  });\n  return newArrays;\n}\n/**\n * Creates a duplicate set of vertices\n *\n * This is useful for calling reorientVertices when you\n * also want to keep the original available\n *\n * @param {module:twgl.Arrays} arrays of vertices\n * @return {module:twgl.Arrays} The dupilicated vertices.\n * @memberOf module:twgl/primitives\n */\n\n\nfunction duplicateVertices(arrays) {\n  var newArrays = {};\n  Object.keys(arrays).forEach(function (name) {\n    var arraySpec = arrays[name];\n    var srcArray = getArray(arraySpec);\n    var newArraySpec = createArrayOfSameType(arraySpec, srcArray.length);\n    copyElements(srcArray, getArray(newArraySpec), 0);\n    newArrays[name] = newArraySpec;\n  });\n  return newArrays;\n}\n\nvar create3DFBufferInfo = createBufferInfoFunc(create3DFVertices);\nexports.create3DFBufferInfo = create3DFBufferInfo;\nvar create3DFBuffers = createBufferFunc(create3DFVertices);\nexports.create3DFBuffers = create3DFBuffers;\nvar createCubeBufferInfo = createBufferInfoFunc(createCubeVertices);\nexports.createCubeBufferInfo = createCubeBufferInfo;\nvar createCubeBuffers = createBufferFunc(createCubeVertices);\nexports.createCubeBuffers = createCubeBuffers;\nvar createPlaneBufferInfo = createBufferInfoFunc(createPlaneVertices);\nexports.createPlaneBufferInfo = createPlaneBufferInfo;\nvar createPlaneBuffers = createBufferFunc(createPlaneVertices);\nexports.createPlaneBuffers = createPlaneBuffers;\nvar createSphereBufferInfo = createBufferInfoFunc(createSphereVertices);\nexports.createSphereBufferInfo = createSphereBufferInfo;\nvar createSphereBuffers = createBufferFunc(createSphereVertices);\nexports.createSphereBuffers = createSphereBuffers;\nvar createTruncatedConeBufferInfo = createBufferInfoFunc(createTruncatedConeVertices);\nexports.createTruncatedConeBufferInfo = createTruncatedConeBufferInfo;\nvar createTruncatedConeBuffers = createBufferFunc(createTruncatedConeVertices);\nexports.createTruncatedConeBuffers = createTruncatedConeBuffers;\nvar createXYQuadBufferInfo = createBufferInfoFunc(createXYQuadVertices);\nexports.createXYQuadBufferInfo = createXYQuadBufferInfo;\nvar createXYQuadBuffers = createBufferFunc(createXYQuadVertices);\nexports.createXYQuadBuffers = createXYQuadBuffers;\nvar createCresentBufferInfo = createBufferInfoFunc(createCresentVertices);\nexports.createCresentBufferInfo = createCresentBufferInfo;\nvar createCresentBuffers = createBufferFunc(createCresentVertices);\nexports.createCresentBuffers = createCresentBuffers;\nvar createCylinderBufferInfo = createBufferInfoFunc(createCylinderVertices);\nexports.createCylinderBufferInfo = createCylinderBufferInfo;\nvar createCylinderBuffers = createBufferFunc(createCylinderVertices);\nexports.createCylinderBuffers = createCylinderBuffers;\nvar createTorusBufferInfo = createBufferInfoFunc(createTorusVertices);\nexports.createTorusBufferInfo = createTorusBufferInfo;\nvar createTorusBuffers = createBufferFunc(createTorusVertices);\nexports.createTorusBuffers = createTorusBuffers;\nvar createDiscBufferInfo = createBufferInfoFunc(createDiscVertices);\nexports.createDiscBufferInfo = createDiscBufferInfo;\nvar createDiscBuffers = createBufferFunc(createDiscVertices);\nexports.createDiscBuffers = createDiscBuffers;\n\n/***/ }),\n\n/***/ \"./src/programs.js\":\n/*!*************************!*\\\n  !*** ./src/programs.js ***!\n  \\*************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.createAttributeSetters = createAttributeSetters;\nexports.createProgram = createProgram;\nexports.createProgramFromScripts = createProgramFromScripts;\nexports.createProgramFromSources = createProgramFromSources;\nexports.createProgramInfo = createProgramInfo;\nexports.createProgramInfoFromProgram = createProgramInfoFromProgram;\nexports.createUniformSetters = createUniformSetters;\nexports.createUniformBlockSpecFromProgram = createUniformBlockSpecFromProgram;\nexports.createUniformBlockInfoFromProgram = createUniformBlockInfoFromProgram;\nexports.createUniformBlockInfo = createUniformBlockInfo;\nexports.createTransformFeedback = createTransformFeedback;\nexports.createTransformFeedbackInfo = createTransformFeedbackInfo;\nexports.bindTransformFeedbackInfo = bindTransformFeedbackInfo;\nexports.setAttributes = setAttributes;\nexports.setBuffersAndAttributes = setBuffersAndAttributes;\nexports.setUniforms = setUniforms;\nexports.setUniformBlock = setUniformBlock;\nexports.setBlockUniforms = setBlockUniforms;\nexports.bindUniformBlock = bindUniformBlock;\n\nvar utils = _interopRequireWildcard(__webpack_require__(/*! ./utils.js */ \"./src/utils.js\"));\n\nvar helper = _interopRequireWildcard(__webpack_require__(/*! ./helper.js */ \"./src/helper.js\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Low level shader program related functions\n *\n * You should generally not need to use these functions. They are provided\n * for those cases where you're doing something out of the ordinary\n * and you need lower level access.\n *\n * For backward compatibily they are available at both `twgl.programs` and `twgl`\n * itself\n *\n * See {@link module:twgl} for core functions\n *\n * @module twgl/programs\n */\nvar error = helper.error;\nvar warn = helper.warn;\nvar getElementById = typeof document !== 'undefined' && document.getElementById ? document.getElementById.bind(document) : function () {\n  return null;\n};\nvar FLOAT = 0x1406;\nvar FLOAT_VEC2 = 0x8B50;\nvar FLOAT_VEC3 = 0x8B51;\nvar FLOAT_VEC4 = 0x8B52;\nvar INT = 0x1404;\nvar INT_VEC2 = 0x8B53;\nvar INT_VEC3 = 0x8B54;\nvar INT_VEC4 = 0x8B55;\nvar BOOL = 0x8B56;\nvar BOOL_VEC2 = 0x8B57;\nvar BOOL_VEC3 = 0x8B58;\nvar BOOL_VEC4 = 0x8B59;\nvar FLOAT_MAT2 = 0x8B5A;\nvar FLOAT_MAT3 = 0x8B5B;\nvar FLOAT_MAT4 = 0x8B5C;\nvar SAMPLER_2D = 0x8B5E;\nvar SAMPLER_CUBE = 0x8B60;\nvar SAMPLER_3D = 0x8B5F;\nvar SAMPLER_2D_SHADOW = 0x8B62;\nvar FLOAT_MAT2x3 = 0x8B65;\nvar FLOAT_MAT2x4 = 0x8B66;\nvar FLOAT_MAT3x2 = 0x8B67;\nvar FLOAT_MAT3x4 = 0x8B68;\nvar FLOAT_MAT4x2 = 0x8B69;\nvar FLOAT_MAT4x3 = 0x8B6A;\nvar SAMPLER_2D_ARRAY = 0x8DC1;\nvar SAMPLER_2D_ARRAY_SHADOW = 0x8DC4;\nvar SAMPLER_CUBE_SHADOW = 0x8DC5;\nvar UNSIGNED_INT = 0x1405;\nvar UNSIGNED_INT_VEC2 = 0x8DC6;\nvar UNSIGNED_INT_VEC3 = 0x8DC7;\nvar UNSIGNED_INT_VEC4 = 0x8DC8;\nvar INT_SAMPLER_2D = 0x8DCA;\nvar INT_SAMPLER_3D = 0x8DCB;\nvar INT_SAMPLER_CUBE = 0x8DCC;\nvar INT_SAMPLER_2D_ARRAY = 0x8DCF;\nvar UNSIGNED_INT_SAMPLER_2D = 0x8DD2;\nvar UNSIGNED_INT_SAMPLER_3D = 0x8DD3;\nvar UNSIGNED_INT_SAMPLER_CUBE = 0x8DD4;\nvar UNSIGNED_INT_SAMPLER_2D_ARRAY = 0x8DD7;\nvar TEXTURE_2D = 0x0DE1;\nvar TEXTURE_CUBE_MAP = 0x8513;\nvar TEXTURE_3D = 0x806F;\nvar TEXTURE_2D_ARRAY = 0x8C1A;\nvar typeMap = {};\n/**\n * Returns the corresponding bind point for a given sampler type\n */\n\nfunction getBindPointForSamplerType(gl, type) {\n  return typeMap[type].bindPoint;\n} // This kind of sucks! If you could compose functions as in `var fn = gl[name];`\n// this code could be a lot smaller but that is sadly really slow (T_T)\n\n\nfunction floatSetter(gl, location) {\n  return function (v) {\n    gl.uniform1f(location, v);\n  };\n}\n\nfunction floatArraySetter(gl, location) {\n  return function (v) {\n    gl.uniform1fv(location, v);\n  };\n}\n\nfunction floatVec2Setter(gl, location) {\n  return function (v) {\n    gl.uniform2fv(location, v);\n  };\n}\n\nfunction floatVec3Setter(gl, location) {\n  return function (v) {\n    gl.uniform3fv(location, v);\n  };\n}\n\nfunction floatVec4Setter(gl, location) {\n  return function (v) {\n    gl.uniform4fv(location, v);\n  };\n}\n\nfunction intSetter(gl, location) {\n  return function (v) {\n    gl.uniform1i(location, v);\n  };\n}\n\nfunction intArraySetter(gl, location) {\n  return function (v) {\n    gl.uniform1iv(location, v);\n  };\n}\n\nfunction intVec2Setter(gl, location) {\n  return function (v) {\n    gl.uniform2iv(location, v);\n  };\n}\n\nfunction intVec3Setter(gl, location) {\n  return function (v) {\n    gl.uniform3iv(location, v);\n  };\n}\n\nfunction intVec4Setter(gl, location) {\n  return function (v) {\n    gl.uniform4iv(location, v);\n  };\n}\n\nfunction uintSetter(gl, location) {\n  return function (v) {\n    gl.uniform1ui(location, v);\n  };\n}\n\nfunction uintArraySetter(gl, location) {\n  return function (v) {\n    gl.uniform1uiv(location, v);\n  };\n}\n\nfunction uintVec2Setter(gl, location) {\n  return function (v) {\n    gl.uniform2uiv(location, v);\n  };\n}\n\nfunction uintVec3Setter(gl, location) {\n  return function (v) {\n    gl.uniform3uiv(location, v);\n  };\n}\n\nfunction uintVec4Setter(gl, location) {\n  return function (v) {\n    gl.uniform4uiv(location, v);\n  };\n}\n\nfunction floatMat2Setter(gl, location) {\n  return function (v) {\n    gl.uniformMatrix2fv(location, false, v);\n  };\n}\n\nfunction floatMat3Setter(gl, location) {\n  return function (v) {\n    gl.uniformMatrix3fv(location, false, v);\n  };\n}\n\nfunction floatMat4Setter(gl, location) {\n  return function (v) {\n    gl.uniformMatrix4fv(location, false, v);\n  };\n}\n\nfunction floatMat23Setter(gl, location) {\n  return function (v) {\n    gl.uniformMatrix2x3fv(location, false, v);\n  };\n}\n\nfunction floatMat32Setter(gl, location) {\n  return function (v) {\n    gl.uniformMatrix3x2fv(location, false, v);\n  };\n}\n\nfunction floatMat24Setter(gl, location) {\n  return function (v) {\n    gl.uniformMatrix2x4fv(location, false, v);\n  };\n}\n\nfunction floatMat42Setter(gl, location) {\n  return function (v) {\n    gl.uniformMatrix4x2fv(location, false, v);\n  };\n}\n\nfunction floatMat34Setter(gl, location) {\n  return function (v) {\n    gl.uniformMatrix3x4fv(location, false, v);\n  };\n}\n\nfunction floatMat43Setter(gl, location) {\n  return function (v) {\n    gl.uniformMatrix4x3fv(location, false, v);\n  };\n}\n\nfunction samplerSetter(gl, type, unit, location) {\n  var bindPoint = getBindPointForSamplerType(gl, type);\n  return utils.isWebGL2(gl) ? function (textureOrPair) {\n    var texture;\n    var sampler;\n\n    if (helper.isTexture(gl, textureOrPair)) {\n      texture = textureOrPair;\n      sampler = null;\n    } else {\n      texture = textureOrPair.texture;\n      sampler = textureOrPair.sampler;\n    }\n\n    gl.uniform1i(location, unit);\n    gl.activeTexture(gl.TEXTURE0 + unit);\n    gl.bindTexture(bindPoint, texture);\n    gl.bindSampler(unit, sampler);\n  } : function (texture) {\n    gl.uniform1i(location, unit);\n    gl.activeTexture(gl.TEXTURE0 + unit);\n    gl.bindTexture(bindPoint, texture);\n  };\n}\n\nfunction samplerArraySetter(gl, type, unit, location, size) {\n  var bindPoint = getBindPointForSamplerType(gl, type);\n  var units = new Int32Array(size);\n\n  for (var ii = 0; ii < size; ++ii) {\n    units[ii] = unit + ii;\n  }\n\n  return utils.isWebGL2(gl) ? function (textures) {\n    gl.uniform1iv(location, units);\n    textures.forEach(function (textureOrPair, index) {\n      gl.activeTexture(gl.TEXTURE0 + units[index]);\n      var texture;\n      var sampler;\n\n      if (helper.isTexture(gl, textureOrPair)) {\n        texture = textureOrPair;\n        sampler = null;\n      } else {\n        texture = textureOrPair.texture;\n        sampler = textureOrPair.sampler;\n      }\n\n      gl.bindSampler(unit, sampler);\n      gl.bindTexture(bindPoint, texture);\n    });\n  } : function (textures) {\n    gl.uniform1iv(location, units);\n    textures.forEach(function (texture, index) {\n      gl.activeTexture(gl.TEXTURE0 + units[index]);\n      gl.bindTexture(bindPoint, texture);\n    });\n  };\n}\n\ntypeMap[FLOAT] = {\n  Type: Float32Array,\n  size: 4,\n  setter: floatSetter,\n  arraySetter: floatArraySetter\n};\ntypeMap[FLOAT_VEC2] = {\n  Type: Float32Array,\n  size: 8,\n  setter: floatVec2Setter\n};\ntypeMap[FLOAT_VEC3] = {\n  Type: Float32Array,\n  size: 12,\n  setter: floatVec3Setter\n};\ntypeMap[FLOAT_VEC4] = {\n  Type: Float32Array,\n  size: 16,\n  setter: floatVec4Setter\n};\ntypeMap[INT] = {\n  Type: Int32Array,\n  size: 4,\n  setter: intSetter,\n  arraySetter: intArraySetter\n};\ntypeMap[INT_VEC2] = {\n  Type: Int32Array,\n  size: 8,\n  setter: intVec2Setter\n};\ntypeMap[INT_VEC3] = {\n  Type: Int32Array,\n  size: 12,\n  setter: intVec3Setter\n};\ntypeMap[INT_VEC4] = {\n  Type: Int32Array,\n  size: 16,\n  setter: intVec4Setter\n};\ntypeMap[UNSIGNED_INT] = {\n  Type: Uint32Array,\n  size: 4,\n  setter: uintSetter,\n  arraySetter: uintArraySetter\n};\ntypeMap[UNSIGNED_INT_VEC2] = {\n  Type: Uint32Array,\n  size: 8,\n  setter: uintVec2Setter\n};\ntypeMap[UNSIGNED_INT_VEC3] = {\n  Type: Uint32Array,\n  size: 12,\n  setter: uintVec3Setter\n};\ntypeMap[UNSIGNED_INT_VEC4] = {\n  Type: Uint32Array,\n  size: 16,\n  setter: uintVec4Setter\n};\ntypeMap[BOOL] = {\n  Type: Uint32Array,\n  size: 4,\n  setter: intSetter,\n  arraySetter: intArraySetter\n};\ntypeMap[BOOL_VEC2] = {\n  Type: Uint32Array,\n  size: 8,\n  setter: intVec2Setter\n};\ntypeMap[BOOL_VEC3] = {\n  Type: Uint32Array,\n  size: 12,\n  setter: intVec3Setter\n};\ntypeMap[BOOL_VEC4] = {\n  Type: Uint32Array,\n  size: 16,\n  setter: intVec4Setter\n};\ntypeMap[FLOAT_MAT2] = {\n  Type: Float32Array,\n  size: 16,\n  setter: floatMat2Setter\n};\ntypeMap[FLOAT_MAT3] = {\n  Type: Float32Array,\n  size: 36,\n  setter: floatMat3Setter\n};\ntypeMap[FLOAT_MAT4] = {\n  Type: Float32Array,\n  size: 64,\n  setter: floatMat4Setter\n};\ntypeMap[FLOAT_MAT2x3] = {\n  Type: Float32Array,\n  size: 24,\n  setter: floatMat23Setter\n};\ntypeMap[FLOAT_MAT2x4] = {\n  Type: Float32Array,\n  size: 32,\n  setter: floatMat24Setter\n};\ntypeMap[FLOAT_MAT3x2] = {\n  Type: Float32Array,\n  size: 24,\n  setter: floatMat32Setter\n};\ntypeMap[FLOAT_MAT3x4] = {\n  Type: Float32Array,\n  size: 48,\n  setter: floatMat34Setter\n};\ntypeMap[FLOAT_MAT4x2] = {\n  Type: Float32Array,\n  size: 32,\n  setter: floatMat42Setter\n};\ntypeMap[FLOAT_MAT4x3] = {\n  Type: Float32Array,\n  size: 48,\n  setter: floatMat43Setter\n};\ntypeMap[SAMPLER_2D] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_2D\n};\ntypeMap[SAMPLER_CUBE] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_CUBE_MAP\n};\ntypeMap[SAMPLER_3D] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_3D\n};\ntypeMap[SAMPLER_2D_SHADOW] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_2D\n};\ntypeMap[SAMPLER_2D_ARRAY] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_2D_ARRAY\n};\ntypeMap[SAMPLER_2D_ARRAY_SHADOW] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_2D_ARRAY\n};\ntypeMap[SAMPLER_CUBE_SHADOW] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_CUBE_MAP\n};\ntypeMap[INT_SAMPLER_2D] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_2D\n};\ntypeMap[INT_SAMPLER_3D] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_3D\n};\ntypeMap[INT_SAMPLER_CUBE] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_CUBE_MAP\n};\ntypeMap[INT_SAMPLER_2D_ARRAY] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_2D_ARRAY\n};\ntypeMap[UNSIGNED_INT_SAMPLER_2D] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_2D\n};\ntypeMap[UNSIGNED_INT_SAMPLER_3D] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_3D\n};\ntypeMap[UNSIGNED_INT_SAMPLER_CUBE] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_CUBE_MAP\n};\ntypeMap[UNSIGNED_INT_SAMPLER_2D_ARRAY] = {\n  Type: null,\n  size: 0,\n  setter: samplerSetter,\n  arraySetter: samplerArraySetter,\n  bindPoint: TEXTURE_2D_ARRAY\n};\n\nfunction floatAttribSetter(gl, index) {\n  return function (b) {\n    if (b.value) {\n      gl.disableVertexAttribArray(index);\n\n      switch (b.value.length) {\n        case 4:\n          gl.vertexAttrib4fv(index, b.value);\n          break;\n\n        case 3:\n          gl.vertexAttrib3fv(index, b.value);\n          break;\n\n        case 2:\n          gl.vertexAttrib2fv(index, b.value);\n          break;\n\n        case 1:\n          gl.vertexAttrib1fv(index, b.value);\n          break;\n\n        default:\n          throw new Error('the length of a float constant value must be between 1 and 4!');\n      }\n    } else {\n      gl.bindBuffer(gl.ARRAY_BUFFER, b.buffer);\n      gl.enableVertexAttribArray(index);\n      gl.vertexAttribPointer(index, b.numComponents || b.size, b.type || gl.FLOAT, b.normalize || false, b.stride || 0, b.offset || 0);\n\n      if (b.divisor !== undefined) {\n        gl.vertexAttribDivisor(index, b.divisor);\n      }\n    }\n  };\n}\n\nfunction intAttribSetter(gl, index) {\n  return function (b) {\n    if (b.value) {\n      gl.disableVertexAttribArray(index);\n\n      if (b.value.length === 4) {\n        gl.vertexAttrib4iv(index, b.value);\n      } else {\n        throw new Error('The length of an integer constant value must be 4!');\n      }\n    } else {\n      gl.bindBuffer(gl.ARRAY_BUFFER, b.buffer);\n      gl.enableVertexAttribArray(index);\n      gl.vertexAttribIPointer(index, b.numComponents || b.size, b.type || gl.INT, b.stride || 0, b.offset || 0);\n\n      if (b.divisor !== undefined) {\n        gl.vertexAttribDivisor(index, b.divisor);\n      }\n    }\n  };\n}\n\nfunction uintAttribSetter(gl, index) {\n  return function (b) {\n    if (b.value) {\n      gl.disableVertexAttribArray(index);\n\n      if (b.value.length === 4) {\n        gl.vertexAttrib4uiv(index, b.value);\n      } else {\n        throw new Error('The length of an unsigned integer constant value must be 4!');\n      }\n    } else {\n      gl.bindBuffer(gl.ARRAY_BUFFER, b.buffer);\n      gl.enableVertexAttribArray(index);\n      gl.vertexAttribIPointer(index, b.numComponents || b.size, b.type || gl.UNSIGNED_INT, b.stride || 0, b.offset || 0);\n\n      if (b.divisor !== undefined) {\n        gl.vertexAttribDivisor(index, b.divisor);\n      }\n    }\n  };\n}\n\nfunction matAttribSetter(gl, index, typeInfo) {\n  var defaultSize = typeInfo.size;\n  var count = typeInfo.count;\n  return function (b) {\n    gl.bindBuffer(gl.ARRAY_BUFFER, b.buffer);\n    var numComponents = b.size || b.numComponents || defaultSize;\n    var size = numComponents / count;\n    var type = b.type || gl.FLOAT;\n    var typeInfo = typeMap[type];\n    var stride = typeInfo.size * numComponents;\n    var normalize = b.normalize || false;\n    var offset = b.offset || 0;\n    var rowOffset = stride / count;\n\n    for (var i = 0; i < count; ++i) {\n      gl.enableVertexAttribArray(index + i);\n      gl.vertexAttribPointer(index + i, size, type, normalize, stride, offset + rowOffset * i);\n\n      if (b.divisor !== undefined) {\n        gl.vertexAttribDivisor(index + i, b.divisor);\n      }\n    }\n  };\n}\n\nvar attrTypeMap = {};\nattrTypeMap[FLOAT] = {\n  size: 4,\n  setter: floatAttribSetter\n};\nattrTypeMap[FLOAT_VEC2] = {\n  size: 8,\n  setter: floatAttribSetter\n};\nattrTypeMap[FLOAT_VEC3] = {\n  size: 12,\n  setter: floatAttribSetter\n};\nattrTypeMap[FLOAT_VEC4] = {\n  size: 16,\n  setter: floatAttribSetter\n};\nattrTypeMap[INT] = {\n  size: 4,\n  setter: intAttribSetter\n};\nattrTypeMap[INT_VEC2] = {\n  size: 8,\n  setter: intAttribSetter\n};\nattrTypeMap[INT_VEC3] = {\n  size: 12,\n  setter: intAttribSetter\n};\nattrTypeMap[INT_VEC4] = {\n  size: 16,\n  setter: intAttribSetter\n};\nattrTypeMap[UNSIGNED_INT] = {\n  size: 4,\n  setter: uintAttribSetter\n};\nattrTypeMap[UNSIGNED_INT_VEC2] = {\n  size: 8,\n  setter: uintAttribSetter\n};\nattrTypeMap[UNSIGNED_INT_VEC3] = {\n  size: 12,\n  setter: uintAttribSetter\n};\nattrTypeMap[UNSIGNED_INT_VEC4] = {\n  size: 16,\n  setter: uintAttribSetter\n};\nattrTypeMap[BOOL] = {\n  size: 4,\n  setter: intAttribSetter\n};\nattrTypeMap[BOOL_VEC2] = {\n  size: 8,\n  setter: intAttribSetter\n};\nattrTypeMap[BOOL_VEC3] = {\n  size: 12,\n  setter: intAttribSetter\n};\nattrTypeMap[BOOL_VEC4] = {\n  size: 16,\n  setter: intAttribSetter\n};\nattrTypeMap[FLOAT_MAT2] = {\n  size: 4,\n  setter: matAttribSetter,\n  count: 2\n};\nattrTypeMap[FLOAT_MAT3] = {\n  size: 9,\n  setter: matAttribSetter,\n  count: 3\n};\nattrTypeMap[FLOAT_MAT4] = {\n  size: 16,\n  setter: matAttribSetter,\n  count: 4\n}; // make sure we don't see a global gl\n\nvar gl = undefined; // eslint-disable-line\n\n/**\n * Error Callback\n * @callback ErrorCallback\n * @param {string} msg error message.\n * @param {number} [lineOffset] amount to add to line number\n * @memberOf module:twgl\n */\n\nfunction addLineNumbers(src, lineOffset) {\n  lineOffset = lineOffset || 0;\n  ++lineOffset;\n  return src.split(\"\\n\").map(function (line, ndx) {\n    return ndx + lineOffset + \": \" + line;\n  }).join(\"\\n\");\n}\n\nvar spaceRE = /^[ \\t]*\\n/;\n/**\n * Loads a shader.\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {string} shaderSource The shader source.\n * @param {number} shaderType The type of shader.\n * @param {module:twgl.ErrorCallback} opt_errorCallback callback for errors.\n * @return {WebGLShader} The created shader.\n * @private\n */\n\nfunction loadShader(gl, shaderSource, shaderType, opt_errorCallback) {\n  var errFn = opt_errorCallback || error; // Create the shader object\n\n  var shader = gl.createShader(shaderType); // Remove the first end of line because WebGL 2.0 requires\n  // #version 300 es\n  // as the first line. No whitespace allowed before that line\n  // so\n  //\n  // <script>\n  // #version 300 es\n  // </script>\n  //\n  // Has one line before it which is invalid according to GLSL ES 3.00\n  //\n\n  var lineOffset = 0;\n\n  if (spaceRE.test(shaderSource)) {\n    lineOffset = 1;\n    shaderSource = shaderSource.replace(spaceRE, '');\n  } // Load the shader source\n\n\n  gl.shaderSource(shader, shaderSource); // Compile the shader\n\n  gl.compileShader(shader); // Check the compile status\n\n  var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n  if (!compiled) {\n    // Something went wrong during compilation; get the error\n    var lastError = gl.getShaderInfoLog(shader);\n    errFn(addLineNumbers(shaderSource, lineOffset) + \"\\n*** Error compiling shader: \" + lastError);\n    gl.deleteShader(shader);\n    return null;\n  }\n\n  return shader;\n}\n/**\n * @typedef {Object} ProgramOptions\n * @property {function(string)} [errorCallback] callback for errors\n * @property {Object.<string,number>} [attribLocations] a attribute name to location map\n * @property {(module:twgl.BufferInfo|Object.<string,module:twgl.AttribInfo>|string[])} [transformFeedbackVaryings] If passed\n *   a BufferInfo will use the attribs names inside. If passed an object of AttribInfos will use the names from that object. Otherwise\n *   you can pass an array of names.\n * @property {number} [transformFeedbackMode] the mode to pass `gl.transformFeedbackVaryings`. Defaults to `SEPARATE_ATTRIBS`.\n * @memberOf module:twgl\n */\n\n/**\n * Gets the program options based on all these optional arguments\n * @param {module:twgl.ProgramOptions|string[]} [opt_attribs] Options for the program or an array of attribs names. Locations will be assigned by index if not passed in\n * @param {number[]} [opt_locations] The locations for the. A parallel array to opt_attribs letting you assign locations.\n * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console\n *        on error. If you want something else pass an callback. It's passed an error message.\n * @return {module:twgl.ProgramOptions} an instance of ProgramOptions based on the arguments pased on\n * @private\n */\n\n\nfunction getProgramOptions(opt_attribs, opt_locations, opt_errorCallback) {\n  var transformFeedbackVaryings;\n\n  if (typeof opt_locations === 'function') {\n    opt_errorCallback = opt_locations;\n    opt_locations = undefined;\n  }\n\n  if (typeof opt_attribs === 'function') {\n    opt_errorCallback = opt_attribs;\n    opt_attribs = undefined;\n  } else if (opt_attribs && !Array.isArray(opt_attribs)) {\n    // If we have an errorCallback we can just return this object\n    // Otherwise we need to construct one with default errorCallback\n    if (opt_attribs.errorCallback) {\n      return opt_attribs;\n    }\n\n    var opt = opt_attribs;\n    opt_errorCallback = opt.errorCallback;\n    opt_attribs = opt.attribLocations;\n    transformFeedbackVaryings = opt.transformFeedbackVaryings;\n  }\n\n  var options = {\n    errorCallback: opt_errorCallback || error,\n    transformFeedbackVaryings: transformFeedbackVaryings\n  };\n\n  if (opt_attribs) {\n    var attribLocations = {};\n\n    if (Array.isArray(opt_attribs)) {\n      opt_attribs.forEach(function (attrib, ndx) {\n        attribLocations[attrib] = opt_locations ? opt_locations[ndx] : ndx;\n      });\n    } else {\n      attribLocations = opt_attribs;\n    }\n\n    options.attribLocations = attribLocations;\n  }\n\n  return options;\n}\n\nvar defaultShaderType = [\"VERTEX_SHADER\", \"FRAGMENT_SHADER\"];\n\nfunction getShaderTypeFromScriptType(gl, scriptType) {\n  if (scriptType.indexOf(\"frag\") >= 0) {\n    return gl.FRAGMENT_SHADER;\n  } else if (scriptType.indexOf(\"vert\") >= 0) {\n    return gl.VERTEX_SHADER;\n  }\n\n  return undefined;\n}\n\nfunction deleteShaders(gl, shaders) {\n  shaders.forEach(function (shader) {\n    gl.deleteShader(shader);\n  });\n}\n/**\n * Creates a program, attaches (and/or compiles) shaders, binds attrib locations, links the\n * program and calls useProgram.\n *\n * NOTE: There are 4 signatures for this function\n *\n *     twgl.createProgram(gl, [vs, fs], options);\n *     twgl.createProgram(gl, [vs, fs], opt_errFunc);\n *     twgl.createProgram(gl, [vs, fs], opt_attribs, opt_errFunc);\n *     twgl.createProgram(gl, [vs, fs], opt_attribs, opt_locations, opt_errFunc);\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {WebGLShader[]|string[]} shaders The shaders to attach, or element ids for their source, or strings that contain their source\n * @param {module:twgl.ProgramOptions|string[]|module:twgl.ErrorCallback} [opt_attribs] Options for the program or an array of attribs names or an error callback. Locations will be assigned by index if not passed in\n * @param {number[]} [opt_locations|module:twgl.ErrorCallback] The locations for the. A parallel array to opt_attribs letting you assign locations or an error callback.\n * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console\n *        on error. If you want something else pass an callback. It's passed an error message.\n * @return {WebGLProgram?} the created program or null if error.\n * @memberOf module:twgl/programs\n */\n\n\nfunction createProgram(gl, shaders, opt_attribs, opt_locations, opt_errorCallback) {\n  var progOptions = getProgramOptions(opt_attribs, opt_locations, opt_errorCallback);\n  var realShaders = [];\n  var newShaders = [];\n\n  for (var ndx = 0; ndx < shaders.length; ++ndx) {\n    var shader = shaders[ndx];\n\n    if (typeof shader === 'string') {\n      var elem = getElementById(shader);\n      var src = elem ? elem.text : shader;\n      var type = gl[defaultShaderType[ndx]];\n\n      if (elem && elem.type) {\n        type = getShaderTypeFromScriptType(gl, elem.type) || type;\n      }\n\n      shader = loadShader(gl, src, type, progOptions.errorCallback);\n      newShaders.push(shader);\n    }\n\n    if (helper.isShader(gl, shader)) {\n      realShaders.push(shader);\n    }\n  }\n\n  if (realShaders.length !== shaders.length) {\n    progOptions.errorCallback(\"not enough shaders for program\");\n    deleteShaders(gl, newShaders);\n    return null;\n  }\n\n  var program = gl.createProgram();\n  realShaders.forEach(function (shader) {\n    gl.attachShader(program, shader);\n  });\n\n  if (progOptions.attribLocations) {\n    Object.keys(progOptions.attribLocations).forEach(function (attrib) {\n      gl.bindAttribLocation(program, progOptions.attribLocations[attrib], attrib);\n    });\n  }\n\n  var varyings = progOptions.transformFeedbackVaryings;\n\n  if (varyings) {\n    if (varyings.attribs) {\n      varyings = varyings.attribs;\n    }\n\n    if (!Array.isArray(varyings)) {\n      varyings = Object.keys(varyings);\n    }\n\n    gl.transformFeedbackVaryings(program, varyings, progOptions.transformFeedbackMode || gl.SEPARATE_ATTRIBS);\n  }\n\n  gl.linkProgram(program); // Check the link status\n\n  var linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n\n  if (!linked) {\n    // something went wrong with the link\n    var lastError = gl.getProgramInfoLog(program);\n    progOptions.errorCallback(\"Error in program linking:\" + lastError);\n    gl.deleteProgram(program);\n    deleteShaders(gl, newShaders);\n    return null;\n  }\n\n  return program;\n}\n/**\n * Loads a shader from a script tag.\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {string} scriptId The id of the script tag.\n * @param {number} [opt_shaderType] The type of shader. If not passed in it will\n *     be derived from the type of the script tag.\n * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors.\n * @return {WebGLShader?} The created shader or null if error.\n * @private\n */\n\n\nfunction createShaderFromScript(gl, scriptId, opt_shaderType, opt_errorCallback) {\n  var shaderSource = \"\";\n  var shaderScript = getElementById(scriptId);\n\n  if (!shaderScript) {\n    throw new Error(\"unknown script element: \".concat(scriptId));\n  }\n\n  shaderSource = shaderScript.text;\n  var shaderType = opt_shaderType || getShaderTypeFromScriptType(gl, shaderScript.type);\n\n  if (!shaderType) {\n    throw new Error('unknown shader type');\n  }\n\n  return loadShader(gl, shaderSource, shaderType, opt_errorCallback);\n}\n/**\n * Creates a program from 2 script tags.\n *\n * NOTE: There are 4 signatures for this function\n *\n *     twgl.createProgramFromScripts(gl, [vs, fs], opt_options);\n *     twgl.createProgramFromScripts(gl, [vs, fs], opt_errFunc);\n *     twgl.createProgramFromScripts(gl, [vs, fs], opt_attribs, opt_errFunc);\n *     twgl.createProgramFromScripts(gl, [vs, fs], opt_attribs, opt_locations, opt_errFunc);\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext\n *        to use.\n * @param {string[]} shaderScriptIds Array of ids of the script\n *        tags for the shaders. The first is assumed to be the\n *        vertex shader, the second the fragment shader.\n * @param {module:twgl.ProgramOptions|string[]|module:twgl.ErrorCallback} [opt_attribs] Options for the program or an array of attribs names or an error callback. Locations will be assigned by index if not passed in\n * @param {number[]} [opt_locations|module:twgl.ErrorCallback] The locations for the. A parallel array to opt_attribs letting you assign locations or an error callback.\n * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console\n *        on error. If you want something else pass an callback. It's passed an error message.\n * @return {WebGLProgram?} the created program or null if error.\n * @memberOf module:twgl/programs\n */\n\n\nfunction createProgramFromScripts(gl, shaderScriptIds, opt_attribs, opt_locations, opt_errorCallback) {\n  var progOptions = getProgramOptions(opt_attribs, opt_locations, opt_errorCallback);\n  var shaders = [];\n\n  for (var ii = 0; ii < shaderScriptIds.length; ++ii) {\n    var shader = createShaderFromScript(gl, shaderScriptIds[ii], gl[defaultShaderType[ii]], progOptions.errorCallback);\n\n    if (!shader) {\n      return null;\n    }\n\n    shaders.push(shader);\n  }\n\n  return createProgram(gl, shaders, progOptions);\n}\n/**\n * Creates a program from 2 sources.\n *\n * NOTE: There are 4 signatures for this function\n *\n *     twgl.createProgramFromSource(gl, [vs, fs], opt_options);\n *     twgl.createProgramFromSource(gl, [vs, fs], opt_errFunc);\n *     twgl.createProgramFromSource(gl, [vs, fs], opt_attribs, opt_errFunc);\n *     twgl.createProgramFromSource(gl, [vs, fs], opt_attribs, opt_locations, opt_errFunc);\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext\n *        to use.\n * @param {string[]} shaderSources Array of sources for the\n *        shaders. The first is assumed to be the vertex shader,\n *        the second the fragment shader.\n * @param {module:twgl.ProgramOptions|string[]|module:twgl.ErrorCallback} [opt_attribs] Options for the program or an array of attribs names or an error callback. Locations will be assigned by index if not passed in\n * @param {number[]} [opt_locations|module:twgl.ErrorCallback] The locations for the. A parallel array to opt_attribs letting you assign locations or an error callback.\n * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console\n *        on error. If you want something else pass an callback. It's passed an error message.\n * @return {WebGLProgram?} the created program or null if error.\n * @memberOf module:twgl/programs\n */\n\n\nfunction createProgramFromSources(gl, shaderSources, opt_attribs, opt_locations, opt_errorCallback) {\n  var progOptions = getProgramOptions(opt_attribs, opt_locations, opt_errorCallback);\n  var shaders = [];\n\n  for (var ii = 0; ii < shaderSources.length; ++ii) {\n    var shader = loadShader(gl, shaderSources[ii], gl[defaultShaderType[ii]], progOptions.errorCallback);\n\n    if (!shader) {\n      return null;\n    }\n\n    shaders.push(shader);\n  }\n\n  return createProgram(gl, shaders, progOptions);\n}\n/**\n * Returns true if attribute/uniform is a reserved/built in\n *\n * It makes no sense to me why GL returns these because it's\n * illegal to call `gl.getUniformLocation` and `gl.getAttribLocation`\n * with names that start with `gl_` (and `webgl_` in WebGL)\n *\n * I can only assume they are there because they might count\n * when computing the number of uniforms/attributes used when you want to\n * know if you are near the limit. That doesn't really make sense\n * to me but the fact that these get returned are in the spec.\n *\n * @param {WebGLActiveInfo} info As returned from `gl.getActiveUniform` or\n *    `gl.getActiveAttrib`.\n * @return {bool} true if it's reserved\n * @private\n */\n\n\nfunction isBuiltIn(info) {\n  var name = info.name;\n  return name.startsWith(\"gl_\") || name.startsWith(\"webgl_\");\n}\n/**\n * Creates setter functions for all uniforms of a shader\n * program.\n *\n * @see {@link module:twgl.setUniforms}\n *\n * @param {WebGLProgram} program the program to create setters for.\n * @returns {Object.<string, function>} an object with a setter by name for each uniform\n * @memberOf module:twgl/programs\n */\n\n\nfunction createUniformSetters(gl, program) {\n  var textureUnit = 0;\n  /**\n   * Creates a setter for a uniform of the given program with it's\n   * location embedded in the setter.\n   * @param {WebGLProgram} program\n   * @param {WebGLUniformInfo} uniformInfo\n   * @returns {function} the created setter.\n   */\n\n  function createUniformSetter(program, uniformInfo) {\n    var location = gl.getUniformLocation(program, uniformInfo.name);\n    var isArray = uniformInfo.size > 1 && uniformInfo.name.substr(-3) === \"[0]\";\n    var type = uniformInfo.type;\n    var typeInfo = typeMap[type];\n\n    if (!typeInfo) {\n      throw new Error(\"unknown type: 0x\".concat(type.toString(16))); // we should never get here.\n    }\n\n    var setter;\n\n    if (typeInfo.bindPoint) {\n      // it's a sampler\n      var unit = textureUnit;\n      textureUnit += uniformInfo.size;\n\n      if (isArray) {\n        setter = typeInfo.arraySetter(gl, type, unit, location, uniformInfo.size);\n      } else {\n        setter = typeInfo.setter(gl, type, unit, location, uniformInfo.size);\n      }\n    } else {\n      if (typeInfo.arraySetter && isArray) {\n        setter = typeInfo.arraySetter(gl, location);\n      } else {\n        setter = typeInfo.setter(gl, location);\n      }\n    }\n\n    setter.location = location;\n    return setter;\n  }\n\n  var uniformSetters = {};\n  var numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n  for (var ii = 0; ii < numUniforms; ++ii) {\n    var uniformInfo = gl.getActiveUniform(program, ii);\n\n    if (isBuiltIn(uniformInfo)) {\n      continue;\n    }\n\n    var name = uniformInfo.name; // remove the array suffix.\n\n    if (name.substr(-3) === \"[0]\") {\n      name = name.substr(0, name.length - 3);\n    }\n\n    var setter = createUniformSetter(program, uniformInfo);\n    uniformSetters[name] = setter;\n  }\n\n  return uniformSetters;\n}\n/**\n * @typedef {Object} TransformFeedbackInfo\n * @property {number} index index of transform feedback\n * @property {number} type GL type\n * @property {number} size 1 - 4\n * @memberOf module:twgl\n */\n\n/**\n * Create TransformFeedbackInfo for passing to bindTransformFeedbackInfo.\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {WebGLProgram} program an existing WebGLProgram.\n * @return {Object<string, module:twgl.TransformFeedbackInfo>}\n * @memberOf module:twgl\n */\n\n\nfunction createTransformFeedbackInfo(gl, program) {\n  var info = {};\n  var numVaryings = gl.getProgramParameter(program, gl.TRANSFORM_FEEDBACK_VARYINGS);\n\n  for (var ii = 0; ii < numVaryings; ++ii) {\n    var varying = gl.getTransformFeedbackVarying(program, ii);\n    info[varying.name] = {\n      index: ii,\n      type: varying.type,\n      size: varying.size\n    };\n  }\n\n  return info;\n}\n/**\n * Binds buffers for transform feedback.\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {(module:twgl.ProgramInfo|Object<string, module:twgl.TransformFeedbackInfo>)} transformFeedbackInfo A ProgramInfo or TransformFeedbackInfo.\n * @param {(module:twgl.BufferInfo|Object<string, module:twgl.AttribInfo>)} [bufferInfo] A BufferInfo or set of AttribInfos.\n * @memberOf module:twgl\n */\n\n\nfunction bindTransformFeedbackInfo(gl, transformFeedbackInfo, bufferInfo) {\n  if (transformFeedbackInfo.transformFeedbackInfo) {\n    transformFeedbackInfo = transformFeedbackInfo.transformFeedbackInfo;\n  }\n\n  if (bufferInfo.attribs) {\n    bufferInfo = bufferInfo.attribs;\n  }\n\n  for (var name in bufferInfo) {\n    var varying = transformFeedbackInfo[name];\n\n    if (varying) {\n      var buf = bufferInfo[name];\n\n      if (buf.offset) {\n        gl.bindBufferRange(gl.TRANSFORM_FEEDBACK_BUFFER, varying.index, buf.buffer, buf.offset, buf.size);\n      } else {\n        gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, varying.index, buf.buffer);\n      }\n    }\n  }\n}\n/**\n * Creates a transform feedback and sets the buffers\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {module:twgl.ProgramInfo} programInfo A ProgramInfo as returned from {@link module:twgl.createProgramInfo}\n * @param {(module:twgl.BufferInfo|Object<string, module:twgl.AttribInfo>)} [bufferInfo] A BufferInfo or set of AttribInfos.\n * @return {WebGLTransformFeedback} the created transform feedback\n * @memberOf module:twgl\n */\n\n\nfunction createTransformFeedback(gl, programInfo, bufferInfo) {\n  var tf = gl.createTransformFeedback();\n  gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, tf);\n  gl.useProgram(programInfo.program);\n  bindTransformFeedbackInfo(gl, programInfo, bufferInfo);\n  gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, null);\n  return tf;\n}\n/**\n * @typedef {Object} UniformData\n * @property {number} type The WebGL type enum for this uniform\n * @property {number} size The number of elements for this uniform\n * @property {number} blockNdx The block index this uniform appears in\n * @property {number} offset The byte offset in the block for this uniform's value\n * @memberOf module:twgl\n */\n\n/**\n * The specification for one UniformBlockObject\n *\n * @typedef {Object} BlockSpec\n * @property {number} index The index of the block.\n * @property {number} size The size in bytes needed for the block\n * @property {number[]} uniformIndices The indices of the uniforms used by the block. These indices\n *    correspond to entries in a UniformData array in the {@link module:twgl.UniformBlockSpec}.\n * @property {bool} usedByVertexShader Self explanitory\n * @property {bool} usedByFragmentShader Self explanitory\n * @property {bool} used Self explanitory\n * @memberOf module:twgl\n */\n\n/**\n * A `UniformBlockSpec` represents the data needed to create and bind\n * UniformBlockObjects for a given program\n *\n * @typedef {Object} UniformBlockSpec\n * @property {Object.<string, module:twgl.BlockSpec> blockSpecs The BlockSpec for each block by block name\n * @property {UniformData[]} uniformData An array of data for each uniform by uniform index.\n * @memberOf module:twgl\n */\n\n/**\n * Creates a UniformBlockSpec for the given program.\n *\n * A UniformBlockSpec represents the data needed to create and bind\n * UniformBlockObjects\n *\n * @param {WebGL2RenderingContext} gl A WebGL2 Rendering Context\n * @param {WebGLProgram} program A WebGLProgram for a successfully linked program\n * @return {module:twgl.UniformBlockSpec} The created UniformBlockSpec\n * @memberOf module:twgl/programs\n */\n\n\nfunction createUniformBlockSpecFromProgram(gl, program) {\n  var numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n  var uniformData = [];\n  var uniformIndices = [];\n\n  for (var ii = 0; ii < numUniforms; ++ii) {\n    uniformIndices.push(ii);\n    uniformData.push({});\n    var uniformInfo = gl.getActiveUniform(program, ii);\n\n    if (isBuiltIn(uniformInfo)) {\n      break;\n    } // REMOVE [0]?\n\n\n    uniformData[ii].name = uniformInfo.name;\n  }\n\n  [[\"UNIFORM_TYPE\", \"type\"], [\"UNIFORM_SIZE\", \"size\"], // num elements\n  [\"UNIFORM_BLOCK_INDEX\", \"blockNdx\"], [\"UNIFORM_OFFSET\", \"offset\"]].forEach(function (pair) {\n    var pname = pair[0];\n    var key = pair[1];\n    gl.getActiveUniforms(program, uniformIndices, gl[pname]).forEach(function (value, ndx) {\n      uniformData[ndx][key] = value;\n    });\n  });\n  var blockSpecs = {};\n  var numUniformBlocks = gl.getProgramParameter(program, gl.ACTIVE_UNIFORM_BLOCKS);\n\n  for (var _ii = 0; _ii < numUniformBlocks; ++_ii) {\n    var name = gl.getActiveUniformBlockName(program, _ii);\n    var blockSpec = {\n      index: _ii,\n      usedByVertexShader: gl.getActiveUniformBlockParameter(program, _ii, gl.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),\n      usedByFragmentShader: gl.getActiveUniformBlockParameter(program, _ii, gl.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),\n      size: gl.getActiveUniformBlockParameter(program, _ii, gl.UNIFORM_BLOCK_DATA_SIZE),\n      uniformIndices: gl.getActiveUniformBlockParameter(program, _ii, gl.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)\n    };\n    blockSpec.used = blockSpec.usedByVertexSahder || blockSpec.usedByFragmentShader;\n    blockSpecs[name] = blockSpec;\n  }\n\n  return {\n    blockSpecs: blockSpecs,\n    uniformData: uniformData\n  };\n}\n\nvar arraySuffixRE = /\\[\\d+\\]\\.$/; // better way to check?\n\n/**\n * Represents a UniformBlockObject including an ArrayBuffer with all the uniform values\n * and a corresponding WebGLBuffer to hold those values on the GPU\n *\n * @typedef {Object} UniformBlockInfo\n * @property {string} name The name of the block\n * @property {ArrayBuffer} array The array buffer that contains the uniform values\n * @property {Float32Array} asFloat A float view on the array buffer. This is useful\n *    inspecting the contents of the buffer in the debugger.\n * @property {WebGLBuffer} buffer A WebGL buffer that will hold a copy of the uniform values for rendering.\n * @property {number} [offset] offset into buffer\n * @property {Object.<string, ArrayBufferView>} uniforms A uniform name to ArrayBufferView map.\n *   each Uniform has a correctly typed `ArrayBufferView` into array at the correct offset\n *   and length of that uniform. So for example a float uniform would have a 1 float `Float32Array`\n *   view. A single mat4 would have a 16 element `Float32Array` view. An ivec2 would have an\n *   `Int32Array` view, etc.\n * @memberOf module:twgl\n */\n\n/**\n * Creates a `UniformBlockInfo` for the specified block\n *\n * Note: **If the blockName matches no existing blocks a warning is printed to the console and a dummy\n * `UniformBlockInfo` is returned**. This is because when debugging GLSL\n * it is common to comment out large portions of a shader or for example set\n * the final output to a constant. When that happens blocks get optimized out.\n * If this function did not create dummy blocks your code would crash when debugging.\n *\n * @param {WebGL2RenderingContext} gl A WebGL2RenderingContext\n * @param {WebGLProgram} program A WebGLProgram\n * @param {module:twgl.UniformBlockSpec} uinformBlockSpec. A UniformBlockSpec as returned\n *     from {@link module:twgl.createUniformBlockSpecFromProgram}.\n * @param {string} blockName The name of the block.\n * @return {module:twgl.UniformBlockInfo} The created UniformBlockInfo\n * @memberOf module:twgl/programs\n */\n\nfunction createUniformBlockInfoFromProgram(gl, program, uniformBlockSpec, blockName) {\n  var blockSpecs = uniformBlockSpec.blockSpecs;\n  var uniformData = uniformBlockSpec.uniformData;\n  var blockSpec = blockSpecs[blockName];\n\n  if (!blockSpec) {\n    warn(\"no uniform block object named:\", blockName);\n    return {\n      name: blockName,\n      uniforms: {}\n    };\n  }\n\n  var array = new ArrayBuffer(blockSpec.size);\n  var buffer = gl.createBuffer();\n  var uniformBufferIndex = blockSpec.index;\n  gl.bindBuffer(gl.UNIFORM_BUFFER, buffer);\n  gl.uniformBlockBinding(program, blockSpec.index, uniformBufferIndex);\n  var prefix = blockName + \".\";\n\n  if (arraySuffixRE.test(prefix)) {\n    prefix = prefix.replace(arraySuffixRE, \".\");\n  }\n\n  var uniforms = {};\n  blockSpec.uniformIndices.forEach(function (uniformNdx) {\n    var data = uniformData[uniformNdx];\n    var typeInfo = typeMap[data.type];\n    var Type = typeInfo.Type;\n    var length = data.size * typeInfo.size;\n    var name = data.name;\n\n    if (name.substr(0, prefix.length) === prefix) {\n      name = name.substr(prefix.length);\n    }\n\n    uniforms[name] = new Type(array, data.offset, length / Type.BYTES_PER_ELEMENT);\n  });\n  return {\n    name: blockName,\n    array: array,\n    asFloat: new Float32Array(array),\n    // for debugging\n    buffer: buffer,\n    uniforms: uniforms\n  };\n}\n/**\n * Creates a `UniformBlockInfo` for the specified block\n *\n * Note: **If the blockName matches no existing blocks a warning is printed to the console and a dummy\n * `UniformBlockInfo` is returned**. This is because when debugging GLSL\n * it is common to comment out large portions of a shader or for example set\n * the final output to a constant. When that happens blocks get optimized out.\n * If this function did not create dummy blocks your code would crash when debugging.\n *\n * @param {WebGL2RenderingContext} gl A WebGL2RenderingContext\n * @param {module:twgl.ProgramInfo} programInfo a `ProgramInfo`\n *     as returned from {@link module:twgl.createProgramInfo}\n * @param {string} blockName The name of the block.\n * @return {module:twgl.UniformBlockInfo} The created UniformBlockInfo\n * @memberOf module:twgl/programs\n */\n\n\nfunction createUniformBlockInfo(gl, programInfo, blockName) {\n  return createUniformBlockInfoFromProgram(gl, programInfo.program, programInfo.uniformBlockSpec, blockName);\n}\n/**\n * Binds a unform block to the matching uniform block point.\n * Matches by blocks by name so blocks must have the same name not just the same\n * structure.\n *\n * If you have changed any values and you upload the valus into the corresponding WebGLBuffer\n * call {@link module:twgl.setUniformBlock} instead.\n *\n * @param {WebGL2RenderingContext} gl A WebGL 2 rendering context.\n * @param {(module:twgl.ProgramInfo|module:twgl.UniformBlockSpec)} programInfo a `ProgramInfo`\n *     as returned from {@link module:twgl.createProgramInfo} or or `UniformBlockSpec` as\n *     returned from {@link module:twgl.createUniformBlockSpecFromProgram}.\n * @param {module:twgl.UniformBlockInfo} uniformBlockInfo a `UniformBlockInfo` as returned from\n *     {@link module:twgl.createUniformBlockInfo}.\n * @return {bool} true if buffer was bound. If the programInfo has no block with the same block name\n *     no buffer is bound.\n * @memberOf module:twgl/programs\n */\n\n\nfunction bindUniformBlock(gl, programInfo, uniformBlockInfo) {\n  var uniformBlockSpec = programInfo.uniformBlockSpec || programInfo;\n  var blockSpec = uniformBlockSpec.blockSpecs[uniformBlockInfo.name];\n\n  if (blockSpec) {\n    var bufferBindIndex = blockSpec.index;\n    gl.bindBufferRange(gl.UNIFORM_BUFFER, bufferBindIndex, uniformBlockInfo.buffer, uniformBlockInfo.offset || 0, uniformBlockInfo.array.byteLength);\n    return true;\n  }\n\n  return false;\n}\n/**\n * Uploads the current uniform values to the corresponding WebGLBuffer\n * and binds that buffer to the program's corresponding bind point for the uniform block object.\n *\n * If you haven't changed any values and you only need to bind the uniform block object\n * call {@link module:twgl.bindUniformBlock} instead.\n *\n * @param {WebGL2RenderingContext} gl A WebGL 2 rendering context.\n * @param {(module:twgl.ProgramInfo|module:twgl.UniformBlockSpec)} programInfo a `ProgramInfo`\n *     as returned from {@link module:twgl.createProgramInfo} or or `UniformBlockSpec` as\n *     returned from {@link module:twgl.createUniformBlockSpecFromProgram}.\n * @param {module:twgl.UniformBlockInfo} uniformBlockInfo a `UniformBlockInfo` as returned from\n *     {@link module:twgl.createUniformBlockInfo}.\n * @memberOf module:twgl/programs\n */\n\n\nfunction setUniformBlock(gl, programInfo, uniformBlockInfo) {\n  if (bindUniformBlock(gl, programInfo, uniformBlockInfo)) {\n    gl.bufferData(gl.UNIFORM_BUFFER, uniformBlockInfo.array, gl.DYNAMIC_DRAW);\n  }\n}\n/**\n * Sets values of a uniform block object\n *\n * @param {module:twgl.UniformBlockInfo} uniformBlockInfo A UniformBlockInfo as returned by {@link module:twgl.createUniformBlockInfo}.\n * @param {Object.<string, ?>} values A uniform name to value map where the value is correct for the given\n *    type of uniform. So for example given a block like\n *\n *       uniform SomeBlock {\n *         float someFloat;\n *         vec2 someVec2;\n *         vec3 someVec3Array[2];\n *         int someInt;\n *       }\n *\n *  You can set the values of the uniform block with\n *\n *       twgl.setBlockUniforms(someBlockInfo, {\n *          someFloat: 12.3,\n *          someVec2: [1, 2],\n *          someVec3Array: [1, 2, 3, 4, 5, 6],\n *          someInt: 5,\n *       }\n *\n *  Arrays can be JavaScript arrays or typed arrays\n *\n *  Any name that doesn't match will be ignored\n * @memberOf module:twgl/programs\n */\n\n\nfunction setBlockUniforms(uniformBlockInfo, values) {\n  var uniforms = uniformBlockInfo.uniforms;\n\n  for (var name in values) {\n    var array = uniforms[name];\n\n    if (array) {\n      var value = values[name];\n\n      if (value.length) {\n        array.set(value);\n      } else {\n        array[0] = value;\n      }\n    }\n  }\n}\n/**\n * Set uniforms and binds related textures.\n *\n * example:\n *\n *     const programInfo = createProgramInfo(\n *         gl, [\"some-vs\", \"some-fs\"]);\n *\n *     const tex1 = gl.createTexture();\n *     const tex2 = gl.createTexture();\n *\n *     ... assume we setup the textures with data ...\n *\n *     const uniforms = {\n *       u_someSampler: tex1,\n *       u_someOtherSampler: tex2,\n *       u_someColor: [1,0,0,1],\n *       u_somePosition: [0,1,1],\n *       u_someMatrix: [\n *         1,0,0,0,\n *         0,1,0,0,\n *         0,0,1,0,\n *         0,0,0,0,\n *       ],\n *     };\n *\n *     gl.useProgram(program);\n *\n * This will automatically bind the textures AND set the\n * uniforms.\n *\n *     twgl.setUniforms(programInfo, uniforms);\n *\n * For the example above it is equivalent to\n *\n *     var texUnit = 0;\n *     gl.activeTexture(gl.TEXTURE0 + texUnit);\n *     gl.bindTexture(gl.TEXTURE_2D, tex1);\n *     gl.uniform1i(u_someSamplerLocation, texUnit++);\n *     gl.activeTexture(gl.TEXTURE0 + texUnit);\n *     gl.bindTexture(gl.TEXTURE_2D, tex2);\n *     gl.uniform1i(u_someSamplerLocation, texUnit++);\n *     gl.uniform4fv(u_someColorLocation, [1, 0, 0, 1]);\n *     gl.uniform3fv(u_somePositionLocation, [0, 1, 1]);\n *     gl.uniformMatrix4fv(u_someMatrix, false, [\n *         1,0,0,0,\n *         0,1,0,0,\n *         0,0,1,0,\n *         0,0,0,0,\n *       ]);\n *\n * Note it is perfectly reasonable to call `setUniforms` multiple times. For example\n *\n *     const uniforms = {\n *       u_someSampler: tex1,\n *       u_someOtherSampler: tex2,\n *     };\n *\n *     const moreUniforms {\n *       u_someColor: [1,0,0,1],\n *       u_somePosition: [0,1,1],\n *       u_someMatrix: [\n *         1,0,0,0,\n *         0,1,0,0,\n *         0,0,1,0,\n *         0,0,0,0,\n *       ],\n *     };\n *\n *     twgl.setUniforms(programInfo, uniforms);\n *     twgl.setUniforms(programInfo, moreUniforms);\n *\n * You can also add WebGLSamplers to uniform samplers as in\n *\n *     const uniforms = {\n *       u_someSampler: {\n *         texture: someWebGLTexture,\n *         sampler: someWebGLSampler,\n *       },\n *     };\n *\n * In which case both the sampler and texture will be bound to the\n * same unit.\n *\n * @param {(module:twgl.ProgramInfo|Object.<string, function>)} setters a `ProgramInfo` as returned from `createProgramInfo` or the setters returned from\n *        `createUniformSetters`.\n * @param {Object.<string, ?>} values an object with values for the\n *        uniforms.\n *   You can pass multiple objects by putting them in an array or by calling with more arguments.For example\n *\n *     const sharedUniforms = {\n *       u_fogNear: 10,\n *       u_projection: ...\n *       ...\n *     };\n *\n *     const localUniforms = {\n *       u_world: ...\n *       u_diffuseColor: ...\n *     };\n *\n *     twgl.setUniforms(programInfo, sharedUniforms, localUniforms);\n *\n *     // is the same as\n *\n *     twgl.setUniforms(programInfo, [sharedUniforms, localUniforms]);\n *\n *     // is the same as\n *\n *     twgl.setUniforms(programInfo, sharedUniforms);\n *     twgl.setUniforms(programInfo, localUniforms};\n *\n * @memberOf module:twgl/programs\n */\n\n\nfunction setUniforms(setters, values) {\n  // eslint-disable-line\n  var actualSetters = setters.uniformSetters || setters;\n  var numArgs = arguments.length;\n\n  for (var andx = 1; andx < numArgs; ++andx) {\n    var vals = arguments[andx];\n\n    if (Array.isArray(vals)) {\n      var numValues = vals.length;\n\n      for (var ii = 0; ii < numValues; ++ii) {\n        setUniforms(actualSetters, vals[ii]);\n      }\n    } else {\n      for (var name in vals) {\n        var setter = actualSetters[name];\n\n        if (setter) {\n          setter(vals[name]);\n        }\n      }\n    }\n  }\n}\n/**\n * Creates setter functions for all attributes of a shader\n * program. You can pass this to {@link module:twgl.setBuffersAndAttributes} to set all your buffers and attributes.\n *\n * @see {@link module:twgl.setAttributes} for example\n * @param {WebGLProgram} program the program to create setters for.\n * @return {Object.<string, function>} an object with a setter for each attribute by name.\n * @memberOf module:twgl/programs\n */\n\n\nfunction createAttributeSetters(gl, program) {\n  var attribSetters = {};\n  var numAttribs = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n\n  for (var ii = 0; ii < numAttribs; ++ii) {\n    var attribInfo = gl.getActiveAttrib(program, ii);\n\n    if (isBuiltIn(attribInfo)) {\n      continue;\n    }\n\n    var index = gl.getAttribLocation(program, attribInfo.name);\n    var typeInfo = attrTypeMap[attribInfo.type];\n    var setter = typeInfo.setter(gl, index, typeInfo);\n    setter.location = index;\n    attribSetters[attribInfo.name] = setter;\n  }\n\n  return attribSetters;\n}\n/**\n * Sets attributes and binds buffers (deprecated... use {@link module:twgl.setBuffersAndAttributes})\n *\n * Example:\n *\n *     const program = createProgramFromScripts(\n *         gl, [\"some-vs\", \"some-fs\");\n *\n *     const attribSetters = createAttributeSetters(program);\n *\n *     const positionBuffer = gl.createBuffer();\n *     const texcoordBuffer = gl.createBuffer();\n *\n *     const attribs = {\n *       a_position: {buffer: positionBuffer, numComponents: 3},\n *       a_texcoord: {buffer: texcoordBuffer, numComponents: 2},\n *     };\n *\n *     gl.useProgram(program);\n *\n * This will automatically bind the buffers AND set the\n * attributes.\n *\n *     setAttributes(attribSetters, attribs);\n *\n * Properties of attribs. For each attrib you can add\n * properties:\n *\n * *   type: the type of data in the buffer. Default = gl.FLOAT\n * *   normalize: whether or not to normalize the data. Default = false\n * *   stride: the stride. Default = 0\n * *   offset: offset into the buffer. Default = 0\n * *   divisor: the divisor for instances. Default = undefined\n *\n * For example if you had 3 value float positions, 2 value\n * float texcoord and 4 value uint8 colors you'd setup your\n * attribs like this\n *\n *     const attribs = {\n *       a_position: {buffer: positionBuffer, numComponents: 3},\n *       a_texcoord: {buffer: texcoordBuffer, numComponents: 2},\n *       a_color: {\n *         buffer: colorBuffer,\n *         numComponents: 4,\n *         type: gl.UNSIGNED_BYTE,\n *         normalize: true,\n *       },\n *     };\n *\n * @param {Object.<string, function>} setters Attribute setters as returned from createAttributeSetters\n * @param {Object.<string, module:twgl.AttribInfo>} buffers AttribInfos mapped by attribute name.\n * @memberOf module:twgl/programs\n * @deprecated use {@link module:twgl.setBuffersAndAttributes}\n */\n\n\nfunction setAttributes(setters, buffers) {\n  for (var name in buffers) {\n    var setter = setters[name];\n\n    if (setter) {\n      setter(buffers[name]);\n    }\n  }\n}\n/**\n * Sets attributes and buffers including the `ELEMENT_ARRAY_BUFFER` if appropriate\n *\n * Example:\n *\n *     const programInfo = createProgramInfo(\n *         gl, [\"some-vs\", \"some-fs\");\n *\n *     const arrays = {\n *       position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },\n *       texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },\n *     };\n *\n *     const bufferInfo = createBufferInfoFromArrays(gl, arrays);\n *\n *     gl.useProgram(programInfo.program);\n *\n * This will automatically bind the buffers AND set the\n * attributes.\n *\n *     setBuffersAndAttributes(gl, programInfo, bufferInfo);\n *\n * For the example above it is equivilent to\n *\n *     gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n *     gl.enableVertexAttribArray(a_positionLocation);\n *     gl.vertexAttribPointer(a_positionLocation, 3, gl.FLOAT, false, 0, 0);\n *     gl.bindBuffer(gl.ARRAY_BUFFER, texcoordBuffer);\n *     gl.enableVertexAttribArray(a_texcoordLocation);\n *     gl.vertexAttribPointer(a_texcoordLocation, 4, gl.FLOAT, false, 0, 0);\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext.\n * @param {(module:twgl.ProgramInfo|Object.<string, function>)} setters A `ProgramInfo` as returned from {@link module:twgl.createProgrmaInfo} or Attribute setters as returned from {@link module:twgl.createAttributeSetters}\n * @param {(module:twgl.BufferInfo|module:twgl.VertexArrayInfo)} buffers a `BufferInfo` as returned from {@link module:twgl.createBufferInfoFromArrays}.\n *   or a `VertexArrayInfo` as returned from {@link module:twgl.createVertexArrayInfo}\n * @memberOf module:twgl/programs\n */\n\n\nfunction setBuffersAndAttributes(gl, programInfo, buffers) {\n  if (buffers.vertexArrayObject) {\n    gl.bindVertexArray(buffers.vertexArrayObject);\n  } else {\n    setAttributes(programInfo.attribSetters || programInfo, buffers.attribs);\n\n    if (buffers.indices) {\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffers.indices);\n    }\n  }\n}\n/**\n * @typedef {Object} ProgramInfo\n * @property {WebGLProgram} program A shader program\n * @property {Object<string, function>} uniformSetters object of setters as returned from createUniformSetters,\n * @property {Object<string, function>} attribSetters object of setters as returned from createAttribSetters,\n * @propetty {module:twgl.UniformBlockSpec} [uniformBlockSpace] a uniform block spec for making UniformBlockInfos with createUniformBlockInfo etc..\n * @property {Object<string, module:twgl.TransformFeedbackInfo>} [transformFeedbackInfo] info for transform feedbacks\n * @memberOf module:twgl\n */\n\n/**\n * Creates a ProgramInfo from an existing program.\n *\n * A ProgramInfo contains\n *\n *     programInfo = {\n *        program: WebGLProgram,\n *        uniformSetters: object of setters as returned from createUniformSetters,\n *        attribSetters: object of setters as returned from createAttribSetters,\n *     }\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext\n *        to use.\n * @param {WebGLProgram} program an existing WebGLProgram.\n * @return {module:twgl.ProgramInfo} The created ProgramInfo.\n * @memberOf module:twgl/programs\n */\n\n\nfunction createProgramInfoFromProgram(gl, program) {\n  var uniformSetters = createUniformSetters(gl, program);\n  var attribSetters = createAttributeSetters(gl, program);\n  var programInfo = {\n    program: program,\n    uniformSetters: uniformSetters,\n    attribSetters: attribSetters\n  };\n\n  if (utils.isWebGL2(gl)) {\n    programInfo.uniformBlockSpec = createUniformBlockSpecFromProgram(gl, program);\n    programInfo.transformFeedbackInfo = createTransformFeedbackInfo(gl, program);\n  }\n\n  return programInfo;\n}\n/**\n * Creates a ProgramInfo from 2 sources.\n *\n * A ProgramInfo contains\n *\n *     programInfo = {\n *        program: WebGLProgram,\n *        uniformSetters: object of setters as returned from createUniformSetters,\n *        attribSetters: object of setters as returned from createAttribSetters,\n *     }\n *\n * NOTE: There are 4 signatures for this function\n *\n *     twgl.createProgramInfo(gl, [vs, fs], options);\n *     twgl.createProgramInfo(gl, [vs, fs], opt_errFunc);\n *     twgl.createProgramInfo(gl, [vs, fs], opt_attribs, opt_errFunc);\n *     twgl.createProgramInfo(gl, [vs, fs], opt_attribs, opt_locations, opt_errFunc);\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext\n *        to use.\n * @param {string[]} shaderSources Array of sources for the\n *        shaders or ids. The first is assumed to be the vertex shader,\n *        the second the fragment shader.\n * @param {module:twgl.ProgramOptions|string[]|module:twgl.ErrorCallback} [opt_attribs] Options for the program or an array of attribs names or an error callback. Locations will be assigned by index if not passed in\n * @param {number[]} [opt_locations|module:twgl.ErrorCallback] The locations for the. A parallel array to opt_attribs letting you assign locations or an error callback.\n * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console\n *        on error. If you want something else pass an callback. It's passed an error message.\n * @return {module:twgl.ProgramInfo?} The created ProgramInfo or null if it failed to link or compile\n * @memberOf module:twgl/programs\n */\n\n\nfunction createProgramInfo(gl, shaderSources, opt_attribs, opt_locations, opt_errorCallback) {\n  var progOptions = getProgramOptions(opt_attribs, opt_locations, opt_errorCallback);\n  var good = true;\n  shaderSources = shaderSources.map(function (source) {\n    // Lets assume if there is no \\n it's an id\n    if (source.indexOf(\"\\n\") < 0) {\n      var script = getElementById(source);\n\n      if (!script) {\n        progOptions.errorCallback(\"no element with id: \" + source);\n        good = false;\n      } else {\n        source = script.text;\n      }\n    }\n\n    return source;\n  });\n\n  if (!good) {\n    return null;\n  }\n\n  var program = createProgramFromSources(gl, shaderSources, progOptions);\n\n  if (!program) {\n    return null;\n  }\n\n  return createProgramInfoFromProgram(gl, program);\n}\n\n/***/ }),\n\n/***/ \"./src/textures.js\":\n/*!*************************!*\\\n  !*** ./src/textures.js ***!\n  \\*************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.setTextureDefaults_ = setDefaults;\nexports.createSampler = createSampler;\nexports.createSamplers = createSamplers;\nexports.setSamplerParameters = setSamplerParameters;\nexports.createTexture = createTexture;\nexports.setEmptyTexture = setEmptyTexture;\nexports.setTextureFromArray = setTextureFromArray;\nexports.loadTextureFromUrl = loadTextureFromUrl;\nexports.setTextureFromElement = setTextureFromElement;\nexports.setTextureFilteringForSize = setTextureFilteringForSize;\nexports.setTextureParameters = setTextureParameters;\nexports.setDefaultTextureColor = setDefaultTextureColor;\nexports.createTextures = createTextures;\nexports.resizeTexture = resizeTexture;\nexports.canGenerateMipmap = canGenerateMipmap;\nexports.canFilter = canFilter;\nexports.getNumComponentsForFormat = getNumComponentsForFormat;\nexports.getBytesPerElementForInternalFormat = getBytesPerElementForInternalFormat;\nexports.getFormatAndTypeForInternalFormat = getFormatAndTypeForInternalFormat;\n\nvar utils = _interopRequireWildcard(__webpack_require__(/*! ./utils.js */ \"./src/utils.js\"));\n\nvar typedArrays = _interopRequireWildcard(__webpack_require__(/*! ./typedarrays.js */ \"./src/typedarrays.js\"));\n\nvar helper = _interopRequireWildcard(__webpack_require__(/*! ./helper.js */ \"./src/helper.js\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Low level texture related functions\n *\n * You should generally not need to use these functions. They are provided\n * for those cases where you're doing something out of the ordinary\n * and you need lower level access.\n *\n * For backward compatibily they are available at both `twgl.textures` and `twgl`\n * itself\n *\n * See {@link module:twgl} for core functions\n *\n * @module twgl/textures\n */\n// make sure we don't see a global gl\nvar gl = undefined; // eslint-disable-line\n\nvar defaults = {\n  textureColor: new Uint8Array([128, 192, 255, 255]),\n  textureOptions: {},\n  crossOrigin: undefined\n};\nvar isArrayBuffer = typedArrays.isArrayBuffer; // Should we make this on demand?\n\nvar ctx = typeof document !== 'undefined' && document.createElement ? document.createElement(\"canvas\").getContext(\"2d\") : null; // NOTE: Chrome supports 2D canvas in a Worker (behind flag as of v64 but\n//       not only does Firefox NOT support it but Firefox freezes immediately\n//       if you try to create one instead of just returning null and continuing.\n//  : (global.OffscreenCanvas && (new global.OffscreenCanvas(1, 1)).getContext(\"2d\"));  // OffscreenCanvas may not support 2d\n// NOTE: We can maybe remove some of the need for the 2d canvas. In WebGL2\n// we can use the various unpack settings. Otherwise we could try using\n// the ability of an imagebitmap to be cut. Unfortunately cutting an imagebitmap\n// is async and the current TWGL code expects a non-Async result though that\n// might not be a problem. ImageBitmap though is not available in Edge or Safari\n// as of 2018-01-02\n\n/* PixelFormat */\n\nvar ALPHA = 0x1906;\nvar RGB = 0x1907;\nvar RGBA = 0x1908;\nvar LUMINANCE = 0x1909;\nvar LUMINANCE_ALPHA = 0x190A;\nvar DEPTH_COMPONENT = 0x1902;\nvar DEPTH_STENCIL = 0x84F9;\n/* TextureWrapMode */\n\nvar REPEAT = 0x2901; // eslint-disable-line\n\nvar MIRRORED_REPEAT = 0x8370; // eslint-disable-line\n\n/* TextureMagFilter */\n\nvar NEAREST = 0x2600; // eslint-disable-line\n\n/* TextureMinFilter */\n\nvar NEAREST_MIPMAP_NEAREST = 0x2700; // eslint-disable-line\n\nvar LINEAR_MIPMAP_NEAREST = 0x2701; // eslint-disable-line\n\nvar NEAREST_MIPMAP_LINEAR = 0x2702; // eslint-disable-line\n\nvar LINEAR_MIPMAP_LINEAR = 0x2703; // eslint-disable-line\n\nvar R8 = 0x8229;\nvar R8_SNORM = 0x8F94;\nvar R16F = 0x822D;\nvar R32F = 0x822E;\nvar R8UI = 0x8232;\nvar R8I = 0x8231;\nvar RG16UI = 0x823A;\nvar RG16I = 0x8239;\nvar RG32UI = 0x823C;\nvar RG32I = 0x823B;\nvar RG8 = 0x822B;\nvar RG8_SNORM = 0x8F95;\nvar RG16F = 0x822F;\nvar RG32F = 0x8230;\nvar RG8UI = 0x8238;\nvar RG8I = 0x8237;\nvar R16UI = 0x8234;\nvar R16I = 0x8233;\nvar R32UI = 0x8236;\nvar R32I = 0x8235;\nvar RGB8 = 0x8051;\nvar SRGB8 = 0x8C41;\nvar RGB565 = 0x8D62;\nvar RGB8_SNORM = 0x8F96;\nvar R11F_G11F_B10F = 0x8C3A;\nvar RGB9_E5 = 0x8C3D;\nvar RGB16F = 0x881B;\nvar RGB32F = 0x8815;\nvar RGB8UI = 0x8D7D;\nvar RGB8I = 0x8D8F;\nvar RGB16UI = 0x8D77;\nvar RGB16I = 0x8D89;\nvar RGB32UI = 0x8D71;\nvar RGB32I = 0x8D83;\nvar RGBA8 = 0x8058;\nvar SRGB8_ALPHA8 = 0x8C43;\nvar RGBA8_SNORM = 0x8F97;\nvar RGB5_A1 = 0x8057;\nvar RGBA4 = 0x8056;\nvar RGB10_A2 = 0x8059;\nvar RGBA16F = 0x881A;\nvar RGBA32F = 0x8814;\nvar RGBA8UI = 0x8D7C;\nvar RGBA8I = 0x8D8E;\nvar RGB10_A2UI = 0x906F;\nvar RGBA16UI = 0x8D76;\nvar RGBA16I = 0x8D88;\nvar RGBA32I = 0x8D82;\nvar RGBA32UI = 0x8D70;\nvar DEPTH_COMPONENT16 = 0x81A5;\nvar DEPTH_COMPONENT24 = 0x81A6;\nvar DEPTH_COMPONENT32F = 0x8CAC;\nvar DEPTH32F_STENCIL8 = 0x8CAD;\nvar DEPTH24_STENCIL8 = 0x88F0;\n/* DataType */\n\nvar BYTE = 0x1400;\nvar UNSIGNED_BYTE = 0x1401;\nvar SHORT = 0x1402;\nvar UNSIGNED_SHORT = 0x1403;\nvar INT = 0x1404;\nvar UNSIGNED_INT = 0x1405;\nvar FLOAT = 0x1406;\nvar UNSIGNED_SHORT_4_4_4_4 = 0x8033;\nvar UNSIGNED_SHORT_5_5_5_1 = 0x8034;\nvar UNSIGNED_SHORT_5_6_5 = 0x8363;\nvar HALF_FLOAT = 0x140B;\nvar HALF_FLOAT_OES = 0x8D61; // Thanks Khronos for making this different >:(\n\nvar UNSIGNED_INT_2_10_10_10_REV = 0x8368;\nvar UNSIGNED_INT_10F_11F_11F_REV = 0x8C3B;\nvar UNSIGNED_INT_5_9_9_9_REV = 0x8C3E;\nvar FLOAT_32_UNSIGNED_INT_24_8_REV = 0x8DAD;\nvar UNSIGNED_INT_24_8 = 0x84FA;\nvar RG = 0x8227;\nvar RG_INTEGER = 0x8228;\nvar RED = 0x1903;\nvar RED_INTEGER = 0x8D94;\nvar RGB_INTEGER = 0x8D98;\nvar RGBA_INTEGER = 0x8D99;\nvar formatInfo = {};\n{\n  // NOTE: this is named `numColorComponents` vs `numComponents` so we can let Uglify mangle\n  // the name.\n  var f = formatInfo;\n  f[ALPHA] = {\n    numColorComponents: 1\n  };\n  f[LUMINANCE] = {\n    numColorComponents: 1\n  };\n  f[LUMINANCE_ALPHA] = {\n    numColorComponents: 2\n  };\n  f[RGB] = {\n    numColorComponents: 3\n  };\n  f[RGBA] = {\n    numColorComponents: 4\n  };\n  f[RED] = {\n    numColorComponents: 1\n  };\n  f[RED_INTEGER] = {\n    numColorComponents: 1\n  };\n  f[RG] = {\n    numColorComponents: 2\n  };\n  f[RG_INTEGER] = {\n    numColorComponents: 2\n  };\n  f[RGB] = {\n    numColorComponents: 3\n  };\n  f[RGB_INTEGER] = {\n    numColorComponents: 3\n  };\n  f[RGBA] = {\n    numColorComponents: 4\n  };\n  f[RGBA_INTEGER] = {\n    numColorComponents: 4\n  };\n  f[DEPTH_COMPONENT] = {\n    numColorComponents: 1\n  };\n  f[DEPTH_STENCIL] = {\n    numColorComponents: 2\n  };\n}\n/**\n * @typedef {Object} TextureFormatDetails\n * @property {number} textureFormat format to pass texImage2D and similar functions.\n * @property {boolean} colorRenderable true if you can render to this format of texture.\n * @property {boolean} textureFilterable true if you can filter the texture, false if you can ony use `NEAREST`.\n * @property {number[]} type Array of possible types you can pass to teximage2D and similar function\n * @property {Object.<number,number>} bytesPerElementMap A map of types to bytes per element\n * @private\n */\n\nvar textureInternalFormatInfo = {};\n{\n  // NOTE: these properties need unique names so we can let Uglify mangle the name.\n  var t = textureInternalFormatInfo; // unsized formats\n\n  t[ALPHA] = {\n    textureFormat: ALPHA,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [1, 2, 2, 4],\n    type: [UNSIGNED_BYTE, HALF_FLOAT, HALF_FLOAT_OES, FLOAT]\n  };\n  t[LUMINANCE] = {\n    textureFormat: LUMINANCE,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [1, 2, 2, 4],\n    type: [UNSIGNED_BYTE, HALF_FLOAT, HALF_FLOAT_OES, FLOAT]\n  };\n  t[LUMINANCE_ALPHA] = {\n    textureFormat: LUMINANCE_ALPHA,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [2, 4, 4, 8],\n    type: [UNSIGNED_BYTE, HALF_FLOAT, HALF_FLOAT_OES, FLOAT]\n  };\n  t[RGB] = {\n    textureFormat: RGB,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [3, 6, 6, 12, 2],\n    type: [UNSIGNED_BYTE, HALF_FLOAT, HALF_FLOAT_OES, FLOAT, UNSIGNED_SHORT_5_6_5]\n  };\n  t[RGBA] = {\n    textureFormat: RGBA,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [4, 8, 8, 16, 2, 2],\n    type: [UNSIGNED_BYTE, HALF_FLOAT, HALF_FLOAT_OES, FLOAT, UNSIGNED_SHORT_4_4_4_4, UNSIGNED_SHORT_5_5_5_1]\n  }; // sized formats\n\n  t[R8] = {\n    textureFormat: RED,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [1],\n    type: [UNSIGNED_BYTE]\n  };\n  t[R8_SNORM] = {\n    textureFormat: RED,\n    colorRenderable: false,\n    textureFilterable: true,\n    bytesPerElement: [1],\n    type: [BYTE]\n  };\n  t[R16F] = {\n    textureFormat: RED,\n    colorRenderable: false,\n    textureFilterable: true,\n    bytesPerElement: [4, 2],\n    type: [FLOAT, HALF_FLOAT]\n  };\n  t[R32F] = {\n    textureFormat: RED,\n    colorRenderable: false,\n    textureFilterable: false,\n    bytesPerElement: [4],\n    type: [FLOAT]\n  };\n  t[R8UI] = {\n    textureFormat: RED_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [1],\n    type: [UNSIGNED_BYTE]\n  };\n  t[R8I] = {\n    textureFormat: RED_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [1],\n    type: [BYTE]\n  };\n  t[R16UI] = {\n    textureFormat: RED_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [2],\n    type: [UNSIGNED_SHORT]\n  };\n  t[R16I] = {\n    textureFormat: RED_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [2],\n    type: [SHORT]\n  };\n  t[R32UI] = {\n    textureFormat: RED_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [4],\n    type: [UNSIGNED_INT]\n  };\n  t[R32I] = {\n    textureFormat: RED_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [4],\n    type: [INT]\n  };\n  t[RG8] = {\n    textureFormat: RG,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [2],\n    type: [UNSIGNED_BYTE]\n  };\n  t[RG8_SNORM] = {\n    textureFormat: RG,\n    colorRenderable: false,\n    textureFilterable: true,\n    bytesPerElement: [2],\n    type: [BYTE]\n  };\n  t[RG16F] = {\n    textureFormat: RG,\n    colorRenderable: false,\n    textureFilterable: true,\n    bytesPerElement: [8, 4],\n    type: [FLOAT, HALF_FLOAT]\n  };\n  t[RG32F] = {\n    textureFormat: RG,\n    colorRenderable: false,\n    textureFilterable: false,\n    bytesPerElement: [8],\n    type: [FLOAT]\n  };\n  t[RG8UI] = {\n    textureFormat: RG_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [2],\n    type: [UNSIGNED_BYTE]\n  };\n  t[RG8I] = {\n    textureFormat: RG_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [2],\n    type: [BYTE]\n  };\n  t[RG16UI] = {\n    textureFormat: RG_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [4],\n    type: [UNSIGNED_SHORT]\n  };\n  t[RG16I] = {\n    textureFormat: RG_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [4],\n    type: [SHORT]\n  };\n  t[RG32UI] = {\n    textureFormat: RG_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [8],\n    type: [UNSIGNED_INT]\n  };\n  t[RG32I] = {\n    textureFormat: RG_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [8],\n    type: [INT]\n  };\n  t[RGB8] = {\n    textureFormat: RGB,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [3],\n    type: [UNSIGNED_BYTE]\n  };\n  t[SRGB8] = {\n    textureFormat: RGB,\n    colorRenderable: false,\n    textureFilterable: true,\n    bytesPerElement: [3],\n    type: [UNSIGNED_BYTE]\n  };\n  t[RGB565] = {\n    textureFormat: RGB,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [3, 2],\n    type: [UNSIGNED_BYTE, UNSIGNED_SHORT_5_6_5]\n  };\n  t[RGB8_SNORM] = {\n    textureFormat: RGB,\n    colorRenderable: false,\n    textureFilterable: true,\n    bytesPerElement: [3],\n    type: [BYTE]\n  };\n  t[R11F_G11F_B10F] = {\n    textureFormat: RGB,\n    colorRenderable: false,\n    textureFilterable: true,\n    bytesPerElement: [12, 6, 4],\n    type: [FLOAT, HALF_FLOAT, UNSIGNED_INT_10F_11F_11F_REV]\n  };\n  t[RGB9_E5] = {\n    textureFormat: RGB,\n    colorRenderable: false,\n    textureFilterable: true,\n    bytesPerElement: [12, 6, 4],\n    type: [FLOAT, HALF_FLOAT, UNSIGNED_INT_5_9_9_9_REV]\n  };\n  t[RGB16F] = {\n    textureFormat: RGB,\n    colorRenderable: false,\n    textureFilterable: true,\n    bytesPerElement: [12, 6],\n    type: [FLOAT, HALF_FLOAT]\n  };\n  t[RGB32F] = {\n    textureFormat: RGB,\n    colorRenderable: false,\n    textureFilterable: false,\n    bytesPerElement: [12],\n    type: [FLOAT]\n  };\n  t[RGB8UI] = {\n    textureFormat: RGB_INTEGER,\n    colorRenderable: false,\n    textureFilterable: false,\n    bytesPerElement: [3],\n    type: [UNSIGNED_BYTE]\n  };\n  t[RGB8I] = {\n    textureFormat: RGB_INTEGER,\n    colorRenderable: false,\n    textureFilterable: false,\n    bytesPerElement: [3],\n    type: [BYTE]\n  };\n  t[RGB16UI] = {\n    textureFormat: RGB_INTEGER,\n    colorRenderable: false,\n    textureFilterable: false,\n    bytesPerElement: [6],\n    type: [UNSIGNED_SHORT]\n  };\n  t[RGB16I] = {\n    textureFormat: RGB_INTEGER,\n    colorRenderable: false,\n    textureFilterable: false,\n    bytesPerElement: [6],\n    type: [SHORT]\n  };\n  t[RGB32UI] = {\n    textureFormat: RGB_INTEGER,\n    colorRenderable: false,\n    textureFilterable: false,\n    bytesPerElement: [12],\n    type: [UNSIGNED_INT]\n  };\n  t[RGB32I] = {\n    textureFormat: RGB_INTEGER,\n    colorRenderable: false,\n    textureFilterable: false,\n    bytesPerElement: [12],\n    type: [INT]\n  };\n  t[RGBA8] = {\n    textureFormat: RGBA,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [4],\n    type: [UNSIGNED_BYTE]\n  };\n  t[SRGB8_ALPHA8] = {\n    textureFormat: RGBA,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [4],\n    type: [UNSIGNED_BYTE]\n  };\n  t[RGBA8_SNORM] = {\n    textureFormat: RGBA,\n    colorRenderable: false,\n    textureFilterable: true,\n    bytesPerElement: [4],\n    type: [BYTE]\n  };\n  t[RGB5_A1] = {\n    textureFormat: RGBA,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [4, 2, 4],\n    type: [UNSIGNED_BYTE, UNSIGNED_SHORT_5_5_5_1, UNSIGNED_INT_2_10_10_10_REV]\n  };\n  t[RGBA4] = {\n    textureFormat: RGBA,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [4, 2],\n    type: [UNSIGNED_BYTE, UNSIGNED_SHORT_4_4_4_4]\n  };\n  t[RGB10_A2] = {\n    textureFormat: RGBA,\n    colorRenderable: true,\n    textureFilterable: true,\n    bytesPerElement: [4],\n    type: [UNSIGNED_INT_2_10_10_10_REV]\n  };\n  t[RGBA16F] = {\n    textureFormat: RGBA,\n    colorRenderable: false,\n    textureFilterable: true,\n    bytesPerElement: [16, 8],\n    type: [FLOAT, HALF_FLOAT]\n  };\n  t[RGBA32F] = {\n    textureFormat: RGBA,\n    colorRenderable: false,\n    textureFilterable: false,\n    bytesPerElement: [16],\n    type: [FLOAT]\n  };\n  t[RGBA8UI] = {\n    textureFormat: RGBA_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [4],\n    type: [UNSIGNED_BYTE]\n  };\n  t[RGBA8I] = {\n    textureFormat: RGBA_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [4],\n    type: [BYTE]\n  };\n  t[RGB10_A2UI] = {\n    textureFormat: RGBA_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [4],\n    type: [UNSIGNED_INT_2_10_10_10_REV]\n  };\n  t[RGBA16UI] = {\n    textureFormat: RGBA_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [8],\n    type: [UNSIGNED_SHORT]\n  };\n  t[RGBA16I] = {\n    textureFormat: RGBA_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [8],\n    type: [SHORT]\n  };\n  t[RGBA32I] = {\n    textureFormat: RGBA_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [16],\n    type: [INT]\n  };\n  t[RGBA32UI] = {\n    textureFormat: RGBA_INTEGER,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [16],\n    type: [UNSIGNED_INT]\n  }; // Sized Internal\n\n  t[DEPTH_COMPONENT16] = {\n    textureFormat: DEPTH_COMPONENT,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [2, 4],\n    type: [UNSIGNED_SHORT, UNSIGNED_INT]\n  };\n  t[DEPTH_COMPONENT24] = {\n    textureFormat: DEPTH_COMPONENT,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [4],\n    type: [UNSIGNED_INT]\n  };\n  t[DEPTH_COMPONENT32F] = {\n    textureFormat: DEPTH_COMPONENT,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [4],\n    type: [FLOAT]\n  };\n  t[DEPTH24_STENCIL8] = {\n    textureFormat: DEPTH_STENCIL,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [4],\n    type: [UNSIGNED_INT_24_8]\n  };\n  t[DEPTH32F_STENCIL8] = {\n    textureFormat: DEPTH_STENCIL,\n    colorRenderable: true,\n    textureFilterable: false,\n    bytesPerElement: [4],\n    type: [FLOAT_32_UNSIGNED_INT_24_8_REV]\n  };\n  Object.keys(t).forEach(function (internalFormat) {\n    var info = t[internalFormat];\n    info.bytesPerElementMap = {};\n    info.bytesPerElement.forEach(function (bytesPerElement, ndx) {\n      var type = info.type[ndx];\n      info.bytesPerElementMap[type] = bytesPerElement;\n    });\n  });\n}\n/**\n * Gets the number of bytes per element for a given internalFormat / type\n * @param {number} internalFormat The internalFormat parameter from texImage2D etc..\n * @param {number} type The type parameter for texImage2D etc..\n * @return {number} the number of bytes per element for the given internalFormat, type combo\n * @memberOf module:twgl/textures\n */\n\nfunction getBytesPerElementForInternalFormat(internalFormat, type) {\n  var info = textureInternalFormatInfo[internalFormat];\n\n  if (!info) {\n    throw \"unknown internal format\";\n  }\n\n  var bytesPerElement = info.bytesPerElementMap[type];\n\n  if (bytesPerElement === undefined) {\n    throw \"unknown internal format\";\n  }\n\n  return bytesPerElement;\n}\n/**\n * Info related to a specific texture internalFormat as returned\n * from {@link module:twgl/textures.getFormatAndTypeForInternalFormat}.\n *\n * @typedef {Object} TextureFormatInfo\n * @property {number} format Format to pass to texImage2D and related functions\n * @property {number} type Type to pass to texImage2D and related functions\n * @memberOf module:twgl/textures\n */\n\n/**\n * Gets the format and type for a given internalFormat\n *\n * @param {number} internalFormat The internal format\n * @return {module:twgl/textures.TextureFormatInfo} the corresponding format and type,\n * @memberOf module:twgl/textures\n */\n\n\nfunction getFormatAndTypeForInternalFormat(internalFormat) {\n  var info = textureInternalFormatInfo[internalFormat];\n\n  if (!info) {\n    throw \"unknown internal format\";\n  }\n\n  return {\n    format: info.textureFormat,\n    type: info.type[0]\n  };\n}\n/**\n * Returns true if value is power of 2\n * @param {number} value number to check.\n * @return true if value is power of 2\n * @private\n */\n\n\nfunction isPowerOf2(value) {\n  return (value & value - 1) === 0;\n}\n/**\n * Gets whether or not we can generate mips for the given\n * internal format.\n *\n * @param {number} internalFormat The internalFormat parameter from texImage2D etc..\n * @param {number} type The type parameter for texImage2D etc..\n * @return {boolean} true if we can generate mips\n * @memberOf module:twgl/textures\n */\n\n\nfunction canGenerateMipmap(gl, width, height, internalFormat\n/*, type */\n) {\n  if (!utils.isWebGL2(gl)) {\n    return isPowerOf2(width) && isPowerOf2(height);\n  }\n\n  var info = textureInternalFormatInfo[internalFormat];\n\n  if (!info) {\n    throw \"unknown internal format\";\n  }\n\n  return info.colorRenderable && info.textureFilterable;\n}\n/**\n * Gets whether or not we can generate mips for the given format\n * @param {number} internalFormat The internalFormat parameter from texImage2D etc..\n * @param {number} type The type parameter for texImage2D etc..\n * @return {boolean} true if we can generate mips\n * @memberOf module:twgl/textures\n */\n\n\nfunction canFilter(internalFormat\n/*, type */\n) {\n  var info = textureInternalFormatInfo[internalFormat];\n\n  if (!info) {\n    throw \"unknown internal format\";\n  }\n\n  return info.textureFilterable;\n}\n/**\n * Gets the number of compontents for a given image format.\n * @param {number} format the format.\n * @return {number} the number of components for the format.\n * @memberOf module:twgl/textures\n */\n\n\nfunction getNumComponentsForFormat(format) {\n  var info = formatInfo[format];\n\n  if (!info) {\n    throw \"unknown format: \" + format;\n  }\n\n  return info.numColorComponents;\n}\n/**\n * Gets the texture type for a given array type.\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @return {number} the gl texture type\n * @private\n */\n\n\nfunction getTextureTypeForArrayType(gl, src, defaultType) {\n  if (isArrayBuffer(src)) {\n    return typedArrays.getGLTypeForTypedArray(src);\n  }\n\n  return defaultType || gl.UNSIGNED_BYTE;\n}\n\nfunction guessDimensions(gl, target, width, height, numElements) {\n  if (numElements % 1 !== 0) {\n    throw \"can't guess dimensions\";\n  }\n\n  if (!width && !height) {\n    var size = Math.sqrt(numElements / (target === gl.TEXTURE_CUBE_MAP ? 6 : 1));\n\n    if (size % 1 === 0) {\n      width = size;\n      height = size;\n    } else {\n      width = numElements;\n      height = 1;\n    }\n  } else if (!height) {\n    height = numElements / width;\n\n    if (height % 1) {\n      throw \"can't guess dimensions\";\n    }\n  } else if (!width) {\n    width = numElements / height;\n\n    if (width % 1) {\n      throw \"can't guess dimensions\";\n    }\n  }\n\n  return {\n    width: width,\n    height: height\n  };\n}\n/**\n * Sets the default texture color.\n *\n * The default texture color is used when loading textures from\n * urls. Because the URL will be loaded async we'd like to be\n * able to use the texture immediately. By putting a 1x1 pixel\n * color in the texture we can start using the texture before\n * the URL has loaded.\n *\n * @param {number[]} color Array of 4 values in the range 0 to 1\n * @deprecated see {@link module:twgl.setDefaults}\n * @memberOf module:twgl/textures\n */\n\n\nfunction setDefaultTextureColor(color) {\n  defaults.textureColor = new Uint8Array([color[0] * 255, color[1] * 255, color[2] * 255, color[3] * 255]);\n}\n\nfunction setDefaults(newDefaults) {\n  helper.copyExistingProperties(newDefaults, defaults);\n\n  if (newDefaults.textureColor) {\n    setDefaultTextureColor(newDefaults.textureColor);\n  }\n}\n/**\n * A function to generate the source for a texture.\n * @callback TextureFunc\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @param {module:twgl.TextureOptions} options the texture options\n * @return {*} Returns any of the things documentented for `src` for {@link module:twgl.TextureOptions}.\n * @memberOf module:twgl\n */\n\n/**\n * Texture options passed to most texture functions. Each function will use whatever options\n * are appropriate for its needs. This lets you pass the same options to all functions.\n *\n * Note: A `TexImageSource` is defined in the WebGL spec as a `HTMLImageElement`, `HTMLVideoElement`,\n * `HTMLCanvasElement`, `ImageBitmap`, or `ImageData`.\n *\n * @typedef {Object} TextureOptions\n * @property {number} [target] the type of texture `gl.TEXTURE_2D` or `gl.TEXTURE_CUBE_MAP`. Defaults to `gl.TEXTURE_2D`.\n * @property {number} [level] the mip level to affect. Defaults to 0. Note, if set auto will be considered false unless explicitly set to true.\n * @property {number} [width] the width of the texture. Only used if src is an array or typed array or null.\n * @property {number} [height] the height of a texture. Only used if src is an array or typed array or null.\n * @property {number} [depth] the depth of a texture. Only used if src is an array or type array or null and target is `TEXTURE_3D` .\n * @property {number} [min] the min filter setting (eg. `gl.LINEAR`). Defaults to `gl.NEAREST_MIPMAP_LINEAR`\n *     or if texture is not a power of 2 on both dimensions then defaults to `gl.LINEAR`.\n * @property {number} [mag] the mag filter setting (eg. `gl.LINEAR`). Defaults to `gl.LINEAR`\n * @property {number} [minMag] both the min and mag filter settings.\n * @property {number} [internalFormat] internal format for texture. Defaults to `gl.RGBA`\n * @property {number} [format] format for texture. Defaults to `gl.RGBA`.\n * @property {number} [type] type for texture. Defaults to `gl.UNSIGNED_BYTE` unless `src` is ArrayBufferView. If `src`\n *     is ArrayBufferView defaults to type that matches ArrayBufferView type.\n * @property {number} [wrap] Texture wrapping for both S and T (and R if TEXTURE_3D or WebGLSampler). Defaults to `gl.REPEAT` for 2D unless src is WebGL1 and src not npot and `gl.CLAMP_TO_EDGE` for cube\n * @property {number} [wrapS] Texture wrapping for S. Defaults to `gl.REPEAT` and `gl.CLAMP_TO_EDGE` for cube. If set takes precedence over `wrap`.\n * @property {number} [wrapT] Texture wrapping for T. Defaults to `gl.REPEAT` and `gl.CLAMP_TO_EDGE` for cube. If set takes precedence over `wrap`.\n * @property {number} [wrapR] Texture wrapping for R. Defaults to `gl.REPEAT` and `gl.CLAMP_TO_EDGE` for cube. If set takes precedence over `wrap`.\n * @property {number} [minLod] TEXTURE_MIN_LOD setting\n * @property {number} [maxLod] TEXTURE_MAX_LOD setting\n * @property {number} [baseLevel] TEXTURE_BASE_LEVEL setting\n * @property {number} [maxLevel] TEXTURE_MAX_LEVEL setting\n * @property {number} [unpackAlignment] The `gl.UNPACK_ALIGNMENT` used when uploading an array. Defaults to 1.\n * @property {number[]|ArrayBufferView} [color] Color to initialize this texture with if loading an image asynchronously.\n *     The default use a blue 1x1 pixel texture. You can set another default by calling `twgl.setDefaults`\n *     or you can set an individual texture's initial color by setting this property. Example: `[1, .5, .5, 1]` = pink\n * @property {number} [premultiplyAlpha] Whether or not to premultiply alpha. Defaults to whatever the current setting is.\n *     This lets you set it once before calling `twgl.createTexture` or `twgl.createTextures` and only override\n *     the current setting for specific textures.\n * @property {number} [flipY] Whether or not to flip the texture vertically on upload. Defaults to whatever the current setting is.\n *     This lets you set it once before calling `twgl.createTexture` or `twgl.createTextures` and only override\n *     the current setting for specific textures.\n * @property {number} [colorspaceConversion] Whether or not to let the browser do colorspace conversion of the texture on upload. Defaults to whatever the current setting is.\n *     This lets you set it once before calling `twgl.createTexture` or `twgl.createTextures` and only override\n *     the current setting for specific textures.\n * @property {boolean} [auto] If `undefined` or `true`, in WebGL1, texture filtering is set automatically for non-power of 2 images and\n *    mips are generated for power of 2 images. In WebGL2 mips are generated if they can be. Note: if `level` is set above\n *    then then `auto` is assumed to be `false` unless explicity set to `true`.\n * @property {number[]} [cubeFaceOrder] The order that cube faces are pulled out of an img or set of images. The default is\n *\n *     [gl.TEXTURE_CUBE_MAP_POSITIVE_X,\n *      gl.TEXTURE_CUBE_MAP_NEGATIVE_X,\n *      gl.TEXTURE_CUBE_MAP_POSITIVE_Y,\n *      gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,\n *      gl.TEXTURE_CUBE_MAP_POSITIVE_Z,\n *      gl.TEXTURE_CUBE_MAP_NEGATIVE_Z]\n *\n * @property {(number[]|ArrayBufferView|TexImageSource|TexImageSource[]|string|string[]|module:twgl.TextureFunc)} [src] source for texture\n *\n *    If `string` then it's assumed to be a URL to an image. The image will be downloaded async. A usable\n *    1x1 pixel texture will be returned immediatley. The texture will be updated once the image has downloaded.\n *    If `target` is `gl.TEXTURE_CUBE_MAP` will attempt to divide image into 6 square pieces. 1x6, 6x1, 3x2, 2x3.\n *    The pieces will be uploaded in `cubeFaceOrder`\n *\n *    If `string[]` or `TexImageSource[]` and target is `gl.TEXTURE_CUBE_MAP` then it must have 6 entries, one for each face of a cube map.\n *\n *    If `string[]` or `TexImageSource[]` and target is `gl.TEXTURE_2D_ARRAY` then eact entry is a slice of the a 2d array texture\n *    and will be scaled to the specified width and height OR to the size of the first image that loads.\n *\n *    If `TexImageSource` then it wil be used immediately to create the contents of the texture. Examples `HTMLImageElement`,\n *    `HTMLCanvasElement`, `HTMLVideoElement`.\n *\n *    If `number[]` or `ArrayBufferView` it's assumed to be data for a texture. If `width` or `height` is\n *    not specified it is guessed as follows. First the number of elements is computed by `src.length / numComponents`\n *    where `numComponents` is derived from `format`. If `target` is `gl.TEXTURE_CUBE_MAP` then `numElements` is divided\n *    by 6. Then\n *\n *    *   If neither `width` nor `height` are specified and `sqrt(numElements)` is an integer then width and height\n *        are set to `sqrt(numElements)`. Otherwise `width = numElements` and `height = 1`.\n *\n *    *   If only one of `width` or `height` is specified then the other equals `numElements / specifiedDimension`.\n *\n * If `number[]` will be converted to `type`.\n *\n * If `src` is a function it will be called with a `WebGLRenderingContext` and these options.\n * Whatever it returns is subject to these rules. So it can return a string url, an `HTMLElement`\n * an array etc...\n *\n * If `src` is undefined then an empty texture will be created of size `width` by `height`.\n *\n * @property {string} [crossOrigin] What to set the crossOrigin property of images when they are downloaded.\n *    default: undefined. Also see {@link module:twgl.setDefaults}.\n *\n * @memberOf module:twgl\n */\n// NOTE: While querying GL is considered slow it's not remotely as slow\n// as uploading a texture. On top of that you're unlikely to call this in\n// a perf critical loop. Even if upload a texture every frame that's unlikely\n// to be more than 1 or 2 textures a frame. In other words, the benefits of\n// making the API easy to use outweigh any supposed perf benefits\n//\n// Also note I get that having one global of these is bad practice.\n// As long as it's used correctly it means no garbage which probably\n// doesn't matter when dealing with textures but old habits die hard.\n\n\nvar lastPackState = {};\n/**\n * Saves any packing state that will be set based on the options.\n * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @private\n */\n\nfunction savePackState(gl, options) {\n  if (options.colorspaceConversion !== undefined) {\n    lastPackState.colorspaceConversion = gl.getParameter(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL);\n    gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, options.colorspaceConversion);\n  }\n\n  if (options.premultiplyAlpha !== undefined) {\n    lastPackState.premultiplyAlpha = gl.getParameter(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL);\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, options.premultiplyAlpha);\n  }\n\n  if (options.flipY !== undefined) {\n    lastPackState.flipY = gl.getParameter(gl.UNPACK_FLIP_Y_WEBGL);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, options.flipY);\n  }\n}\n/**\n * Restores any packing state that was set based on the options.\n * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @private\n */\n\n\nfunction restorePackState(gl, options) {\n  if (options.colorspaceConversion !== undefined) {\n    gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, lastPackState.colorspaceConversion);\n  }\n\n  if (options.premultiplyAlpha !== undefined) {\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, lastPackState.premultiplyAlpha);\n  }\n\n  if (options.flipY !== undefined) {\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, lastPackState.flipY);\n  }\n}\n/**\n * Saves state related to data size\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @private\n */\n\n\nfunction saveSkipState(gl) {\n  lastPackState.unpackAlignment = gl.getParameter(gl.UNPACK_ALIGNMENT);\n\n  if (utils.isWebGL2(gl)) {\n    lastPackState.unpackRowLength = gl.getParameter(gl.UNPACK_ROW_LENGTH);\n    lastPackState.unpackImageHeight = gl.getParameter(gl.UNPACK_IMAGE_HEIGHT);\n    lastPackState.unpackSkipPixels = gl.getParameter(gl.UNPACK_SKIP_PIXELS);\n    lastPackState.unpackSkipRows = gl.getParameter(gl.UNPACK_SKIP_ROWS);\n    lastPackState.unpackSkipImages = gl.getParameter(gl.UNPACK_SKIP_IMAGES);\n  }\n}\n/**\n * Restores state related to data size\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @private\n */\n\n\nfunction restoreSkipState(gl) {\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, lastPackState.unpackAlignment);\n\n  if (utils.isWebGL2(gl)) {\n    gl.pixelStorei(gl.UNPACK_ROW_LENGTH, lastPackState.unpackRowLength);\n    gl.pixelStorei(gl.UNPACK_IMAGE_HEIGHT, lastPackState.unpackImageHeight);\n    gl.pixelStorei(gl.UNPACK_SKIP_PIXELS, lastPackState.unpackSkipPixels);\n    gl.pixelStorei(gl.UNPACK_SKIP_ROWS, lastPackState.unpackSkipRows);\n    gl.pixelStorei(gl.UNPACK_SKIP_IMAGES, lastPackState.unpackSkipImages);\n  }\n}\n/**\n * Sets the parameters of a texture or sampler\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {number|WebGLSampler} target texture target or sampler\n * @param {function()} parameteriFn texParamteri or samplerParameteri fn\n * @param {WebGLTexture} tex the WebGLTexture to set parameters for\n * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.\n *   This is often the same options you passed in when you created the texture.\n * @private\n */\n\n\nfunction setTextureSamplerParameters(gl, target, parameteriFn, options) {\n  if (options.minMag) {\n    parameteriFn.call(gl, target, gl.TEXTURE_MIN_FILTER, options.minMag);\n    parameteriFn.call(gl, target, gl.TEXTURE_MAG_FILTER, options.minMag);\n  }\n\n  if (options.min) {\n    parameteriFn.call(gl, target, gl.TEXTURE_MIN_FILTER, options.min);\n  }\n\n  if (options.mag) {\n    parameteriFn.call(gl, target, gl.TEXTURE_MAG_FILTER, options.mag);\n  }\n\n  if (options.wrap) {\n    parameteriFn.call(gl, target, gl.TEXTURE_WRAP_S, options.wrap);\n    parameteriFn.call(gl, target, gl.TEXTURE_WRAP_T, options.wrap);\n\n    if (target === gl.TEXTURE_3D || helper.isSampler(gl, target)) {\n      parameteriFn.call(gl, target, gl.TEXTURE_WRAP_R, options.wrap);\n    }\n  }\n\n  if (options.wrapR) {\n    parameteriFn.call(gl, target, gl.TEXTURE_WRAP_R, options.wrapR);\n  }\n\n  if (options.wrapS) {\n    parameteriFn.call(gl, target, gl.TEXTURE_WRAP_S, options.wrapS);\n  }\n\n  if (options.wrapT) {\n    parameteriFn.call(gl, target, gl.TEXTURE_WRAP_T, options.wrapT);\n  }\n\n  if (options.minLod) {\n    parameteriFn.call(gl, target, gl.TEXTURE_MIN_LOD, options.minLod);\n  }\n\n  if (options.maxLod) {\n    parameteriFn.call(gl, target, gl.TEXTURE_MAX_LOD, options.maxLod);\n  }\n\n  if (options.baseLevel) {\n    parameteriFn.call(gl, target, gl.TEXTURE_BASE_LEVEL, options.baseLevel);\n  }\n\n  if (options.maxLevel) {\n    parameteriFn.call(gl, target, gl.TEXTURE_MAX_LEVEL, options.maxLevel);\n  }\n}\n/**\n * Sets the texture parameters of a texture.\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {WebGLTexture} tex the WebGLTexture to set parameters for\n * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.\n *   This is often the same options you passed in when you created the texture.\n * @memberOf module:twgl/textures\n */\n\n\nfunction setTextureParameters(gl, tex, options) {\n  var target = options.target || gl.TEXTURE_2D;\n  gl.bindTexture(target, tex);\n  setTextureSamplerParameters(gl, target, gl.texParameteri, options);\n}\n/**\n * Sets the sampler parameters of a sampler.\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {WebGLSampler} sampler the WebGLSampler to set parameters for\n * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.\n * @memberOf module:twgl/textures\n */\n\n\nfunction setSamplerParameters(gl, sampler, options) {\n  setTextureSamplerParameters(gl, sampler, gl.samplerParameteri, options);\n}\n/**\n * Creates a new sampler object and sets parameters.\n *\n * Example:\n *\n *      const sampler = twgl.createSampler(gl, {\n *        minMag: gl.NEAREST,         // sets both TEXTURE_MIN_FILTER and TEXTURE_MAG_FILTER\n *        wrap: gl.CLAMP_TO_NEAREST,  // sets both TEXTURE_WRAP_S and TEXTURE_WRAP_T and TEXTURE_WRAP_R\n *      });\n *\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {Object.<string,module:twgl.TextureOptions>} options A object of TextureOptions one per sampler.\n * @return {Object.<string,WebGLSampler>} the created samplers by name\n * @private\n */\n\n\nfunction createSampler(gl, options) {\n  var sampler = gl.createSampler();\n  setSamplerParameters(gl, sampler, options);\n  return sampler;\n}\n/**\n * Creates a multiple sampler objects and sets parameters on each.\n *\n * Example:\n *\n *      const samplers = twgl.createSamplers(gl, {\n *        nearest: {\n *          minMag: gl.NEAREST,\n *        },\n *        nearestClampS: {\n *          minMag: gl.NEAREST,\n *          wrapS: gl.CLAMP_TO_NEAREST,\n *        },\n *        linear: {\n *          minMag: gl.LINEAR,\n *        },\n *        nearestClamp: {\n *          minMag: gl.NEAREST,\n *          wrap: gl.CLAMP_TO_EDGE,\n *        },\n *        linearClamp: {\n *          minMag: gl.LINEAR,\n *          wrap: gl.CLAMP_TO_EDGE,\n *        },\n *        linearClampT: {\n *          minMag: gl.LINEAR,\n *          wrapT: gl.CLAMP_TO_EDGE,\n *        },\n *      });\n *\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set on the sampler\n * @private\n */\n\n\nfunction createSamplers(gl, samplerOptions) {\n  var samplers = {};\n  Object.keys(samplerOptions).forEach(function (name) {\n    samplers[name] = createSampler(gl, samplerOptions[name]);\n  });\n  return samplers;\n}\n/**\n * Makes a 1x1 pixel\n * If no color is passed in uses the default color which can be set by calling `setDefaultTextureColor`.\n * @param {(number[]|ArrayBufferView)} [color] The color using 0-1 values\n * @return {Uint8Array} Unit8Array with color.\n * @private\n */\n\n\nfunction make1Pixel(color) {\n  color = color || defaults.textureColor;\n\n  if (isArrayBuffer(color)) {\n    return color;\n  }\n\n  return new Uint8Array([color[0] * 255, color[1] * 255, color[2] * 255, color[3] * 255]);\n}\n/**\n * Sets filtering or generates mips for texture based on width or height\n * If width or height is not passed in uses `options.width` and//or `options.height`\n *\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {WebGLTexture} tex the WebGLTexture to set parameters for\n * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set.\n *   This is often the same options you passed in when you created the texture.\n * @param {number} [width] width of texture\n * @param {number} [height] height of texture\n * @param {number} [internalFormat] The internalFormat parameter from texImage2D etc..\n * @param {number} [type] The type parameter for texImage2D etc..\n * @memberOf module:twgl/textures\n */\n\n\nfunction setTextureFilteringForSize(gl, tex, options, width, height, internalFormat, type) {\n  options = options || defaults.textureOptions;\n  internalFormat = internalFormat || gl.RGBA;\n  type = type || gl.UNSIGNED_BYTE;\n  var target = options.target || gl.TEXTURE_2D;\n  width = width || options.width;\n  height = height || options.height;\n  gl.bindTexture(target, tex);\n\n  if (canGenerateMipmap(gl, width, height, internalFormat, type)) {\n    gl.generateMipmap(target);\n  } else {\n    var filtering = canFilter(internalFormat, type) ? gl.LINEAR : gl.NEAREST;\n    gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, filtering);\n    gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, filtering);\n    gl.texParameteri(target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  }\n}\n\nfunction shouldAutomaticallySetTextureFilteringForSize(options) {\n  return options.auto === true || options.auto === undefined && options.level === undefined;\n}\n/**\n * Gets an array of cubemap face enums\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.\n *   This is often the same options you passed in when you created the texture.\n * @return {number[]} cubemap face enums\n * @private\n */\n\n\nfunction getCubeFaceOrder(gl, options) {\n  options = options || {};\n  return options.cubeFaceOrder || [gl.TEXTURE_CUBE_MAP_POSITIVE_X, gl.TEXTURE_CUBE_MAP_NEGATIVE_X, gl.TEXTURE_CUBE_MAP_POSITIVE_Y, gl.TEXTURE_CUBE_MAP_NEGATIVE_Y, gl.TEXTURE_CUBE_MAP_POSITIVE_Z, gl.TEXTURE_CUBE_MAP_NEGATIVE_Z];\n}\n/**\n * @typedef {Object} FaceInfo\n * @property {number} face gl enum for texImage2D\n * @property {number} ndx face index (0 - 5) into source data\n * @ignore\n */\n\n/**\n * Gets an array of FaceInfos\n * There's a bug in some NVidia drivers that will crash the driver if\n * `gl.TEXTURE_CUBE_MAP_POSITIVE_X` is not uploaded first. So, we take\n * the user's desired order from his faces to WebGL and make sure we\n * do the faces in WebGL order\n *\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.\n * @return {FaceInfo[]} cubemap face infos. Arguably the `face` property of each element is redundent but\n *    it's needed internally to sort the array of `ndx` properties by `face`.\n * @private\n */\n\n\nfunction getCubeFacesWithNdx(gl, options) {\n  var faces = getCubeFaceOrder(gl, options); // work around bug in NVidia drivers. We have to upload the first face first else the driver crashes :(\n\n  var facesWithNdx = faces.map(function (face, ndx) {\n    return {\n      face: face,\n      ndx: ndx\n    };\n  });\n  facesWithNdx.sort(function (a, b) {\n    return a.face - b.face;\n  });\n  return facesWithNdx;\n}\n/**\n * Set a texture from the contents of an element. Will also set\n * texture filtering or generate mips based on the dimensions of the element\n * unless `options.auto === false`. If `target === gl.TEXTURE_CUBE_MAP` will\n * attempt to slice image into 1x6, 2x3, 3x2, or 6x1 images, one for each face.\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {WebGLTexture} tex the WebGLTexture to set parameters for\n * @param {HTMLElement} element a canvas, img, or video element.\n * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set.\n *   This is often the same options you passed in when you created the texture.\n * @memberOf module:twgl/textures\n * @kind function\n */\n\n\nfunction setTextureFromElement(gl, tex, element, options) {\n  options = options || defaults.textureOptions;\n  var target = options.target || gl.TEXTURE_2D;\n  var level = options.level || 0;\n  var width = element.width;\n  var height = element.height;\n  var internalFormat = options.internalFormat || options.format || gl.RGBA;\n  var formatType = getFormatAndTypeForInternalFormat(internalFormat);\n  var format = options.format || formatType.format;\n  var type = options.type || formatType.type;\n  savePackState(gl, options);\n  gl.bindTexture(target, tex);\n\n  if (target === gl.TEXTURE_CUBE_MAP) {\n    // guess the parts\n    var imgWidth = element.width;\n    var imgHeight = element.height;\n    var size;\n    var slices;\n\n    if (imgWidth / 6 === imgHeight) {\n      // It's 6x1\n      size = imgHeight;\n      slices = [0, 0, 1, 0, 2, 0, 3, 0, 4, 0, 5, 0];\n    } else if (imgHeight / 6 === imgWidth) {\n      // It's 1x6\n      size = imgWidth;\n      slices = [0, 0, 0, 1, 0, 2, 0, 3, 0, 4, 0, 5];\n    } else if (imgWidth / 3 === imgHeight / 2) {\n      // It's 3x2\n      size = imgWidth / 3;\n      slices = [0, 0, 1, 0, 2, 0, 0, 1, 1, 1, 2, 1];\n    } else if (imgWidth / 2 === imgHeight / 3) {\n      // It's 2x3\n      size = imgWidth / 2;\n      slices = [0, 0, 1, 0, 0, 1, 1, 1, 0, 2, 1, 2];\n    } else {\n      throw \"can't figure out cube map from element: \" + (element.src ? element.src : element.nodeName);\n    }\n\n    if (ctx) {\n      ctx.canvas.width = size;\n      ctx.canvas.height = size;\n      width = size;\n      height = size;\n      getCubeFacesWithNdx(gl, options).forEach(function (f) {\n        var xOffset = slices[f.ndx * 2 + 0] * size;\n        var yOffset = slices[f.ndx * 2 + 1] * size;\n        ctx.drawImage(element, xOffset, yOffset, size, size, 0, 0, size, size);\n        gl.texImage2D(f.face, level, internalFormat, format, type, ctx.canvas);\n      }); // Free up the canvas memory\n\n      ctx.canvas.width = 1;\n      ctx.canvas.height = 1;\n    } else if (typeof createImageBitmap !== 'undefined') {\n      // NOTE: It seems like we should prefer ImageBitmap because unlike canvas it's\n      // note lossy? (alpha is not premultiplied? although I'm not sure what\n      width = size;\n      height = size;\n      getCubeFacesWithNdx(gl, options).forEach(function (f) {\n        var xOffset = slices[f.ndx * 2 + 0] * size;\n        var yOffset = slices[f.ndx * 2 + 1] * size; // We can't easily use a default texture color here as it would have to match\n        // the type across all faces where as with a 2D one there's only one face\n        // so we're replacing everything all at once. It also has to be the correct size.\n        // On the other hand we need all faces to be the same size so as one face loads\n        // the rest match else the texture will be unrenderable.\n\n        gl.texImage2D(f.face, level, internalFormat, size, size, 0, format, type, null);\n        createImageBitmap(element, xOffset, yOffset, size, size, {\n          premultiplyAlpha: 'none',\n          colorSpaceConversion: 'none'\n        }).then(function (imageBitmap) {\n          savePackState(gl, options);\n          gl.bindTexture(target, tex);\n          gl.texImage2D(f.face, level, internalFormat, format, type, imageBitmap);\n          restorePackState(gl, options);\n\n          if (shouldAutomaticallySetTextureFilteringForSize(options)) {\n            setTextureFilteringForSize(gl, tex, options, width, height, internalFormat, type);\n          }\n        });\n      });\n    }\n  } else if (target === gl.TEXTURE_3D || target === gl.TEXTURE_2D_ARRAY) {\n    var smallest = Math.min(element.width, element.height);\n    var largest = Math.max(element.width, element.height);\n    var depth = largest / smallest;\n\n    if (depth % 1 !== 0) {\n      throw \"can not compute 3D dimensions of element\";\n    }\n\n    var xMult = element.width === largest ? 1 : 0;\n    var yMult = element.height === largest ? 1 : 0;\n    saveSkipState(gl);\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\n    gl.pixelStorei(gl.UNPACK_ROW_LENGTH, element.width);\n    gl.pixelStorei(gl.UNPACK_IMAGE_HEIGHT, 0);\n    gl.pixelStorei(gl.UNPACK_SKIP_IMAGES, 0);\n    gl.texImage3D(target, level, internalFormat, smallest, smallest, smallest, 0, format, type, null);\n\n    for (var d = 0; d < depth; ++d) {\n      var srcX = d * smallest * xMult;\n      var srcY = d * smallest * yMult;\n      gl.pixelStorei(gl.UNPACK_SKIP_PIXELS, srcX);\n      gl.pixelStorei(gl.UNPACK_SKIP_ROWS, srcY);\n      gl.texSubImage3D(target, level, 0, 0, d, smallest, smallest, 1, format, type, element);\n    }\n\n    restoreSkipState(gl);\n  } else {\n    gl.texImage2D(target, level, internalFormat, format, type, element);\n  }\n\n  restorePackState(gl, options);\n\n  if (shouldAutomaticallySetTextureFilteringForSize(options)) {\n    setTextureFilteringForSize(gl, tex, options, width, height, internalFormat, type);\n  }\n\n  setTextureParameters(gl, tex, options);\n}\n\nfunction noop() {}\n/**\n * Checks whether the url's origin is the same so that we can set the `crossOrigin`\n * @param {string} url url to image\n * @returns {boolean} true if the window's origin is the same as image's url\n * @private\n */\n\n\nfunction urlIsSameOrigin(url) {\n  if (typeof document !== 'undefined') {\n    // for IE really\n    var a = document.createElement('a');\n    a.href = url;\n    return a.hostname === location.hostname && a.port === location.port && a.protocol === location.protocol;\n  } else {\n    var localOrigin = new URL(location.href).origin;\n    var urlOrigin = new URL(url, location.href).origin;\n    return urlOrigin === localOrigin;\n  }\n}\n\nfunction setToAnonymousIfUndefinedAndURLIsNotSameOrigin(url, crossOrigin) {\n  return crossOrigin === undefined && !urlIsSameOrigin(url) ? 'anonymous' : crossOrigin;\n}\n/**\n * Loads an image\n * @param {string} url url to image\n * @param {string} crossOrigin\n * @param {function(err, img)} [callback] a callback that's passed an error and the image. The error will be non-null\n *     if there was an error\n * @return {HTMLImageElement} the image being loaded.\n * @private\n */\n\n\nfunction loadImage(url, crossOrigin, callback) {\n  callback = callback || noop;\n  var img;\n  crossOrigin = crossOrigin !== undefined ? crossOrigin : defaults.crossOrigin;\n  crossOrigin = setToAnonymousIfUndefinedAndURLIsNotSameOrigin(url, crossOrigin);\n\n  if (typeof Image !== 'undefined') {\n    img = new Image();\n\n    if (crossOrigin !== undefined) {\n      img.crossOrigin = crossOrigin;\n    }\n\n    var clearEventHandlers = function clearEventHandlers() {\n      img.removeEventListener('error', onError); // eslint-disable-line\n\n      img.removeEventListener('load', onLoad); // eslint-disable-line\n\n      img = null;\n    };\n\n    var onError = function onError() {\n      var msg = \"couldn't load image: \" + url;\n      helper.error(msg);\n      callback(msg, img);\n      clearEventHandlers();\n    };\n\n    var onLoad = function onLoad() {\n      callback(null, img);\n      clearEventHandlers();\n    };\n\n    img.addEventListener('error', onError);\n    img.addEventListener('load', onLoad);\n    img.src = url;\n    return img;\n  } else if (typeof ImageBitmap !== 'undefined') {\n    var err;\n    var bm;\n\n    var cb = function cb() {\n      callback(err, bm);\n    };\n\n    var options = {};\n\n    if (crossOrigin) {\n      options.mode = 'cors'; // TODO: not sure how to translate image.crossOrigin\n    }\n\n    fetch(url, options).then(function (response) {\n      if (!response.ok) {\n        throw response;\n      }\n\n      return response.blob();\n    }).then(function (blob) {\n      return createImageBitmap(blob, {\n        premultiplyAlpha: 'none',\n        colorSpaceConversion: 'none'\n      });\n    }).then(function (bitmap) {\n      // not sure if this works. We don't want\n      // to catch the user's error. So, call\n      // the callback in a timeout so we're\n      // not in this scope inside the promise.\n      bm = bitmap;\n      setTimeout(cb);\n    }).catch(function (e) {\n      err = e;\n      setTimeout(cb);\n    });\n    img = null;\n  }\n\n  return img;\n}\n/**\n * check if object is a TexImageSource\n *\n * @param {Object} obj Object to test\n * @return {boolean} true if object is a TexImageSource\n * @private\n */\n\n\nfunction isTexImageSource(obj) {\n  return typeof ImageBitmap !== 'undefined' && obj instanceof ImageBitmap || typeof ImageData !== 'undefined' && obj instanceof ImageData || typeof HTMLElement !== 'undefined' && obj instanceof HTMLElement;\n}\n/**\n * if obj is an TexImageSource then just\n * uses it otherwise if obj is a string\n * then load it first.\n *\n * @param {string|TexImageSource} obj\n * @param {string} crossOrigin\n * @param {function(err, img)} [callback] a callback that's passed an error and the image. The error will be non-null\n *     if there was an error\n * @private\n */\n\n\nfunction loadAndUseImage(obj, crossOrigin, callback) {\n  if (isTexImageSource(obj)) {\n    setTimeout(function () {\n      callback(null, obj);\n    });\n    return obj;\n  }\n\n  return loadImage(obj, crossOrigin, callback);\n}\n/**\n * Sets a texture to a 1x1 pixel color. If `options.color === false` is nothing happens. If it's not set\n * the default texture color is used which can be set by calling `setDefaultTextureColor`.\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {WebGLTexture} tex the WebGLTexture to set parameters for\n * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set.\n *   This is often the same options you passed in when you created the texture.\n * @memberOf module:twgl/textures\n */\n\n\nfunction setTextureTo1PixelColor(gl, tex, options) {\n  options = options || defaults.textureOptions;\n  var target = options.target || gl.TEXTURE_2D;\n  gl.bindTexture(target, tex);\n\n  if (options.color === false) {\n    return;\n  } // Assume it's a URL\n  // Put 1x1 pixels in texture. That makes it renderable immediately regardless of filtering.\n\n\n  var color = make1Pixel(options.color);\n\n  if (target === gl.TEXTURE_CUBE_MAP) {\n    for (var ii = 0; ii < 6; ++ii) {\n      gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + ii, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, color);\n    }\n  } else if (target === gl.TEXTURE_3D || target === gl.TEXTURE_2D_ARRAY) {\n    gl.texImage3D(target, 0, gl.RGBA, 1, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, color);\n  } else {\n    gl.texImage2D(target, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, color);\n  }\n}\n/**\n * The src image(s) used to create a texture.\n *\n * When you call {@link module:twgl.createTexture} or {@link module:twgl.createTextures}\n * you can pass in urls for images to load into the textures. If it's a single url\n * then this will be a single HTMLImageElement. If it's an array of urls used for a cubemap\n * this will be a corresponding array of images for the cubemap.\n *\n * @typedef {HTMLImageElement|HTMLImageElement[]} TextureSrc\n * @memberOf module:twgl\n */\n\n/**\n * A callback for when an image finished downloading and been uploaded into a texture\n * @callback TextureReadyCallback\n * @param {*} err If truthy there was an error.\n * @param {WebGLTexture} texture the texture.\n * @param {module:twgl.TextureSrc} souce image(s) used to as the src for the texture\n * @memberOf module:twgl\n */\n\n/**\n * A callback for when all images have finished downloading and been uploaded into their respective textures\n * @callback TexturesReadyCallback\n * @param {*} err If truthy there was an error.\n * @param {Object.<string, WebGLTexture>} textures the created textures by name. Same as returned by {@link module:twgl.createTextures}.\n * @param {Object.<string, module:twgl.TextureSrc>} sources the image(s) used for the texture by name.\n * @memberOf module:twgl\n */\n\n/**\n * A callback for when an image finished downloading and been uploaded into a texture\n * @callback CubemapReadyCallback\n * @param {*} err If truthy there was an error.\n * @param {WebGLTexture} tex the texture.\n * @param {HTMLImageElement[]} imgs the images for each face.\n * @memberOf module:twgl\n */\n\n/**\n * A callback for when an image finished downloading and been uploaded into a texture\n * @callback ThreeDReadyCallback\n * @param {*} err If truthy there was an error.\n * @param {WebGLTexture} tex the texture.\n * @param {HTMLImageElement[]} imgs the images for each slice.\n * @memberOf module:twgl\n */\n\n/**\n * Loads a texture from an image from a Url as specified in `options.src`\n * If `options.color !== false` will set the texture to a 1x1 pixel color so that the texture is\n * immediately useable. It will be updated with the contents of the image once the image has finished\n * downloading. Filtering options will be set as approriate for image unless `options.auto === false`.\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {WebGLTexture} tex the WebGLTexture to set parameters for\n * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set.\n * @param {module:twgl.TextureReadyCallback} [callback] A function to be called when the image has finished loading. err will\n *    be non null if there was an error.\n * @return {HTMLImageElement} the image being downloaded.\n * @memberOf module:twgl/textures\n */\n\n\nfunction loadTextureFromUrl(gl, tex, options, callback) {\n  callback = callback || noop;\n  options = options || defaults.textureOptions;\n  setTextureTo1PixelColor(gl, tex, options); // Because it's async we need to copy the options.\n\n  options = Object.assign({}, options);\n  var img = loadAndUseImage(options.src, options.crossOrigin, function (err, img) {\n    if (err) {\n      callback(err, tex, img);\n    } else {\n      setTextureFromElement(gl, tex, img, options);\n      callback(null, tex, img);\n    }\n  });\n  return img;\n}\n/**\n * Loads a cubemap from 6 urls or TexImageSources as specified in `options.src`. Will set the cubemap to a 1x1 pixel color\n * so that it is usable immediately unless `option.color === false`.\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {WebGLTexture} tex the WebGLTexture to set parameters for\n * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.\n * @param {module:twgl.CubemapReadyCallback} [callback] A function to be called when all the images have finished loading. err will\n *    be non null if there was an error.\n * @memberOf module:twgl/textures\n */\n\n\nfunction loadCubemapFromUrls(gl, tex, options, callback) {\n  callback = callback || noop;\n  var urls = options.src;\n\n  if (urls.length !== 6) {\n    throw \"there must be 6 urls for a cubemap\";\n  }\n\n  var level = options.level || 0;\n  var internalFormat = options.internalFormat || options.format || gl.RGBA;\n  var formatType = getFormatAndTypeForInternalFormat(internalFormat);\n  var format = options.format || formatType.format;\n  var type = options.type || gl.UNSIGNED_BYTE;\n  var target = options.target || gl.TEXTURE_2D;\n\n  if (target !== gl.TEXTURE_CUBE_MAP) {\n    throw \"target must be TEXTURE_CUBE_MAP\";\n  }\n\n  setTextureTo1PixelColor(gl, tex, options); // Because it's async we need to copy the options.\n\n  options = Object.assign({}, options);\n  var numToLoad = 6;\n  var errors = [];\n  var faces = getCubeFaceOrder(gl, options);\n  var imgs; // eslint-disable-line\n\n  function uploadImg(faceTarget) {\n    return function (err, img) {\n      --numToLoad;\n\n      if (err) {\n        errors.push(err);\n      } else {\n        if (img.width !== img.height) {\n          errors.push(\"cubemap face img is not a square: \" + img.src);\n        } else {\n          savePackState(gl, options);\n          gl.bindTexture(target, tex); // So assuming this is the first image we now have one face that's img sized\n          // and 5 faces that are 1x1 pixel so size the other faces\n\n          if (numToLoad === 5) {\n            // use the default order\n            getCubeFaceOrder(gl).forEach(function (otherTarget) {\n              // Should we re-use the same face or a color?\n              gl.texImage2D(otherTarget, level, internalFormat, format, type, img);\n            });\n          } else {\n            gl.texImage2D(faceTarget, level, internalFormat, format, type, img);\n          }\n\n          restorePackState(gl, options);\n\n          if (shouldAutomaticallySetTextureFilteringForSize(options)) {\n            gl.generateMipmap(target);\n          }\n        }\n      }\n\n      if (numToLoad === 0) {\n        callback(errors.length ? errors : undefined, tex, imgs);\n      }\n    };\n  }\n\n  imgs = urls.map(function (url, ndx) {\n    return loadAndUseImage(url, options.crossOrigin, uploadImg(faces[ndx]));\n  });\n}\n/**\n * Loads a 2d array or 3d texture from urls OR TexImageSources as specified in `options.src`.\n * Will set the texture to a 1x1 pixel color\n * so that it is usable immediately unless `option.color === false`.\n *\n * If the width and height is not specified the width and height of the first\n * image loaded will be used. Note that since images are loaded async\n * which image downloads first is unknown.\n *\n * If an image is not the same size as the width and height it will be scaled\n * to that width and height.\n *\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {WebGLTexture} tex the WebGLTexture to set parameters for\n * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.\n * @param {module:twgl.ThreeDReadyCallback} [callback] A function to be called when all the images have finished loading. err will\n *    be non null if there was an error.\n * @memberOf module:twgl/textures\n */\n\n\nfunction loadSlicesFromUrls(gl, tex, options, callback) {\n  callback = callback || noop;\n  var urls = options.src;\n  var internalFormat = options.internalFormat || options.format || gl.RGBA;\n  var formatType = getFormatAndTypeForInternalFormat(internalFormat);\n  var format = options.format || formatType.format;\n  var type = options.type || gl.UNSIGNED_BYTE;\n  var target = options.target || gl.TEXTURE_2D_ARRAY;\n\n  if (target !== gl.TEXTURE_3D && target !== gl.TEXTURE_2D_ARRAY) {\n    throw \"target must be TEXTURE_3D or TEXTURE_2D_ARRAY\";\n  }\n\n  setTextureTo1PixelColor(gl, tex, options); // Because it's async we need to copy the options.\n\n  options = Object.assign({}, options);\n  var numToLoad = urls.length;\n  var errors = [];\n  var imgs; // eslint-disable-line\n\n  var level = options.level || 0;\n  var width = options.width;\n  var height = options.height;\n  var depth = urls.length;\n  var firstImage = true;\n\n  function uploadImg(slice) {\n    return function (err, img) {\n      --numToLoad;\n\n      if (err) {\n        errors.push(err);\n      } else {\n        savePackState(gl, options);\n        gl.bindTexture(target, tex);\n\n        if (firstImage) {\n          firstImage = false;\n          width = options.width || img.width;\n          height = options.height || img.height;\n          gl.texImage3D(target, level, internalFormat, width, height, depth, 0, format, type, null); // put it in every slice otherwise some slices will be 0,0,0,0\n\n          for (var s = 0; s < depth; ++s) {\n            gl.texSubImage3D(target, level, 0, 0, s, width, height, 1, format, type, img);\n          }\n        } else {\n          var src = img;\n\n          if (img.width !== width || img.height !== height) {\n            // Size the image to fix\n            src = ctx.canvas;\n            ctx.canvas.width = width;\n            ctx.canvas.height = height;\n            ctx.drawImage(img, 0, 0, width, height);\n          }\n\n          gl.texSubImage3D(target, level, 0, 0, slice, width, height, 1, format, type, src); // free the canvas memory\n\n          if (src === ctx.canvas) {\n            ctx.canvas.width = 0;\n            ctx.canvas.height = 0;\n          }\n        }\n\n        restorePackState(gl, options);\n\n        if (shouldAutomaticallySetTextureFilteringForSize(options)) {\n          gl.generateMipmap(target);\n        }\n      }\n\n      if (numToLoad === 0) {\n        callback(errors.length ? errors : undefined, tex, imgs);\n      }\n    };\n  }\n\n  imgs = urls.map(function (url, ndx) {\n    return loadAndUseImage(url, options.crossOrigin, uploadImg(ndx));\n  });\n}\n/**\n * Sets a texture from an array or typed array. If the width or height is not provided will attempt to\n * guess the size. See {@link module:twgl.TextureOptions}.\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {WebGLTexture} tex the WebGLTexture to set parameters for\n * @param {(number[]|ArrayBufferView)} src An array or typed arry with texture data.\n * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set.\n *   This is often the same options you passed in when you created the texture.\n * @memberOf module:twgl/textures\n */\n\n\nfunction setTextureFromArray(gl, tex, src, options) {\n  options = options || defaults.textureOptions;\n  var target = options.target || gl.TEXTURE_2D;\n  gl.bindTexture(target, tex);\n  var width = options.width;\n  var height = options.height;\n  var depth = options.depth;\n  var level = options.level || 0;\n  var internalFormat = options.internalFormat || options.format || gl.RGBA;\n  var formatType = getFormatAndTypeForInternalFormat(internalFormat);\n  var format = options.format || formatType.format;\n  var type = options.type || getTextureTypeForArrayType(gl, src, formatType.type);\n\n  if (!isArrayBuffer(src)) {\n    var Type = typedArrays.getTypedArrayTypeForGLType(type);\n    src = new Type(src);\n  } else if (src instanceof Uint8ClampedArray) {\n    src = new Uint8Array(src.buffer);\n  }\n\n  var bytesPerElement = getBytesPerElementForInternalFormat(internalFormat, type);\n  var numElements = src.byteLength / bytesPerElement; // TODO: check UNPACK_ALIGNMENT?\n\n  if (numElements % 1) {\n    throw \"length wrong size for format: \" + utils.glEnumToString(gl, format);\n  }\n\n  var dimensions;\n\n  if (target === gl.TEXTURE_3D) {\n    if (!width && !height && !depth) {\n      var size = Math.cbrt(numElements);\n\n      if (size % 1 !== 0) {\n        throw \"can't guess cube size of array of numElements: \" + numElements;\n      }\n\n      width = size;\n      height = size;\n      depth = size;\n    } else if (width && (!height || !depth)) {\n      dimensions = guessDimensions(gl, target, height, depth, numElements / width);\n      height = dimensions.width;\n      depth = dimensions.height;\n    } else if (height && (!width || !depth)) {\n      dimensions = guessDimensions(gl, target, width, depth, numElements / height);\n      width = dimensions.width;\n      depth = dimensions.height;\n    } else {\n      dimensions = guessDimensions(gl, target, width, height, numElements / depth);\n      width = dimensions.width;\n      height = dimensions.height;\n    }\n  } else {\n    dimensions = guessDimensions(gl, target, width, height, numElements);\n    width = dimensions.width;\n    height = dimensions.height;\n  }\n\n  saveSkipState(gl);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, options.unpackAlignment || 1);\n  savePackState(gl, options);\n\n  if (target === gl.TEXTURE_CUBE_MAP) {\n    var elementsPerElement = bytesPerElement / src.BYTES_PER_ELEMENT;\n    var faceSize = numElements / 6 * elementsPerElement;\n    getCubeFacesWithNdx(gl, options).forEach(function (f) {\n      var offset = faceSize * f.ndx;\n      var data = src.subarray(offset, offset + faceSize);\n      gl.texImage2D(f.face, level, internalFormat, width, height, 0, format, type, data);\n    });\n  } else if (target === gl.TEXTURE_3D) {\n    gl.texImage3D(target, level, internalFormat, width, height, depth, 0, format, type, src);\n  } else {\n    gl.texImage2D(target, level, internalFormat, width, height, 0, format, type, src);\n  }\n\n  restorePackState(gl, options);\n  restoreSkipState(gl);\n  return {\n    width: width,\n    height: height,\n    depth: depth,\n    type: type\n  };\n}\n/**\n * Sets a texture with no contents of a certain size. In other words calls `gl.texImage2D` with `null`.\n * You must set `options.width` and `options.height`.\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {WebGLTexture} tex the WebGLTexture to set parameters for\n * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.\n * @memberOf module:twgl/textures\n */\n\n\nfunction setEmptyTexture(gl, tex, options) {\n  var target = options.target || gl.TEXTURE_2D;\n  gl.bindTexture(target, tex);\n  var level = options.level || 0;\n  var internalFormat = options.internalFormat || options.format || gl.RGBA;\n  var formatType = getFormatAndTypeForInternalFormat(internalFormat);\n  var format = options.format || formatType.format;\n  var type = options.type || formatType.type;\n  savePackState(gl, options);\n\n  if (target === gl.TEXTURE_CUBE_MAP) {\n    for (var ii = 0; ii < 6; ++ii) {\n      gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + ii, level, internalFormat, options.width, options.height, 0, format, type, null);\n    }\n  } else if (target === gl.TEXTURE_3D) {\n    gl.texImage3D(target, level, internalFormat, options.width, options.height, options.depth, 0, format, type, null);\n  } else {\n    gl.texImage2D(target, level, internalFormat, options.width, options.height, 0, format, type, null);\n  }\n\n  restorePackState(gl, options);\n}\n/**\n * Creates a texture based on the options passed in.\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set.\n * @param {module:twgl.TextureReadyCallback} [callback] A callback called when an image has been downloaded and uploaded to the texture.\n * @return {WebGLTexture} the created texture.\n * @memberOf module:twgl/textures\n */\n\n\nfunction createTexture(gl, options, callback) {\n  callback = callback || noop;\n  options = options || defaults.textureOptions;\n  var tex = gl.createTexture();\n  var target = options.target || gl.TEXTURE_2D;\n  var width = options.width || 1;\n  var height = options.height || 1;\n  var internalFormat = options.internalFormat || gl.RGBA;\n  var formatType = getFormatAndTypeForInternalFormat(internalFormat);\n  var type = options.type || formatType.type;\n  gl.bindTexture(target, tex);\n\n  if (target === gl.TEXTURE_CUBE_MAP) {\n    // this should have been the default for CUBEMAPS :(\n    gl.texParameteri(target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  }\n\n  var src = options.src;\n\n  if (src) {\n    if (typeof src === \"function\") {\n      src = src(gl, options);\n    }\n\n    if (typeof src === \"string\") {\n      loadTextureFromUrl(gl, tex, options, callback);\n    } else if (isArrayBuffer(src) || Array.isArray(src) && (typeof src[0] === 'number' || Array.isArray(src[0]) || isArrayBuffer(src[0]))) {\n      var dimensions = setTextureFromArray(gl, tex, src, options);\n      width = dimensions.width;\n      height = dimensions.height;\n      type = dimensions.type;\n    } else if (Array.isArray(src) && (typeof src[0] === 'string' || isTexImageSource(src[0]))) {\n      if (target === gl.TEXTURE_CUBE_MAP) {\n        loadCubemapFromUrls(gl, tex, options, callback);\n      } else {\n        loadSlicesFromUrls(gl, tex, options, callback);\n      }\n    } else if (isTexImageSource(src)) {\n      setTextureFromElement(gl, tex, src, options);\n      width = src.width;\n      height = src.height;\n    } else {\n      throw \"unsupported src type\";\n    }\n  } else {\n    setEmptyTexture(gl, tex, options);\n  }\n\n  if (shouldAutomaticallySetTextureFilteringForSize(options)) {\n    setTextureFilteringForSize(gl, tex, options, width, height, internalFormat, type);\n  }\n\n  setTextureParameters(gl, tex, options);\n  return tex;\n}\n/**\n * Resizes a texture based on the options passed in.\n *\n * Note: This is not a generic resize anything function.\n * It's mostly used by {@link module:twgl.resizeFramebufferInfo}\n * It will use `options.src` if it exists to try to determine a `type`\n * otherwise it will assume `gl.UNSIGNED_BYTE`. No data is provided\n * for the texture. Texture parameters will be set accordingly\n *\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {WebGLTexture} tex the texture to resize\n * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.\n * @param {number} [width] the new width. If not passed in will use `options.width`\n * @param {number} [height] the new height. If not passed in will use `options.height`\n * @memberOf module:twgl/textures\n */\n\n\nfunction resizeTexture(gl, tex, options, width, height) {\n  width = width || options.width;\n  height = height || options.height;\n  var target = options.target || gl.TEXTURE_2D;\n  gl.bindTexture(target, tex);\n  var level = options.level || 0;\n  var internalFormat = options.internalFormat || options.format || gl.RGBA;\n  var formatType = getFormatAndTypeForInternalFormat(internalFormat);\n  var format = options.format || formatType.format;\n  var type;\n  var src = options.src;\n\n  if (!src) {\n    type = options.type || formatType.type;\n  } else if (isArrayBuffer(src) || Array.isArray(src) && typeof src[0] === 'number') {\n    type = options.type || getTextureTypeForArrayType(gl, src, formatType.type);\n  } else {\n    type = options.type || formatType.type;\n  }\n\n  if (target === gl.TEXTURE_CUBE_MAP) {\n    for (var ii = 0; ii < 6; ++ii) {\n      gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + ii, level, internalFormat, width, height, 0, format, type, null);\n    }\n  } else {\n    gl.texImage2D(target, level, internalFormat, width, height, 0, format, type, null);\n  }\n}\n/**\n * Check if a src is an async request.\n * if src is a string we're going to download an image\n * if src is an array of strings we're going to download cubemap images\n * @param {*} src The src from a TextureOptions\n * @returns {bool} true if src is async.\n * @private\n */\n\n\nfunction isAsyncSrc(src) {\n  return typeof src === 'string' || Array.isArray(src) && typeof src[0] === 'string';\n}\n/**\n * Creates a bunch of textures based on the passed in options.\n *\n * Example:\n *\n *     const textures = twgl.createTextures(gl, {\n *       // a power of 2 image\n *       hftIcon: { src: \"images/hft-icon-16.png\", mag: gl.NEAREST },\n *       // a non-power of 2 image\n *       clover: { src: \"images/clover.jpg\" },\n *       // From a canvas\n *       fromCanvas: { src: ctx.canvas },\n *       // A cubemap from 6 images\n *       yokohama: {\n *         target: gl.TEXTURE_CUBE_MAP,\n *         src: [\n *           'images/yokohama/posx.jpg',\n *           'images/yokohama/negx.jpg',\n *           'images/yokohama/posy.jpg',\n *           'images/yokohama/negy.jpg',\n *           'images/yokohama/posz.jpg',\n *           'images/yokohama/negz.jpg',\n *         ],\n *       },\n *       // A cubemap from 1 image (can be 1x6, 2x3, 3x2, 6x1)\n *       goldengate: {\n *         target: gl.TEXTURE_CUBE_MAP,\n *         src: 'images/goldengate.jpg',\n *       },\n *       // A 2x2 pixel texture from a JavaScript array\n *       checker: {\n *         mag: gl.NEAREST,\n *         min: gl.LINEAR,\n *         src: [\n *           255,255,255,255,\n *           192,192,192,255,\n *           192,192,192,255,\n *           255,255,255,255,\n *         ],\n *       },\n *       // a 1x2 pixel texture from a typed array.\n *       stripe: {\n *         mag: gl.NEAREST,\n *         min: gl.LINEAR,\n *         format: gl.LUMINANCE,\n *         src: new Uint8Array([\n *           255,\n *           128,\n *           255,\n *           128,\n *           255,\n *           128,\n *           255,\n *           128,\n *         ]),\n *         width: 1,\n *       },\n *     });\n *\n * Now\n *\n * *   `textures.hftIcon` will be a 2d texture\n * *   `textures.clover` will be a 2d texture\n * *   `textures.fromCanvas` will be a 2d texture\n * *   `textures.yohohama` will be a cubemap texture\n * *   `textures.goldengate` will be a cubemap texture\n * *   `textures.checker` will be a 2d texture\n * *   `textures.stripe` will be a 2d texture\n *\n * @param {WebGLRenderingContext} gl the WebGLRenderingContext\n * @param {Object.<string,module:twgl.TextureOptions>} options A object of TextureOptions one per texture.\n * @param {module:twgl.TexturesReadyCallback} [callback] A callback called when all textures have been downloaded.\n * @return {Object.<string,WebGLTexture>} the created textures by name\n * @memberOf module:twgl/textures\n */\n\n\nfunction createTextures(gl, textureOptions, callback) {\n  callback = callback || noop;\n  var numDownloading = 0;\n  var errors = [];\n  var textures = {};\n  var images = {};\n\n  function callCallbackIfReady() {\n    if (numDownloading === 0) {\n      setTimeout(function () {\n        callback(errors.length ? errors : undefined, textures, images);\n      }, 0);\n    }\n  }\n\n  Object.keys(textureOptions).forEach(function (name) {\n    var options = textureOptions[name];\n    var onLoadFn;\n\n    if (isAsyncSrc(options.src)) {\n      onLoadFn = function onLoadFn(err, tex, img) {\n        images[name] = img;\n        --numDownloading;\n\n        if (err) {\n          errors.push(err);\n        }\n\n        callCallbackIfReady();\n      };\n\n      ++numDownloading;\n    }\n\n    textures[name] = createTexture(gl, options, onLoadFn);\n  }); // queue the callback if there are no images to download.\n  // We do this because if your code is structured to wait for\n  // images to download but then you comment out all the async\n  // images your code would break.\n\n  callCallbackIfReady();\n  return textures;\n} // Using quotes prevents Uglify from changing the names.\n// No speed diff AFAICT.\n\n/***/ }),\n\n/***/ \"./src/twgl-full.js\":\n/*!**************************!*\\\n  !*** ./src/twgl-full.js ***!\n  \\**************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nvar _exportNames = {\n  m4: true,\n  v3: true,\n  primitives: true\n};\nexports.primitives = exports.v3 = exports.m4 = void 0;\n\nvar m4 = _interopRequireWildcard(__webpack_require__(/*! ./m4.js */ \"./src/m4.js\"));\n\nexports.m4 = m4;\n\nvar v3 = _interopRequireWildcard(__webpack_require__(/*! ./v3.js */ \"./src/v3.js\"));\n\nexports.v3 = v3;\n\nvar primitives = _interopRequireWildcard(__webpack_require__(/*! ./primitives.js */ \"./src/primitives.js\"));\n\nexports.primitives = primitives;\n\nvar _twgl = __webpack_require__(/*! ./twgl.js */ \"./src/twgl.js\");\n\nObject.keys(_twgl).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  exports[key] = _twgl[key];\n});\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\n/***/ }),\n\n/***/ \"./src/twgl.js\":\n/*!*********************!*\\\n  !*** ./src/twgl.js ***!\n  \\*********************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nvar _exportNames = {\n  addExtensionsToContext: true,\n  getContext: true,\n  getWebGLContext: true,\n  resizeCanvasToDisplaySize: true,\n  setDefaults: true\n};\nexports.addExtensionsToContext = addExtensionsToContext;\nexports.getContext = getContext;\nexports.getWebGLContext = getWebGLContext;\nexports.resizeCanvasToDisplaySize = resizeCanvasToDisplaySize;\nexports.setDefaults = setDefaults;\n\nvar attributes = _interopRequireWildcard(__webpack_require__(/*! ./attributes.js */ \"./src/attributes.js\"));\n\nObject.keys(attributes).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  exports[key] = attributes[key];\n});\n\nvar textures = _interopRequireWildcard(__webpack_require__(/*! ./textures.js */ \"./src/textures.js\"));\n\nObject.keys(textures).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  exports[key] = textures[key];\n});\n\nvar helper = _interopRequireWildcard(__webpack_require__(/*! ./helper.js */ \"./src/helper.js\"));\n\nvar utils = _interopRequireWildcard(__webpack_require__(/*! ./utils.js */ \"./src/utils.js\"));\n\nObject.keys(utils).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  exports[key] = utils[key];\n});\n\nvar _draw = __webpack_require__(/*! ./draw.js */ \"./src/draw.js\");\n\nObject.keys(_draw).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  exports[key] = _draw[key];\n});\n\nvar _framebuffers = __webpack_require__(/*! ./framebuffers.js */ \"./src/framebuffers.js\");\n\nObject.keys(_framebuffers).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  exports[key] = _framebuffers[key];\n});\n\nvar _programs = __webpack_require__(/*! ./programs.js */ \"./src/programs.js\");\n\nObject.keys(_programs).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  exports[key] = _programs[key];\n});\n\nvar _typedarrays = __webpack_require__(/*! ./typedarrays.js */ \"./src/typedarrays.js\");\n\nObject.keys(_typedarrays).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  exports[key] = _typedarrays[key];\n});\n\nvar _vertexArrays = __webpack_require__(/*! ./vertex-arrays.js */ \"./src/vertex-arrays.js\");\n\nObject.keys(_vertexArrays).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  exports[key] = _vertexArrays[key];\n});\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * The main TWGL module.\n *\n * For most use cases you shouldn't need anything outside this module.\n * Exceptions between the stuff added to twgl-full (v3, m4, primitives)\n *\n * @module twgl\n * @borrows module:twgl/attributes.setAttribInfoBufferFromArray as setAttribInfoBufferFromArray\n * @borrows module:twgl/attributes.createBufferInfoFromArrays as createBufferInfoFromArrays\n * @borrows module:twgl/attributes.createVertexArrayInfo as createVertexArrayInfo\n * @borrows module:twgl/draw.drawBufferInfo as drawBufferInfo\n * @borrows module:twgl/draw.drawObjectList as drawObjectList\n * @borrows module:twgl/framebuffers.createFramebufferInfo as createFramebufferInfo\n * @borrows module:twgl/framebuffers.resizeFramebufferInfo as resizeFramebufferInfo\n * @borrows module:twgl/framebuffers.bindFramebufferInfo as bindFramebufferInfo\n * @borrows module:twgl/programs.createProgramInfo as createProgramInfo\n * @borrows module:twgl/programs.createUniformBlockInfo as createUniformBlockInfo\n * @borrows module:twgl/programs.bindUniformBlock as bindUniformBlock\n * @borrows module:twgl/programs.setUniformBlock as setUniformBlock\n * @borrows module:twgl/programs.setBlockUniforms as setBlockUniforms\n * @borrows module:twgl/programs.setUniforms as setUniforms\n * @borrows module:twgl/programs.setBuffersAndAttributes as setBuffersAndAttributes\n * @borrows module:twgl/textures.setTextureFromArray as setTextureFromArray\n * @borrows module:twgl/textures.createTexture as createTexture\n * @borrows module:twgl/textures.resizeTexture as resizeTexture\n * @borrows module:twgl/textures.createTextures as createTextures\n */\n// make sure we don't see a global gl\nvar gl = undefined; // eslint-disable-line\n\nvar defaults = {\n  addExtensionsToContext: true\n};\n/**\n * Various default settings for twgl.\n *\n * Note: You can call this any number of times. Example:\n *\n *     twgl.setDefaults({ textureColor: [1, 0, 0, 1] });\n *     twgl.setDefaults({ attribPrefix: 'a_' });\n *\n * is equivalent to\n *\n *     twgl.setDefaults({\n *       textureColor: [1, 0, 0, 1],\n *       attribPrefix: 'a_',\n *     });\n *\n * @typedef {Object} Defaults\n * @property {string} [attribPrefix] The prefix to stick on attributes\n *\n *   When writing shaders I prefer to name attributes with `a_`, uniforms with `u_` and varyings with `v_`\n *   as it makes it clear where they came from. But, when building geometry I prefer using unprefixed names.\n *\n *   In otherwords I'll create arrays of geometry like this\n *\n *       const arrays = {\n *         position: ...\n *         normal: ...\n *         texcoord: ...\n *       };\n *\n *   But need those mapped to attributes and my attributes start with `a_`.\n *\n *   Default: `\"\"`\n *\n * @property {number[]} [textureColor] Array of 4 values in the range 0 to 1\n *\n *   The default texture color is used when loading textures from\n *   urls. Because the URL will be loaded async we'd like to be\n *   able to use the texture immediately. By putting a 1x1 pixel\n *   color in the texture we can start using the texture before\n *   the URL has loaded.\n *\n *   Default: `[0.5, 0.75, 1, 1]`\n *\n * @property {string} [crossOrigin]\n *\n *   If not undefined sets the crossOrigin attribute on images\n *   that twgl creates when downloading images for textures.\n *\n *   Also see {@link module:twgl.TextureOptions}.\n *\n * @property {bool} [addExtensionsToContext]\n *\n *   If true, then, when twgl will try to add any supported WebGL extensions\n *   directly to the context under their normal GL names. For example\n *   if ANGLE_instances_arrays exists then twgl would enable it,\n *   add the functions `vertexAttribDivisor`, `drawArraysInstanced`,\n *   `drawElementsInstanced`, and the constant `VERTEX_ATTRIB_ARRAY_DIVISOR`\n *   to the `WebGLRenderingContext`.\n *\n * @memberOf module:twgl\n */\n\n/**\n * Sets various defaults for twgl.\n *\n * In the interest of terseness which is kind of the point\n * of twgl I've integrated a few of the older functions here\n *\n * @param {module:twgl.Defaults} newDefaults The default settings.\n * @memberOf module:twgl\n */\n\nfunction setDefaults(newDefaults) {\n  helper.copyExistingProperties(newDefaults, defaults);\n  attributes.setAttributeDefaults_(newDefaults); // eslint-disable-line\n\n  textures.setTextureDefaults_(newDefaults); // eslint-disable-line\n}\n\nvar prefixRE = /^(.*?)_/;\n\nfunction addExtensionToContext(gl, extensionName) {\n  utils.glEnumToString(gl, 0);\n  var ext = gl.getExtension(extensionName);\n\n  if (ext) {\n    var enums = {};\n    var fnSuffix = prefixRE.exec(extensionName)[1];\n    var enumSuffix = '_' + fnSuffix;\n\n    for (var key in ext) {\n      var value = ext[key];\n      var isFunc = typeof value === 'function';\n      var suffix = isFunc ? fnSuffix : enumSuffix;\n      var name = key; // examples of where this is not true are WEBGL_compressed_texture_s3tc\n      // and WEBGL_compressed_texture_pvrtc\n\n      if (key.endsWith(suffix)) {\n        name = key.substring(0, key.length - suffix.length);\n      }\n\n      if (gl[name] !== undefined) {\n        if (!isFunc && gl[name] !== value) {\n          helper.warn(name, gl[name], value, key);\n        }\n      } else {\n        if (isFunc) {\n          gl[name] = function (origFn) {\n            return function () {\n              return origFn.apply(ext, arguments);\n            };\n          }(value);\n        } else {\n          gl[name] = value;\n          enums[name] = value;\n        }\n      }\n    } // pass the modified enums to glEnumToString\n\n\n    enums.constructor = {\n      name: ext.constructor.name\n    };\n    utils.glEnumToString(enums, 0);\n  }\n\n  return ext;\n}\n/*\n * If you're wondering why the code doesn't just iterate\n * over all extensions using `gl.getExtensions` is that it's possible\n * some future extension is incompatible with this code. Rather than\n * have thing suddenly break it seems better to manually add to this\n * list.\n *\n */\n\n\nvar supportedExtensions = ['ANGLE_instanced_arrays', 'EXT_blend_minmax', 'EXT_color_buffer_float', 'EXT_color_buffer_half_float', 'EXT_disjoint_timer_query', 'EXT_disjoint_timer_query_webgl2', 'EXT_frag_depth', 'EXT_sRGB', 'EXT_shader_texture_lod', 'EXT_texture_filter_anisotropic', 'OES_element_index_uint', 'OES_standard_derivatives', 'OES_texture_float', 'OES_texture_float_linear', 'OES_texture_half_float', 'OES_texture_half_float_linear', 'OES_vertex_array_object', 'WEBGL_color_buffer_float', 'WEBGL_compressed_texture_atc', 'WEBGL_compressed_texture_etc1', 'WEBGL_compressed_texture_pvrtc', 'WEBGL_compressed_texture_s3tc', 'WEBGL_compressed_texture_s3tc_srgb', 'WEBGL_depth_texture', 'WEBGL_draw_buffers'];\n/**\n * Attempts to enable all of the following extensions\n * and add their functions and constants to the\n * `WebGLRenderingContext` using their normal non-extension like names.\n *\n *      ANGLE_instanced_arrays\n *      EXT_blend_minmax\n *      EXT_color_buffer_float\n *      EXT_color_buffer_half_float\n *      EXT_disjoint_timer_query\n *      EXT_disjoint_timer_query_webgl2\n *      EXT_frag_depth\n *      EXT_sRGB\n *      EXT_shader_texture_lod\n *      EXT_texture_filter_anisotropic\n *      OES_element_index_uint\n *      OES_standard_derivatives\n *      OES_texture_float\n *      OES_texture_float_linear\n *      OES_texture_half_float\n *      OES_texture_half_float_linear\n *      OES_vertex_array_object\n *      WEBGL_color_buffer_float\n *      WEBGL_compressed_texture_atc\n *      WEBGL_compressed_texture_etc1\n *      WEBGL_compressed_texture_pvrtc\n *      WEBGL_compressed_texture_s3tc\n *      WEBGL_compressed_texture_s3tc_srgb\n *      WEBGL_depth_texture\n *      WEBGL_draw_buffers\n *\n * For example if `ANGLE_instanced_arrays` exists then the functions\n * `drawArraysInstanced`, `drawElementsInstanced`, `vertexAttribDivisor`\n * and the constant `VERTEX_ATTRIB_ARRAY_DIVISOR` are added to the\n * `WebGLRenderingContext`.\n *\n * Note that if you want to know if the extension exists you should\n * probably call `gl.getExtension` for each extension. Alternatively\n * you can check for the existance of the functions or constants that\n * are expected to be added. For example\n *\n *    if (gl.drawBuffers) {\n *      // Either WEBGL_draw_buffers was enabled OR you're running in WebGL2\n *      ....\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @memberOf module:twgl\n */\n\nfunction addExtensionsToContext(gl) {\n  for (var ii = 0; ii < supportedExtensions.length; ++ii) {\n    addExtensionToContext(gl, supportedExtensions[ii]);\n  }\n}\n/**\n * Creates a webgl context.\n * @param {HTMLCanvasElement} canvas The canvas tag to get\n *     context from. If one is not passed in one will be\n *     created.\n * @return {WebGLRenderingContext} The created context.\n * @private\n */\n\n\nfunction create3DContext(canvas, opt_attribs) {\n  var names = [\"webgl\", \"experimental-webgl\"];\n  var context = null;\n\n  for (var ii = 0; ii < names.length; ++ii) {\n    context = canvas.getContext(names[ii], opt_attribs);\n\n    if (context) {\n      if (defaults.addExtensionsToContext) {\n        addExtensionsToContext(context);\n      }\n\n      break;\n    }\n  }\n\n  return context;\n}\n/**\n * Gets a WebGL1 context.\n *\n * Note: Will attempt to enable Vertex Array Objects\n * and add WebGL2 entry points. (unless you first set defaults with\n * `twgl.setDefaults({enableVertexArrayObjects: false})`;\n *\n * @param {HTMLCanvasElement} canvas a canvas element.\n * @param {WebGLContextAttributes} [opt_attribs] optional webgl context creation attributes\n * @return {WebGLRenderingContext} The created context.\n * @memberOf module:twgl\n */\n\n\nfunction getWebGLContext(canvas, opt_attribs) {\n  var gl = create3DContext(canvas, opt_attribs);\n  return gl;\n}\n/**\n * Creates a webgl context.\n *\n * Will return a WebGL2 context if possible.\n *\n * You can check if it's WebGL2 with\n *\n *     twgl.isWebGL2(gl);\n *\n * @param {HTMLCanvasElement} canvas The canvas tag to get\n *     context from. If one is not passed in one will be\n *     created.\n * @return {WebGLRenderingContext} The created context.\n */\n\n\nfunction createContext(canvas, opt_attribs) {\n  var names = [\"webgl2\", \"webgl\", \"experimental-webgl\"];\n  var context = null;\n\n  for (var ii = 0; ii < names.length; ++ii) {\n    context = canvas.getContext(names[ii], opt_attribs);\n\n    if (context) {\n      if (defaults.addExtensionsToContext) {\n        addExtensionsToContext(context);\n      }\n\n      break;\n    }\n  }\n\n  return context;\n}\n/**\n * Gets a WebGL context.  Will create a WebGL2 context if possible.\n *\n * You can check if it's WebGL2 with\n *\n *    function isWebGL2(gl) {\n *      return gl.getParameter(gl.VERSION).indexOf(\"WebGL 2.0 \") == 0;\n *    }\n *\n * Note: For a WebGL1 context will attempt to enable Vertex Array Objects\n * and add WebGL2 entry points. (unless you first set defaults with\n * `twgl.setDefaults({enableVertexArrayObjects: false})`;\n *\n * @param {HTMLCanvasElement} canvas a canvas element.\n * @param {WebGLContextAttributes} [opt_attribs] optional webgl context creation attributes\n * @return {WebGLRenderingContext} The created context.\n * @memberOf module:twgl\n */\n\n\nfunction getContext(canvas, opt_attribs) {\n  var gl = createContext(canvas, opt_attribs);\n  return gl;\n}\n/**\n * Resize a canvas to match the size it's displayed.\n * @param {HTMLCanvasElement} canvas The canvas to resize.\n * @param {number} [multiplier] So you can pass in `window.devicePixelRatio` or other scale value if you want to.\n * @return {boolean} true if the canvas was resized.\n * @memberOf module:twgl\n */\n\n\nfunction resizeCanvasToDisplaySize(canvas, multiplier) {\n  multiplier = multiplier || 1;\n  multiplier = Math.max(0, multiplier);\n  var width = canvas.clientWidth * multiplier | 0;\n  var height = canvas.clientHeight * multiplier | 0;\n\n  if (canvas.width !== width || canvas.height !== height) {\n    canvas.width = width;\n    canvas.height = height;\n    return true;\n  }\n\n  return false;\n}\n\n/***/ }),\n\n/***/ \"./src/typedarrays.js\":\n/*!****************************!*\\\n  !*** ./src/typedarrays.js ***!\n  \\****************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.getGLTypeForTypedArray = getGLTypeForTypedArray;\nexports.getGLTypeForTypedArrayType = getGLTypeForTypedArrayType;\nexports.getTypedArrayTypeForGLType = getTypedArrayTypeForGLType;\nexports.isArrayBuffer = void 0;\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Low level shader typed array related functions\n *\n * You should generally not need to use these functions. They are provided\n * for those cases where you're doing something out of the ordinary\n * and you need lower level access.\n *\n * For backward compatibily they are available at both `twgl.typedArray` and `twgl`\n * itself\n *\n * See {@link module:twgl} for core functions\n *\n * @module twgl/typedArray\n */\n// make sure we don't see a global gl\nvar gl = undefined; // eslint-disable-line\n\n/* DataType */\n\nvar BYTE = 0x1400;\nvar UNSIGNED_BYTE = 0x1401;\nvar SHORT = 0x1402;\nvar UNSIGNED_SHORT = 0x1403;\nvar INT = 0x1404;\nvar UNSIGNED_INT = 0x1405;\nvar FLOAT = 0x1406;\nvar UNSIGNED_SHORT_4_4_4_4 = 0x8033;\nvar UNSIGNED_SHORT_5_5_5_1 = 0x8034;\nvar UNSIGNED_SHORT_5_6_5 = 0x8363;\nvar HALF_FLOAT = 0x140B;\nvar UNSIGNED_INT_2_10_10_10_REV = 0x8368;\nvar UNSIGNED_INT_10F_11F_11F_REV = 0x8C3B;\nvar UNSIGNED_INT_5_9_9_9_REV = 0x8C3E;\nvar FLOAT_32_UNSIGNED_INT_24_8_REV = 0x8DAD;\nvar UNSIGNED_INT_24_8 = 0x84FA;\nvar glTypeToTypedArray = {};\n{\n  var tt = glTypeToTypedArray;\n  tt[BYTE] = Int8Array;\n  tt[UNSIGNED_BYTE] = Uint8Array;\n  tt[SHORT] = Int16Array;\n  tt[UNSIGNED_SHORT] = Uint16Array;\n  tt[INT] = Int32Array;\n  tt[UNSIGNED_INT] = Uint32Array;\n  tt[FLOAT] = Float32Array;\n  tt[UNSIGNED_SHORT_4_4_4_4] = Uint16Array;\n  tt[UNSIGNED_SHORT_5_5_5_1] = Uint16Array;\n  tt[UNSIGNED_SHORT_5_6_5] = Uint16Array;\n  tt[HALF_FLOAT] = Uint16Array;\n  tt[UNSIGNED_INT_2_10_10_10_REV] = Uint32Array;\n  tt[UNSIGNED_INT_10F_11F_11F_REV] = Uint32Array;\n  tt[UNSIGNED_INT_5_9_9_9_REV] = Uint32Array;\n  tt[FLOAT_32_UNSIGNED_INT_24_8_REV] = Uint32Array;\n  tt[UNSIGNED_INT_24_8] = Uint32Array;\n}\n/**\n * Get the GL type for a typedArray\n * @param {ArrayBufferView} typedArray a typedArray\n * @return {number} the GL type for array. For example pass in an `Int8Array` and `gl.BYTE` will\n *   be returned. Pass in a `Uint32Array` and `gl.UNSIGNED_INT` will be returned\n * @memberOf module:twgl/typedArray\n */\n\nfunction getGLTypeForTypedArray(typedArray) {\n  if (typedArray instanceof Int8Array) {\n    return BYTE;\n  } // eslint-disable-line\n\n\n  if (typedArray instanceof Uint8Array) {\n    return UNSIGNED_BYTE;\n  } // eslint-disable-line\n\n\n  if (typedArray instanceof Uint8ClampedArray) {\n    return UNSIGNED_BYTE;\n  } // eslint-disable-line\n\n\n  if (typedArray instanceof Int16Array) {\n    return SHORT;\n  } // eslint-disable-line\n\n\n  if (typedArray instanceof Uint16Array) {\n    return UNSIGNED_SHORT;\n  } // eslint-disable-line\n\n\n  if (typedArray instanceof Int32Array) {\n    return INT;\n  } // eslint-disable-line\n\n\n  if (typedArray instanceof Uint32Array) {\n    return UNSIGNED_INT;\n  } // eslint-disable-line\n\n\n  if (typedArray instanceof Float32Array) {\n    return FLOAT;\n  } // eslint-disable-line\n\n\n  throw new Error('unsupported typed array type');\n}\n/**\n * Get the GL type for a typedArray type\n * @param {ArrayBufferView} typedArrayType a typedArray constructor\n * @return {number} the GL type for type. For example pass in `Int8Array` and `gl.BYTE` will\n *   be returned. Pass in `Uint32Array` and `gl.UNSIGNED_INT` will be returned\n * @memberOf module:twgl/typedArray\n */\n\n\nfunction getGLTypeForTypedArrayType(typedArrayType) {\n  if (typedArrayType === Int8Array) {\n    return BYTE;\n  } // eslint-disable-line\n\n\n  if (typedArrayType === Uint8Array) {\n    return UNSIGNED_BYTE;\n  } // eslint-disable-line\n\n\n  if (typedArrayType === Uint8ClampedArray) {\n    return UNSIGNED_BYTE;\n  } // eslint-disable-line\n\n\n  if (typedArrayType === Int16Array) {\n    return SHORT;\n  } // eslint-disable-line\n\n\n  if (typedArrayType === Uint16Array) {\n    return UNSIGNED_SHORT;\n  } // eslint-disable-line\n\n\n  if (typedArrayType === Int32Array) {\n    return INT;\n  } // eslint-disable-line\n\n\n  if (typedArrayType === Uint32Array) {\n    return UNSIGNED_INT;\n  } // eslint-disable-line\n\n\n  if (typedArrayType === Float32Array) {\n    return FLOAT;\n  } // eslint-disable-line\n\n\n  throw new Error('unsupported typed array type');\n}\n/**\n * Get the typed array constructor for a given GL type\n * @param {number} type the GL type. (eg: `gl.UNSIGNED_INT`)\n * @return {function} the constructor for a the corresponding typed array. (eg. `Uint32Array`).\n * @memberOf module:twgl/typedArray\n */\n\n\nfunction getTypedArrayTypeForGLType(type) {\n  var CTOR = glTypeToTypedArray[type];\n\n  if (!CTOR) {\n    throw new Error('unknown gl type');\n  }\n\n  return CTOR;\n}\n\nvar isArrayBuffer = typeof SharedArrayBuffer !== 'undefined' ? function isArrayBufferOrSharedArrayBuffer(a) {\n  return a && a.buffer && (a.buffer instanceof ArrayBuffer || a.buffer instanceof SharedArrayBuffer);\n} : function isArrayBuffer(a) {\n  return a && a.buffer && a.buffer instanceof ArrayBuffer;\n};\nexports.isArrayBuffer = isArrayBuffer;\n\n/***/ }),\n\n/***/ \"./src/utils.js\":\n/*!**********************!*\\\n  !*** ./src/utils.js ***!\n  \\**********************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.isWebGL1 = isWebGL1;\nexports.isWebGL2 = isWebGL2;\nexports.glEnumToString = void 0;\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Gets the gl version as a number\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @return {number} version of gl\n * @private\n */\n//function getVersionAsNumber(gl) {\n//  return parseFloat(gl.getParameter(gl.VERSION).substr(6));\n//}\n\n/**\n * Check if context is WebGL 2.0\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @return {bool} true if it's WebGL 2.0\n * @memberOf module:twgl\n */\nfunction isWebGL2(gl) {\n  // This is the correct check but it's slow\n  //  return gl.getParameter(gl.VERSION).indexOf(\"WebGL 2.0\") === 0;\n  // This might also be the correct check but I'm assuming it's slow-ish\n  // return gl instanceof WebGL2RenderingContext;\n  return !!gl.texStorage2D;\n}\n/**\n * Check if context is WebGL 1.0\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @return {bool} true if it's WebGL 1.0\n * @memberOf module:twgl\n */\n\n\nfunction isWebGL1(gl) {\n  // This is the correct check but it's slow\n  // const version = getVersionAsNumber(gl);\n  // return version <= 1.0 && version > 0.0;  // because as of 2016/5 Edge returns 0.96\n  // This might also be the correct check but I'm assuming it's slow-ish\n  // return gl instanceof WebGLRenderingContext;\n  return !gl.texStorage2D;\n}\n/**\n * Gets a string for WebGL enum\n *\n * Note: Several enums are the same. Without more\n * context (which function) it's impossible to always\n * give the correct enum. As it is, for matching values\n * it gives all enums. Checking the WebGL2RenderingContext\n * that means\n *\n *      0     = ZERO | POINT | NONE | NO_ERROR\n *      1     = ONE | LINES | SYNC_FLUSH_COMMANDS_BIT\n *      32777 = BLEND_EQUATION_RGB | BLEND_EQUATION_RGB\n *      36662 = COPY_READ_BUFFER | COPY_READ_BUFFER_BINDING\n *      36663 = COPY_WRITE_BUFFER | COPY_WRITE_BUFFER_BINDING\n *      36006 = FRAMEBUFFER_BINDING | DRAW_FRAMEBUFFER_BINDING\n *\n * It's also not useful for bits really unless you pass in individual bits.\n * In other words\n *\n *     const bits = gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT;\n *     twgl.glEnumToString(gl, bits);  // not going to work\n *\n * Note that some enums only exist on extensions. If you\n * want them to show up you need to pass the extension at least\n * once. For example\n *\n *     const ext = gl.getExtension('WEBGL_compressed_texture_s3tc');\n *     if (ext) {\n *        twgl.glEnumToString(ext, 0);  // just prime the function\n *\n *        ..later..\n *\n *        const internalFormat = ext.COMPRESSED_RGB_S3TC_DXT1_EXT;\n *        console.log(twgl.glEnumToString(gl, internalFormat));\n *\n * Notice I didn't have to pass the extension the second time. This means\n * you can have place that generically gets an enum for texture formats for example.\n * and as long as you primed the function with the extensions\n *\n * If you're using `twgl.addExtensionsToContext` to enable your extensions\n * then twgl will automatically get the extension's enums.\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext or any extension object\n * @param {number} value the value of the enum you want to look up.\n * @return {string} enum string or hex value\n * @memberOf module:twgl\n * @function glEnumToString\n */\n\n\nvar glEnumToString = function () {\n  var haveEnumsForType = {};\n  var enums = {};\n\n  function addEnums(gl) {\n    var type = gl.constructor.name;\n\n    if (!haveEnumsForType[type]) {\n      for (var key in gl) {\n        if (typeof gl[key] === 'number') {\n          var existing = enums[gl[key]];\n          enums[gl[key]] = existing ? \"\".concat(existing, \" | \").concat(key) : key;\n        }\n      }\n\n      haveEnumsForType[type] = true;\n    }\n  }\n\n  return function glEnumToString(gl, value) {\n    addEnums(gl);\n    return enums[value] || \"0x\" + value.toString(16);\n  };\n}();\n\nexports.glEnumToString = glEnumToString;\n\n/***/ }),\n\n/***/ \"./src/v3.js\":\n/*!*******************!*\\\n  !*** ./src/v3.js ***!\n  \\*******************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.add = add;\nexports.copy = copy;\nexports.create = create;\nexports.cross = cross;\nexports.distance = distance;\nexports.distanceSq = distanceSq;\nexports.divide = divide;\nexports.divScalar = divScalar;\nexports.dot = dot;\nexports.lerp = lerp;\nexports.lerpV = lerpV;\nexports.length = length;\nexports.lengthSq = lengthSq;\nexports.max = max;\nexports.min = min;\nexports.mulScalar = mulScalar;\nexports.multiply = multiply;\nexports.negate = negate;\nexports.normalize = normalize;\nexports.setDefaultType = setDefaultType;\nexports.subtract = subtract;\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n *\n * Vec3 math math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new Vec3. In other words you can do this\n *\n *     var v = v3.cross(v1, v2);  // Creates a new Vec3 with the cross product of v1 x v2.\n *\n * or\n *\n *     var v3 = v3.create();\n *     v3.cross(v1, v2, v);  // Puts the cross product of v1 x v2 in v\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always save to pass any vector as the destination. So for example\n *\n *     v3.cross(v1, v2, v1);  // Puts the cross product of v1 x v2 in v1\n *\n * @module twgl/v3\n */\nvar VecType = Float32Array;\n/**\n * A JavaScript array with 3 values or a Float32Array with 3 values.\n * When created by the library will create the default type which is `Float32Array`\n * but can be set by calling {@link module:twgl/v3.setDefaultType}.\n * @typedef {(number[]|Float32Array)} Vec3\n * @memberOf module:twgl/v3\n */\n\n/**\n * Sets the type this library creates for a Vec3\n * @param {constructor} ctor the constructor for the type. Either `Float32Array` or `Array`\n * @return {constructor} previous constructor for Vec3\n * @memberOf module:twgl/v3\n */\n\nfunction setDefaultType(ctor) {\n  var oldType = VecType;\n  VecType = ctor;\n  return oldType;\n}\n/**\n * Creates a vec3; may be called with x, y, z to set initial values.\n * @return {module:twgl/v3.Vec3} the created vector\n * @memberOf module:twgl/v3\n */\n\n\nfunction create(x, y, z) {\n  var dst = new VecType(3);\n\n  if (x) {\n    dst[0] = x;\n  }\n\n  if (y) {\n    dst[1] = y;\n  }\n\n  if (z) {\n    dst[2] = z;\n  }\n\n  return dst;\n}\n/**\n * Adds two vectors; assumes a and b have the same dimension.\n * @param {module:twgl/v3.Vec3} a Operand vector.\n * @param {module:twgl/v3.Vec3} b Operand vector.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} the created vector\n * @memberOf module:twgl/v3\n */\n\n\nfunction add(a, b, dst) {\n  dst = dst || new VecType(3);\n  dst[0] = a[0] + b[0];\n  dst[1] = a[1] + b[1];\n  dst[2] = a[2] + b[2];\n  return dst;\n}\n/**\n * Subtracts two vectors.\n * @param {module:twgl/v3.Vec3} a Operand vector.\n * @param {module:twgl/v3.Vec3} b Operand vector.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} the created vector\n * @memberOf module:twgl/v3\n */\n\n\nfunction subtract(a, b, dst) {\n  dst = dst || new VecType(3);\n  dst[0] = a[0] - b[0];\n  dst[1] = a[1] - b[1];\n  dst[2] = a[2] - b[2];\n  return dst;\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient t, returns\n * a + t * (b - a).\n * @param {module:twgl/v3.Vec3} a Operand vector.\n * @param {module:twgl/v3.Vec3} b Operand vector.\n * @param {number} t Interpolation coefficient.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} the created vector\n * @memberOf module:twgl/v3\n */\n\n\nfunction lerp(a, b, t, dst) {\n  dst = dst || new VecType(3);\n  dst[0] = a[0] + t * (b[0] - a[0]);\n  dst[1] = a[1] + t * (b[1] - a[1]);\n  dst[2] = a[2] + t * (b[2] - a[2]);\n  return dst;\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient vector t, returns\n * a + t * (b - a).\n * @param {module:twgl/v3.Vec3} a Operand vector.\n * @param {module:twgl/v3.Vec3} b Operand vector.\n * @param {module:twgl/v3.Vec3} t Interpolation coefficients vector.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} the created vector\n * @memberOf module:twgl/v3\n */\n\n\nfunction lerpV(a, b, t, dst) {\n  dst = dst || new VecType(3);\n  dst[0] = a[0] + t[0] * (b[0] - a[0]);\n  dst[1] = a[1] + t[1] * (b[1] - a[1]);\n  dst[2] = a[2] + t[2] * (b[2] - a[2]);\n  return dst;\n}\n/**\n * Return max values of two vectors.\n * Given vectors a and b returns\n * [max(a[0], b[0]), max(a[1], b[1]), max(a[2], b[2])].\n * @param {module:twgl/v3.Vec3} a Operand vector.\n * @param {module:twgl/v3.Vec3} b Operand vector.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} the created vector\n * @memberOf module:twgl/v3\n */\n\n\nfunction max(a, b, dst) {\n  dst = dst || new VecType(3);\n  dst[0] = Math.max(a[0], b[0]);\n  dst[1] = Math.max(a[1], b[1]);\n  dst[2] = Math.max(a[2], b[2]);\n  return dst;\n}\n/**\n * Return min values of two vectors.\n * Given vectors a and b returns\n * [min(a[0], b[0]), min(a[1], b[1]), min(a[2], b[2])].\n * @param {module:twgl/v3.Vec3} a Operand vector.\n * @param {module:twgl/v3.Vec3} b Operand vector.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} the created vector\n * @memberOf module:twgl/v3\n */\n\n\nfunction min(a, b, dst) {\n  dst = dst || new VecType(3);\n  dst[0] = Math.min(a[0], b[0]);\n  dst[1] = Math.min(a[1], b[1]);\n  dst[2] = Math.min(a[2], b[2]);\n  return dst;\n}\n/**\n * Mutiplies a vector by a scalar.\n * @param {module:twgl/v3.Vec3} v The vector.\n * @param {number} k The scalar.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} dst.\n * @memberOf module:twgl/v3\n */\n\n\nfunction mulScalar(v, k, dst) {\n  dst = dst || new VecType(3);\n  dst[0] = v[0] * k;\n  dst[1] = v[1] * k;\n  dst[2] = v[2] * k;\n  return dst;\n}\n/**\n * Divides a vector by a scalar.\n * @param {module:twgl/v3.Vec3} v The vector.\n * @param {number} k The scalar.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} dst.\n * @memberOf module:twgl/v3\n */\n\n\nfunction divScalar(v, k, dst) {\n  dst = dst || new VecType(3);\n  dst[0] = v[0] / k;\n  dst[1] = v[1] / k;\n  dst[2] = v[2] / k;\n  return dst;\n}\n/**\n * Computes the cross product of two vectors; assumes both vectors have\n * three entries.\n * @param {module:twgl/v3.Vec3} a Operand vector.\n * @param {module:twgl/v3.Vec3} b Operand vector.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} The vector a cross b.\n * @memberOf module:twgl/v3\n */\n\n\nfunction cross(a, b, dst) {\n  dst = dst || new VecType(3);\n  var t1 = a[2] * b[0] - a[0] * b[2];\n  var t2 = a[0] * b[1] - a[1] * b[0];\n  dst[0] = a[1] * b[2] - a[2] * b[1];\n  dst[1] = t1;\n  dst[2] = t2;\n  return dst;\n}\n/**\n * Computes the dot product of two vectors; assumes both vectors have\n * three entries.\n * @param {module:twgl/v3.Vec3} a Operand vector.\n * @param {module:twgl/v3.Vec3} b Operand vector.\n * @return {number} dot product\n * @memberOf module:twgl/v3\n */\n\n\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the length of vector\n * @param {module:twgl/v3.Vec3} v vector.\n * @return {number} length of vector.\n * @memberOf module:twgl/v3\n */\n\n\nfunction length(v) {\n  return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\n}\n/**\n * Computes the square of the length of vector\n * @param {module:twgl/v3.Vec3} v vector.\n * @return {number} square of the length of vector.\n * @memberOf module:twgl/v3\n */\n\n\nfunction lengthSq(v) {\n  return v[0] * v[0] + v[1] * v[1] + v[2] * v[2];\n}\n/**\n * Computes the distance between 2 points\n * @param {module:twgl/v3.Vec3} a vector.\n * @param {module:twgl/v3.Vec3} b vector.\n * @return {number} distance between a and b\n * @memberOf module:twgl/v3\n */\n\n\nfunction distance(a, b) {\n  var dx = a[0] - b[0];\n  var dy = a[1] - b[1];\n  var dz = a[2] - b[2];\n  return Math.sqrt(dx * dx + dy * dy + dz * dz);\n}\n/**\n * Computes the square of the distance between 2 points\n * @param {module:twgl/v3.Vec3} a vector.\n * @param {module:twgl/v3.Vec3} b vector.\n * @return {number} square of the distance between a and b\n * @memberOf module:twgl/v3\n */\n\n\nfunction distanceSq(a, b) {\n  var dx = a[0] - b[0];\n  var dy = a[1] - b[1];\n  var dz = a[2] - b[2];\n  return dx * dx + dy * dy + dz * dz;\n}\n/**\n * Divides a vector by its Euclidean length and returns the quotient.\n * @param {module:twgl/v3.Vec3} a The vector.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} The normalized vector.\n * @memberOf module:twgl/v3\n */\n\n\nfunction normalize(a, dst) {\n  dst = dst || new VecType(3);\n  var lenSq = a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n  var len = Math.sqrt(lenSq);\n\n  if (len > 0.00001) {\n    dst[0] = a[0] / len;\n    dst[1] = a[1] / len;\n    dst[2] = a[2] / len;\n  } else {\n    dst[0] = 0;\n    dst[1] = 0;\n    dst[2] = 0;\n  }\n\n  return dst;\n}\n/**\n * Negates a vector.\n * @param {module:twgl/v3.Vec3} v The vector.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} -v.\n * @memberOf module:twgl/v3\n */\n\n\nfunction negate(v, dst) {\n  dst = dst || new VecType(3);\n  dst[0] = -v[0];\n  dst[1] = -v[1];\n  dst[2] = -v[2];\n  return dst;\n}\n/**\n * Copies a vector.\n * @param {module:twgl/v3.Vec3} v The vector.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} A copy of v.\n * @memberOf module:twgl/v3\n */\n\n\nfunction copy(v, dst) {\n  dst = dst || new VecType(3);\n  dst[0] = v[0];\n  dst[1] = v[1];\n  dst[2] = v[2];\n  return dst;\n}\n/**\n * Multiplies a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param {module:twgl/v3.Vec3} a Operand vector.\n * @param {module:twgl/v3.Vec3} b Operand vector.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} The vector of products of entries of a and\n *     b.\n * @memberOf module:twgl/v3\n */\n\n\nfunction multiply(a, b, dst) {\n  dst = dst || new VecType(3);\n  dst[0] = a[0] * b[0];\n  dst[1] = a[1] * b[1];\n  dst[2] = a[2] * b[2];\n  return dst;\n}\n/**\n * Divides a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param {module:twgl/v3.Vec3} a Operand vector.\n * @param {module:twgl/v3.Vec3} b Operand vector.\n * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created..\n * @return {module:twgl/v3.Vec3} The vector of quotients of entries of a and\n *     b.\n * @memberOf module:twgl/v3\n */\n\n\nfunction divide(a, b, dst) {\n  dst = dst || new VecType(3);\n  dst[0] = a[0] / b[0];\n  dst[1] = a[1] / b[1];\n  dst[2] = a[2] / b[2];\n  return dst;\n}\n\n/***/ }),\n\n/***/ \"./src/vertex-arrays.js\":\n/*!******************************!*\\\n  !*** ./src/vertex-arrays.js ***!\n  \\******************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.createVertexArrayInfo = createVertexArrayInfo;\nexports.createVAOAndSetAttributes = createVAOAndSetAttributes;\nexports.createVAOFromBufferInfo = createVAOFromBufferInfo;\n\nvar programs = _interopRequireWildcard(__webpack_require__(/*! ./programs.js */ \"./src/programs.js\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * vertex array object related functions\n *\n * You should generally not need to use these functions. They are provided\n * for those cases where you're doing something out of the ordinary\n * and you need lower level access.\n *\n * For backward compatibily they are available at both `twgl.attributes` and `twgl`\n * itself\n *\n * See {@link module:twgl} for core functions\n *\n * @module twgl/vertexArrays\n */\n\n/**\n * @typedef {Object} VertexArrayInfo\n * @property {number} numElements The number of elements to pass to `gl.drawArrays` or `gl.drawElements`.\n * @property {number} [elementType] The type of indices `UNSIGNED_BYTE`, `UNSIGNED_SHORT` etc..\n * @property {WebGLVertexArrayObject} [vertexArrayObject] a vertex array object\n * @memberOf module:twgl\n */\n\n/**\n * Creates a VertexArrayInfo from a BufferInfo and one or more ProgramInfos\n *\n * This can be passed to {@link module:twgl.setBuffersAndAttributes} and to\n * {@link module:twgl:drawBufferInfo}.\n *\n * > **IMPORTANT:** Vertex Array Objects are **not** a direct analog for a BufferInfo. Vertex Array Objects\n *   assign buffers to specific attributes at creation time. That means they can only be used with programs\n *   who's attributes use the same attribute locations for the same purposes.\n *\n * > Bind your attribute locations by passing an array of attribute names to {@link module:twgl.createProgramInfo}\n *   or use WebGL 2's GLSL ES 3's `layout(location = <num>)` to make sure locations match.\n *\n * also\n *\n * > **IMPORTANT:** After calling twgl.setBuffersAndAttribute with a BufferInfo that uses a Vertex Array Object\n *   that Vertex Array Object will be bound. That means **ANY MANIPULATION OF ELEMENT_ARRAY_BUFFER or ATTRIBUTES**\n *   will affect the Vertex Array Object state.\n *\n * > Call `gl.bindVertexArray(null)` to get back manipulating the global attributes and ELEMENT_ARRAY_BUFFER.\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @param {module:twgl.ProgramInfo|module:twgl.ProgramInfo[]} programInfo a programInfo or array of programInfos\n * @param {module:twgl.BufferInfo} bufferInfo BufferInfo as returned from createBufferInfoFromArrays etc...\n *\n *    You need to make sure every attribute that will be used is bound. So for example assume shader 1\n *    uses attributes A, B, C and shader 2 uses attributes A, B, D. If you only pass in the programInfo\n *    for shader 1 then only attributes A, B, and C will have their attributes set because TWGL doesn't\n *    now attribute D's location.\n *\n *    So, you can pass in both shader 1 and shader 2's programInfo\n *\n * @return {module:twgl.VertexArrayInfo} The created VertexArrayInfo\n *\n * @memberOf module:twgl/vertexArrays\n */\nfunction createVertexArrayInfo(gl, programInfos, bufferInfo) {\n  var vao = gl.createVertexArray();\n  gl.bindVertexArray(vao);\n\n  if (!programInfos.length) {\n    programInfos = [programInfos];\n  }\n\n  programInfos.forEach(function (programInfo) {\n    programs.setBuffersAndAttributes(gl, programInfo, bufferInfo);\n  });\n  gl.bindVertexArray(null);\n  return {\n    numElements: bufferInfo.numElements,\n    elementType: bufferInfo.elementType,\n    vertexArrayObject: vao\n  };\n}\n/**\n * Creates a vertex array object and then sets the attributes on it\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {Object.<string, function>} setters Attribute setters as returned from createAttributeSetters\n * @param {Object.<string, module:twgl.AttribInfo>} attribs AttribInfos mapped by attribute name.\n * @param {WebGLBuffer} [indices] an optional ELEMENT_ARRAY_BUFFER of indices\n * @memberOf module:twgl/vertexArrays\n */\n\n\nfunction createVAOAndSetAttributes(gl, setters, attribs, indices) {\n  var vao = gl.createVertexArray();\n  gl.bindVertexArray(vao);\n  programs.setAttributes(setters, attribs);\n\n  if (indices) {\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indices);\n  } // We unbind this because otherwise any change to ELEMENT_ARRAY_BUFFER\n  // like when creating buffers for other stuff will mess up this VAO's binding\n\n\n  gl.bindVertexArray(null);\n  return vao;\n}\n/**\n * Creates a vertex array object and then sets the attributes\n * on it\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext\n *        to use.\n * @param {Object.<string, function>| module:twgl.ProgramInfo} programInfo as returned from createProgramInfo or Attribute setters as returned from createAttributeSetters\n * @param {module:twgl.BufferInfo} bufferInfo BufferInfo as returned from createBufferInfoFromArrays etc...\n * @param {WebGLBuffer} [indices] an optional ELEMENT_ARRAY_BUFFER of indices\n * @memberOf module:twgl/vertexArrays\n */\n\n\nfunction createVAOFromBufferInfo(gl, programInfo, bufferInfo) {\n  return createVAOAndSetAttributes(gl, programInfo.attribSetters || programInfo, bufferInfo.attribs, bufferInfo.indices);\n}\n\n/***/ })\n\n/******/ });\n});\n\n},{}],13:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar typestyle_1 = require(\"./internal/typestyle\");\nexports.TypeStyle = typestyle_1.TypeStyle;\n/**\n * All the CSS types in the 'types' namespace\n */\nvar types = require(\"./types\");\nexports.types = types;\n/**\n * Export certain utilities\n */\nvar utilities_1 = require(\"./internal/utilities\");\nexports.extend = utilities_1.extend;\nexports.classes = utilities_1.classes;\nexports.media = utilities_1.media;\n/** Zero configuration, default instance of TypeStyle */\nvar ts = new typestyle_1.TypeStyle({ autoGenerateTag: true });\n/** Sets the target tag where we write the css on style updates */\nexports.setStylesTarget = ts.setStylesTarget;\n/**\n * Insert `raw` CSS as a string. This is useful for e.g.\n * - third party CSS that you are customizing with template strings\n * - generating raw CSS in JavaScript\n * - reset libraries like normalize.css that you can use without loaders\n */\nexports.cssRaw = ts.cssRaw;\n/**\n * Takes CSSProperties and registers it to a global selector (body, html, etc.)\n */\nexports.cssRule = ts.cssRule;\n/**\n * Renders styles to the singleton tag imediately\n * NOTE: You should only call it on initial render to prevent any non CSS flash.\n * After that it is kept sync using `requestAnimationFrame` and we haven't noticed any bad flashes.\n **/\nexports.forceRenderStyles = ts.forceRenderStyles;\n/**\n * Utility function to register an @font-face\n */\nexports.fontFace = ts.fontFace;\n/**\n * Allows use to use the stylesheet in a node.js environment\n */\nexports.getStyles = ts.getStyles;\n/**\n * Takes keyframes and returns a generated animationName\n */\nexports.keyframes = ts.keyframes;\n/**\n * Helps with testing. Reinitializes FreeStyle + raw\n */\nexports.reinit = ts.reinit;\n/**\n * Takes CSSProperties and return a generated className you can use on your component\n */\nexports.style = ts.style;\n/**\n * Takes an object where property names are ideal class names and property values are CSSProperties, and\n * returns an object where property names are the same ideal class names and the property values are\n * the actual generated class names using the ideal class name as the $debugName\n */\nexports.stylesheet = ts.stylesheet;\n/**\n * Creates a new instance of TypeStyle separate from the default instance.\n *\n * - Use this for creating a different typestyle instance for a shadow dom component.\n * - Use this if you don't want an auto tag generated and you just want to collect the CSS.\n *\n * NOTE: styles aren't shared between different instances.\n */\nfunction createTypeStyle(target) {\n    var instance = new typestyle_1.TypeStyle({ autoGenerateTag: false });\n    if (target) {\n        instance.setStylesTarget(target);\n    }\n    return instance;\n}\nexports.createTypeStyle = createTypeStyle;\n\n},{\"./internal/typestyle\":15,\"./internal/utilities\":16,\"./types\":17}],14:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar FreeStyle = require(\"free-style\");\n/**\n * We need to do the following to *our* objects before passing to freestyle:\n * - For any `$nest` directive move up to FreeStyle style nesting\n * - For any `$unique` directive map to FreeStyle Unique\n * - For any `$debugName` directive return the debug name\n */\nfunction ensureStringObj(object) {\n    /** The final result we will return */\n    var result = {};\n    var debugName = '';\n    for (var key in object) {\n        /** Grab the value upfront */\n        var val = object[key];\n        /** TypeStyle configuration options */\n        if (key === '$unique') {\n            result[FreeStyle.IS_UNIQUE] = val;\n        }\n        else if (key === '$nest') {\n            var nested = val;\n            for (var selector in nested) {\n                var subproperties = nested[selector];\n                result[selector] = ensureStringObj(subproperties).result;\n            }\n        }\n        else if (key === '$debugName') {\n            debugName = val;\n        }\n        else {\n            result[key] = val;\n        }\n    }\n    return { result: result, debugName: debugName };\n}\nexports.ensureStringObj = ensureStringObj;\n// todo: better name here\nfunction explodeKeyframes(frames) {\n    var result = { $debugName: undefined, keyframes: {} };\n    for (var offset in frames) {\n        var val = frames[offset];\n        if (offset === '$debugName') {\n            result.$debugName = val;\n        }\n        else {\n            result.keyframes[offset] = val;\n        }\n    }\n    return result;\n}\nexports.explodeKeyframes = explodeKeyframes;\n\n},{\"free-style\":8}],15:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar FreeStyle = require(\"free-style\");\nvar formatting_1 = require(\"./formatting\");\nvar utilities_1 = require(\"./utilities\");\n/**\n * Creates an instance of free style with our options\n */\nvar createFreeStyle = function () { return FreeStyle.create(\n/** Use the default hash function */\nundefined, \n/** Preserve $debugName values */\ntrue); };\n/**\n * Maintains a single stylesheet and keeps it in sync with requested styles\n */\nvar TypeStyle = /** @class */ (function () {\n    function TypeStyle(_a) {\n        var autoGenerateTag = _a.autoGenerateTag;\n        var _this = this;\n        /**\n         * Insert `raw` CSS as a string. This is useful for e.g.\n         * - third party CSS that you are customizing with template strings\n         * - generating raw CSS in JavaScript\n         * - reset libraries like normalize.css that you can use without loaders\n         */\n        this.cssRaw = function (mustBeValidCSS) {\n            if (!mustBeValidCSS) {\n                return;\n            }\n            _this._raw += mustBeValidCSS || '';\n            _this._pendingRawChange = true;\n            _this._styleUpdated();\n        };\n        /**\n         * Takes CSSProperties and registers it to a global selector (body, html, etc.)\n         */\n        this.cssRule = function (selector) {\n            var objects = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                objects[_i - 1] = arguments[_i];\n            }\n            var object = formatting_1.ensureStringObj(utilities_1.extend.apply(void 0, objects)).result;\n            _this._freeStyle.registerRule(selector, object);\n            _this._styleUpdated();\n            return;\n        };\n        /**\n         * Renders styles to the singleton tag imediately\n         * NOTE: You should only call it on initial render to prevent any non CSS flash.\n         * After that it is kept sync using `requestAnimationFrame` and we haven't noticed any bad flashes.\n         **/\n        this.forceRenderStyles = function () {\n            var target = _this._getTag();\n            if (!target) {\n                return;\n            }\n            target.textContent = _this.getStyles();\n        };\n        /**\n         * Utility function to register an @font-face\n         */\n        this.fontFace = function () {\n            var fontFace = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                fontFace[_i] = arguments[_i];\n            }\n            var freeStyle = _this._freeStyle;\n            for (var _a = 0, _b = fontFace; _a < _b.length; _a++) {\n                var face = _b[_a];\n                freeStyle.registerRule('@font-face', face);\n            }\n            _this._styleUpdated();\n            return;\n        };\n        /**\n         * Allows use to use the stylesheet in a node.js environment\n         */\n        this.getStyles = function () {\n            return (_this._raw || '') + _this._freeStyle.getStyles();\n        };\n        /**\n         * Takes keyframes and returns a generated animationName\n         */\n        this.keyframes = function (frames) {\n            var _a = formatting_1.explodeKeyframes(frames), keyframes = _a.keyframes, $debugName = _a.$debugName;\n            // TODO: replace $debugName with display name\n            var animationName = _this._freeStyle.registerKeyframes(keyframes, $debugName);\n            _this._styleUpdated();\n            return animationName;\n        };\n        /**\n         * Helps with testing. Reinitializes FreeStyle + raw\n         */\n        this.reinit = function () {\n            /** reinit freestyle */\n            var freeStyle = createFreeStyle();\n            _this._freeStyle = freeStyle;\n            _this._lastFreeStyleChangeId = freeStyle.changeId;\n            /** reinit raw */\n            _this._raw = '';\n            _this._pendingRawChange = false;\n            /** Clear any styles that were flushed */\n            var target = _this._getTag();\n            if (target) {\n                target.textContent = '';\n            }\n        };\n        /** Sets the target tag where we write the css on style updates */\n        this.setStylesTarget = function (tag) {\n            /** Clear any data in any previous tag */\n            if (_this._tag) {\n                _this._tag.textContent = '';\n            }\n            _this._tag = tag;\n            /** This special time buffer immediately */\n            _this.forceRenderStyles();\n        };\n        /**\n         * Takes an object where property names are ideal class names and property values are CSSProperties, and\n         * returns an object where property names are the same ideal class names and the property values are\n         * the actual generated class names using the ideal class name as the $debugName\n         */\n        this.stylesheet = function (classes) {\n            var classNames = Object.getOwnPropertyNames(classes);\n            var result = {};\n            for (var _i = 0, classNames_1 = classNames; _i < classNames_1.length; _i++) {\n                var className = classNames_1[_i];\n                var classDef = classes[className];\n                if (classDef) {\n                    classDef.$debugName = className;\n                    result[className] = _this.style(classDef);\n                }\n            }\n            return result;\n        };\n        var freeStyle = createFreeStyle();\n        this._autoGenerateTag = autoGenerateTag;\n        this._freeStyle = freeStyle;\n        this._lastFreeStyleChangeId = freeStyle.changeId;\n        this._pending = 0;\n        this._pendingRawChange = false;\n        this._raw = '';\n        this._tag = undefined;\n        // rebind prototype to TypeStyle.  It might be better to do a function() { return this.style.apply(this, arguments)}\n        this.style = this.style.bind(this);\n    }\n    /**\n     * Only calls cb all sync operations settle\n     */\n    TypeStyle.prototype._afterAllSync = function (cb) {\n        var _this = this;\n        this._pending++;\n        var pending = this._pending;\n        utilities_1.raf(function () {\n            if (pending !== _this._pending) {\n                return;\n            }\n            cb();\n        });\n    };\n    TypeStyle.prototype._getTag = function () {\n        if (this._tag) {\n            return this._tag;\n        }\n        if (this._autoGenerateTag) {\n            var tag = typeof window === 'undefined'\n                ? { textContent: '' }\n                : document.createElement('style');\n            if (typeof document !== 'undefined') {\n                document.head.appendChild(tag);\n            }\n            this._tag = tag;\n            return tag;\n        }\n        return undefined;\n    };\n    /** Checks if the style tag needs updating and if so queues up the change */\n    TypeStyle.prototype._styleUpdated = function () {\n        var _this = this;\n        var changeId = this._freeStyle.changeId;\n        var lastChangeId = this._lastFreeStyleChangeId;\n        if (!this._pendingRawChange && changeId === lastChangeId) {\n            return;\n        }\n        this._lastFreeStyleChangeId = changeId;\n        this._pendingRawChange = false;\n        this._afterAllSync(function () { return _this.forceRenderStyles(); });\n    };\n    TypeStyle.prototype.style = function () {\n        var freeStyle = this._freeStyle;\n        var _a = formatting_1.ensureStringObj(utilities_1.extend.apply(undefined, arguments)), result = _a.result, debugName = _a.debugName;\n        var className = debugName ? freeStyle.registerStyle(result, debugName) : freeStyle.registerStyle(result);\n        this._styleUpdated();\n        return className;\n    };\n    return TypeStyle;\n}());\nexports.TypeStyle = TypeStyle;\n\n},{\"./formatting\":14,\"./utilities\":16,\"free-style\":8}],16:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** Raf for node + browser */\nexports.raf = typeof requestAnimationFrame === 'undefined'\n    /**\n     * Make sure setTimeout is always invoked with\n     * `this` set to `window` or `global` automatically\n     **/\n    ? function (cb) { return setTimeout(cb); }\n    /**\n     * Make sure window.requestAnimationFrame is always invoked with `this` window\n     * We might have raf without window in case of `raf/polyfill` (recommended by React)\n     **/\n    : typeof window === 'undefined'\n        ? requestAnimationFrame\n        : requestAnimationFrame.bind(window);\n/**\n * Utility to join classes conditionally\n */\nfunction classes() {\n    var classes = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        classes[_i] = arguments[_i];\n    }\n    return classes\n        .map(function (c) { return c && typeof c === 'object' ? Object.keys(c).map(function (key) { return !!c[key] && key; }) : [c]; })\n        .reduce(function (flattened, c) { return flattened.concat(c); }, [])\n        .filter(function (c) { return !!c; })\n        .join(' ');\n}\nexports.classes = classes;\n/**\n * Merges various styles into a single style object.\n * Note: if two objects have the same property the last one wins\n */\nfunction extend() {\n    var objects = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        objects[_i] = arguments[_i];\n    }\n    /** The final result we will return */\n    var result = {};\n    for (var _a = 0, objects_1 = objects; _a < objects_1.length; _a++) {\n        var object = objects_1[_a];\n        if (object == null || object === false) {\n            continue;\n        }\n        for (var key in object) {\n            /** Falsy values except a explicit 0 is ignored */\n            var val = object[key];\n            if (!val && val !== 0) {\n                continue;\n            }\n            /** if nested media or pseudo selector */\n            if (key === '$nest' && val) {\n                result[key] = result['$nest'] ? extend(result['$nest'], val) : val;\n            }\n            else if ((key.indexOf('&') !== -1 || key.indexOf('@media') === 0)) {\n                result[key] = result[key] ? extend(result[key], val) : val;\n            }\n            else {\n                result[key] = val;\n            }\n        }\n    }\n    return result;\n}\nexports.extend = extend;\n/**\n * Utility to help customize styles with media queries. e.g.\n * ```\n * style(\n *  media({maxWidth:500}, {color:'red'})\n * )\n * ```\n */\nexports.media = function (mediaQuery) {\n    var objects = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        objects[_i - 1] = arguments[_i];\n    }\n    var mediaQuerySections = [];\n    if (mediaQuery.type)\n        mediaQuerySections.push(mediaQuery.type);\n    if (mediaQuery.orientation)\n        mediaQuerySections.push(\"(orientation: \" + mediaQuery.orientation + \")\");\n    if (mediaQuery.minWidth)\n        mediaQuerySections.push(\"(min-width: \" + mediaLength(mediaQuery.minWidth) + \")\");\n    if (mediaQuery.maxWidth)\n        mediaQuerySections.push(\"(max-width: \" + mediaLength(mediaQuery.maxWidth) + \")\");\n    if (mediaQuery.minHeight)\n        mediaQuerySections.push(\"(min-height: \" + mediaLength(mediaQuery.minHeight) + \")\");\n    if (mediaQuery.maxHeight)\n        mediaQuerySections.push(\"(max-height: \" + mediaLength(mediaQuery.maxHeight) + \")\");\n    var stringMediaQuery = \"@media \" + mediaQuerySections.join(' and ');\n    var object = {\n        $nest: (_a = {},\n            _a[stringMediaQuery] = extend.apply(void 0, objects),\n            _a)\n    };\n    return object;\n    var _a;\n};\nvar mediaLength = function (value) {\n    return typeof value === 'string' ? value : value + \"px\";\n};\n\n},{}],17:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\n},{}],18:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Strings = require(\"./Strings\");\nvar Platform_1 = require(\"./common/Platform\");\nvar RenderDebouncer_1 = require(\"./ui/RenderDebouncer\");\nvar Lifecycle_1 = require(\"./ui/Lifecycle\");\nvar Lifecycle_2 = require(\"./common/Lifecycle\");\nvar ScreenDprMonitor_1 = require(\"./ui/ScreenDprMonitor\");\nvar MAX_ROWS_TO_READ = 20;\nvar AccessibilityManager = (function (_super) {\n    __extends(AccessibilityManager, _super);\n    function AccessibilityManager(_terminal, _dimensions) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._dimensions = _dimensions;\n        _this._liveRegionLineCount = 0;\n        _this._charsToConsume = [];\n        _this._charsToAnnounce = '';\n        _this._accessibilityTreeRoot = document.createElement('div');\n        _this._accessibilityTreeRoot.classList.add('xterm-accessibility');\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add('xterm-accessibility-tree');\n        _this._rowElements = [];\n        for (var i = 0; i < _this._terminal.rows; i++) {\n            _this._rowElements[i] = _this._createAccessibilityTreeNode();\n            _this._rowContainer.appendChild(_this._rowElements[i]);\n        }\n        _this._topBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 0); };\n        _this._bottomBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 1); };\n        _this._rowElements[0].addEventListener('focus', _this._topBoundaryFocusListener);\n        _this._rowElements[_this._rowElements.length - 1].addEventListener('focus', _this._bottomBoundaryFocusListener);\n        _this._refreshRowsDimensions();\n        _this._accessibilityTreeRoot.appendChild(_this._rowContainer);\n        _this._renderRowsDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));\n        _this._refreshRows();\n        _this._liveRegion = document.createElement('div');\n        _this._liveRegion.classList.add('live-region');\n        _this._liveRegion.setAttribute('aria-live', 'assertive');\n        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n        _this._terminal.element.insertAdjacentElement('afterbegin', _this._accessibilityTreeRoot);\n        _this.register(_this._renderRowsDebouncer);\n        _this.register(_this._terminal.onResize(function (e) { return _this._onResize(e.rows); }));\n        _this.register(_this._terminal.onRender(function (e) { return _this._refreshRows(e.start, e.end); }));\n        _this.register(_this._terminal.onScroll(function () { return _this._refreshRows(); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.char', function (char) { return _this._onChar(char); }));\n        _this.register(_this._terminal.onLineFeed(function () { return _this._onChar('\\n'); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.tab', function (spaceCount) { return _this._onTab(spaceCount); }));\n        _this.register(_this._terminal.onKey(function (e) { return _this._onKey(e.key); }));\n        _this.register(_this._terminal.addDisposableListener('blur', function () { return _this._clearLiveRegion(); }));\n        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        _this.register(_this._screenDprMonitor);\n        _this._screenDprMonitor.setListener(function () { return _this._refreshRowsDimensions(); });\n        _this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this._refreshRowsDimensions(); }));\n        return _this;\n    }\n    AccessibilityManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal.element.removeChild(this._accessibilityTreeRoot);\n        this._rowElements.length = 0;\n    };\n    AccessibilityManager.prototype._onBoundaryFocus = function (e, position) {\n        var boundaryElement = e.target;\n        var beforeBoundaryElement = this._rowElements[position === 0 ? 1 : this._rowElements.length - 2];\n        var posInSet = boundaryElement.getAttribute('aria-posinset');\n        var lastRowPos = position === 0 ? '1' : \"\" + this._terminal.buffer.lines.length;\n        if (posInSet === lastRowPos) {\n            return;\n        }\n        if (e.relatedTarget !== beforeBoundaryElement) {\n            return;\n        }\n        var topBoundaryElement;\n        var bottomBoundaryElement;\n        if (position === 0) {\n            topBoundaryElement = boundaryElement;\n            bottomBoundaryElement = this._rowElements.pop();\n            this._rowContainer.removeChild(bottomBoundaryElement);\n        }\n        else {\n            topBoundaryElement = this._rowElements.shift();\n            bottomBoundaryElement = boundaryElement;\n            this._rowContainer.removeChild(topBoundaryElement);\n        }\n        topBoundaryElement.removeEventListener('focus', this._topBoundaryFocusListener);\n        bottomBoundaryElement.removeEventListener('focus', this._bottomBoundaryFocusListener);\n        if (position === 0) {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.unshift(newElement);\n            this._rowContainer.insertAdjacentElement('afterbegin', newElement);\n        }\n        else {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.push(newElement);\n            this._rowContainer.appendChild(newElement);\n        }\n        this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._terminal.scrollLines(position === 0 ? -1 : 1);\n        this._rowElements[position === 0 ? 1 : this._rowElements.length - 2].focus();\n        e.preventDefault();\n        e.stopImmediatePropagation();\n    };\n    AccessibilityManager.prototype._onResize = function (rows) {\n        this._rowElements[this._rowElements.length - 1].removeEventListener('focus', this._bottomBoundaryFocusListener);\n        for (var i = this._rowContainer.children.length; i < this._terminal.rows; i++) {\n            this._rowElements[i] = this._createAccessibilityTreeNode();\n            this._rowContainer.appendChild(this._rowElements[i]);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._refreshRowsDimensions();\n    };\n    AccessibilityManager.prototype._createAccessibilityTreeNode = function () {\n        var element = document.createElement('div');\n        element.setAttribute('role', 'listitem');\n        element.tabIndex = -1;\n        this._refreshRowDimensions(element);\n        return element;\n    };\n    AccessibilityManager.prototype._onTab = function (spaceCount) {\n        for (var i = 0; i < spaceCount; i++) {\n            this._onChar(' ');\n        }\n    };\n    AccessibilityManager.prototype._onChar = function (char) {\n        var _this = this;\n        if (this._liveRegionLineCount < MAX_ROWS_TO_READ + 1) {\n            if (this._charsToConsume.length > 0) {\n                var shiftedChar = this._charsToConsume.shift();\n                if (shiftedChar !== char) {\n                    this._charsToAnnounce += char;\n                }\n            }\n            else {\n                this._charsToAnnounce += char;\n            }\n            if (char === '\\n') {\n                this._liveRegionLineCount++;\n                if (this._liveRegionLineCount === MAX_ROWS_TO_READ + 1) {\n                    this._liveRegion.textContent += Strings.tooMuchOutput;\n                }\n            }\n            if (Platform_1.isMac) {\n                if (this._liveRegion.textContent && this._liveRegion.textContent.length > 0 && !this._liveRegion.parentNode) {\n                    setTimeout(function () {\n                        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n                    }, 0);\n                }\n            }\n        }\n    };\n    AccessibilityManager.prototype._clearLiveRegion = function () {\n        this._liveRegion.textContent = '';\n        this._liveRegionLineCount = 0;\n        if (Platform_1.isMac) {\n            if (this._liveRegion.parentNode) {\n                this._accessibilityTreeRoot.removeChild(this._liveRegion);\n            }\n        }\n    };\n    AccessibilityManager.prototype._onKey = function (keyChar) {\n        this._clearLiveRegion();\n        this._charsToConsume.push(keyChar);\n    };\n    AccessibilityManager.prototype._refreshRows = function (start, end) {\n        this._renderRowsDebouncer.refresh(start, end, this._terminal.rows);\n    };\n    AccessibilityManager.prototype._renderRows = function (start, end) {\n        var buffer = this._terminal.buffer;\n        var setSize = buffer.lines.length.toString();\n        for (var i = start; i <= end; i++) {\n            var lineData = buffer.translateBufferLineToString(buffer.ydisp + i, true);\n            var posInSet = (buffer.ydisp + i + 1).toString();\n            var element = this._rowElements[i];\n            if (element) {\n                element.textContent = lineData.length === 0 ? Strings.blankLine : lineData;\n                element.setAttribute('aria-posinset', posInSet);\n                element.setAttribute('aria-setsize', setSize);\n            }\n        }\n        this._announceCharacters();\n    };\n    AccessibilityManager.prototype._refreshRowsDimensions = function () {\n        if (!this._dimensions.actualCellHeight) {\n            return;\n        }\n        if (this._rowElements.length !== this._terminal.rows) {\n            this._onResize(this._terminal.rows);\n        }\n        for (var i = 0; i < this._terminal.rows; i++) {\n            this._refreshRowDimensions(this._rowElements[i]);\n        }\n    };\n    AccessibilityManager.prototype.setDimensions = function (dimensions) {\n        this._dimensions = dimensions;\n        this._refreshRowsDimensions();\n    };\n    AccessibilityManager.prototype._refreshRowDimensions = function (element) {\n        element.style.height = this._dimensions.actualCellHeight + \"px\";\n    };\n    AccessibilityManager.prototype._announceCharacters = function () {\n        if (this._charsToAnnounce.length === 0) {\n            return;\n        }\n        this._liveRegion.textContent += this._charsToAnnounce;\n        this._charsToAnnounce = '';\n    };\n    return AccessibilityManager;\n}(Lifecycle_2.Disposable));\nexports.AccessibilityManager = AccessibilityManager;\n\n},{\"./Strings\":33,\"./common/Lifecycle\":42,\"./common/Platform\":43,\"./ui/Lifecycle\":77,\"./ui/RenderDebouncer\":78,\"./ui/ScreenDprMonitor\":79}],19:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CircularList_1 = require(\"./common/CircularList\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar BufferReflow_1 = require(\"./core/buffer/BufferReflow\");\nvar Marker_1 = require(\"./core/buffer/Marker\");\nexports.MAX_BUFFER_SIZE = 4294967295;\nvar Buffer = (function () {\n    function Buffer(_terminal, _hasScrollback) {\n        this._terminal = _terminal;\n        this._hasScrollback = _hasScrollback;\n        this.savedCurAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this.markers = [];\n        this._nullCell = BufferLine_1.CellData.fromCharData([0, BufferLine_1.NULL_CELL_CHAR, BufferLine_1.NULL_CELL_WIDTH, BufferLine_1.NULL_CELL_CODE]);\n        this._whitespaceCell = BufferLine_1.CellData.fromCharData([0, BufferLine_1.WHITESPACE_CELL_CHAR, BufferLine_1.WHITESPACE_CELL_WIDTH, BufferLine_1.WHITESPACE_CELL_CODE]);\n        this._cols = this._terminal.cols;\n        this._rows = this._terminal.rows;\n        this.clear();\n    }\n    Buffer.prototype.getNullCell = function (attr) {\n        if (attr) {\n            this._nullCell.fg = attr.fg;\n            this._nullCell.bg = attr.bg;\n        }\n        else {\n            this._nullCell.fg = 0;\n            this._nullCell.bg = 0;\n        }\n        return this._nullCell;\n    };\n    Buffer.prototype.getWhitespaceCell = function (attr) {\n        if (attr) {\n            this._whitespaceCell.fg = attr.fg;\n            this._whitespaceCell.bg = attr.bg;\n        }\n        else {\n            this._whitespaceCell.fg = 0;\n            this._whitespaceCell.bg = 0;\n        }\n        return this._whitespaceCell;\n    };\n    Buffer.prototype.getBlankLine = function (attr, isWrapped) {\n        return new BufferLine_1.BufferLine(this._terminal.cols, this.getNullCell(attr), isWrapped);\n    };\n    Object.defineProperty(Buffer.prototype, \"hasScrollback\", {\n        get: function () {\n            return this._hasScrollback && this.lines.maxLength > this._rows;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Buffer.prototype, \"isCursorInViewport\", {\n        get: function () {\n            var absoluteY = this.ybase + this.y;\n            var relativeY = absoluteY - this.ydisp;\n            return (relativeY >= 0 && relativeY < this._rows);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype._getCorrectBufferLength = function (rows) {\n        if (!this._hasScrollback) {\n            return rows;\n        }\n        var correctBufferLength = rows + this._terminal.options.scrollback;\n        return correctBufferLength > exports.MAX_BUFFER_SIZE ? exports.MAX_BUFFER_SIZE : correctBufferLength;\n    };\n    Buffer.prototype.fillViewportRows = function (fillAttr) {\n        if (this.lines.length === 0) {\n            if (fillAttr === undefined) {\n                fillAttr = BufferLine_1.DEFAULT_ATTR_DATA;\n            }\n            var i = this._rows;\n            while (i--) {\n                this.lines.push(this.getBlankLine(fillAttr));\n            }\n        }\n    };\n    Buffer.prototype.clear = function () {\n        this.ydisp = 0;\n        this.ybase = 0;\n        this.y = 0;\n        this.x = 0;\n        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._rows));\n        this.scrollTop = 0;\n        this.scrollBottom = this._rows - 1;\n        this.setupTabStops();\n    };\n    Buffer.prototype.resize = function (newCols, newRows) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var newMaxLength = this._getCorrectBufferLength(newRows);\n        if (newMaxLength > this.lines.maxLength) {\n            this.lines.maxLength = newMaxLength;\n        }\n        if (this.lines.length > 0) {\n            if (this._cols < newCols) {\n                for (var i = 0; i < this.lines.length; i++) {\n                    this.lines.get(i).resize(newCols, nullCell);\n                }\n            }\n            var addToY = 0;\n            if (this._rows < newRows) {\n                for (var y = this._rows; y < newRows; y++) {\n                    if (this.lines.length < newRows + this.ybase) {\n                        if (this.ybase > 0 && this.lines.length <= this.ybase + this.y + addToY + 1) {\n                            this.ybase--;\n                            addToY++;\n                            if (this.ydisp > 0) {\n                                this.ydisp--;\n                            }\n                        }\n                        else {\n                            this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));\n                        }\n                    }\n                }\n            }\n            else {\n                for (var y = this._rows; y > newRows; y--) {\n                    if (this.lines.length > newRows + this.ybase) {\n                        if (this.lines.length > this.ybase + this.y + 1) {\n                            this.lines.pop();\n                        }\n                        else {\n                            this.ybase++;\n                            this.ydisp++;\n                        }\n                    }\n                }\n            }\n            if (newMaxLength < this.lines.maxLength) {\n                var amountToTrim = this.lines.length - newMaxLength;\n                if (amountToTrim > 0) {\n                    this.lines.trimStart(amountToTrim);\n                    this.ybase = Math.max(this.ybase - amountToTrim, 0);\n                    this.ydisp = Math.max(this.ydisp - amountToTrim, 0);\n                }\n                this.lines.maxLength = newMaxLength;\n            }\n            this.x = Math.min(this.x, newCols - 1);\n            this.y = Math.min(this.y, newRows - 1);\n            if (addToY) {\n                this.y += addToY;\n            }\n            this.savedY = Math.min(this.savedY, newRows - 1);\n            this.savedX = Math.min(this.savedX, newCols - 1);\n            this.scrollTop = 0;\n        }\n        this.scrollBottom = newRows - 1;\n        if (this._isReflowEnabled) {\n            this._reflow(newCols, newRows);\n            if (this._cols > newCols) {\n                for (var i = 0; i < this.lines.length; i++) {\n                    this.lines.get(i).resize(newCols, nullCell);\n                }\n            }\n        }\n        this._cols = newCols;\n        this._rows = newRows;\n    };\n    Object.defineProperty(Buffer.prototype, \"_isReflowEnabled\", {\n        get: function () {\n            return this._hasScrollback && !this._terminal.options.windowsMode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype._reflow = function (newCols, newRows) {\n        if (this._cols === newCols) {\n            return;\n        }\n        if (newCols > this._cols) {\n            this._reflowLarger(newCols, newRows);\n        }\n        else {\n            this._reflowSmaller(newCols, newRows);\n        }\n    };\n    Buffer.prototype._reflowLarger = function (newCols, newRows) {\n        var toRemove = BufferReflow_1.reflowLargerGetLinesToRemove(this.lines, this._cols, newCols, this.ybase + this.y, this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA));\n        if (toRemove.length > 0) {\n            var newLayoutResult = BufferReflow_1.reflowLargerCreateNewLayout(this.lines, toRemove);\n            BufferReflow_1.reflowLargerApplyNewLayout(this.lines, newLayoutResult.layout);\n            this._reflowLargerAdjustViewport(newCols, newRows, newLayoutResult.countRemoved);\n        }\n    };\n    Buffer.prototype._reflowLargerAdjustViewport = function (newCols, newRows, countRemoved) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var viewportAdjustments = countRemoved;\n        while (viewportAdjustments-- > 0) {\n            if (this.ybase === 0) {\n                if (this.y > 0) {\n                    this.y--;\n                }\n                if (this.lines.length < newRows) {\n                    this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));\n                }\n            }\n            else {\n                if (this.ydisp === this.ybase) {\n                    this.ydisp--;\n                }\n                this.ybase--;\n            }\n        }\n    };\n    Buffer.prototype._reflowSmaller = function (newCols, newRows) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var toInsert = [];\n        var countToInsert = 0;\n        for (var y = this.lines.length - 1; y >= 0; y--) {\n            var nextLine = this.lines.get(y);\n            if (!nextLine || !nextLine.isWrapped && nextLine.getTrimmedLength() <= newCols) {\n                continue;\n            }\n            var wrappedLines = [nextLine];\n            while (nextLine.isWrapped && y > 0) {\n                nextLine = this.lines.get(--y);\n                wrappedLines.unshift(nextLine);\n            }\n            var absoluteY = this.ybase + this.y;\n            if (absoluteY >= y && absoluteY < y + wrappedLines.length) {\n                continue;\n            }\n            var lastLineLength = wrappedLines[wrappedLines.length - 1].getTrimmedLength();\n            var destLineLengths = BufferReflow_1.reflowSmallerGetNewLineLengths(wrappedLines, this._cols, newCols);\n            var linesToAdd = destLineLengths.length - wrappedLines.length;\n            var trimmedLines = void 0;\n            if (this.ybase === 0 && this.y !== this.lines.length - 1) {\n                trimmedLines = Math.max(0, this.y - this.lines.maxLength + linesToAdd);\n            }\n            else {\n                trimmedLines = Math.max(0, this.lines.length - this.lines.maxLength + linesToAdd);\n            }\n            var newLines = [];\n            for (var i = 0; i < linesToAdd; i++) {\n                var newLine = this.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA, true);\n                newLines.push(newLine);\n            }\n            if (newLines.length > 0) {\n                toInsert.push({\n                    start: y + wrappedLines.length + countToInsert,\n                    newLines: newLines\n                });\n                countToInsert += newLines.length;\n            }\n            wrappedLines.push.apply(wrappedLines, newLines);\n            var destLineIndex = destLineLengths.length - 1;\n            var destCol = destLineLengths[destLineIndex];\n            if (destCol === 0) {\n                destLineIndex--;\n                destCol = destLineLengths[destLineIndex];\n            }\n            var srcLineIndex = wrappedLines.length - linesToAdd - 1;\n            var srcCol = lastLineLength;\n            while (srcLineIndex >= 0) {\n                var cellsToCopy = Math.min(srcCol, destCol);\n                wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol - cellsToCopy, destCol - cellsToCopy, cellsToCopy, true);\n                destCol -= cellsToCopy;\n                if (destCol === 0) {\n                    destLineIndex--;\n                    destCol = destLineLengths[destLineIndex];\n                }\n                srcCol -= cellsToCopy;\n                if (srcCol === 0) {\n                    srcLineIndex--;\n                    var wrappedLinesIndex = Math.max(srcLineIndex, 0);\n                    srcCol = BufferReflow_1.getWrappedLineTrimmedLength(wrappedLines, wrappedLinesIndex, this._cols);\n                }\n            }\n            for (var i = 0; i < wrappedLines.length; i++) {\n                if (destLineLengths[i] < newCols) {\n                    wrappedLines[i].setCell(destLineLengths[i], nullCell);\n                }\n            }\n            var viewportAdjustments = linesToAdd - trimmedLines;\n            while (viewportAdjustments-- > 0) {\n                if (this.ybase === 0) {\n                    if (this.y < newRows - 1) {\n                        this.y++;\n                        this.lines.pop();\n                    }\n                    else {\n                        this.ybase++;\n                        this.ydisp++;\n                    }\n                }\n                else {\n                    if (this.ybase < Math.min(this.lines.maxLength, this.lines.length + countToInsert) - newRows) {\n                        if (this.ybase === this.ydisp) {\n                            this.ydisp++;\n                        }\n                        this.ybase++;\n                    }\n                }\n            }\n        }\n        if (toInsert.length > 0) {\n            var insertEvents = [];\n            var originalLines = [];\n            for (var i = 0; i < this.lines.length; i++) {\n                originalLines.push(this.lines.get(i));\n            }\n            var originalLinesLength = this.lines.length;\n            var originalLineIndex = originalLinesLength - 1;\n            var nextToInsertIndex = 0;\n            var nextToInsert = toInsert[nextToInsertIndex];\n            this.lines.length = Math.min(this.lines.maxLength, this.lines.length + countToInsert);\n            var countInsertedSoFar = 0;\n            for (var i = Math.min(this.lines.maxLength - 1, originalLinesLength + countToInsert - 1); i >= 0; i--) {\n                if (nextToInsert && nextToInsert.start > originalLineIndex + countInsertedSoFar) {\n                    for (var nextI = nextToInsert.newLines.length - 1; nextI >= 0; nextI--) {\n                        this.lines.set(i--, nextToInsert.newLines[nextI]);\n                    }\n                    i++;\n                    insertEvents.push({\n                        index: originalLineIndex + 1,\n                        amount: nextToInsert.newLines.length\n                    });\n                    countInsertedSoFar += nextToInsert.newLines.length;\n                    nextToInsert = toInsert[++nextToInsertIndex];\n                }\n                else {\n                    this.lines.set(i, originalLines[originalLineIndex--]);\n                }\n            }\n            var insertCountEmitted = 0;\n            for (var i = insertEvents.length - 1; i >= 0; i--) {\n                insertEvents[i].index += insertCountEmitted;\n                this.lines.onInsertEmitter.fire(insertEvents[i]);\n                insertCountEmitted += insertEvents[i].amount;\n            }\n            var amountToTrim = Math.max(0, originalLinesLength + countToInsert - this.lines.maxLength);\n            if (amountToTrim > 0) {\n                this.lines.onTrimEmitter.fire(amountToTrim);\n            }\n        }\n    };\n    Buffer.prototype.stringIndexToBufferIndex = function (lineIndex, stringIndex, trimRight) {\n        if (trimRight === void 0) { trimRight = false; }\n        while (stringIndex) {\n            var line = this.lines.get(lineIndex);\n            if (!line) {\n                return [-1, -1];\n            }\n            var length_1 = (trimRight) ? line.getTrimmedLength() : line.length;\n            for (var i = 0; i < length_1; ++i) {\n                if (line.get(i)[BufferLine_1.CHAR_DATA_WIDTH_INDEX]) {\n                    stringIndex -= line.get(i)[BufferLine_1.CHAR_DATA_CHAR_INDEX].length || 1;\n                }\n                if (stringIndex < 0) {\n                    return [lineIndex, i];\n                }\n            }\n            lineIndex++;\n        }\n        return [lineIndex, 0];\n    };\n    Buffer.prototype.translateBufferLineToString = function (lineIndex, trimRight, startCol, endCol) {\n        if (startCol === void 0) { startCol = 0; }\n        var line = this.lines.get(lineIndex);\n        if (!line) {\n            return '';\n        }\n        return line.translateToString(trimRight, startCol, endCol);\n    };\n    Buffer.prototype.getWrappedRangeForLine = function (y) {\n        var first = y;\n        var last = y;\n        while (first > 0 && this.lines.get(first).isWrapped) {\n            first--;\n        }\n        while (last + 1 < this.lines.length && this.lines.get(last + 1).isWrapped) {\n            last++;\n        }\n        return { first: first, last: last };\n    };\n    Buffer.prototype.setupTabStops = function (i) {\n        if (i !== null && i !== undefined) {\n            if (!this.tabs[i]) {\n                i = this.prevStop(i);\n            }\n        }\n        else {\n            this.tabs = {};\n            i = 0;\n        }\n        for (; i < this._cols; i += this._terminal.options.tabStopWidth) {\n            this.tabs[i] = true;\n        }\n    };\n    Buffer.prototype.prevStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[--x] && x > 0)\n            ;\n        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.nextStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[++x] && x < this._cols)\n            ;\n        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.addMarker = function (y) {\n        var _this = this;\n        var marker = new Marker_1.Marker(y);\n        this.markers.push(marker);\n        marker.register(this.lines.onTrim(function (amount) {\n            marker.line -= amount;\n            if (marker.line < 0) {\n                marker.dispose();\n            }\n        }));\n        marker.register(this.lines.onInsert(function (event) {\n            if (marker.line >= event.index) {\n                marker.line += event.amount;\n            }\n        }));\n        marker.register(this.lines.onDelete(function (event) {\n            if (marker.line >= event.index && marker.line < event.index + event.amount) {\n                marker.dispose();\n            }\n            if (marker.line > event.index) {\n                marker.line -= event.amount;\n            }\n        }));\n        marker.register(marker.onDispose(function () { return _this._removeMarker(marker); }));\n        return marker;\n    };\n    Buffer.prototype._removeMarker = function (marker) {\n        this.markers.splice(this.markers.indexOf(marker), 1);\n    };\n    Buffer.prototype.iterator = function (trimRight, startIndex, endIndex, startOverscan, endOverscan) {\n        return new BufferStringIterator(this, trimRight, startIndex, endIndex, startOverscan, endOverscan);\n    };\n    return Buffer;\n}());\nexports.Buffer = Buffer;\nvar BufferStringIterator = (function () {\n    function BufferStringIterator(_buffer, _trimRight, _startIndex, _endIndex, _startOverscan, _endOverscan) {\n        if (_startIndex === void 0) { _startIndex = 0; }\n        if (_endIndex === void 0) { _endIndex = _buffer.lines.length; }\n        if (_startOverscan === void 0) { _startOverscan = 0; }\n        if (_endOverscan === void 0) { _endOverscan = 0; }\n        this._buffer = _buffer;\n        this._trimRight = _trimRight;\n        this._startIndex = _startIndex;\n        this._endIndex = _endIndex;\n        this._startOverscan = _startOverscan;\n        this._endOverscan = _endOverscan;\n        if (this._startIndex < 0) {\n            this._startIndex = 0;\n        }\n        if (this._endIndex > this._buffer.lines.length) {\n            this._endIndex = this._buffer.lines.length;\n        }\n        this._current = this._startIndex;\n    }\n    BufferStringIterator.prototype.hasNext = function () {\n        return this._current < this._endIndex;\n    };\n    BufferStringIterator.prototype.next = function () {\n        var range = this._buffer.getWrappedRangeForLine(this._current);\n        if (range.first < this._startIndex - this._startOverscan) {\n            range.first = this._startIndex - this._startOverscan;\n        }\n        if (range.last > this._endIndex + this._endOverscan) {\n            range.last = this._endIndex + this._endOverscan;\n        }\n        range.first = Math.max(range.first, 0);\n        range.last = Math.min(range.last, this._buffer.lines.length);\n        var result = '';\n        for (var i = range.first; i <= range.last; ++i) {\n            result += this._buffer.translateBufferLineToString(i, this._trimRight);\n        }\n        this._current = range.last + 1;\n        return { range: range, content: result };\n    };\n    return BufferStringIterator;\n}());\nexports.BufferStringIterator = BufferStringIterator;\n\n},{\"./common/CircularList\":38,\"./core/buffer/BufferLine\":47,\"./core/buffer/BufferReflow\":48,\"./core/buffer/Marker\":49}],20:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"./Buffer\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar BufferSet = (function () {\n    function BufferSet(_terminal) {\n        this._terminal = _terminal;\n        this._onBufferActivate = new EventEmitter2_1.EventEmitter2();\n        this._normal = new Buffer_1.Buffer(this._terminal, true);\n        this._normal.fillViewportRows();\n        this._alt = new Buffer_1.Buffer(this._terminal, false);\n        this._activeBuffer = this._normal;\n        this.setupTabStops();\n    }\n    Object.defineProperty(BufferSet.prototype, \"onBufferActivate\", {\n        get: function () { return this._onBufferActivate.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"alt\", {\n        get: function () {\n            return this._alt;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"active\", {\n        get: function () {\n            return this._activeBuffer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"normal\", {\n        get: function () {\n            return this._normal;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BufferSet.prototype.activateNormalBuffer = function () {\n        if (this._activeBuffer === this._normal) {\n            return;\n        }\n        this._normal.x = this._alt.x;\n        this._normal.y = this._alt.y;\n        this._alt.clear();\n        this._activeBuffer = this._normal;\n        this._onBufferActivate.fire({\n            activeBuffer: this._normal,\n            inactiveBuffer: this._alt\n        });\n    };\n    BufferSet.prototype.activateAltBuffer = function (fillAttr) {\n        if (this._activeBuffer === this._alt) {\n            return;\n        }\n        this._alt.fillViewportRows(fillAttr);\n        this._alt.x = this._normal.x;\n        this._alt.y = this._normal.y;\n        this._activeBuffer = this._alt;\n        this._onBufferActivate.fire({\n            activeBuffer: this._alt,\n            inactiveBuffer: this._normal\n        });\n    };\n    BufferSet.prototype.resize = function (newCols, newRows) {\n        this._normal.resize(newCols, newRows);\n        this._alt.resize(newCols, newRows);\n    };\n    BufferSet.prototype.setupTabStops = function (i) {\n        this._normal.setupTabStops(i);\n        this._alt.setupTabStops(i);\n    };\n    return BufferSet;\n}());\nexports.BufferSet = BufferSet;\n\n},{\"./Buffer\":19,\"./common/EventEmitter2\":41}],21:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar CharMeasure = (function () {\n    function CharMeasure(document, parentElement) {\n        this._onCharSizeChanged = new EventEmitter2_1.EventEmitter2();\n        this._document = document;\n        this._parentElement = parentElement;\n        this._measureElement = this._document.createElement('span');\n        this._measureElement.classList.add('xterm-char-measure-element');\n        this._measureElement.textContent = 'W';\n        this._measureElement.setAttribute('aria-hidden', 'true');\n        this._parentElement.appendChild(this._measureElement);\n    }\n    Object.defineProperty(CharMeasure.prototype, \"onCharSizeChanged\", {\n        get: function () { return this._onCharSizeChanged.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CharMeasure.prototype.measure = function (options) {\n        this._measureElement.style.fontFamily = options.fontFamily;\n        this._measureElement.style.fontSize = options.fontSize + \"px\";\n        var geometry = this._measureElement.getBoundingClientRect();\n        if (geometry.width === 0 || geometry.height === 0) {\n            return;\n        }\n        var adjustedHeight = Math.ceil(geometry.height);\n        if (this._width !== geometry.width || this._height !== adjustedHeight) {\n            this._width = geometry.width;\n            this._height = adjustedHeight;\n            this._onCharSizeChanged.fire();\n        }\n    };\n    return CharMeasure;\n}());\nexports.CharMeasure = CharMeasure;\n\n},{\"./common/EventEmitter2\":41}],22:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TypedArrayUtils_1 = require(\"./common/TypedArrayUtils\");\nexports.wcwidth = (function (opts) {\n    var COMBINING_BMP = [\n        [0x0300, 0x036F], [0x0483, 0x0486], [0x0488, 0x0489],\n        [0x0591, 0x05BD], [0x05BF, 0x05BF], [0x05C1, 0x05C2],\n        [0x05C4, 0x05C5], [0x05C7, 0x05C7], [0x0600, 0x0603],\n        [0x0610, 0x0615], [0x064B, 0x065E], [0x0670, 0x0670],\n        [0x06D6, 0x06E4], [0x06E7, 0x06E8], [0x06EA, 0x06ED],\n        [0x070F, 0x070F], [0x0711, 0x0711], [0x0730, 0x074A],\n        [0x07A6, 0x07B0], [0x07EB, 0x07F3], [0x0901, 0x0902],\n        [0x093C, 0x093C], [0x0941, 0x0948], [0x094D, 0x094D],\n        [0x0951, 0x0954], [0x0962, 0x0963], [0x0981, 0x0981],\n        [0x09BC, 0x09BC], [0x09C1, 0x09C4], [0x09CD, 0x09CD],\n        [0x09E2, 0x09E3], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],\n        [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],\n        [0x0A70, 0x0A71], [0x0A81, 0x0A82], [0x0ABC, 0x0ABC],\n        [0x0AC1, 0x0AC5], [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD],\n        [0x0AE2, 0x0AE3], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],\n        [0x0B3F, 0x0B3F], [0x0B41, 0x0B43], [0x0B4D, 0x0B4D],\n        [0x0B56, 0x0B56], [0x0B82, 0x0B82], [0x0BC0, 0x0BC0],\n        [0x0BCD, 0x0BCD], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],\n        [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0CBC, 0x0CBC],\n        [0x0CBF, 0x0CBF], [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD],\n        [0x0CE2, 0x0CE3], [0x0D41, 0x0D43], [0x0D4D, 0x0D4D],\n        [0x0DCA, 0x0DCA], [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6],\n        [0x0E31, 0x0E31], [0x0E34, 0x0E3A], [0x0E47, 0x0E4E],\n        [0x0EB1, 0x0EB1], [0x0EB4, 0x0EB9], [0x0EBB, 0x0EBC],\n        [0x0EC8, 0x0ECD], [0x0F18, 0x0F19], [0x0F35, 0x0F35],\n        [0x0F37, 0x0F37], [0x0F39, 0x0F39], [0x0F71, 0x0F7E],\n        [0x0F80, 0x0F84], [0x0F86, 0x0F87], [0x0F90, 0x0F97],\n        [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6], [0x102D, 0x1030],\n        [0x1032, 0x1032], [0x1036, 0x1037], [0x1039, 0x1039],\n        [0x1058, 0x1059], [0x1160, 0x11FF], [0x135F, 0x135F],\n        [0x1712, 0x1714], [0x1732, 0x1734], [0x1752, 0x1753],\n        [0x1772, 0x1773], [0x17B4, 0x17B5], [0x17B7, 0x17BD],\n        [0x17C6, 0x17C6], [0x17C9, 0x17D3], [0x17DD, 0x17DD],\n        [0x180B, 0x180D], [0x18A9, 0x18A9], [0x1920, 0x1922],\n        [0x1927, 0x1928], [0x1932, 0x1932], [0x1939, 0x193B],\n        [0x1A17, 0x1A18], [0x1B00, 0x1B03], [0x1B34, 0x1B34],\n        [0x1B36, 0x1B3A], [0x1B3C, 0x1B3C], [0x1B42, 0x1B42],\n        [0x1B6B, 0x1B73], [0x1DC0, 0x1DCA], [0x1DFE, 0x1DFF],\n        [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2063],\n        [0x206A, 0x206F], [0x20D0, 0x20EF], [0x302A, 0x302F],\n        [0x3099, 0x309A], [0xA806, 0xA806], [0xA80B, 0xA80B],\n        [0xA825, 0xA826], [0xFB1E, 0xFB1E], [0xFE00, 0xFE0F],\n        [0xFE20, 0xFE23], [0xFEFF, 0xFEFF], [0xFFF9, 0xFFFB]\n    ];\n    var COMBINING_HIGH = [\n        [0x10A01, 0x10A03], [0x10A05, 0x10A06], [0x10A0C, 0x10A0F],\n        [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F], [0x1D167, 0x1D169],\n        [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],\n        [0x1D242, 0x1D244], [0xE0001, 0xE0001], [0xE0020, 0xE007F],\n        [0xE0100, 0xE01EF]\n    ];\n    function bisearch(ucs, data) {\n        var min = 0;\n        var max = data.length - 1;\n        var mid;\n        if (ucs < data[0][0] || ucs > data[max][1]) {\n            return false;\n        }\n        while (max >= min) {\n            mid = (min + max) >> 1;\n            if (ucs > data[mid][1]) {\n                min = mid + 1;\n            }\n            else if (ucs < data[mid][0]) {\n                max = mid - 1;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    }\n    function wcwidthHigh(ucs) {\n        if (bisearch(ucs, COMBINING_HIGH)) {\n            return 0;\n        }\n        if ((ucs >= 0x20000 && ucs <= 0x2fffd) || (ucs >= 0x30000 && ucs <= 0x3fffd)) {\n            return 2;\n        }\n        return 1;\n    }\n    var control = opts.control | 0;\n    var table = new Uint8Array(65536);\n    TypedArrayUtils_1.fill(table, 1);\n    table[0] = opts.nul;\n    TypedArrayUtils_1.fill(table, opts.control, 1, 32);\n    TypedArrayUtils_1.fill(table, opts.control, 0x7f, 0xa0);\n    TypedArrayUtils_1.fill(table, 2, 0x1100, 0x1160);\n    table[0x2329] = 2;\n    table[0x232a] = 2;\n    TypedArrayUtils_1.fill(table, 2, 0x2e80, 0xa4d0);\n    table[0x303f] = 1;\n    TypedArrayUtils_1.fill(table, 2, 0xac00, 0xd7a4);\n    TypedArrayUtils_1.fill(table, 2, 0xf900, 0xfb00);\n    TypedArrayUtils_1.fill(table, 2, 0xfe10, 0xfe1a);\n    TypedArrayUtils_1.fill(table, 2, 0xfe30, 0xfe70);\n    TypedArrayUtils_1.fill(table, 2, 0xff00, 0xff61);\n    TypedArrayUtils_1.fill(table, 2, 0xffe0, 0xffe7);\n    for (var r = 0; r < COMBINING_BMP.length; ++r) {\n        TypedArrayUtils_1.fill(table, 0, COMBINING_BMP[r][0], COMBINING_BMP[r][1] + 1);\n    }\n    return function (num) {\n        if (num < 32) {\n            return control | 0;\n        }\n        if (num < 127) {\n            return 1;\n        }\n        if (num < 65536) {\n            return table[num];\n        }\n        return wcwidthHigh(num);\n    };\n})({ nul: 0, control: 0 });\nfunction getStringCellWidth(s) {\n    var result = 0;\n    var length = s.length;\n    for (var i = 0; i < length; ++i) {\n        var code = s.charCodeAt(i);\n        if (0xD800 <= code && code <= 0xDBFF) {\n            if (++i >= length) {\n                return result + exports.wcwidth(code);\n            }\n            var second = s.charCodeAt(i);\n            if (0xDC00 <= second && second <= 0xDFFF) {\n                code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n            }\n            else {\n                result += exports.wcwidth(second);\n            }\n        }\n        result += exports.wcwidth(code);\n    }\n    return result;\n}\nexports.getStringCellWidth = getStringCellWidth;\n\n},{\"./common/TypedArrayUtils\":44}],23:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction prepareTextForTerminal(text) {\n    return text.replace(/\\r?\\n/g, '\\r');\n}\nexports.prepareTextForTerminal = prepareTextForTerminal;\nfunction bracketTextForPaste(text, bracketedPasteMode) {\n    if (bracketedPasteMode) {\n        return '\\x1b[200~' + text + '\\x1b[201~';\n    }\n    return text;\n}\nexports.bracketTextForPaste = bracketTextForPaste;\nfunction copyHandler(ev, term, selectionManager) {\n    if (term.browser.isMSIE) {\n        window.clipboardData.setData('Text', selectionManager.selectionText);\n    }\n    else {\n        ev.clipboardData.setData('text/plain', selectionManager.selectionText);\n    }\n    ev.preventDefault();\n}\nexports.copyHandler = copyHandler;\nfunction pasteHandler(ev, term) {\n    ev.stopPropagation();\n    var text;\n    var dispatchPaste = function (text) {\n        text = prepareTextForTerminal(text);\n        text = bracketTextForPaste(text, term.bracketedPasteMode);\n        term.handler(text);\n        term.textarea.value = '';\n        term.emit('paste', text);\n        term.cancel(ev);\n    };\n    if (term.browser.isMSIE) {\n        if (window.clipboardData) {\n            text = window.clipboardData.getData('Text');\n            dispatchPaste(text);\n        }\n    }\n    else {\n        if (ev.clipboardData) {\n            text = ev.clipboardData.getData('text/plain');\n            dispatchPaste(text);\n        }\n    }\n}\nexports.pasteHandler = pasteHandler;\nfunction moveTextAreaUnderMouseCursor(ev, term) {\n    var pos = term.screenElement.getBoundingClientRect();\n    var left = ev.clientX - pos.left - 10;\n    var top = ev.clientY - pos.top - 10;\n    term.textarea.style.position = 'absolute';\n    term.textarea.style.width = '20px';\n    term.textarea.style.height = '20px';\n    term.textarea.style.left = left + \"px\";\n    term.textarea.style.top = top + \"px\";\n    term.textarea.style.zIndex = '1000';\n    term.textarea.focus();\n    setTimeout(function () {\n        term.textarea.style.position = null;\n        term.textarea.style.width = null;\n        term.textarea.style.height = null;\n        term.textarea.style.left = null;\n        term.textarea.style.top = null;\n        term.textarea.style.zIndex = null;\n    }, 200);\n}\nexports.moveTextAreaUnderMouseCursor = moveTextAreaUnderMouseCursor;\nfunction rightClickHandler(ev, term, selectionManager, shouldSelectWord) {\n    moveTextAreaUnderMouseCursor(ev, term);\n    if (shouldSelectWord && !selectionManager.isClickInSelection(ev)) {\n        selectionManager.selectWordAtCursor(ev);\n    }\n    term.textarea.value = selectionManager.selectionText;\n    term.textarea.select();\n}\nexports.rightClickHandler = rightClickHandler;\n\n},{}],24:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CompositionHelper = (function () {\n    function CompositionHelper(_textarea, _compositionView, _terminal) {\n        this._textarea = _textarea;\n        this._compositionView = _compositionView;\n        this._terminal = _terminal;\n        this._isComposing = false;\n        this._isSendingComposition = false;\n        this._compositionPosition = { start: null, end: null };\n    }\n    CompositionHelper.prototype.compositionstart = function () {\n        this._isComposing = true;\n        this._compositionPosition.start = this._textarea.value.length;\n        this._compositionView.textContent = '';\n        this._compositionView.classList.add('active');\n    };\n    CompositionHelper.prototype.compositionupdate = function (ev) {\n        var _this = this;\n        this._compositionView.textContent = ev.data;\n        this.updateCompositionElements();\n        setTimeout(function () {\n            _this._compositionPosition.end = _this._textarea.value.length;\n        }, 0);\n    };\n    CompositionHelper.prototype.compositionend = function () {\n        this._finalizeComposition(true);\n    };\n    CompositionHelper.prototype.keydown = function (ev) {\n        if (this._isComposing || this._isSendingComposition) {\n            if (ev.keyCode === 229) {\n                return false;\n            }\n            else if (ev.keyCode === 16 || ev.keyCode === 17 || ev.keyCode === 18) {\n                return false;\n            }\n            this._finalizeComposition(false);\n        }\n        if (ev.keyCode === 229) {\n            this._handleAnyTextareaChanges();\n            return false;\n        }\n        return true;\n    };\n    CompositionHelper.prototype._finalizeComposition = function (waitForPropagation) {\n        var _this = this;\n        this._compositionView.classList.remove('active');\n        this._isComposing = false;\n        this._clearTextareaPosition();\n        if (!waitForPropagation) {\n            this._isSendingComposition = false;\n            var input = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);\n            this._terminal.handler(input);\n        }\n        else {\n            var currentCompositionPosition_1 = {\n                start: this._compositionPosition.start,\n                end: this._compositionPosition.end\n            };\n            this._isSendingComposition = true;\n            setTimeout(function () {\n                if (_this._isSendingComposition) {\n                    _this._isSendingComposition = false;\n                    var input = void 0;\n                    if (_this._isComposing) {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start, currentCompositionPosition_1.end);\n                    }\n                    else {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start);\n                    }\n                    _this._terminal.handler(input);\n                }\n            }, 0);\n        }\n    };\n    CompositionHelper.prototype._handleAnyTextareaChanges = function () {\n        var _this = this;\n        var oldValue = this._textarea.value;\n        setTimeout(function () {\n            if (!_this._isComposing) {\n                var newValue = _this._textarea.value;\n                var diff = newValue.replace(oldValue, '');\n                if (diff.length > 0) {\n                    _this._terminal.handler(diff);\n                }\n            }\n        }, 0);\n    };\n    CompositionHelper.prototype.updateCompositionElements = function (dontRecurse) {\n        var _this = this;\n        if (!this._isComposing) {\n            return;\n        }\n        if (this._terminal.buffer.isCursorInViewport) {\n            var cellHeight = Math.ceil(this._terminal.charMeasure.height * this._terminal.options.lineHeight);\n            var cursorTop = this._terminal.buffer.y * cellHeight;\n            var cursorLeft = this._terminal.buffer.x * this._terminal.charMeasure.width;\n            this._compositionView.style.left = cursorLeft + 'px';\n            this._compositionView.style.top = cursorTop + 'px';\n            this._compositionView.style.height = cellHeight + 'px';\n            this._compositionView.style.lineHeight = cellHeight + 'px';\n            this._compositionView.style.fontFamily = this._terminal.options.fontFamily;\n            this._compositionView.style.fontSize = this._terminal.options.fontSize + 'px';\n            var compositionViewBounds = this._compositionView.getBoundingClientRect();\n            this._textarea.style.left = cursorLeft + 'px';\n            this._textarea.style.top = cursorTop + 'px';\n            this._textarea.style.width = compositionViewBounds.width + 'px';\n            this._textarea.style.height = compositionViewBounds.height + 'px';\n            this._textarea.style.lineHeight = compositionViewBounds.height + 'px';\n        }\n        if (!dontRecurse) {\n            setTimeout(function () { return _this.updateCompositionElements(true); }, 0);\n        }\n    };\n    CompositionHelper.prototype._clearTextareaPosition = function () {\n        this._textarea.style.left = '';\n        this._textarea.style.top = '';\n    };\n    return CompositionHelper;\n}());\nexports.CompositionHelper = CompositionHelper;\n\n},{}],25:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar TextDecoder_1 = require(\"./core/input/TextDecoder\");\nfunction r(low, high) {\n    var c = high - low;\n    var arr = new Array(c);\n    while (c--) {\n        arr[c] = --high;\n    }\n    return arr;\n}\nvar TransitionTable = (function () {\n    function TransitionTable(length) {\n        this.table = (typeof Uint8Array === 'undefined')\n            ? new Array(length)\n            : new Uint8Array(length);\n    }\n    TransitionTable.prototype.add = function (code, state, action, next) {\n        this.table[state << 8 | code] = ((action | 0) << 4) | ((next === undefined) ? state : next);\n    };\n    TransitionTable.prototype.addMany = function (codes, state, action, next) {\n        for (var i = 0; i < codes.length; i++) {\n            this.add(codes[i], state, action, next);\n        }\n    };\n    return TransitionTable;\n}());\nexports.TransitionTable = TransitionTable;\nvar PRINTABLES = r(0x20, 0x7f);\nvar EXECUTABLES = r(0x00, 0x18);\nEXECUTABLES.push(0x19);\nEXECUTABLES.push.apply(EXECUTABLES, r(0x1c, 0x20));\nvar NON_ASCII_PRINTABLE = 0xA0;\nexports.VT500_TRANSITION_TABLE = (function () {\n    var table = new TransitionTable(4095);\n    var states = r(0, 13 + 1);\n    var state;\n    for (state in states) {\n        for (var code = 0; code <= NON_ASCII_PRINTABLE; ++code) {\n            table.add(code, state, 1, 0);\n        }\n    }\n    table.addMany(PRINTABLES, 0, 2, 0);\n    for (state in states) {\n        table.addMany([0x18, 0x1a, 0x99, 0x9a], state, 3, 0);\n        table.addMany(r(0x80, 0x90), state, 3, 0);\n        table.addMany(r(0x90, 0x98), state, 3, 0);\n        table.add(0x9c, state, 0, 0);\n        table.add(0x1b, state, 11, 1);\n        table.add(0x9d, state, 4, 8);\n        table.addMany([0x98, 0x9e, 0x9f], state, 0, 7);\n        table.add(0x9b, state, 11, 3);\n        table.add(0x90, state, 11, 9);\n    }\n    table.addMany(EXECUTABLES, 0, 3, 0);\n    table.addMany(EXECUTABLES, 1, 3, 1);\n    table.add(0x7f, 1, 0, 1);\n    table.addMany(EXECUTABLES, 8, 0, 8);\n    table.addMany(EXECUTABLES, 3, 3, 3);\n    table.add(0x7f, 3, 0, 3);\n    table.addMany(EXECUTABLES, 4, 3, 4);\n    table.add(0x7f, 4, 0, 4);\n    table.addMany(EXECUTABLES, 6, 3, 6);\n    table.addMany(EXECUTABLES, 5, 3, 5);\n    table.add(0x7f, 5, 0, 5);\n    table.addMany(EXECUTABLES, 2, 3, 2);\n    table.add(0x7f, 2, 0, 2);\n    table.add(0x5d, 1, 4, 8);\n    table.addMany(PRINTABLES, 8, 5, 8);\n    table.add(0x7f, 8, 5, 8);\n    table.addMany([0x9c, 0x1b, 0x18, 0x1a, 0x07], 8, 6, 0);\n    table.addMany(r(0x1c, 0x20), 8, 0, 8);\n    table.addMany([0x58, 0x5e, 0x5f], 1, 0, 7);\n    table.addMany(PRINTABLES, 7, 0, 7);\n    table.addMany(EXECUTABLES, 7, 0, 7);\n    table.add(0x9c, 7, 0, 0);\n    table.add(0x7f, 7, 0, 7);\n    table.add(0x5b, 1, 11, 3);\n    table.addMany(r(0x40, 0x7f), 3, 7, 0);\n    table.addMany(r(0x30, 0x3a), 3, 8, 4);\n    table.add(0x3b, 3, 8, 4);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 3, 9, 4);\n    table.addMany(r(0x30, 0x3a), 4, 8, 4);\n    table.add(0x3b, 4, 8, 4);\n    table.addMany(r(0x40, 0x7f), 4, 7, 0);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 4, 0, 6);\n    table.addMany(r(0x20, 0x40), 6, 0, 6);\n    table.add(0x7f, 6, 0, 6);\n    table.addMany(r(0x40, 0x7f), 6, 0, 0);\n    table.add(0x3a, 3, 0, 6);\n    table.addMany(r(0x20, 0x30), 3, 9, 5);\n    table.addMany(r(0x20, 0x30), 5, 9, 5);\n    table.addMany(r(0x30, 0x40), 5, 0, 6);\n    table.addMany(r(0x40, 0x7f), 5, 7, 0);\n    table.addMany(r(0x20, 0x30), 4, 9, 5);\n    table.addMany(r(0x20, 0x30), 1, 9, 2);\n    table.addMany(r(0x20, 0x30), 2, 9, 2);\n    table.addMany(r(0x30, 0x7f), 2, 10, 0);\n    table.addMany(r(0x30, 0x50), 1, 10, 0);\n    table.addMany(r(0x51, 0x58), 1, 10, 0);\n    table.addMany([0x59, 0x5a, 0x5c], 1, 10, 0);\n    table.addMany(r(0x60, 0x7f), 1, 10, 0);\n    table.add(0x50, 1, 11, 9);\n    table.addMany(EXECUTABLES, 9, 0, 9);\n    table.add(0x7f, 9, 0, 9);\n    table.addMany(r(0x1c, 0x20), 9, 0, 9);\n    table.addMany(r(0x20, 0x30), 9, 9, 12);\n    table.add(0x3a, 9, 0, 11);\n    table.addMany(r(0x30, 0x3a), 9, 8, 10);\n    table.add(0x3b, 9, 8, 10);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 9, 9, 10);\n    table.addMany(EXECUTABLES, 11, 0, 11);\n    table.addMany(r(0x20, 0x80), 11, 0, 11);\n    table.addMany(r(0x1c, 0x20), 11, 0, 11);\n    table.addMany(EXECUTABLES, 10, 0, 10);\n    table.add(0x7f, 10, 0, 10);\n    table.addMany(r(0x1c, 0x20), 10, 0, 10);\n    table.addMany(r(0x30, 0x3a), 10, 8, 10);\n    table.add(0x3b, 10, 8, 10);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 10, 0, 11);\n    table.addMany(r(0x20, 0x30), 10, 9, 12);\n    table.addMany(EXECUTABLES, 12, 0, 12);\n    table.add(0x7f, 12, 0, 12);\n    table.addMany(r(0x1c, 0x20), 12, 0, 12);\n    table.addMany(r(0x20, 0x30), 12, 9, 12);\n    table.addMany(r(0x30, 0x40), 12, 0, 11);\n    table.addMany(r(0x40, 0x7f), 12, 12, 13);\n    table.addMany(r(0x40, 0x7f), 10, 12, 13);\n    table.addMany(r(0x40, 0x7f), 9, 12, 13);\n    table.addMany(EXECUTABLES, 13, 13, 13);\n    table.addMany(PRINTABLES, 13, 13, 13);\n    table.add(0x7f, 13, 0, 13);\n    table.addMany([0x1b, 0x9c], 13, 14, 0);\n    table.add(NON_ASCII_PRINTABLE, 8, 5, 8);\n    return table;\n})();\nvar DcsDummy = (function () {\n    function DcsDummy() {\n    }\n    DcsDummy.prototype.hook = function (collect, params, flag) { };\n    DcsDummy.prototype.put = function (data, start, end) { };\n    DcsDummy.prototype.unhook = function () { };\n    return DcsDummy;\n}());\nvar EscapeSequenceParser = (function (_super) {\n    __extends(EscapeSequenceParser, _super);\n    function EscapeSequenceParser(TRANSITIONS) {\n        if (TRANSITIONS === void 0) { TRANSITIONS = exports.VT500_TRANSITION_TABLE; }\n        var _this = _super.call(this) || this;\n        _this.TRANSITIONS = TRANSITIONS;\n        _this.initialState = 0;\n        _this.currentState = _this.initialState;\n        _this._osc = '';\n        _this._params = [0];\n        _this._collect = '';\n        _this._printHandlerFb = function (data, start, end) { };\n        _this._executeHandlerFb = function (code) { };\n        _this._csiHandlerFb = function (collect, params, flag) { };\n        _this._escHandlerFb = function (collect, flag) { };\n        _this._oscHandlerFb = function (identifier, data) { };\n        _this._dcsHandlerFb = new DcsDummy();\n        _this._errorHandlerFb = function (state) { return state; };\n        _this._printHandler = _this._printHandlerFb;\n        _this._executeHandlers = Object.create(null);\n        _this._csiHandlers = Object.create(null);\n        _this._escHandlers = Object.create(null);\n        _this._oscHandlers = Object.create(null);\n        _this._dcsHandlers = Object.create(null);\n        _this._activeDcsHandler = null;\n        _this._errorHandler = _this._errorHandlerFb;\n        _this.setEscHandler('\\\\', function () { });\n        return _this;\n    }\n    EscapeSequenceParser.prototype.dispose = function () {\n        this._printHandlerFb = null;\n        this._executeHandlerFb = null;\n        this._csiHandlerFb = null;\n        this._escHandlerFb = null;\n        this._oscHandlerFb = null;\n        this._dcsHandlerFb = null;\n        this._errorHandlerFb = null;\n        this._printHandler = null;\n        this._executeHandlers = null;\n        this._escHandlers = null;\n        this._csiHandlers = null;\n        this._oscHandlers = null;\n        this._dcsHandlers = null;\n        this._activeDcsHandler = null;\n        this._errorHandler = null;\n    };\n    EscapeSequenceParser.prototype.setPrintHandler = function (callback) {\n        this._printHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearPrintHandler = function () {\n        this._printHandler = this._printHandlerFb;\n    };\n    EscapeSequenceParser.prototype.setExecuteHandler = function (flag, callback) {\n        this._executeHandlers[flag.charCodeAt(0)] = callback;\n    };\n    EscapeSequenceParser.prototype.clearExecuteHandler = function (flag) {\n        if (this._executeHandlers[flag.charCodeAt(0)])\n            delete this._executeHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setExecuteHandlerFallback = function (callback) {\n        this._executeHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.addCsiHandler = function (flag, callback) {\n        var index = flag.charCodeAt(0);\n        if (this._csiHandlers[index] === undefined) {\n            this._csiHandlers[index] = [];\n        }\n        var handlerList = this._csiHandlers[index];\n        handlerList.push(callback);\n        return {\n            dispose: function () {\n                var handlerIndex = handlerList.indexOf(callback);\n                if (handlerIndex !== -1) {\n                    handlerList.splice(handlerIndex, 1);\n                }\n            }\n        };\n    };\n    EscapeSequenceParser.prototype.setCsiHandler = function (flag, callback) {\n        this._csiHandlers[flag.charCodeAt(0)] = [callback];\n    };\n    EscapeSequenceParser.prototype.clearCsiHandler = function (flag) {\n        if (this._csiHandlers[flag.charCodeAt(0)])\n            delete this._csiHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setCsiHandlerFallback = function (callback) {\n        this._csiHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setEscHandler = function (collectAndFlag, callback) {\n        this._escHandlers[collectAndFlag] = callback;\n    };\n    EscapeSequenceParser.prototype.clearEscHandler = function (collectAndFlag) {\n        if (this._escHandlers[collectAndFlag])\n            delete this._escHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setEscHandlerFallback = function (callback) {\n        this._escHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.addOscHandler = function (ident, callback) {\n        if (this._oscHandlers[ident] === undefined) {\n            this._oscHandlers[ident] = [];\n        }\n        var handlerList = this._oscHandlers[ident];\n        handlerList.push(callback);\n        return {\n            dispose: function () {\n                var handlerIndex = handlerList.indexOf(callback);\n                if (handlerIndex !== -1) {\n                    handlerList.splice(handlerIndex, 1);\n                }\n            }\n        };\n    };\n    EscapeSequenceParser.prototype.setOscHandler = function (ident, callback) {\n        this._oscHandlers[ident] = [callback];\n    };\n    EscapeSequenceParser.prototype.clearOscHandler = function (ident) {\n        if (this._oscHandlers[ident])\n            delete this._oscHandlers[ident];\n    };\n    EscapeSequenceParser.prototype.setOscHandlerFallback = function (callback) {\n        this._oscHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setDcsHandler = function (collectAndFlag, handler) {\n        this._dcsHandlers[collectAndFlag] = handler;\n    };\n    EscapeSequenceParser.prototype.clearDcsHandler = function (collectAndFlag) {\n        if (this._dcsHandlers[collectAndFlag])\n            delete this._dcsHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setDcsHandlerFallback = function (handler) {\n        this._dcsHandlerFb = handler;\n    };\n    EscapeSequenceParser.prototype.setErrorHandler = function (callback) {\n        this._errorHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearErrorHandler = function () {\n        this._errorHandler = this._errorHandlerFb;\n    };\n    EscapeSequenceParser.prototype.reset = function () {\n        this.currentState = this.initialState;\n        this._osc = '';\n        this._params = [0];\n        this._collect = '';\n        this._activeDcsHandler = null;\n    };\n    EscapeSequenceParser.prototype.parse = function (data, length) {\n        var code = 0;\n        var transition = 0;\n        var error = false;\n        var currentState = this.currentState;\n        var print = -1;\n        var dcs = -1;\n        var osc = this._osc;\n        var collect = this._collect;\n        var params = this._params;\n        var table = this.TRANSITIONS.table;\n        var dcsHandler = this._activeDcsHandler;\n        var callback = null;\n        for (var i = 0; i < length; ++i) {\n            code = data[i];\n            if (currentState === 0 && code > 0x1f && code < 0x80) {\n                print = (~print) ? print : i;\n                do\n                    i++;\n                while (i < length && data[i] > 0x1f && data[i] < 0x80);\n                i--;\n                continue;\n            }\n            if (currentState === 4 && (code > 0x2f && code < 0x39)) {\n                params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                continue;\n            }\n            transition = table[currentState << 8 | (code < 0xa0 ? code : NON_ASCII_PRINTABLE)];\n            switch (transition >> 4) {\n                case 2:\n                    print = (~print) ? print : i;\n                    break;\n                case 3:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    callback = this._executeHandlers[code];\n                    if (callback)\n                        callback();\n                    else\n                        this._executeHandlerFb(code);\n                    break;\n                case 0:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    else if (~dcs) {\n                        dcsHandler.put(data, dcs, i);\n                        dcs = -1;\n                    }\n                    break;\n                case 1:\n                    if (code > 0x9f) {\n                        switch (currentState) {\n                            case 0:\n                                print = (~print) ? print : i;\n                                break;\n                            case 6:\n                                transition |= 6;\n                                break;\n                            case 11:\n                                transition |= 11;\n                                break;\n                            case 13:\n                                dcs = (~dcs) ? dcs : i;\n                                transition |= 13;\n                                break;\n                            default:\n                                error = true;\n                        }\n                    }\n                    else {\n                        error = true;\n                    }\n                    if (error) {\n                        var inject = this._errorHandler({\n                            position: i,\n                            code: code,\n                            currentState: currentState,\n                            print: print,\n                            dcs: dcs,\n                            osc: osc,\n                            collect: collect,\n                            params: params,\n                            abort: false\n                        });\n                        if (inject.abort)\n                            return;\n                        error = false;\n                    }\n                    break;\n                case 7:\n                    var handlers = this._csiHandlers[code];\n                    var j = handlers ? handlers.length - 1 : -1;\n                    for (; j >= 0; j--) {\n                        if (handlers[j](params, collect) !== false) {\n                            break;\n                        }\n                    }\n                    if (j < 0) {\n                        this._csiHandlerFb(collect, params, code);\n                    }\n                    break;\n                case 8:\n                    if (code === 0x3b)\n                        params.push(0);\n                    else\n                        params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                    break;\n                case 9:\n                    collect += String.fromCharCode(code);\n                    break;\n                case 10:\n                    callback = this._escHandlers[collect + String.fromCharCode(code)];\n                    if (callback)\n                        callback(collect, code);\n                    else\n                        this._escHandlerFb(collect, code);\n                    break;\n                case 11:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 12:\n                    dcsHandler = this._dcsHandlers[collect + String.fromCharCode(code)];\n                    if (!dcsHandler)\n                        dcsHandler = this._dcsHandlerFb;\n                    dcsHandler.hook(collect, params, code);\n                    break;\n                case 13:\n                    dcs = (~dcs) ? dcs : i;\n                    break;\n                case 14:\n                    if (dcsHandler) {\n                        if (~dcs)\n                            dcsHandler.put(data, dcs, i);\n                        dcsHandler.unhook();\n                        dcsHandler = null;\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 4:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    break;\n                case 5:\n                    for (var j_1 = i + 1;; j_1++) {\n                        if (j_1 >= length\n                            || (code = data[j_1]) < 0x20\n                            || (code > 0x7f && code <= 0x9f)) {\n                            osc += TextDecoder_1.utf32ToString(data, i, j_1);\n                            i = j_1 - 1;\n                            break;\n                        }\n                    }\n                    break;\n                case 6:\n                    if (osc && code !== 0x18 && code !== 0x1a) {\n                        var idx = osc.indexOf(';');\n                        if (idx === -1) {\n                            this._oscHandlerFb(-1, osc);\n                        }\n                        else {\n                            var identifier = parseInt(osc.substring(0, idx));\n                            var content = osc.substring(idx + 1);\n                            var handlers_1 = this._oscHandlers[identifier];\n                            var j_2 = handlers_1 ? handlers_1.length - 1 : -1;\n                            for (; j_2 >= 0; j_2--) {\n                                if (handlers_1[j_2](content) !== false) {\n                                    break;\n                                }\n                            }\n                            if (j_2 < 0) {\n                                this._oscHandlerFb(identifier, content);\n                            }\n                        }\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n            }\n            currentState = transition & 15;\n        }\n        if (currentState === 0 && ~print) {\n            this._printHandler(data, print, length);\n        }\n        else if (currentState === 13 && ~dcs && dcsHandler) {\n            dcsHandler.put(data, dcs, length);\n        }\n        this._osc = osc;\n        this._collect = collect;\n        this._params = params;\n        this._activeDcsHandler = dcsHandler;\n        this.currentState = currentState;\n    };\n    return EscapeSequenceParser;\n}(Lifecycle_1.Disposable));\nexports.EscapeSequenceParser = EscapeSequenceParser;\n\n},{\"./common/Lifecycle\":42,\"./core/input/TextDecoder\":52}],26:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"./common/data/EscapeSequences\");\nvar Charsets_1 = require(\"./core/data/Charsets\");\nvar CharWidth_1 = require(\"./CharWidth\");\nvar EscapeSequenceParser_1 = require(\"./EscapeSequenceParser\");\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar TypedArrayUtils_1 = require(\"./common/TypedArrayUtils\");\nvar TextDecoder_1 = require(\"./core/input/TextDecoder\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar GLEVEL = { '(': 0, ')': 1, '*': 2, '+': 3, '-': 1, '.': 2 };\nvar DECRQSS = (function () {\n    function DECRQSS(_terminal) {\n        this._terminal = _terminal;\n        this._data = new Uint32Array(0);\n    }\n    DECRQSS.prototype.hook = function (collect, params, flag) {\n        this._data = new Uint32Array(0);\n    };\n    DECRQSS.prototype.put = function (data, start, end) {\n        this._data = TypedArrayUtils_1.concat(this._data, data.subarray(start, end));\n    };\n    DECRQSS.prototype.unhook = function () {\n        var data = TextDecoder_1.utf32ToString(this._data);\n        this._data = new Uint32Array(0);\n        switch (data) {\n            case '\"q':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0\\\"q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case '\"p':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r61\\\"p\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'r':\n                var pt = '' + (this._terminal.buffer.scrollTop + 1) +\n                    ';' + (this._terminal.buffer.scrollBottom + 1) + 'r';\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + pt + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'm':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0m\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case ' q':\n                var STYLES = { 'block': 2, 'underline': 4, 'bar': 6 };\n                var style = STYLES[this._terminal.getOption('cursorStyle')];\n                style -= this._terminal.getOption('cursorBlink');\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + style + \" q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            default:\n                this._terminal.error('Unknown DCS $q %s', data);\n                this._terminal.handler(EscapeSequences_1.C0.ESC + \"P0$r\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n        }\n    };\n    return DECRQSS;\n}());\nvar InputHandler = (function (_super) {\n    __extends(InputHandler, _super);\n    function InputHandler(_terminal, _parser) {\n        if (_parser === void 0) { _parser = new EscapeSequenceParser_1.EscapeSequenceParser(); }\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._parser = _parser;\n        _this._parseBuffer = new Uint32Array(4096);\n        _this._stringDecoder = new TextDecoder_1.StringToUtf32();\n        _this._utf8Decoder = new TextDecoder_1.Utf8ToUtf32();\n        _this._workCell = new BufferLine_1.CellData();\n        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();\n        _this._onData = new EventEmitter2_1.EventEmitter2();\n        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();\n        _this._onScroll = new EventEmitter2_1.EventEmitter2();\n        _this.register(_this._parser);\n        _this._parser.setCsiHandlerFallback(function (collect, params, flag) {\n            _this._terminal.error('Unknown CSI code: ', { collect: collect, params: params, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setEscHandlerFallback(function (collect, flag) {\n            _this._terminal.error('Unknown ESC code: ', { collect: collect, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setExecuteHandlerFallback(function (code) {\n            _this._terminal.error('Unknown EXECUTE code: ', { code: code });\n        });\n        _this._parser.setOscHandlerFallback(function (identifier, data) {\n            _this._terminal.error('Unknown OSC code: ', { identifier: identifier, data: data });\n        });\n        _this._parser.setPrintHandler(function (data, start, end) { return _this.print(data, start, end); });\n        _this._parser.setCsiHandler('@', function (params, collect) { return _this.insertChars(params); });\n        _this._parser.setCsiHandler('A', function (params, collect) { return _this.cursorUp(params); });\n        _this._parser.setCsiHandler('B', function (params, collect) { return _this.cursorDown(params); });\n        _this._parser.setCsiHandler('C', function (params, collect) { return _this.cursorForward(params); });\n        _this._parser.setCsiHandler('D', function (params, collect) { return _this.cursorBackward(params); });\n        _this._parser.setCsiHandler('E', function (params, collect) { return _this.cursorNextLine(params); });\n        _this._parser.setCsiHandler('F', function (params, collect) { return _this.cursorPrecedingLine(params); });\n        _this._parser.setCsiHandler('G', function (params, collect) { return _this.cursorCharAbsolute(params); });\n        _this._parser.setCsiHandler('H', function (params, collect) { return _this.cursorPosition(params); });\n        _this._parser.setCsiHandler('I', function (params, collect) { return _this.cursorForwardTab(params); });\n        _this._parser.setCsiHandler('J', function (params, collect) { return _this.eraseInDisplay(params); });\n        _this._parser.setCsiHandler('K', function (params, collect) { return _this.eraseInLine(params); });\n        _this._parser.setCsiHandler('L', function (params, collect) { return _this.insertLines(params); });\n        _this._parser.setCsiHandler('M', function (params, collect) { return _this.deleteLines(params); });\n        _this._parser.setCsiHandler('P', function (params, collect) { return _this.deleteChars(params); });\n        _this._parser.setCsiHandler('S', function (params, collect) { return _this.scrollUp(params); });\n        _this._parser.setCsiHandler('T', function (params, collect) { return _this.scrollDown(params, collect); });\n        _this._parser.setCsiHandler('X', function (params, collect) { return _this.eraseChars(params); });\n        _this._parser.setCsiHandler('Z', function (params, collect) { return _this.cursorBackwardTab(params); });\n        _this._parser.setCsiHandler('`', function (params, collect) { return _this.charPosAbsolute(params); });\n        _this._parser.setCsiHandler('a', function (params, collect) { return _this.hPositionRelative(params); });\n        _this._parser.setCsiHandler('b', function (params, collect) { return _this.repeatPrecedingCharacter(params); });\n        _this._parser.setCsiHandler('c', function (params, collect) { return _this.sendDeviceAttributes(params, collect); });\n        _this._parser.setCsiHandler('d', function (params, collect) { return _this.linePosAbsolute(params); });\n        _this._parser.setCsiHandler('e', function (params, collect) { return _this.vPositionRelative(params); });\n        _this._parser.setCsiHandler('f', function (params, collect) { return _this.hVPosition(params); });\n        _this._parser.setCsiHandler('g', function (params, collect) { return _this.tabClear(params); });\n        _this._parser.setCsiHandler('h', function (params, collect) { return _this.setMode(params, collect); });\n        _this._parser.setCsiHandler('l', function (params, collect) { return _this.resetMode(params, collect); });\n        _this._parser.setCsiHandler('m', function (params, collect) { return _this.charAttributes(params); });\n        _this._parser.setCsiHandler('n', function (params, collect) { return _this.deviceStatus(params, collect); });\n        _this._parser.setCsiHandler('p', function (params, collect) { return _this.softReset(params, collect); });\n        _this._parser.setCsiHandler('q', function (params, collect) { return _this.setCursorStyle(params, collect); });\n        _this._parser.setCsiHandler('r', function (params, collect) { return _this.setScrollRegion(params, collect); });\n        _this._parser.setCsiHandler('s', function (params, collect) { return _this.saveCursor(params); });\n        _this._parser.setCsiHandler('u', function (params, collect) { return _this.restoreCursor(params); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BEL, function () { return _this.bell(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.LF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.VT, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.FF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.CR, function () { return _this.carriageReturn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BS, function () { return _this.backspace(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.HT, function () { return _this.tab(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SO, function () { return _this.shiftOut(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SI, function () { return _this.shiftIn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.IND, function () { return _this.index(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.NEL, function () { return _this.nextLine(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.HTS, function () { return _this.tabSet(); });\n        _this._parser.setOscHandler(0, function (data) { return _this.setTitle(data); });\n        _this._parser.setOscHandler(2, function (data) { return _this.setTitle(data); });\n        _this._parser.setEscHandler('7', function () { return _this.saveCursor([]); });\n        _this._parser.setEscHandler('8', function () { return _this.restoreCursor([]); });\n        _this._parser.setEscHandler('D', function () { return _this.index(); });\n        _this._parser.setEscHandler('E', function () { return _this.nextLine(); });\n        _this._parser.setEscHandler('H', function () { return _this.tabSet(); });\n        _this._parser.setEscHandler('M', function () { return _this.reverseIndex(); });\n        _this._parser.setEscHandler('=', function () { return _this.keypadApplicationMode(); });\n        _this._parser.setEscHandler('>', function () { return _this.keypadNumericMode(); });\n        _this._parser.setEscHandler('c', function () { return _this.reset(); });\n        _this._parser.setEscHandler('n', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('o', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('|', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('}', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('~', function () { return _this.setgLevel(1); });\n        _this._parser.setEscHandler('%@', function () { return _this.selectDefaultCharset(); });\n        _this._parser.setEscHandler('%G', function () { return _this.selectDefaultCharset(); });\n        var _loop_1 = function (flag) {\n            this_1._parser.setEscHandler('(' + flag, function () { return _this.selectCharset('(' + flag); });\n            this_1._parser.setEscHandler(')' + flag, function () { return _this.selectCharset(')' + flag); });\n            this_1._parser.setEscHandler('*' + flag, function () { return _this.selectCharset('*' + flag); });\n            this_1._parser.setEscHandler('+' + flag, function () { return _this.selectCharset('+' + flag); });\n            this_1._parser.setEscHandler('-' + flag, function () { return _this.selectCharset('-' + flag); });\n            this_1._parser.setEscHandler('.' + flag, function () { return _this.selectCharset('.' + flag); });\n            this_1._parser.setEscHandler('/' + flag, function () { return _this.selectCharset('/' + flag); });\n        };\n        var this_1 = this;\n        for (var flag in Charsets_1.CHARSETS) {\n            _loop_1(flag);\n        }\n        _this._parser.setErrorHandler(function (state) {\n            _this._terminal.error('Parsing error: ', state);\n            return state;\n        });\n        _this._parser.setDcsHandler('$q', new DECRQSS(_this._terminal));\n        return _this;\n    }\n    Object.defineProperty(InputHandler.prototype, \"onCursorMove\", {\n        get: function () { return this._onCursorMove.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onData\", {\n        get: function () { return this._onData.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onLineFeed\", {\n        get: function () { return this._onLineFeed.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onScroll\", {\n        get: function () { return this._onScroll.event; },\n        enumerable: true,\n        configurable: true\n    });\n    InputHandler.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal = null;\n    };\n    InputHandler.prototype.parse = function (data) {\n        if (!this._terminal) {\n            return;\n        }\n        var buffer = this._terminal.buffer;\n        var cursorStartX = buffer.x;\n        var cursorStartY = buffer.y;\n        if (this._terminal.debug) {\n            this._terminal.log('data: ' + data);\n        }\n        if (this._parseBuffer.length < data.length) {\n            this._parseBuffer = new Uint32Array(data.length);\n        }\n        this._parser.parse(this._parseBuffer, this._stringDecoder.decode(data, this._parseBuffer));\n        buffer = this._terminal.buffer;\n        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {\n            this._onCursorMove.fire();\n        }\n    };\n    InputHandler.prototype.parseUtf8 = function (data) {\n        if (!this._terminal) {\n            return;\n        }\n        var buffer = this._terminal.buffer;\n        var cursorStartX = buffer.x;\n        var cursorStartY = buffer.y;\n        if (this._terminal.debug) {\n            this._terminal.log('data: ' + data);\n        }\n        if (this._parseBuffer.length < data.length) {\n            this._parseBuffer = new Uint32Array(data.length);\n        }\n        this._parser.parse(this._parseBuffer, this._utf8Decoder.decode(data, this._parseBuffer));\n        buffer = this._terminal.buffer;\n        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {\n            this._terminal.emit('cursormove');\n        }\n    };\n    InputHandler.prototype.print = function (data, start, end) {\n        var code;\n        var chWidth;\n        var buffer = this._terminal.buffer;\n        var charset = this._terminal.charset;\n        var screenReaderMode = this._terminal.options.screenReaderMode;\n        var cols = this._terminal.cols;\n        var wraparoundMode = this._terminal.wraparoundMode;\n        var insertMode = this._terminal.insertMode;\n        var curAttr = this._terminal.curAttrData;\n        var bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n        this._terminal.updateRange(buffer.y);\n        for (var pos = start; pos < end; ++pos) {\n            code = data[pos];\n            chWidth = CharWidth_1.wcwidth(code);\n            if (code < 127 && charset) {\n                var ch = charset[String.fromCharCode(code)];\n                if (ch) {\n                    code = ch.charCodeAt(0);\n                }\n            }\n            if (screenReaderMode) {\n                this._terminal.emit('a11y.char', TextDecoder_1.stringFromCodePoint(code));\n            }\n            if (!chWidth && buffer.x) {\n                if (!bufferRow.getWidth(buffer.x - 1)) {\n                    bufferRow.addCodepointToCell(buffer.x - 2, code);\n                }\n                else {\n                    bufferRow.addCodepointToCell(buffer.x - 1, code);\n                }\n                continue;\n            }\n            if (buffer.x + chWidth - 1 >= cols) {\n                if (wraparoundMode) {\n                    buffer.x = 0;\n                    buffer.y++;\n                    if (buffer.y > buffer.scrollBottom) {\n                        buffer.y--;\n                        this._terminal.scroll(true);\n                    }\n                    else {\n                        buffer.lines.get(buffer.y).isWrapped = true;\n                    }\n                    bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n                }\n                else {\n                    if (chWidth === 2) {\n                        continue;\n                    }\n                }\n            }\n            if (insertMode) {\n                bufferRow.insertCells(buffer.x, chWidth, buffer.getNullCell(curAttr));\n                if (bufferRow.getWidth(cols - 1) === 2) {\n                    bufferRow.setCellFromCodePoint(cols - 1, BufferLine_1.NULL_CELL_CODE, BufferLine_1.NULL_CELL_WIDTH, curAttr.fg, curAttr.bg);\n                }\n            }\n            bufferRow.setCellFromCodePoint(buffer.x++, code, chWidth, curAttr.fg, curAttr.bg);\n            if (chWidth > 0) {\n                while (--chWidth) {\n                    bufferRow.setCellFromCodePoint(buffer.x++, 0, 0, curAttr.fg, curAttr.bg);\n                }\n            }\n        }\n        this._terminal.updateRange(buffer.y);\n    };\n    InputHandler.prototype.addCsiHandler = function (flag, callback) {\n        return this._parser.addCsiHandler(flag, callback);\n    };\n    InputHandler.prototype.addOscHandler = function (ident, callback) {\n        return this._parser.addOscHandler(ident, callback);\n    };\n    InputHandler.prototype.bell = function () {\n        this._terminal.bell();\n    };\n    InputHandler.prototype.lineFeed = function () {\n        var buffer = this._terminal.buffer;\n        if (this._terminal.options.convertEol) {\n            buffer.x = 0;\n        }\n        buffer.y++;\n        if (buffer.y > buffer.scrollBottom) {\n            buffer.y--;\n            this._terminal.scroll();\n        }\n        if (buffer.x >= this._terminal.cols) {\n            buffer.x--;\n        }\n        this._onLineFeed.fire();\n    };\n    InputHandler.prototype.carriageReturn = function () {\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.backspace = function () {\n        if (this._terminal.buffer.x > 0) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.tab = function () {\n        var originalX = this._terminal.buffer.x;\n        this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        if (this._terminal.options.screenReaderMode) {\n            this._terminal.emit('a11y.tab', this._terminal.buffer.x - originalX);\n        }\n    };\n    InputHandler.prototype.shiftOut = function () {\n        this._terminal.setgLevel(1);\n    };\n    InputHandler.prototype.shiftIn = function () {\n        this._terminal.setgLevel(0);\n    };\n    InputHandler.prototype.insertChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).insertCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.cursorUp = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n    };\n    InputHandler.prototype.cursorDown = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.cursorForward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.cursorBackward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n        this._terminal.buffer.x -= param;\n        if (this._terminal.buffer.x < 0) {\n            this._terminal.buffer.x = 0;\n        }\n    };\n    InputHandler.prototype.cursorNextLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorPrecedingLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorCharAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n    };\n    InputHandler.prototype.cursorPosition = function (params) {\n        var col;\n        var row = params[0] - 1;\n        if (params.length >= 2) {\n            col = params[1] - 1;\n        }\n        else {\n            col = 0;\n        }\n        if (row < 0) {\n            row = 0;\n        }\n        else if (row >= this._terminal.rows) {\n            row = this._terminal.rows - 1;\n        }\n        if (col < 0) {\n            col = 0;\n        }\n        else if (col >= this._terminal.cols) {\n            col = this._terminal.cols - 1;\n        }\n        this._terminal.buffer.x = col;\n        this._terminal.buffer.y = row;\n    };\n    InputHandler.prototype.cursorForwardTab = function (params) {\n        var param = params[0] || 1;\n        while (param--) {\n            this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        }\n    };\n    InputHandler.prototype._eraseInBufferLine = function (y, start, end, clearWrap) {\n        if (clearWrap === void 0) { clearWrap = false; }\n        var line = this._terminal.buffer.lines.get(this._terminal.buffer.ybase + y);\n        line.replaceCells(start, end, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        if (clearWrap) {\n            line.isWrapped = false;\n        }\n    };\n    InputHandler.prototype._resetBufferLine = function (y) {\n        this._eraseInBufferLine(y, 0, this._terminal.cols, true);\n    };\n    InputHandler.prototype.eraseInDisplay = function (params) {\n        var j;\n        switch (params[0]) {\n            case 0:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j++, this._terminal.buffer.x, this._terminal.cols, this._terminal.buffer.x === 0);\n                for (; j < this._terminal.rows; j++) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(j);\n                break;\n            case 1:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j, 0, this._terminal.buffer.x + 1, true);\n                if (this._terminal.buffer.x + 1 >= this._terminal.cols) {\n                    this._terminal.buffer.lines.get(j + 1).isWrapped = false;\n                }\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 2:\n                j = this._terminal.rows;\n                this._terminal.updateRange(j - 1);\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 3:\n                var scrollBackSize = this._terminal.buffer.lines.length - this._terminal.rows;\n                if (scrollBackSize > 0) {\n                    this._terminal.buffer.lines.trimStart(scrollBackSize);\n                    this._terminal.buffer.ybase = Math.max(this._terminal.buffer.ybase - scrollBackSize, 0);\n                    this._terminal.buffer.ydisp = Math.max(this._terminal.buffer.ydisp - scrollBackSize, 0);\n                    this._onScroll.fire(0);\n                }\n                break;\n        }\n    };\n    InputHandler.prototype.eraseInLine = function (params) {\n        switch (params[0]) {\n            case 0:\n                this._eraseInBufferLine(this._terminal.buffer.y, this._terminal.buffer.x, this._terminal.cols);\n                break;\n            case 1:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.buffer.x + 1);\n                break;\n            case 2:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.cols);\n                break;\n        }\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.insertLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var scrollBottomRowsOffset = this._terminal.rows - 1 - buffer.scrollBottom;\n        var scrollBottomAbsolute = this._terminal.rows - 1 + buffer.ybase - scrollBottomRowsOffset + 1;\n        while (param--) {\n            buffer.lines.splice(scrollBottomAbsolute - 1, 1);\n            buffer.lines.splice(row, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var j;\n        j = this._terminal.rows - 1 - buffer.scrollBottom;\n        j = this._terminal.rows - 1 + buffer.ybase - j;\n        while (param--) {\n            buffer.lines.splice(row, 1);\n            buffer.lines.splice(j, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).deleteCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.scrollUp = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.lines.splice(buffer.ybase + buffer.scrollTop, 1);\n            buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 0, buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n        }\n        this._terminal.updateRange(buffer.scrollTop);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.scrollDown = function (params, collect) {\n        if (params.length < 2 && !collect) {\n            var param = params[0] || 1;\n            var buffer = this._terminal.buffer;\n            while (param--) {\n                buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 1);\n                buffer.lines.splice(buffer.ybase + buffer.scrollTop, 0, buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n            }\n            this._terminal.updateRange(buffer.scrollTop);\n            this._terminal.updateRange(buffer.scrollBottom);\n        }\n    };\n    InputHandler.prototype.eraseChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).replaceCells(this._terminal.buffer.x, this._terminal.buffer.x + (params[0] || 1), this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n    };\n    InputHandler.prototype.cursorBackwardTab = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.x = buffer.prevStop();\n        }\n    };\n    InputHandler.prototype.charPosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.hPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.repeatPrecedingCharacter = function (params) {\n        var buffer = this._terminal.buffer;\n        var line = buffer.lines.get(buffer.ybase + buffer.y);\n        line.loadCell(buffer.x - 1, this._workCell);\n        line.replaceCells(buffer.x, buffer.x + (params[0] || 1), (this._workCell.content !== undefined) ? this._workCell : buffer.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA));\n    };\n    InputHandler.prototype.sendDeviceAttributes = function (params, collect) {\n        if (params[0] > 0) {\n            return;\n        }\n        if (!collect) {\n            if (this._terminal.is('xterm') || this._terminal.is('rxvt-unicode') || this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?1;2c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?6c');\n            }\n        }\n        else if (collect === '>') {\n            if (this._terminal.is('xterm')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>0;276;0c');\n            }\n            else if (this._terminal.is('rxvt-unicode')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>85;95;0c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(params[0] + 'c');\n            }\n            else if (this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>83;40003;0c');\n            }\n        }\n    };\n    InputHandler.prototype.linePosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y = param - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n    };\n    InputHandler.prototype.vPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.hVPosition = function (params) {\n        if (params[0] < 1)\n            params[0] = 1;\n        if (params[1] < 1)\n            params[1] = 1;\n        this._terminal.buffer.y = params[0] - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = params[1] - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.tabClear = function (params) {\n        var param = params[0];\n        if (param <= 0) {\n            delete this._terminal.buffer.tabs[this._terminal.buffer.x];\n        }\n        else if (param === 3) {\n            this._terminal.buffer.tabs = {};\n        }\n    };\n    InputHandler.prototype.setMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.setMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = true;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = true;\n                    break;\n                case 2:\n                    this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(1, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(2, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(3, Charsets_1.DEFAULT_CHARSET);\n                    break;\n                case 3:\n                    this._terminal.savedCols = this._terminal.cols;\n                    this._terminal.resize(132, this._terminal.rows);\n                    break;\n                case 6:\n                    this._terminal.originMode = true;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = true;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Serial port requested application keypad.');\n                    this._terminal.applicationKeypad = true;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = params[0] === 9;\n                    this._terminal.vt200Mouse = params[0] === 1000;\n                    this._terminal.normalMouse = params[0] > 1000;\n                    this._terminal.mouseEvents = true;\n                    if (this._terminal.element) {\n                        this._terminal.element.classList.add('enable-mouse-events');\n                    }\n                    if (this._terminal.selectionManager) {\n                        this._terminal.selectionManager.disable();\n                    }\n                    this._terminal.log('Binding to mouse events.');\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = true;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = true;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = true;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = true;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = false;\n                    break;\n                case 1048:\n                    this.saveCursor(params);\n                    break;\n                case 1049:\n                    this.saveCursor(params);\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateAltBuffer(this._terminal.eraseAttrData());\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = true;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.resetMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.resetMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = false;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = false;\n                    break;\n                case 3:\n                    if (this._terminal.cols === 132 && this._terminal.savedCols) {\n                        this._terminal.resize(this._terminal.savedCols, this._terminal.rows);\n                    }\n                    delete this._terminal.savedCols;\n                    break;\n                case 6:\n                    this._terminal.originMode = false;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = false;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Switching back to normal keypad.');\n                    this._terminal.applicationKeypad = false;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = false;\n                    this._terminal.vt200Mouse = false;\n                    this._terminal.normalMouse = false;\n                    this._terminal.mouseEvents = false;\n                    if (this._terminal.element) {\n                        this._terminal.element.classList.remove('enable-mouse-events');\n                    }\n                    if (this._terminal.selectionManager) {\n                        this._terminal.selectionManager.enable();\n                    }\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = false;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = false;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = false;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = false;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = true;\n                    break;\n                case 1048:\n                    this.restoreCursor(params);\n                    break;\n                case 1049:\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateNormalBuffer();\n                    if (params[0] === 1049) {\n                        this.restoreCursor(params);\n                    }\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = false;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.charAttributes = function (params) {\n        if (params.length === 1 && params[0] === 0) {\n            this._terminal.curAttrData.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;\n            this._terminal.curAttrData.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;\n            return;\n        }\n        var l = params.length;\n        var p;\n        var attr = this._terminal.curAttrData;\n        for (var i = 0; i < l; i++) {\n            p = params[i];\n            if (p >= 30 && p <= 37) {\n                attr.fg &= ~(50331648 | 255);\n                attr.fg |= 16777216 | (p - 30);\n            }\n            else if (p >= 40 && p <= 47) {\n                attr.bg &= ~(50331648 | 255);\n                attr.bg |= 16777216 | (p - 40);\n            }\n            else if (p >= 90 && p <= 97) {\n                attr.fg &= ~(50331648 | 255);\n                attr.fg |= 16777216 | (p - 90) | 8;\n            }\n            else if (p >= 100 && p <= 107) {\n                attr.bg &= ~(50331648 | 255);\n                attr.bg |= 16777216 | (p - 100) | 8;\n            }\n            else if (p === 0) {\n                attr.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;\n                attr.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;\n            }\n            else if (p === 1) {\n                attr.fg |= 134217728;\n            }\n            else if (p === 3) {\n                attr.bg |= 67108864;\n            }\n            else if (p === 4) {\n                attr.fg |= 268435456;\n            }\n            else if (p === 5) {\n                attr.fg |= 536870912;\n            }\n            else if (p === 7) {\n                attr.fg |= 67108864;\n            }\n            else if (p === 8) {\n                attr.fg |= 1073741824;\n            }\n            else if (p === 2) {\n                attr.bg |= 134217728;\n            }\n            else if (p === 22) {\n                attr.fg &= ~134217728;\n                attr.bg &= ~134217728;\n            }\n            else if (p === 23) {\n                attr.bg &= ~67108864;\n            }\n            else if (p === 24) {\n                attr.fg &= ~268435456;\n            }\n            else if (p === 25) {\n                attr.fg &= ~536870912;\n            }\n            else if (p === 27) {\n                attr.fg &= ~67108864;\n            }\n            else if (p === 28) {\n                attr.fg &= ~1073741824;\n            }\n            else if (p === 39) {\n                attr.fg &= ~(50331648 | 16777215);\n                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);\n            }\n            else if (p === 49) {\n                attr.bg &= ~(50331648 | 16777215);\n                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);\n            }\n            else if (p === 38) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    attr.fg |= 50331648;\n                    attr.fg &= ~16777215;\n                    attr.fg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    attr.fg &= ~(50331648 | 255);\n                    attr.fg |= 33554432 | p;\n                }\n            }\n            else if (p === 48) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    attr.bg |= 50331648;\n                    attr.bg &= ~16777215;\n                    attr.bg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    attr.bg &= ~(50331648 | 255);\n                    attr.bg |= 33554432 | p;\n                }\n            }\n            else if (p === 100) {\n                attr.fg &= ~(50331648 | 16777215);\n                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);\n                attr.bg &= ~(50331648 | 16777215);\n                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);\n            }\n            else {\n                this._terminal.error('Unknown SGR attribute: %d.', p);\n            }\n        }\n    };\n    InputHandler.prototype.deviceStatus = function (params, collect) {\n        if (!collect) {\n            switch (params[0]) {\n                case 5:\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[0n\");\n                    break;\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[\" + y + \";\" + x + \"R\");\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[?\" + y + \";\" + x + \"R\");\n                    break;\n                case 15:\n                    break;\n                case 25:\n                    break;\n                case 26:\n                    break;\n                case 53:\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.softReset = function (params, collect) {\n        if (collect === '!') {\n            this._terminal.cursorHidden = false;\n            this._terminal.insertMode = false;\n            this._terminal.originMode = false;\n            this._terminal.wraparoundMode = true;\n            this._terminal.applicationKeypad = false;\n            if (this._terminal.viewport) {\n                this._terminal.viewport.syncScrollArea();\n            }\n            this._terminal.applicationCursor = false;\n            this._terminal.buffer.scrollTop = 0;\n            this._terminal.buffer.scrollBottom = this._terminal.rows - 1;\n            this._terminal.curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n            this._terminal.buffer.x = this._terminal.buffer.y = 0;\n            this._terminal.charset = null;\n            this._terminal.glevel = 0;\n            this._terminal.charsets = [null];\n        }\n    };\n    InputHandler.prototype.setCursorStyle = function (params, collect) {\n        if (collect === ' ') {\n            var param = params[0] < 1 ? 1 : params[0];\n            switch (param) {\n                case 1:\n                case 2:\n                    this._terminal.setOption('cursorStyle', 'block');\n                    break;\n                case 3:\n                case 4:\n                    this._terminal.setOption('cursorStyle', 'underline');\n                    break;\n                case 5:\n                case 6:\n                    this._terminal.setOption('cursorStyle', 'bar');\n                    break;\n            }\n            var isBlinking = param % 2 === 1;\n            this._terminal.setOption('cursorBlink', isBlinking);\n        }\n    };\n    InputHandler.prototype.setScrollRegion = function (params, collect) {\n        if (collect) {\n            return;\n        }\n        this._terminal.buffer.scrollTop = (params[0] || 1) - 1;\n        this._terminal.buffer.scrollBottom = (params[1] && params[1] <= this._terminal.rows ? params[1] : this._terminal.rows) - 1;\n        this._terminal.buffer.x = 0;\n        this._terminal.buffer.y = 0;\n    };\n    InputHandler.prototype.saveCursor = function (params) {\n        this._terminal.buffer.savedX = this._terminal.buffer.x;\n        this._terminal.buffer.savedY = this._terminal.buffer.y;\n        this._terminal.buffer.savedCurAttrData.fg = this._terminal.curAttrData.fg;\n        this._terminal.buffer.savedCurAttrData.bg = this._terminal.curAttrData.bg;\n    };\n    InputHandler.prototype.restoreCursor = function (params) {\n        this._terminal.buffer.x = this._terminal.buffer.savedX || 0;\n        this._terminal.buffer.y = this._terminal.buffer.savedY || 0;\n        this._terminal.curAttrData.fg = this._terminal.buffer.savedCurAttrData.fg;\n        this._terminal.curAttrData.bg = this._terminal.buffer.savedCurAttrData.bg;\n    };\n    InputHandler.prototype.setTitle = function (data) {\n        this._terminal.handleTitle(data);\n    };\n    InputHandler.prototype.nextLine = function () {\n        this._terminal.buffer.x = 0;\n        this.index();\n    };\n    InputHandler.prototype.keypadApplicationMode = function () {\n        this._terminal.log('Serial port requested application keypad.');\n        this._terminal.applicationKeypad = true;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.keypadNumericMode = function () {\n        this._terminal.log('Switching back to normal keypad.');\n        this._terminal.applicationKeypad = false;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.selectDefaultCharset = function () {\n        this._terminal.setgLevel(0);\n        this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n    };\n    InputHandler.prototype.selectCharset = function (collectAndFlag) {\n        if (collectAndFlag.length !== 2) {\n            this.selectDefaultCharset();\n            return;\n        }\n        if (collectAndFlag[0] === '/') {\n            return;\n        }\n        this._terminal.setgCharset(GLEVEL[collectAndFlag[0]], Charsets_1.CHARSETS[collectAndFlag[1]] || Charsets_1.DEFAULT_CHARSET);\n        return;\n    };\n    InputHandler.prototype.index = function () {\n        this._terminal.index();\n    };\n    InputHandler.prototype.tabSet = function () {\n        this._terminal.tabSet();\n    };\n    InputHandler.prototype.reverseIndex = function () {\n        this._terminal.reverseIndex();\n    };\n    InputHandler.prototype.reset = function () {\n        this._parser.reset();\n        this._terminal.reset();\n    };\n    InputHandler.prototype.setgLevel = function (level) {\n        this._terminal.setgLevel(level);\n    };\n    return InputHandler;\n}(Lifecycle_1.Disposable));\nexports.InputHandler = InputHandler;\n\n},{\"./CharWidth\":22,\"./EscapeSequenceParser\":25,\"./common/EventEmitter2\":41,\"./common/Lifecycle\":42,\"./common/TypedArrayUtils\":44,\"./common/data/EscapeSequences\":46,\"./core/buffer/BufferLine\":47,\"./core/data/Charsets\":50,\"./core/input/TextDecoder\":52}],27:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseZoneManager_1 = require(\"./MouseZoneManager\");\nvar CharWidth_1 = require(\"./CharWidth\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar Linkifier = (function () {\n    function Linkifier(_terminal) {\n        this._terminal = _terminal;\n        this._linkMatchers = [];\n        this._nextLinkMatcherId = 0;\n        this._onLinkHover = new EventEmitter2_1.EventEmitter2();\n        this._onLinkLeave = new EventEmitter2_1.EventEmitter2();\n        this._onLinkTooltip = new EventEmitter2_1.EventEmitter2();\n        this._rowsToLinkify = {\n            start: null,\n            end: null\n        };\n    }\n    Object.defineProperty(Linkifier.prototype, \"onLinkHover\", {\n        get: function () { return this._onLinkHover.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Linkifier.prototype, \"onLinkLeave\", {\n        get: function () { return this._onLinkLeave.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Linkifier.prototype, \"onLinkTooltip\", {\n        get: function () { return this._onLinkTooltip.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Linkifier.prototype.attachToDom = function (mouseZoneManager) {\n        this._mouseZoneManager = mouseZoneManager;\n    };\n    Linkifier.prototype.linkifyRows = function (start, end) {\n        var _this = this;\n        if (!this._mouseZoneManager) {\n            return;\n        }\n        if (this._rowsToLinkify.start === null) {\n            this._rowsToLinkify.start = start;\n            this._rowsToLinkify.end = end;\n        }\n        else {\n            this._rowsToLinkify.start = Math.min(this._rowsToLinkify.start, start);\n            this._rowsToLinkify.end = Math.max(this._rowsToLinkify.end, end);\n        }\n        this._mouseZoneManager.clearAll(start, end);\n        if (this._rowsTimeoutId) {\n            clearTimeout(this._rowsTimeoutId);\n        }\n        this._rowsTimeoutId = setTimeout(function () { return _this._linkifyRows(); }, Linkifier.TIME_BEFORE_LINKIFY);\n    };\n    Linkifier.prototype._linkifyRows = function () {\n        this._rowsTimeoutId = null;\n        var buffer = this._terminal.buffer;\n        var absoluteRowIndexStart = buffer.ydisp + this._rowsToLinkify.start;\n        if (absoluteRowIndexStart >= buffer.lines.length) {\n            return;\n        }\n        var absoluteRowIndexEnd = buffer.ydisp + Math.min(this._rowsToLinkify.end, this._terminal.rows) + 1;\n        var overscanLineLimit = Math.ceil(Linkifier.OVERSCAN_CHAR_LIMIT / this._terminal.cols);\n        var iterator = this._terminal.buffer.iterator(false, absoluteRowIndexStart, absoluteRowIndexEnd, overscanLineLimit, overscanLineLimit);\n        while (iterator.hasNext()) {\n            var lineData = iterator.next();\n            for (var i = 0; i < this._linkMatchers.length; i++) {\n                this._doLinkifyRow(lineData.range.first, lineData.content, this._linkMatchers[i]);\n            }\n        }\n        this._rowsToLinkify.start = null;\n        this._rowsToLinkify.end = null;\n    };\n    Linkifier.prototype.registerLinkMatcher = function (regex, handler, options) {\n        if (options === void 0) { options = {}; }\n        if (!handler) {\n            throw new Error('handler must be defined');\n        }\n        var matcher = {\n            id: this._nextLinkMatcherId++,\n            regex: regex,\n            handler: handler,\n            matchIndex: options.matchIndex,\n            validationCallback: options.validationCallback,\n            hoverTooltipCallback: options.tooltipCallback,\n            hoverLeaveCallback: options.leaveCallback,\n            willLinkActivate: options.willLinkActivate,\n            priority: options.priority || 0\n        };\n        this._addLinkMatcherToList(matcher);\n        return matcher.id;\n    };\n    Linkifier.prototype._addLinkMatcherToList = function (matcher) {\n        if (this._linkMatchers.length === 0) {\n            this._linkMatchers.push(matcher);\n            return;\n        }\n        for (var i = this._linkMatchers.length - 1; i >= 0; i--) {\n            if (matcher.priority <= this._linkMatchers[i].priority) {\n                this._linkMatchers.splice(i + 1, 0, matcher);\n                return;\n            }\n        }\n        this._linkMatchers.splice(0, 0, matcher);\n    };\n    Linkifier.prototype.deregisterLinkMatcher = function (matcherId) {\n        for (var i = 0; i < this._linkMatchers.length; i++) {\n            if (this._linkMatchers[i].id === matcherId) {\n                this._linkMatchers.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    Linkifier.prototype._doLinkifyRow = function (rowIndex, text, matcher) {\n        var _this = this;\n        var rex = new RegExp(matcher.regex.source, matcher.regex.flags + 'g');\n        var match;\n        var stringIndex = -1;\n        var _loop_1 = function () {\n            var uri = match[typeof matcher.matchIndex !== 'number' ? 0 : matcher.matchIndex];\n            if (!uri) {\n                if (this_1._terminal.debug) {\n                    console.log({ match: match, matcher: matcher });\n                    throw new Error('match found without corresponding matchIndex');\n                }\n                return \"break\";\n            }\n            stringIndex = text.indexOf(uri, stringIndex + 1);\n            rex.lastIndex = stringIndex + uri.length;\n            if (stringIndex < 0) {\n                return \"break\";\n            }\n            var bufferIndex = this_1._terminal.buffer.stringIndexToBufferIndex(rowIndex, stringIndex);\n            if (bufferIndex[0] < 0) {\n                return \"break\";\n            }\n            var line = this_1._terminal.buffer.lines.get(bufferIndex[0]);\n            var attr = line.getFg(bufferIndex[1]);\n            var fg;\n            if (attr) {\n                fg = (attr >> 9) & 0x1ff;\n            }\n            if (matcher.validationCallback) {\n                matcher.validationCallback(uri, function (isValid) {\n                    if (_this._rowsTimeoutId) {\n                        return;\n                    }\n                    if (isValid) {\n                        _this._addLink(bufferIndex[1], bufferIndex[0] - _this._terminal.buffer.ydisp, uri, matcher, fg);\n                    }\n                });\n            }\n            else {\n                this_1._addLink(bufferIndex[1], bufferIndex[0] - this_1._terminal.buffer.ydisp, uri, matcher, fg);\n            }\n        };\n        var this_1 = this;\n        while ((match = rex.exec(text)) !== null) {\n            var state_1 = _loop_1();\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    Linkifier.prototype._addLink = function (x, y, uri, matcher, fg) {\n        var _this = this;\n        var width = CharWidth_1.getStringCellWidth(uri);\n        var x1 = x % this._terminal.cols;\n        var y1 = y + Math.floor(x / this._terminal.cols);\n        var x2 = (x1 + width) % this._terminal.cols;\n        var y2 = y1 + Math.floor((x1 + width) / this._terminal.cols);\n        if (x2 === 0) {\n            x2 = this._terminal.cols;\n            y2--;\n        }\n        this._mouseZoneManager.add(new MouseZoneManager_1.MouseZone(x1 + 1, y1 + 1, x2 + 1, y2 + 1, function (e) {\n            if (matcher.handler) {\n                return matcher.handler(e, uri);\n            }\n            window.open(uri, '_blank');\n        }, function () {\n            _this._onLinkHover.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.add('xterm-cursor-pointer');\n        }, function (e) {\n            _this._onLinkTooltip.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            if (matcher.hoverTooltipCallback) {\n                matcher.hoverTooltipCallback(e, uri);\n            }\n        }, function () {\n            _this._onLinkLeave.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.remove('xterm-cursor-pointer');\n            if (matcher.hoverLeaveCallback) {\n                matcher.hoverLeaveCallback();\n            }\n        }, function (e) {\n            if (matcher.willLinkActivate) {\n                return matcher.willLinkActivate(e, uri);\n            }\n            return true;\n        }));\n    };\n    Linkifier.prototype._createLinkHoverEvent = function (x1, y1, x2, y2, fg) {\n        return { x1: x1, y1: y1, x2: x2, y2: y2, cols: this._terminal.cols, fg: fg };\n    };\n    Linkifier.TIME_BEFORE_LINKIFY = 200;\n    Linkifier.OVERSCAN_CHAR_LIMIT = 2000;\n    return Linkifier;\n}());\nexports.Linkifier = Linkifier;\n\n},{\"./CharWidth\":22,\"./MouseZoneManager\":29,\"./common/EventEmitter2\":41}],28:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper = (function () {\n    function MouseHelper(_renderCoordinator) {\n        this._renderCoordinator = _renderCoordinator;\n    }\n    MouseHelper.getCoordsRelativeToElement = function (event, element) {\n        var rect = element.getBoundingClientRect();\n        return [event.clientX - rect.left, event.clientY - rect.top];\n    };\n    MouseHelper.prototype.getCoords = function (event, element, charMeasure, colCount, rowCount, isSelection) {\n        if (!charMeasure.width || !charMeasure.height) {\n            return null;\n        }\n        var coords = MouseHelper.getCoordsRelativeToElement(event, element);\n        if (!coords) {\n            return null;\n        }\n        coords[0] = Math.ceil((coords[0] + (isSelection ? this._renderCoordinator.dimensions.actualCellWidth / 2 : 0)) / this._renderCoordinator.dimensions.actualCellWidth);\n        coords[1] = Math.ceil(coords[1] / this._renderCoordinator.dimensions.actualCellHeight);\n        coords[0] = Math.min(Math.max(coords[0], 1), colCount + (isSelection ? 1 : 0));\n        coords[1] = Math.min(Math.max(coords[1], 1), rowCount);\n        return coords;\n    };\n    MouseHelper.prototype.getRawByteCoords = function (event, element, charMeasure, colCount, rowCount) {\n        var coords = this.getCoords(event, element, charMeasure, colCount, rowCount);\n        var x = coords[0];\n        var y = coords[1];\n        x += 32;\n        y += 32;\n        return { x: x, y: y };\n    };\n    return MouseHelper;\n}());\nexports.MouseHelper = MouseHelper;\n\n},{}],29:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar Lifecycle_2 = require(\"./ui/Lifecycle\");\nvar HOVER_DURATION = 500;\nvar MouseZoneManager = (function (_super) {\n    __extends(MouseZoneManager, _super);\n    function MouseZoneManager(_terminal) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._zones = [];\n        _this._areZonesActive = false;\n        _this._tooltipTimeout = null;\n        _this._currentZone = null;\n        _this._lastHoverCoords = [null, null];\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._terminal.element, 'mousedown', function (e) { return _this._onMouseDown(e); }));\n        _this._mouseMoveListener = function (e) { return _this._onMouseMove(e); };\n        _this._mouseLeaveListener = function (e) { return _this._onMouseLeave(e); };\n        _this._clickListener = function (e) { return _this._onClick(e); };\n        return _this;\n    }\n    MouseZoneManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._deactivate();\n    };\n    MouseZoneManager.prototype.add = function (zone) {\n        this._zones.push(zone);\n        if (this._zones.length === 1) {\n            this._activate();\n        }\n    };\n    MouseZoneManager.prototype.clearAll = function (start, end) {\n        if (this._zones.length === 0) {\n            return;\n        }\n        if (!end) {\n            start = 0;\n            end = this._terminal.rows - 1;\n        }\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if ((zone.y1 > start && zone.y1 <= end + 1) ||\n                (zone.y2 > start && zone.y2 <= end + 1) ||\n                (zone.y1 < start && zone.y2 > end + 1)) {\n                if (this._currentZone && this._currentZone === zone) {\n                    this._currentZone.leaveCallback();\n                    this._currentZone = null;\n                }\n                this._zones.splice(i--, 1);\n            }\n        }\n        if (this._zones.length === 0) {\n            this._deactivate();\n        }\n    };\n    MouseZoneManager.prototype._activate = function () {\n        if (!this._areZonesActive) {\n            this._areZonesActive = true;\n            this._terminal.element.addEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.addEventListener('mouseleave', this._mouseLeaveListener);\n            this._terminal.element.addEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._deactivate = function () {\n        if (this._areZonesActive) {\n            this._areZonesActive = false;\n            this._terminal.element.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.removeEventListener('mouseleave', this._mouseLeaveListener);\n            this._terminal.element.removeEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._onMouseMove = function (e) {\n        if (this._lastHoverCoords[0] !== e.pageX || this._lastHoverCoords[1] !== e.pageY) {\n            this._onHover(e);\n            this._lastHoverCoords = [e.pageX, e.pageY];\n        }\n    };\n    MouseZoneManager.prototype._onHover = function (e) {\n        var _this = this;\n        var zone = this._findZoneEventAt(e);\n        if (zone === this._currentZone) {\n            return;\n        }\n        if (this._currentZone) {\n            this._currentZone.leaveCallback();\n            this._currentZone = null;\n            if (this._tooltipTimeout) {\n                clearTimeout(this._tooltipTimeout);\n            }\n        }\n        if (!zone) {\n            return;\n        }\n        this._currentZone = zone;\n        if (zone.hoverCallback) {\n            zone.hoverCallback(e);\n        }\n        this._tooltipTimeout = setTimeout(function () { return _this._onTooltip(e); }, HOVER_DURATION);\n    };\n    MouseZoneManager.prototype._onTooltip = function (e) {\n        this._tooltipTimeout = null;\n        var zone = this._findZoneEventAt(e);\n        if (zone && zone.tooltipCallback) {\n            zone.tooltipCallback(e);\n        }\n    };\n    MouseZoneManager.prototype._onMouseDown = function (e) {\n        this._initialSelectionLength = this._terminal.getSelection().length;\n        if (!this._areZonesActive) {\n            return;\n        }\n        var zone = this._findZoneEventAt(e);\n        if (zone) {\n            if (zone.willLinkActivate(e)) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n        }\n    };\n    MouseZoneManager.prototype._onMouseLeave = function (e) {\n        if (this._currentZone) {\n            this._currentZone.leaveCallback();\n            this._currentZone = null;\n            if (this._tooltipTimeout) {\n                clearTimeout(this._tooltipTimeout);\n            }\n        }\n    };\n    MouseZoneManager.prototype._onClick = function (e) {\n        var zone = this._findZoneEventAt(e);\n        var currentSelectionLength = this._terminal.getSelection().length;\n        if (zone && currentSelectionLength === this._initialSelectionLength) {\n            zone.clickCallback(e);\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    };\n    MouseZoneManager.prototype._findZoneEventAt = function (e) {\n        var coords = this._terminal.mouseHelper.getCoords(e, this._terminal.screenElement, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows);\n        if (!coords) {\n            return null;\n        }\n        var x = coords[0];\n        var y = coords[1];\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if (zone.y1 === zone.y2) {\n                if (y === zone.y1 && x >= zone.x1 && x < zone.x2) {\n                    return zone;\n                }\n            }\n            else {\n                if ((y === zone.y1 && x >= zone.x1) ||\n                    (y === zone.y2 && x < zone.x2) ||\n                    (y > zone.y1 && y < zone.y2)) {\n                    return zone;\n                }\n            }\n        }\n        return null;\n    };\n    return MouseZoneManager;\n}(Lifecycle_1.Disposable));\nexports.MouseZoneManager = MouseZoneManager;\nvar MouseZone = (function () {\n    function MouseZone(x1, y1, x2, y2, clickCallback, hoverCallback, tooltipCallback, leaveCallback, willLinkActivate) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n        this.clickCallback = clickCallback;\n        this.hoverCallback = hoverCallback;\n        this.tooltipCallback = tooltipCallback;\n        this.leaveCallback = leaveCallback;\n        this.willLinkActivate = willLinkActivate;\n    }\n    return MouseZone;\n}());\nexports.MouseZone = MouseZone;\n\n},{\"./common/Lifecycle\":42,\"./ui/Lifecycle\":77}],30:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper_1 = require(\"./MouseHelper\");\nvar Browser = require(\"./common/Platform\");\nvar SelectionModel_1 = require(\"./SelectionModel\");\nvar AltClickHandler_1 = require(\"./handlers/AltClickHandler\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar DRAG_SCROLL_MAX_THRESHOLD = 50;\nvar DRAG_SCROLL_MAX_SPEED = 15;\nvar DRAG_SCROLL_INTERVAL = 50;\nvar ALT_CLICK_MOVE_CURSOR_TIME = 500;\nvar WORD_SEPARATORS = ' ()[]{}\\'\"';\nvar NON_BREAKING_SPACE_CHAR = String.fromCharCode(160);\nvar ALL_NON_BREAKING_SPACE_REGEX = new RegExp(NON_BREAKING_SPACE_CHAR, 'g');\nvar SelectionManager = (function () {\n    function SelectionManager(_terminal, _charMeasure) {\n        this._terminal = _terminal;\n        this._charMeasure = _charMeasure;\n        this._enabled = true;\n        this._workCell = new BufferLine_1.CellData();\n        this._onLinuxMouseSelection = new EventEmitter2_1.EventEmitter2();\n        this._onRedrawRequest = new EventEmitter2_1.EventEmitter2();\n        this._onSelectionChange = new EventEmitter2_1.EventEmitter2();\n        this._initListeners();\n        this.enable();\n        this._model = new SelectionModel_1.SelectionModel(_terminal);\n        this._activeSelectionMode = 0;\n    }\n    Object.defineProperty(SelectionManager.prototype, \"onLinuxMouseSelection\", {\n        get: function () { return this._onLinuxMouseSelection.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"onRedrawRequest\", {\n        get: function () { return this._onRedrawRequest.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"onSelectionChange\", {\n        get: function () { return this._onSelectionChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype.dispose = function () {\n        this._removeMouseDownListeners();\n    };\n    Object.defineProperty(SelectionManager.prototype, \"_buffer\", {\n        get: function () {\n            return this._terminal.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype._initListeners = function () {\n        var _this = this;\n        this._mouseMoveListener = function (event) { return _this._onMouseMove(event); };\n        this._mouseUpListener = function (event) { return _this._onMouseUp(event); };\n        this.initBuffersListeners();\n    };\n    SelectionManager.prototype.initBuffersListeners = function () {\n        var _this = this;\n        this._trimListener = this._terminal.buffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });\n        this._terminal.buffers.onBufferActivate(function (e) { return _this._onBufferActivate(e); });\n    };\n    SelectionManager.prototype.disable = function () {\n        this.clearSelection();\n        this._enabled = false;\n    };\n    SelectionManager.prototype.enable = function () {\n        this._enabled = true;\n    };\n    Object.defineProperty(SelectionManager.prototype, \"selectionStart\", {\n        get: function () { return this._model.finalSelectionStart; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionEnd\", {\n        get: function () { return this._model.finalSelectionEnd; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"hasSelection\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return false;\n            }\n            return start[0] !== end[0] || start[1] !== end[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionText\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return '';\n            }\n            var result = [];\n            if (this._activeSelectionMode === 3) {\n                if (start[0] === end[0]) {\n                    return '';\n                }\n                for (var i = start[1]; i <= end[1]; i++) {\n                    var lineText = this._buffer.translateBufferLineToString(i, true, start[0], end[0]);\n                    result.push(lineText);\n                }\n            }\n            else {\n                var startRowEndCol = start[1] === end[1] ? end[0] : undefined;\n                result.push(this._buffer.translateBufferLineToString(start[1], true, start[0], startRowEndCol));\n                for (var i = start[1] + 1; i <= end[1] - 1; i++) {\n                    var bufferLine = this._buffer.lines.get(i);\n                    var lineText = this._buffer.translateBufferLineToString(i, true);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n                if (start[1] !== end[1]) {\n                    var bufferLine = this._buffer.lines.get(end[1]);\n                    var lineText = this._buffer.translateBufferLineToString(end[1], true, 0, end[0]);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n            }\n            var formattedResult = result.map(function (line) {\n                return line.replace(ALL_NON_BREAKING_SPACE_REGEX, ' ');\n            }).join(Browser.isMSWindows ? '\\r\\n' : '\\n');\n            return formattedResult;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype.clearSelection = function () {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype.refresh = function (isLinuxMouseSelection) {\n        var _this = this;\n        if (!this._refreshAnimationFrame) {\n            this._refreshAnimationFrame = window.requestAnimationFrame(function () { return _this._refresh(); });\n        }\n        if (Browser.isLinux && isLinuxMouseSelection) {\n            var selectionText = this.selectionText;\n            if (selectionText.length) {\n                this._onLinuxMouseSelection.fire(this.selectionText);\n            }\n        }\n    };\n    SelectionManager.prototype._refresh = function () {\n        this._refreshAnimationFrame = null;\n        this._onRedrawRequest.fire({\n            start: this._model.finalSelectionStart,\n            end: this._model.finalSelectionEnd,\n            columnSelectMode: this._activeSelectionMode === 3\n        });\n    };\n    SelectionManager.prototype.isClickInSelection = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        var start = this._model.finalSelectionStart;\n        var end = this._model.finalSelectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return this._areCoordsInSelection(coords, start, end);\n    };\n    SelectionManager.prototype._areCoordsInSelection = function (coords, start, end) {\n        return (coords[1] > start[1] && coords[1] < end[1]) ||\n            (start[1] === end[1] && coords[1] === start[1] && coords[0] >= start[0] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === end[1] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === start[1] && coords[0] >= start[0]);\n    };\n    SelectionManager.prototype.selectWordAtCursor = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._selectWordAt(coords, false);\n            this._model.selectionEnd = null;\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype.selectAll = function () {\n        this._model.isSelectAllActive = true;\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype.selectLines = function (start, end) {\n        this._model.clearSelection();\n        start = Math.max(start, 0);\n        end = Math.min(end, this._terminal.buffer.lines.length - 1);\n        this._model.selectionStart = [0, start];\n        this._model.selectionEnd = [this._terminal.cols, end];\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype._onTrim = function (amount) {\n        var needsRefresh = this._model.onTrim(amount);\n        if (needsRefresh) {\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._getMouseBufferCoords = function (event) {\n        var coords = this._terminal.mouseHelper.getCoords(event, this._terminal.screenElement, this._charMeasure, this._terminal.cols, this._terminal.rows, true);\n        if (!coords) {\n            return null;\n        }\n        coords[0]--;\n        coords[1]--;\n        coords[1] += this._terminal.buffer.ydisp;\n        return coords;\n    };\n    SelectionManager.prototype._getMouseEventScrollAmount = function (event) {\n        var offset = MouseHelper_1.MouseHelper.getCoordsRelativeToElement(event, this._terminal.screenElement)[1];\n        var terminalHeight = this._terminal.rows * Math.ceil(this._charMeasure.height * this._terminal.options.lineHeight);\n        if (offset >= 0 && offset <= terminalHeight) {\n            return 0;\n        }\n        if (offset > terminalHeight) {\n            offset -= terminalHeight;\n        }\n        offset = Math.min(Math.max(offset, -DRAG_SCROLL_MAX_THRESHOLD), DRAG_SCROLL_MAX_THRESHOLD);\n        offset /= DRAG_SCROLL_MAX_THRESHOLD;\n        return (offset / Math.abs(offset)) + Math.round(offset * (DRAG_SCROLL_MAX_SPEED - 1));\n    };\n    SelectionManager.prototype.shouldForceSelection = function (event) {\n        if (Browser.isMac) {\n            return event.altKey && this._terminal.options.macOptionClickForcesSelection;\n        }\n        return event.shiftKey;\n    };\n    SelectionManager.prototype.onMouseDown = function (event) {\n        this._mouseDownTimeStamp = event.timeStamp;\n        if (event.button === 2 && this.hasSelection) {\n            return;\n        }\n        if (event.button !== 0) {\n            return;\n        }\n        if (!this._enabled) {\n            if (!this.shouldForceSelection(event)) {\n                return;\n            }\n            event.stopPropagation();\n        }\n        event.preventDefault();\n        this._dragScrollAmount = 0;\n        if (this._enabled && event.shiftKey) {\n            this._onIncrementalClick(event);\n        }\n        else {\n            if (event.detail === 1) {\n                this._onSingleClick(event);\n            }\n            else if (event.detail === 2) {\n                this._onDoubleClick(event);\n            }\n            else if (event.detail === 3) {\n                this._onTripleClick(event);\n            }\n        }\n        this._addMouseDownListeners();\n        this.refresh(true);\n    };\n    SelectionManager.prototype._addMouseDownListeners = function () {\n        var _this = this;\n        this._terminal.element.ownerDocument.addEventListener('mousemove', this._mouseMoveListener);\n        this._terminal.element.ownerDocument.addEventListener('mouseup', this._mouseUpListener);\n        this._dragScrollIntervalTimer = setInterval(function () { return _this._dragScroll(); }, DRAG_SCROLL_INTERVAL);\n    };\n    SelectionManager.prototype._removeMouseDownListeners = function () {\n        if (this._terminal.element.ownerDocument) {\n            this._terminal.element.ownerDocument.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.ownerDocument.removeEventListener('mouseup', this._mouseUpListener);\n        }\n        clearInterval(this._dragScrollIntervalTimer);\n        this._dragScrollIntervalTimer = null;\n    };\n    SelectionManager.prototype._onIncrementalClick = function (event) {\n        if (this._model.selectionStart) {\n            this._model.selectionEnd = this._getMouseBufferCoords(event);\n        }\n    };\n    SelectionManager.prototype._onSingleClick = function (event) {\n        this._model.selectionStartLength = 0;\n        this._model.isSelectAllActive = false;\n        this._activeSelectionMode = this.shouldColumnSelect(event) ? 3 : 0;\n        this._model.selectionStart = this._getMouseBufferCoords(event);\n        if (!this._model.selectionStart) {\n            return;\n        }\n        this._model.selectionEnd = null;\n        var line = this._buffer.lines.get(this._model.selectionStart[1]);\n        if (!line) {\n            return;\n        }\n        if (line.length >= this._model.selectionStart[0]) {\n            return;\n        }\n        if (line.hasWidth(this._model.selectionStart[0]) === 0) {\n            this._model.selectionStart[0]++;\n        }\n    };\n    SelectionManager.prototype._onDoubleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 1;\n            this._selectWordAt(coords, true);\n        }\n    };\n    SelectionManager.prototype._onTripleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 2;\n            this._selectLineAt(coords[1]);\n        }\n    };\n    SelectionManager.prototype.shouldColumnSelect = function (event) {\n        return event.altKey && !(Browser.isMac && this._terminal.options.macOptionClickForcesSelection);\n    };\n    SelectionManager.prototype._onMouseMove = function (event) {\n        event.stopImmediatePropagation();\n        var previousSelectionEnd = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;\n        this._model.selectionEnd = this._getMouseBufferCoords(event);\n        if (!this._model.selectionEnd) {\n            this.refresh(true);\n            return;\n        }\n        if (this._activeSelectionMode === 2) {\n            if (this._model.selectionEnd[1] < this._model.selectionStart[1]) {\n                this._model.selectionEnd[0] = 0;\n            }\n            else {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n        }\n        else if (this._activeSelectionMode === 1) {\n            this._selectToWordAt(this._model.selectionEnd);\n        }\n        this._dragScrollAmount = this._getMouseEventScrollAmount(event);\n        if (this._activeSelectionMode !== 3) {\n            if (this._dragScrollAmount > 0) {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n            else if (this._dragScrollAmount < 0) {\n                this._model.selectionEnd[0] = 0;\n            }\n        }\n        if (this._model.selectionEnd[1] < this._buffer.lines.length) {\n            if (this._buffer.lines.get(this._model.selectionEnd[1]).hasWidth(this._model.selectionEnd[0]) === 0) {\n                this._model.selectionEnd[0]++;\n            }\n        }\n        if (!previousSelectionEnd ||\n            previousSelectionEnd[0] !== this._model.selectionEnd[0] ||\n            previousSelectionEnd[1] !== this._model.selectionEnd[1]) {\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype._dragScroll = function () {\n        if (this._dragScrollAmount) {\n            this._terminal.scrollLines(this._dragScrollAmount, false);\n            if (this._dragScrollAmount > 0) {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = this._terminal.cols;\n                }\n                this._model.selectionEnd[1] = Math.min(this._terminal.buffer.ydisp + this._terminal.rows, this._terminal.buffer.lines.length - 1);\n            }\n            else {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = 0;\n                }\n                this._model.selectionEnd[1] = this._terminal.buffer.ydisp;\n            }\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._onMouseUp = function (event) {\n        var timeElapsed = event.timeStamp - this._mouseDownTimeStamp;\n        this._removeMouseDownListeners();\n        if (this.selectionText.length <= 1 && timeElapsed < ALT_CLICK_MOVE_CURSOR_TIME) {\n            (new AltClickHandler_1.AltClickHandler(event, this._terminal)).move();\n        }\n        else if (this.hasSelection) {\n            this._onSelectionChange.fire();\n        }\n    };\n    SelectionManager.prototype._onBufferActivate = function (e) {\n        var _this = this;\n        this.clearSelection();\n        if (this._trimListener) {\n            this._trimListener.dispose();\n        }\n        this._trimListener = e.activeBuffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });\n    };\n    SelectionManager.prototype._convertViewportColToCharacterIndex = function (bufferLine, coords) {\n        var charIndex = coords[0];\n        for (var i = 0; coords[0] >= i; i++) {\n            var length_1 = bufferLine.loadCell(i, this._workCell).getChars().length;\n            if (this._workCell.getWidth() === 0) {\n                charIndex--;\n            }\n            else if (length_1 > 1 && coords[0] !== i) {\n                charIndex += length_1 - 1;\n            }\n        }\n        return charIndex;\n    };\n    SelectionManager.prototype.setSelection = function (col, row, length) {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this._model.selectionStart = [col, row];\n        this._model.selectionStartLength = length;\n        this.refresh();\n    };\n    SelectionManager.prototype._getWordAt = function (coords, allowWhitespaceOnlySelection, followWrappedLinesAbove, followWrappedLinesBelow) {\n        if (followWrappedLinesAbove === void 0) { followWrappedLinesAbove = true; }\n        if (followWrappedLinesBelow === void 0) { followWrappedLinesBelow = true; }\n        if (coords[0] >= this._terminal.cols) {\n            return null;\n        }\n        var bufferLine = this._buffer.lines.get(coords[1]);\n        if (!bufferLine) {\n            return null;\n        }\n        var line = this._buffer.translateBufferLineToString(coords[1], false);\n        var startIndex = this._convertViewportColToCharacterIndex(bufferLine, coords);\n        var endIndex = startIndex;\n        var charOffset = coords[0] - startIndex;\n        var leftWideCharCount = 0;\n        var rightWideCharCount = 0;\n        var leftLongCharOffset = 0;\n        var rightLongCharOffset = 0;\n        if (line.charAt(startIndex) === ' ') {\n            while (startIndex > 0 && line.charAt(startIndex - 1) === ' ') {\n                startIndex--;\n            }\n            while (endIndex < line.length && line.charAt(endIndex + 1) === ' ') {\n                endIndex++;\n            }\n        }\n        else {\n            var startCol = coords[0];\n            var endCol = coords[0];\n            if (bufferLine.getWidth(startCol) === 0) {\n                leftWideCharCount++;\n                startCol--;\n            }\n            if (bufferLine.getWidth(endCol) === 2) {\n                rightWideCharCount++;\n                endCol++;\n            }\n            var length_2 = bufferLine.getString(endCol).length;\n            if (length_2 > 1) {\n                rightLongCharOffset += length_2 - 1;\n                endIndex += length_2 - 1;\n            }\n            while (startCol > 0 && startIndex > 0 && !this._isCharWordSeparator(bufferLine.loadCell(startCol - 1, this._workCell))) {\n                bufferLine.loadCell(startCol - 1, this._workCell);\n                var length_3 = this._workCell.getChars().length;\n                if (this._workCell.getWidth() === 0) {\n                    leftWideCharCount++;\n                    startCol--;\n                }\n                else if (length_3 > 1) {\n                    leftLongCharOffset += length_3 - 1;\n                    startIndex -= length_3 - 1;\n                }\n                startIndex--;\n                startCol--;\n            }\n            while (endCol < bufferLine.length && endIndex + 1 < line.length && !this._isCharWordSeparator(bufferLine.loadCell(endCol + 1, this._workCell))) {\n                bufferLine.loadCell(endCol + 1, this._workCell);\n                var length_4 = this._workCell.getChars().length;\n                if (this._workCell.getWidth() === 2) {\n                    rightWideCharCount++;\n                    endCol++;\n                }\n                else if (length_4 > 1) {\n                    rightLongCharOffset += length_4 - 1;\n                    endIndex += length_4 - 1;\n                }\n                endIndex++;\n                endCol++;\n            }\n        }\n        endIndex++;\n        var start = startIndex\n            + charOffset\n            - leftWideCharCount\n            + leftLongCharOffset;\n        var length = Math.min(this._terminal.cols, endIndex\n            - startIndex\n            + leftWideCharCount\n            + rightWideCharCount\n            - leftLongCharOffset\n            - rightLongCharOffset);\n        if (!allowWhitespaceOnlySelection && line.slice(startIndex, endIndex).trim() === '') {\n            return null;\n        }\n        if (followWrappedLinesAbove) {\n            if (start === 0 && bufferLine.getCodePoint(0) !== 32) {\n                var previousBufferLine = this._buffer.lines.get(coords[1] - 1);\n                if (previousBufferLine && bufferLine.isWrapped && previousBufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {\n                    var previousLineWordPosition = this._getWordAt([this._terminal.cols - 1, coords[1] - 1], false, true, false);\n                    if (previousLineWordPosition) {\n                        var offset = this._terminal.cols - previousLineWordPosition.start;\n                        start -= offset;\n                        length += offset;\n                    }\n                }\n            }\n        }\n        if (followWrappedLinesBelow) {\n            if (start + length === this._terminal.cols && bufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {\n                var nextBufferLine = this._buffer.lines.get(coords[1] + 1);\n                if (nextBufferLine && nextBufferLine.isWrapped && nextBufferLine.getCodePoint(0) !== 32) {\n                    var nextLineWordPosition = this._getWordAt([0, coords[1] + 1], false, false, true);\n                    if (nextLineWordPosition) {\n                        length += nextLineWordPosition.length;\n                    }\n                }\n            }\n        }\n        return { start: start, length: length };\n    };\n    SelectionManager.prototype._selectWordAt = function (coords, allowWhitespaceOnlySelection) {\n        var wordPosition = this._getWordAt(coords, allowWhitespaceOnlySelection);\n        if (wordPosition) {\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                coords[1]--;\n            }\n            this._model.selectionStart = [wordPosition.start, coords[1]];\n            this._model.selectionStartLength = wordPosition.length;\n        }\n    };\n    SelectionManager.prototype._selectToWordAt = function (coords) {\n        var wordPosition = this._getWordAt(coords, true);\n        if (wordPosition) {\n            var endRow = coords[1];\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                endRow--;\n            }\n            if (!this._model.areSelectionValuesReversed()) {\n                while (wordPosition.start + wordPosition.length > this._terminal.cols) {\n                    wordPosition.length -= this._terminal.cols;\n                    endRow++;\n                }\n            }\n            this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? wordPosition.start : wordPosition.start + wordPosition.length, endRow];\n        }\n    };\n    SelectionManager.prototype._isCharWordSeparator = function (cell) {\n        if (cell.getWidth() === 0) {\n            return false;\n        }\n        return WORD_SEPARATORS.indexOf(cell.getChars()) >= 0;\n    };\n    SelectionManager.prototype._selectLineAt = function (line) {\n        var wrappedRange = this._buffer.getWrappedRangeForLine(line);\n        this._model.selectionStart = [0, wrappedRange.first];\n        this._model.selectionEnd = [this._terminal.cols, wrappedRange.last];\n        this._model.selectionStartLength = 0;\n    };\n    return SelectionManager;\n}());\nexports.SelectionManager = SelectionManager;\n\n},{\"./MouseHelper\":28,\"./SelectionModel\":31,\"./common/EventEmitter2\":41,\"./common/Platform\":43,\"./core/buffer/BufferLine\":47,\"./handlers/AltClickHandler\":53}],31:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SelectionModel = (function () {\n    function SelectionModel(_terminal) {\n        this._terminal = _terminal;\n        this.clearSelection();\n    }\n    SelectionModel.prototype.clearSelection = function () {\n        this.selectionStart = null;\n        this.selectionEnd = null;\n        this.isSelectAllActive = false;\n        this.selectionStartLength = 0;\n    };\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionStart\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [0, 0];\n            }\n            if (!this.selectionEnd || !this.selectionStart) {\n                return this.selectionStart;\n            }\n            return this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionEnd\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [this._terminal.cols, this._terminal.buffer.ybase + this._terminal.rows - 1];\n            }\n            if (!this.selectionStart) {\n                return null;\n            }\n            if (!this.selectionEnd || this.areSelectionValuesReversed()) {\n                var startPlusLength = this.selectionStart[0] + this.selectionStartLength;\n                if (startPlusLength > this._terminal.cols) {\n                    return [startPlusLength % this._terminal.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._terminal.cols)];\n                }\n                return [startPlusLength, this.selectionStart[1]];\n            }\n            if (this.selectionStartLength) {\n                if (this.selectionEnd[1] === this.selectionStart[1]) {\n                    return [Math.max(this.selectionStart[0] + this.selectionStartLength, this.selectionEnd[0]), this.selectionEnd[1]];\n                }\n            }\n            return this.selectionEnd;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionModel.prototype.areSelectionValuesReversed = function () {\n        var start = this.selectionStart;\n        var end = this.selectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return start[1] > end[1] || (start[1] === end[1] && start[0] > end[0]);\n    };\n    SelectionModel.prototype.onTrim = function (amount) {\n        if (this.selectionStart) {\n            this.selectionStart[1] -= amount;\n        }\n        if (this.selectionEnd) {\n            this.selectionEnd[1] -= amount;\n        }\n        if (this.selectionEnd && this.selectionEnd[1] < 0) {\n            this.clearSelection();\n            return true;\n        }\n        if (this.selectionStart && this.selectionStart[1] < 0) {\n            this.selectionStart[1] = 0;\n        }\n        return false;\n    };\n    return SelectionModel;\n}());\nexports.SelectionModel = SelectionModel;\n\n},{}],32:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_BELL_SOUND = 'data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg==';\nvar SoundManager = (function () {\n    function SoundManager(_terminal) {\n        this._terminal = _terminal;\n    }\n    Object.defineProperty(SoundManager, \"audioContext\", {\n        get: function () {\n            if (!SoundManager._audioContext) {\n                var audioContextCtor = window.AudioContext || window.webkitAudioContext;\n                if (!audioContextCtor) {\n                    console.warn('Web Audio API is not supported by this browser. Consider upgrading to the latest version');\n                    return null;\n                }\n                SoundManager._audioContext = new audioContextCtor();\n            }\n            return SoundManager._audioContext;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SoundManager.prototype.playBellSound = function () {\n        var ctx = SoundManager.audioContext;\n        if (!ctx) {\n            return;\n        }\n        var bellAudioSource = ctx.createBufferSource();\n        ctx.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._terminal.options.bellSound)), function (buffer) {\n            bellAudioSource.buffer = buffer;\n            bellAudioSource.connect(ctx.destination);\n            bellAudioSource.start(0);\n        });\n    };\n    SoundManager.prototype._base64ToArrayBuffer = function (base64) {\n        var binaryString = window.atob(base64);\n        var len = binaryString.length;\n        var bytes = new Uint8Array(len);\n        for (var i = 0; i < len; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes.buffer;\n    };\n    SoundManager.prototype._removeMimeType = function (dataURI) {\n        var splitUri = dataURI.split(',');\n        return splitUri[1];\n    };\n    return SoundManager;\n}());\nexports.SoundManager = SoundManager;\n\n},{}],33:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.blankLine = 'Blank line';\nexports.promptLabel = 'Terminal input';\nexports.tooMuchOutput = 'Too much output to announce, navigate to rows manually to read';\n\n},{}],34:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferSet_1 = require(\"./BufferSet\");\nvar Buffer_1 = require(\"./Buffer\");\nvar CompositionHelper_1 = require(\"./CompositionHelper\");\nvar EventEmitter_1 = require(\"./common/EventEmitter\");\nvar Viewport_1 = require(\"./Viewport\");\nvar Clipboard_1 = require(\"./Clipboard\");\nvar EscapeSequences_1 = require(\"./common/data/EscapeSequences\");\nvar InputHandler_1 = require(\"./InputHandler\");\nvar Renderer_1 = require(\"./renderer/Renderer\");\nvar Linkifier_1 = require(\"./Linkifier\");\nvar SelectionManager_1 = require(\"./SelectionManager\");\nvar CharMeasure_1 = require(\"./CharMeasure\");\nvar Browser = require(\"./common/Platform\");\nvar Lifecycle_1 = require(\"./ui/Lifecycle\");\nvar Strings = require(\"./Strings\");\nvar MouseHelper_1 = require(\"./MouseHelper\");\nvar SoundManager_1 = require(\"./SoundManager\");\nvar MouseZoneManager_1 = require(\"./MouseZoneManager\");\nvar AccessibilityManager_1 = require(\"./AccessibilityManager\");\nvar CharAtlasCache_1 = require(\"./renderer/atlas/CharAtlasCache\");\nvar DomRenderer_1 = require(\"./renderer/dom/DomRenderer\");\nvar Keyboard_1 = require(\"./core/input/Keyboard\");\nvar Clone_1 = require(\"./common/Clone\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar WindowsMode_1 = require(\"./WindowsMode\");\nvar ColorManager_1 = require(\"./ui/ColorManager\");\nvar RenderCoordinator_1 = require(\"./renderer/RenderCoordinator\");\nvar document = (typeof window !== 'undefined') ? window.document : null;\nvar WRITE_BUFFER_PAUSE_THRESHOLD = 5;\nvar WRITE_TIMEOUT_MS = 12;\nvar WRITE_BUFFER_LENGTH_THRESHOLD = 50;\nvar MINIMUM_COLS = 2;\nvar MINIMUM_ROWS = 1;\nvar CONSTRUCTOR_ONLY_OPTIONS = ['cols', 'rows'];\nvar DEFAULT_OPTIONS = {\n    cols: 80,\n    rows: 24,\n    convertEol: false,\n    termName: 'xterm',\n    cursorBlink: false,\n    cursorStyle: 'block',\n    bellSound: SoundManager_1.DEFAULT_BELL_SOUND,\n    bellStyle: 'none',\n    drawBoldTextInBrightColors: true,\n    enableBold: true,\n    experimentalCharAtlas: 'static',\n    fontFamily: 'courier-new, courier, monospace',\n    fontSize: 15,\n    fontWeight: 'normal',\n    fontWeightBold: 'bold',\n    lineHeight: 1.0,\n    letterSpacing: 0,\n    scrollback: 1000,\n    screenKeys: false,\n    screenReaderMode: false,\n    debug: false,\n    macOptionIsMeta: false,\n    macOptionClickForcesSelection: false,\n    cancelEvents: false,\n    disableStdin: false,\n    useFlowControl: false,\n    allowTransparency: false,\n    tabStopWidth: 8,\n    theme: undefined,\n    rightClickSelectsWord: Browser.isMac,\n    rendererType: 'canvas',\n    windowsMode: false\n};\nvar Terminal = (function (_super) {\n    __extends(Terminal, _super);\n    function Terminal(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.browser = Browser;\n        _this._blankLine = null;\n        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();\n        _this._onData = new EventEmitter2_1.EventEmitter2();\n        _this._onKey = new EventEmitter2_1.EventEmitter2();\n        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();\n        _this._onRender = new EventEmitter2_1.EventEmitter2();\n        _this._onResize = new EventEmitter2_1.EventEmitter2();\n        _this._onScroll = new EventEmitter2_1.EventEmitter2();\n        _this._onSelectionChange = new EventEmitter2_1.EventEmitter2();\n        _this._onTitleChange = new EventEmitter2_1.EventEmitter2();\n        _this.options = Clone_1.clone(options);\n        _this._setup();\n        _this.onCursorMove(function () { return _this.emit('cursormove'); });\n        _this.onData(function (e) { return _this.emit('data', e); });\n        _this.onKey(function (e) { return _this.emit('key', e.key, e.domEvent); });\n        _this.onLineFeed(function () { return _this.emit('linefeed'); });\n        _this.onRender(function (e) { return _this.emit('refresh', e); });\n        _this.onResize(function (e) { return _this.emit('resize', e); });\n        _this.onSelectionChange(function () { return _this.emit('selection'); });\n        _this.onScroll(function (e) { return _this.emit('scroll', e); });\n        _this.onTitleChange(function (e) { return _this.emit('title', e); });\n        return _this;\n    }\n    Object.defineProperty(Terminal.prototype, \"onCursorMove\", {\n        get: function () { return this._onCursorMove.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onData\", {\n        get: function () { return this._onData.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onKey\", {\n        get: function () { return this._onKey.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onLineFeed\", {\n        get: function () { return this._onLineFeed.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onRender\", {\n        get: function () { return this._onRender.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onResize\", {\n        get: function () { return this._onResize.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onScroll\", {\n        get: function () { return this._onScroll.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onSelectionChange\", {\n        get: function () { return this._onSelectionChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onTitleChange\", {\n        get: function () { return this._onTitleChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        if (this._windowsMode) {\n            this._windowsMode.dispose();\n            this._windowsMode = undefined;\n        }\n        this._customKeyEventHandler = null;\n        CharAtlasCache_1.removeTerminalFromCache(this);\n        this.handler = function () { };\n        this.write = function () { };\n        if (this.element && this.element.parentNode) {\n            this.element.parentNode.removeChild(this.element);\n        }\n    };\n    Terminal.prototype.destroy = function () {\n        this.dispose();\n    };\n    Terminal.prototype._setup = function () {\n        var _this = this;\n        Object.keys(DEFAULT_OPTIONS).forEach(function (key) {\n            if (_this.options[key] === null || _this.options[key] === undefined) {\n                _this.options[key] = DEFAULT_OPTIONS[key];\n            }\n        });\n        this._parent = document ? document.body : null;\n        this.cols = Math.max(this.options.cols, MINIMUM_COLS);\n        this.rows = Math.max(this.options.rows, MINIMUM_ROWS);\n        if (this.options.handler) {\n            this.onData(this.options.handler);\n        }\n        this.cursorState = 0;\n        this.cursorHidden = false;\n        this._customKeyEventHandler = null;\n        this.applicationKeypad = false;\n        this.applicationCursor = false;\n        this.originMode = false;\n        this.insertMode = false;\n        this.wraparoundMode = true;\n        this.bracketedPasteMode = false;\n        this.charset = null;\n        this.gcharset = null;\n        this.glevel = 0;\n        this.charsets = [null];\n        this.curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this._eraseAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this.params = [];\n        this.currentParam = 0;\n        this.writeBuffer = [];\n        this.writeBufferUtf8 = [];\n        this._writeInProgress = false;\n        this._xoffSentToCatchUp = false;\n        this._userScrolling = false;\n        this._inputHandler = new InputHandler_1.InputHandler(this);\n        this._inputHandler.onCursorMove(function () { return _this._onCursorMove.fire(); });\n        this._inputHandler.onLineFeed(function () { return _this._onLineFeed.fire(); });\n        this._inputHandler.onData(function (e) { return _this._onData.fire(e); });\n        this.register(this._inputHandler);\n        this.selectionManager = this.selectionManager || null;\n        this.linkifier = this.linkifier || new Linkifier_1.Linkifier(this);\n        this._mouseZoneManager = this._mouseZoneManager || null;\n        this.soundManager = this.soundManager || new SoundManager_1.SoundManager(this);\n        this.buffers = new BufferSet_1.BufferSet(this);\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n            this.selectionManager.initBuffersListeners();\n        }\n        if (this.options.windowsMode) {\n            this._windowsMode = WindowsMode_1.applyWindowsMode(this);\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"buffer\", {\n        get: function () {\n            return this.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.eraseAttrData = function () {\n        this._eraseAttrData.bg &= ~(50331648 | 0xFFFFFF);\n        this._eraseAttrData.bg |= this.curAttrData.bg & ~0xFC000000;\n        return this._eraseAttrData;\n    };\n    Terminal.prototype.focus = function () {\n        if (this.textarea) {\n            this.textarea.focus({ preventScroll: true });\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"isFocused\", {\n        get: function () {\n            return document.activeElement === this.textarea && document.hasFocus();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.getOption = function (key) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        return this.options[key];\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        if (CONSTRUCTOR_ONLY_OPTIONS.indexOf(key) !== -1) {\n            console.error(\"Option \\\"\" + key + \"\\\" can only be set in the constructor\");\n        }\n        if (this.options[key] === value) {\n            return;\n        }\n        switch (key) {\n            case 'bellStyle':\n                if (!value) {\n                    value = 'none';\n                }\n                break;\n            case 'cursorStyle':\n                if (!value) {\n                    value = 'block';\n                }\n                break;\n            case 'fontWeight':\n                if (!value) {\n                    value = 'normal';\n                }\n                break;\n            case 'fontWeightBold':\n                if (!value) {\n                    value = 'bold';\n                }\n                break;\n            case 'lineHeight':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n            case 'rendererType':\n                if (!value) {\n                    value = 'canvas';\n                }\n                break;\n            case 'tabStopWidth':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n                break;\n            case 'theme':\n                this._setTheme(value);\n                break;\n            case 'scrollback':\n                value = Math.min(value, Buffer_1.MAX_BUFFER_SIZE);\n                if (value < 0) {\n                    console.warn(key + \" cannot be less than 0, value: \" + value);\n                    return;\n                }\n                if (this.options[key] !== value) {\n                    var newBufferLength = this.rows + value;\n                    if (this.buffer.lines.length > newBufferLength) {\n                        var amountToTrim = this.buffer.lines.length - newBufferLength;\n                        var needsRefresh = (this.buffer.ydisp - amountToTrim < 0);\n                        this.buffer.lines.trimStart(amountToTrim);\n                        this.buffer.ybase = Math.max(this.buffer.ybase - amountToTrim, 0);\n                        this.buffer.ydisp = Math.max(this.buffer.ydisp - amountToTrim, 0);\n                        if (needsRefresh) {\n                            this.refresh(0, this.rows - 1);\n                        }\n                    }\n                }\n                break;\n        }\n        this.options[key] = value;\n        switch (key) {\n            case 'fontFamily':\n            case 'fontSize':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.clear();\n                    this.charMeasure.measure(this.options);\n                }\n                break;\n            case 'drawBoldTextInBrightColors':\n            case 'experimentalCharAtlas':\n            case 'enableBold':\n            case 'letterSpacing':\n            case 'lineHeight':\n            case 'fontWeight':\n            case 'fontWeightBold':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.clear();\n                    this._renderCoordinator.onResize(this.cols, this.rows);\n                    this.refresh(0, this.rows - 1);\n                }\n                break;\n            case 'rendererType':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.setRenderer(this._createRenderer());\n                }\n                break;\n            case 'scrollback':\n                this.buffers.resize(this.cols, this.rows);\n                if (this.viewport) {\n                    this.viewport.syncScrollArea();\n                }\n                break;\n            case 'screenReaderMode':\n                if (value) {\n                    if (!this._accessibilityManager && this._renderCoordinator) {\n                        this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderCoordinator.dimensions);\n                    }\n                }\n                else {\n                    if (this._accessibilityManager) {\n                        this._accessibilityManager.dispose();\n                        this._accessibilityManager = null;\n                    }\n                }\n                break;\n            case 'tabStopWidth':\n                this.buffers.setupTabStops();\n                break;\n            case 'windowsMode':\n                if (value) {\n                    if (!this._windowsMode) {\n                        this._windowsMode = WindowsMode_1.applyWindowsMode(this);\n                    }\n                }\n                else {\n                    if (this._windowsMode) {\n                        this._windowsMode.dispose();\n                        this._windowsMode = undefined;\n                    }\n                }\n                break;\n        }\n        if (this._renderCoordinator) {\n            this._renderCoordinator.onOptionsChanged();\n        }\n    };\n    Terminal.prototype._onTextAreaFocus = function (ev) {\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[I');\n        }\n        this.updateCursorStyle(ev);\n        this.element.classList.add('focus');\n        this.showCursor();\n        this.emit('focus');\n    };\n    Terminal.prototype.blur = function () {\n        return this.textarea.blur();\n    };\n    Terminal.prototype._onTextAreaBlur = function () {\n        this.textarea.value = '';\n        this.refresh(this.buffer.y, this.buffer.y);\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[O');\n        }\n        this.element.classList.remove('focus');\n        this.emit('blur');\n    };\n    Terminal.prototype._initGlobal = function () {\n        var _this = this;\n        this._bindKeys();\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'copy', function (event) {\n            if (!_this.hasSelection()) {\n                return;\n            }\n            Clipboard_1.copyHandler(event, _this, _this.selectionManager);\n        }));\n        var pasteHandlerWrapper = function (event) { return Clipboard_1.pasteHandler(event, _this); };\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'paste', pasteHandlerWrapper));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'paste', pasteHandlerWrapper));\n        if (Browser.isFirefox) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (event) {\n                if (event.button === 2) {\n                    Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);\n                }\n            }));\n        }\n        else {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'contextmenu', function (event) {\n                Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);\n            }));\n        }\n        if (Browser.isLinux) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'auxclick', function (event) {\n                if (event.button === 1) {\n                    Clipboard_1.moveTextAreaUnderMouseCursor(event, _this);\n                }\n            }));\n        }\n    };\n    Terminal.prototype._bindKeys = function () {\n        var _this = this;\n        var self = this;\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keydown', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyDown(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keypress', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyPress(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keyup', function (ev) {\n            if (!wasModifierKeyOnlyEvent(ev)) {\n                _this.focus();\n            }\n            self._keyUp(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keydown', function (ev) { return _this._keyDown(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keypress', function (ev) { return _this._keyPress(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionstart', function () { return _this._compositionHelper.compositionstart(); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionupdate', function (e) { return _this._compositionHelper.compositionupdate(e); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionend', function () { return _this._compositionHelper.compositionend(); }));\n        this.register(this.onRender(function () { return _this._compositionHelper.updateCompositionElements(); }));\n        this.register(this.onRender(function (e) { return _this._queueLinkification(e.start, e.end); }));\n    };\n    Terminal.prototype.open = function (parent) {\n        var _this = this;\n        this._parent = parent || this._parent;\n        if (!this._parent) {\n            throw new Error('Terminal requires a parent element.');\n        }\n        this._context = this._parent.ownerDocument.defaultView;\n        this._document = this._parent.ownerDocument;\n        this.element = this._document.createElement('div');\n        this.element.dir = 'ltr';\n        this.element.classList.add('terminal');\n        this.element.classList.add('xterm');\n        this.element.setAttribute('tabindex', '0');\n        this._parent.appendChild(this.element);\n        var fragment = document.createDocumentFragment();\n        this._viewportElement = document.createElement('div');\n        this._viewportElement.classList.add('xterm-viewport');\n        fragment.appendChild(this._viewportElement);\n        this._viewportScrollArea = document.createElement('div');\n        this._viewportScrollArea.classList.add('xterm-scroll-area');\n        this._viewportElement.appendChild(this._viewportScrollArea);\n        this.screenElement = document.createElement('div');\n        this.screenElement.classList.add('xterm-screen');\n        this._helperContainer = document.createElement('div');\n        this._helperContainer.classList.add('xterm-helpers');\n        this.screenElement.appendChild(this._helperContainer);\n        fragment.appendChild(this.screenElement);\n        this._mouseZoneManager = new MouseZoneManager_1.MouseZoneManager(this);\n        this.register(this._mouseZoneManager);\n        this.register(this.onScroll(function () { return _this._mouseZoneManager.clearAll(); }));\n        this.linkifier.attachToDom(this._mouseZoneManager);\n        this.textarea = document.createElement('textarea');\n        this.textarea.classList.add('xterm-helper-textarea');\n        this.textarea.setAttribute('aria-label', Strings.promptLabel);\n        this.textarea.setAttribute('aria-multiline', 'false');\n        this.textarea.setAttribute('autocorrect', 'off');\n        this.textarea.setAttribute('autocapitalize', 'off');\n        this.textarea.setAttribute('spellcheck', 'false');\n        this.textarea.tabIndex = 0;\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'focus', function (ev) { return _this._onTextAreaFocus(ev); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'blur', function () { return _this._onTextAreaBlur(); }));\n        this._helperContainer.appendChild(this.textarea);\n        this._compositionView = document.createElement('div');\n        this._compositionView.classList.add('composition-view');\n        this._compositionHelper = new CompositionHelper_1.CompositionHelper(this.textarea, this._compositionView, this);\n        this._helperContainer.appendChild(this._compositionView);\n        this.charMeasure = new CharMeasure_1.CharMeasure(document, this._helperContainer);\n        this.element.appendChild(fragment);\n        this._theme = this.options.theme;\n        this._colorManager = new ColorManager_1.ColorManager(document, this.options.allowTransparency);\n        this._colorManager.setTheme(this._theme);\n        var renderer = this._createRenderer();\n        this._renderCoordinator = new RenderCoordinator_1.RenderCoordinator(renderer, this.rows, this.screenElement);\n        this._renderCoordinator.onRender(function (e) { return _this._onRender.fire(e); });\n        this.onResize(function (e) { return _this._renderCoordinator.resize(e.cols, e.rows); });\n        this.viewport = new Viewport_1.Viewport(this, this._viewportElement, this._viewportScrollArea, this.charMeasure, this._renderCoordinator.dimensions);\n        this.viewport.onThemeChange(this._colorManager.colors);\n        this.register(this.viewport);\n        this.register(this.onCursorMove(function () { return _this._renderCoordinator.onCursorMove(); }));\n        this.register(this.onResize(function () { return _this._renderCoordinator.onResize(_this.cols, _this.rows); }));\n        this.register(this.addDisposableListener('blur', function () { return _this._renderCoordinator.onBlur(); }));\n        this.register(this.addDisposableListener('focus', function () { return _this._renderCoordinator.onFocus(); }));\n        this.register(this.charMeasure.onCharSizeChanged(function () { return _this._renderCoordinator.onCharSizeChanged(); }));\n        this.register(this._renderCoordinator.onDimensionsChange(function () { return _this.viewport.syncScrollArea(); }));\n        this.selectionManager = new SelectionManager_1.SelectionManager(this, this.charMeasure);\n        this.register(this.selectionManager.onSelectionChange(function () { return _this._onSelectionChange.fire(); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (e) { return _this.selectionManager.onMouseDown(e); }));\n        this.register(this.selectionManager.onRedrawRequest(function (e) { return _this._renderCoordinator.onSelectionChanged(e.start, e.end, e.columnSelectMode); }));\n        this.register(this.selectionManager.onLinuxMouseSelection(function (text) {\n            _this.textarea.value = text;\n            _this.textarea.focus();\n            _this.textarea.select();\n        }));\n        this.register(this.onScroll(function () {\n            _this.viewport.syncScrollArea();\n            _this.selectionManager.refresh();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(this._viewportElement, 'scroll', function () { return _this.selectionManager.refresh(); }));\n        this.mouseHelper = new MouseHelper_1.MouseHelper(this._renderCoordinator);\n        this.element.classList.toggle('enable-mouse-events', this.mouseEvents);\n        if (this.mouseEvents) {\n            this.selectionManager.disable();\n        }\n        else {\n            this.selectionManager.enable();\n        }\n        if (this.options.screenReaderMode) {\n            this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderCoordinator.dimensions);\n            this._accessibilityManager.register(this._renderCoordinator.onDimensionsChange(function (e) { return _this._accessibilityManager.setDimensions(e); }));\n        }\n        this.charMeasure.measure(this.options);\n        this.refresh(0, this.rows - 1);\n        this._initGlobal();\n        this.bindMouse();\n    };\n    Terminal.prototype._createRenderer = function () {\n        switch (this.options.rendererType) {\n            case 'canvas':\n                return new Renderer_1.Renderer(this, this._colorManager.colors);\n                break;\n            case 'dom':\n                return new DomRenderer_1.DomRenderer(this, this._colorManager.colors);\n                break;\n            default: throw new Error(\"Unrecognized rendererType \\\"\" + this.options.rendererType + \"\\\"\");\n        }\n    };\n    Terminal.prototype._setTheme = function (theme) {\n        this._theme = theme;\n        if (this._colorManager) {\n            this._colorManager.setTheme(theme);\n        }\n        if (this._renderCoordinator) {\n            this._renderCoordinator.setColors(this._colorManager.colors);\n        }\n        if (this.viewport) {\n            this.viewport.onThemeChange(this._colorManager.colors);\n        }\n    };\n    Terminal.prototype.bindMouse = function () {\n        var _this = this;\n        var el = this.element;\n        var self = this;\n        var pressed = 32;\n        function sendButton(ev) {\n            var button;\n            var pos;\n            button = getButton(ev);\n            pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            sendEvent(button, pos);\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    pressed = button;\n                    break;\n                case 'mouseup':\n                    pressed = 32;\n                    break;\n                case 'wheel':\n                    break;\n            }\n        }\n        function sendMove(ev) {\n            var button = pressed;\n            var pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            button += 32;\n            sendEvent(button, pos);\n        }\n        function encode(data, ch) {\n            if (!self.utfMouse) {\n                if (ch === 255) {\n                    data.push(0);\n                    return;\n                }\n                if (ch > 127)\n                    ch = 127;\n                data.push(ch);\n            }\n            else {\n                if (ch > 2047) {\n                    data.push(2047);\n                    return;\n                }\n                data.push(ch);\n            }\n        }\n        function sendEvent(button, pos) {\n            if (self._vt300Mouse) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                var data_1 = EscapeSequences_1.C0.ESC + '[24';\n                if (button === 0)\n                    data_1 += '1';\n                else if (button === 1)\n                    data_1 += '3';\n                else if (button === 2)\n                    data_1 += '5';\n                else if (button === 3)\n                    return;\n                else\n                    data_1 += '0';\n                data_1 += '~[' + pos.x + ',' + pos.y + ']\\r';\n                self.handler(data_1);\n                return;\n            }\n            if (self._decLocator) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                if (button === 0)\n                    button = 2;\n                else if (button === 1)\n                    button = 4;\n                else if (button === 2)\n                    button = 6;\n                else if (button === 3)\n                    button = 3;\n                self.handler(EscapeSequences_1.C0.ESC + '['\n                    + button\n                    + ';'\n                    + (button === 3 ? 4 : 0)\n                    + ';'\n                    + pos.y\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.page || 0\n                    + '&w');\n                return;\n            }\n            if (self.urxvtMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                pos.x++;\n                pos.y++;\n                self.handler(EscapeSequences_1.C0.ESC + '[' + button + ';' + pos.x + ';' + pos.y + 'M');\n                return;\n            }\n            if (self.sgrMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                self.handler(EscapeSequences_1.C0.ESC + '[<'\n                    + (((button & 3) === 3 ? button & ~3 : button) - 32)\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.y\n                    + ((button & 3) === 3 ? 'm' : 'M'));\n                return;\n            }\n            var data = [];\n            encode(data, button);\n            encode(data, pos.x);\n            encode(data, pos.y);\n            self.handler(EscapeSequences_1.C0.ESC + '[M' + String.fromCharCode.apply(String, data));\n        }\n        function getButton(ev) {\n            var button;\n            var shift;\n            var meta;\n            var ctrl;\n            var mod;\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    button = ev.button !== null && ev.button !== undefined\n                        ? +ev.button\n                        : ev.which !== null && ev.which !== undefined\n                            ? ev.which - 1\n                            : null;\n                    if (Browser.isMSIE) {\n                        button = button === 1 ? 0 : button === 4 ? 1 : button;\n                    }\n                    break;\n                case 'mouseup':\n                    button = 3;\n                    break;\n                case 'DOMMouseScroll':\n                    button = ev.detail < 0\n                        ? 64\n                        : 65;\n                    break;\n                case 'wheel':\n                    button = ev.deltaY < 0\n                        ? 64\n                        : 65;\n                    break;\n            }\n            shift = ev.shiftKey ? 4 : 0;\n            meta = ev.metaKey ? 8 : 0;\n            ctrl = ev.ctrlKey ? 16 : 0;\n            mod = shift | meta | ctrl;\n            if (self.vt200Mouse) {\n                mod &= ctrl;\n            }\n            else if (!self.normalMouse) {\n                mod = 0;\n            }\n            button = (32 + (mod << 2)) + button;\n            return button;\n        }\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'mousedown', function (ev) {\n            ev.preventDefault();\n            _this.focus();\n            if (!_this.mouseEvents || _this.selectionManager.shouldForceSelection(ev)) {\n                return;\n            }\n            sendButton(ev);\n            if (_this.vt200Mouse) {\n                ev.overrideType = 'mouseup';\n                sendButton(ev);\n                return _this.cancel(ev);\n            }\n            var moveHandler;\n            if (_this.normalMouse) {\n                moveHandler = function (event) {\n                    if (!_this.normalMouse) {\n                        return;\n                    }\n                    sendMove(event);\n                };\n                _this._document.addEventListener('mousemove', moveHandler);\n            }\n            var handler = function (ev) {\n                if (_this.normalMouse && !_this.x10Mouse) {\n                    sendButton(ev);\n                }\n                if (moveHandler) {\n                    _this._document.removeEventListener('mousemove', moveHandler);\n                    moveHandler = null;\n                }\n                _this._document.removeEventListener('mouseup', handler);\n                return _this.cancel(ev);\n            };\n            _this._document.addEventListener('mouseup', handler);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (!_this.mouseEvents) {\n                if (!_this.buffer.hasScrollback) {\n                    var amount = _this.viewport.getLinesScrolled(ev);\n                    if (amount === 0) {\n                        return;\n                    }\n                    var sequence = EscapeSequences_1.C0.ESC + (_this.applicationCursor ? 'O' : '[') + (ev.deltaY < 0 ? 'A' : 'B');\n                    var data = '';\n                    for (var i = 0; i < Math.abs(amount); i++) {\n                        data += sequence;\n                    }\n                    _this.handler(data);\n                }\n                return;\n            }\n            if (_this.x10Mouse || _this._vt300Mouse || _this._decLocator)\n                return;\n            sendButton(ev);\n            ev.preventDefault();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onWheel(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchstart', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchStart(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchmove', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchMove(ev);\n            return _this.cancel(ev);\n        }));\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        if (this._renderCoordinator) {\n            this._renderCoordinator.refreshRows(start, end);\n        }\n    };\n    Terminal.prototype._queueLinkification = function (start, end) {\n        if (this.linkifier) {\n            this.linkifier.linkifyRows(start, end);\n        }\n    };\n    Terminal.prototype.updateCursorStyle = function (ev) {\n        if (this.selectionManager && this.selectionManager.shouldColumnSelect(ev)) {\n            this.element.classList.add('column-select');\n        }\n        else {\n            this.element.classList.remove('column-select');\n        }\n    };\n    Terminal.prototype.showCursor = function () {\n        if (!this.cursorState) {\n            this.cursorState = 1;\n            this.refresh(this.buffer.y, this.buffer.y);\n        }\n    };\n    Terminal.prototype.scroll = function (isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        var newLine;\n        newLine = this._blankLine;\n        var eraseAttr = this.eraseAttrData();\n        if (!newLine || newLine.length !== this.cols || newLine.getFg(0) !== eraseAttr.fg || newLine.getBg(0) !== eraseAttr.bg) {\n            newLine = this.buffer.getBlankLine(eraseAttr, isWrapped);\n            this._blankLine = newLine;\n        }\n        newLine.isWrapped = isWrapped;\n        var topRow = this.buffer.ybase + this.buffer.scrollTop;\n        var bottomRow = this.buffer.ybase + this.buffer.scrollBottom;\n        if (this.buffer.scrollTop === 0) {\n            var willBufferBeTrimmed = this.buffer.lines.isFull;\n            if (bottomRow === this.buffer.lines.length - 1) {\n                if (willBufferBeTrimmed) {\n                    this.buffer.lines.recycle().copyFrom(newLine);\n                }\n                else {\n                    this.buffer.lines.push(newLine.clone());\n                }\n            }\n            else {\n                this.buffer.lines.splice(bottomRow + 1, 0, newLine.clone());\n            }\n            if (!willBufferBeTrimmed) {\n                this.buffer.ybase++;\n                if (!this._userScrolling) {\n                    this.buffer.ydisp++;\n                }\n            }\n            else {\n                if (this._userScrolling) {\n                    this.buffer.ydisp = Math.max(this.buffer.ydisp - 1, 0);\n                }\n            }\n        }\n        else {\n            var scrollRegionHeight = bottomRow - topRow + 1;\n            this.buffer.lines.shiftElements(topRow + 1, scrollRegionHeight - 1, -1);\n            this.buffer.lines.set(bottomRow, newLine.clone());\n        }\n        if (!this._userScrolling) {\n            this.buffer.ydisp = this.buffer.ybase;\n        }\n        this.updateRange(this.buffer.scrollTop);\n        this.updateRange(this.buffer.scrollBottom);\n        this._onScroll.fire(this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollLines = function (disp, suppressScrollEvent) {\n        if (disp < 0) {\n            if (this.buffer.ydisp === 0) {\n                return;\n            }\n            this._userScrolling = true;\n        }\n        else if (disp + this.buffer.ydisp >= this.buffer.ybase) {\n            this._userScrolling = false;\n        }\n        var oldYdisp = this.buffer.ydisp;\n        this.buffer.ydisp = Math.max(Math.min(this.buffer.ydisp + disp, this.buffer.ybase), 0);\n        if (oldYdisp === this.buffer.ydisp) {\n            return;\n        }\n        if (!suppressScrollEvent) {\n            this._onScroll.fire(this.buffer.ydisp);\n        }\n        this.refresh(0, this.rows - 1);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this.scrollLines(pageCount * (this.rows - 1));\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this.scrollLines(-this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this.scrollLines(this.buffer.ybase - this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        var scrollAmount = line - this.buffer.ydisp;\n        if (scrollAmount !== 0) {\n            this.scrollLines(scrollAmount);\n        }\n    };\n    Terminal.prototype.writeUtf8 = function (data) {\n        var _this = this;\n        if (this._isDisposed) {\n            return;\n        }\n        if (!data) {\n            return;\n        }\n        this.writeBufferUtf8.push(data);\n        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBufferUtf8.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {\n            this.handler(EscapeSequences_1.C0.DC3);\n            this._xoffSentToCatchUp = true;\n        }\n        if (!this._writeInProgress && this.writeBufferUtf8.length > 0) {\n            this._writeInProgress = true;\n            setTimeout(function () {\n                _this._innerWriteUtf8();\n            });\n        }\n    };\n    Terminal.prototype._innerWriteUtf8 = function (bufferOffset) {\n        var _this = this;\n        if (bufferOffset === void 0) { bufferOffset = 0; }\n        if (this._isDisposed) {\n            this.writeBufferUtf8 = [];\n        }\n        var startTime = Date.now();\n        while (this.writeBufferUtf8.length > bufferOffset) {\n            var data = this.writeBufferUtf8[bufferOffset];\n            bufferOffset++;\n            if (this._xoffSentToCatchUp && this.writeBufferUtf8.length === bufferOffset) {\n                this.handler(EscapeSequences_1.C0.DC1);\n                this._xoffSentToCatchUp = false;\n            }\n            this._refreshStart = this.buffer.y;\n            this._refreshEnd = this.buffer.y;\n            this._inputHandler.parseUtf8(data);\n            this.updateRange(this.buffer.y);\n            this.refresh(this._refreshStart, this._refreshEnd);\n            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {\n                break;\n            }\n        }\n        if (this.writeBufferUtf8.length > bufferOffset) {\n            if (bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {\n                this.writeBufferUtf8 = this.writeBufferUtf8.slice(bufferOffset);\n                bufferOffset = 0;\n            }\n            setTimeout(function () { return _this._innerWriteUtf8(bufferOffset); }, 0);\n        }\n        else {\n            this._writeInProgress = false;\n            this.writeBufferUtf8 = [];\n        }\n    };\n    Terminal.prototype.write = function (data) {\n        var _this = this;\n        if (this._isDisposed) {\n            return;\n        }\n        if (!data) {\n            return;\n        }\n        this.writeBuffer.push(data);\n        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBuffer.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {\n            this.handler(EscapeSequences_1.C0.DC3);\n            this._xoffSentToCatchUp = true;\n        }\n        if (!this._writeInProgress && this.writeBuffer.length > 0) {\n            this._writeInProgress = true;\n            setTimeout(function () {\n                _this._innerWrite();\n            });\n        }\n    };\n    Terminal.prototype._innerWrite = function (bufferOffset) {\n        var _this = this;\n        if (bufferOffset === void 0) { bufferOffset = 0; }\n        if (this._isDisposed) {\n            this.writeBuffer = [];\n        }\n        var startTime = Date.now();\n        while (this.writeBuffer.length > bufferOffset) {\n            var data = this.writeBuffer[bufferOffset];\n            bufferOffset++;\n            if (this._xoffSentToCatchUp && this.writeBuffer.length === bufferOffset) {\n                this.handler(EscapeSequences_1.C0.DC1);\n                this._xoffSentToCatchUp = false;\n            }\n            this._refreshStart = this.buffer.y;\n            this._refreshEnd = this.buffer.y;\n            this._inputHandler.parse(data);\n            this.updateRange(this.buffer.y);\n            this.refresh(this._refreshStart, this._refreshEnd);\n            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {\n                break;\n            }\n        }\n        if (this.writeBuffer.length > bufferOffset) {\n            if (bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {\n                this.writeBuffer = this.writeBuffer.slice(bufferOffset);\n                bufferOffset = 0;\n            }\n            setTimeout(function () { return _this._innerWrite(bufferOffset); }, 0);\n        }\n        else {\n            this._writeInProgress = false;\n            this.writeBuffer = [];\n        }\n    };\n    Terminal.prototype.writeln = function (data) {\n        this.write(data + '\\r\\n');\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._customKeyEventHandler = customKeyEventHandler;\n    };\n    Terminal.prototype.addCsiHandler = function (flag, callback) {\n        return this._inputHandler.addCsiHandler(flag, callback);\n    };\n    Terminal.prototype.addOscHandler = function (ident, callback) {\n        return this._inputHandler.addOscHandler(ident, callback);\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        var matcherId = this.linkifier.registerLinkMatcher(regex, handler, options);\n        this.refresh(0, this.rows - 1);\n        return matcherId;\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        if (this.linkifier.deregisterLinkMatcher(matcherId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        var joinerId = this._renderCoordinator.registerCharacterJoiner(handler);\n        this.refresh(0, this.rows - 1);\n        return joinerId;\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        if (this._renderCoordinator.deregisterCharacterJoiner(joinerId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () {\n            return this.buffer.markers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        if (this.buffer !== this.buffers.normal) {\n            return;\n        }\n        return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this.selectionManager ? this.selectionManager.hasSelection : false;\n    };\n    Terminal.prototype.select = function (column, row, length) {\n        this.selectionManager.setSelection(column, row, length);\n    };\n    Terminal.prototype.getSelection = function () {\n        return this.selectionManager ? this.selectionManager.selectionText : '';\n    };\n    Terminal.prototype.getSelectionPosition = function () {\n        if (!this.selectionManager.hasSelection) {\n            return undefined;\n        }\n        return {\n            startColumn: this.selectionManager.selectionStart[0],\n            startRow: this.selectionManager.selectionStart[1],\n            endColumn: this.selectionManager.selectionEnd[0],\n            endRow: this.selectionManager.selectionEnd[1]\n        };\n    };\n    Terminal.prototype.clearSelection = function () {\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n        }\n    };\n    Terminal.prototype.selectAll = function () {\n        if (this.selectionManager) {\n            this.selectionManager.selectAll();\n        }\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        if (this.selectionManager) {\n            this.selectionManager.selectLines(start, end);\n        }\n    };\n    Terminal.prototype._keyDown = function (event) {\n        if (this._customKeyEventHandler && this._customKeyEventHandler(event) === false) {\n            return false;\n        }\n        if (!this._compositionHelper.keydown(event)) {\n            if (this.buffer.ybase !== this.buffer.ydisp) {\n                this.scrollToBottom();\n            }\n            return false;\n        }\n        var result = Keyboard_1.evaluateKeyboardEvent(event, this.applicationCursor, this.browser.isMac, this.options.macOptionIsMeta);\n        this.updateCursorStyle(event);\n        if (result.type === 3 || result.type === 2) {\n            var scrollCount = this.rows - 1;\n            this.scrollLines(result.type === 2 ? -scrollCount : scrollCount);\n            return this.cancel(event, true);\n        }\n        if (result.type === 1) {\n            this.selectAll();\n        }\n        if (this._isThirdLevelShift(this.browser, event)) {\n            return true;\n        }\n        if (result.cancel) {\n            this.cancel(event, true);\n        }\n        if (!result.key) {\n            return true;\n        }\n        this.emit('keydown', event);\n        this._onKey.fire({ key: result.key, domEvent: event });\n        this.showCursor();\n        this.handler(result.key);\n        return this.cancel(event, true);\n    };\n    Terminal.prototype._isThirdLevelShift = function (browser, ev) {\n        var thirdLevelKey = (browser.isMac && !this.options.macOptionIsMeta && ev.altKey && !ev.ctrlKey && !ev.metaKey) ||\n            (browser.isMSWindows && ev.altKey && ev.ctrlKey && !ev.metaKey);\n        if (ev.type === 'keypress') {\n            return thirdLevelKey;\n        }\n        return thirdLevelKey && (!ev.keyCode || ev.keyCode > 47);\n    };\n    Terminal.prototype.setgLevel = function (g) {\n        this.glevel = g;\n        this.charset = this.charsets[g];\n    };\n    Terminal.prototype.setgCharset = function (g, charset) {\n        this.charsets[g] = charset;\n        if (this.glevel === g) {\n            this.charset = charset;\n        }\n    };\n    Terminal.prototype._keyUp = function (ev) {\n        this.updateCursorStyle(ev);\n    };\n    Terminal.prototype._keyPress = function (ev) {\n        var key;\n        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {\n            return false;\n        }\n        this.cancel(ev);\n        if (ev.charCode) {\n            key = ev.charCode;\n        }\n        else if (ev.which === null || ev.which === undefined) {\n            key = ev.keyCode;\n        }\n        else if (ev.which !== 0 && ev.charCode !== 0) {\n            key = ev.which;\n        }\n        else {\n            return false;\n        }\n        if (!key || ((ev.altKey || ev.ctrlKey || ev.metaKey) && !this._isThirdLevelShift(this.browser, ev))) {\n            return false;\n        }\n        key = String.fromCharCode(key);\n        this.emit('keypress', key, ev);\n        this._onKey.fire({ key: key, domEvent: ev });\n        this.showCursor();\n        this.handler(key);\n        return true;\n    };\n    Terminal.prototype.bell = function () {\n        var _this = this;\n        this.emit('bell');\n        if (this._soundBell()) {\n            this.soundManager.playBellSound();\n        }\n        if (this._visualBell()) {\n            this.element.classList.add('visual-bell-active');\n            clearTimeout(this._visualBellTimer);\n            this._visualBellTimer = window.setTimeout(function () {\n                _this.element.classList.remove('visual-bell-active');\n            }, 200);\n        }\n    };\n    Terminal.prototype.log = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.log)\n            return;\n        this._context.console.log(text, data);\n    };\n    Terminal.prototype.error = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.error)\n            return;\n        this._context.console.error(text, data);\n    };\n    Terminal.prototype.resize = function (x, y) {\n        if (isNaN(x) || isNaN(y)) {\n            return;\n        }\n        if (x === this.cols && y === this.rows) {\n            if (this.charMeasure && (!this.charMeasure.width || !this.charMeasure.height)) {\n                this.charMeasure.measure(this.options);\n            }\n            return;\n        }\n        if (x < MINIMUM_COLS)\n            x = MINIMUM_COLS;\n        if (y < MINIMUM_ROWS)\n            y = MINIMUM_ROWS;\n        this.buffers.resize(x, y);\n        this.cols = x;\n        this.rows = y;\n        this.buffers.setupTabStops(this.cols);\n        if (this.charMeasure) {\n            this.charMeasure.measure(this.options);\n        }\n        this.refresh(0, this.rows - 1);\n        this._onResize.fire({ cols: x, rows: y });\n    };\n    Terminal.prototype.updateRange = function (y) {\n        if (y < this._refreshStart)\n            this._refreshStart = y;\n        if (y > this._refreshEnd)\n            this._refreshEnd = y;\n    };\n    Terminal.prototype.maxRange = function () {\n        this._refreshStart = 0;\n        this._refreshEnd = this.rows - 1;\n    };\n    Terminal.prototype.clear = function () {\n        if (this.buffer.ybase === 0 && this.buffer.y === 0) {\n            return;\n        }\n        this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y));\n        this.buffer.lines.length = 1;\n        this.buffer.ydisp = 0;\n        this.buffer.ybase = 0;\n        this.buffer.y = 0;\n        for (var i = 1; i < this.rows; i++) {\n            this.buffer.lines.push(this.buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n        }\n        this.refresh(0, this.rows - 1);\n        this._onScroll.fire(this.buffer.ydisp);\n    };\n    Terminal.prototype.is = function (term) {\n        return (this.options.termName + '').indexOf(term) === 0;\n    };\n    Terminal.prototype.handler = function (data) {\n        if (this.options.disableStdin) {\n            return;\n        }\n        if (this.selectionManager && this.selectionManager.hasSelection) {\n            this.selectionManager.clearSelection();\n        }\n        if (this.buffer.ybase !== this.buffer.ydisp) {\n            this.scrollToBottom();\n        }\n        this._onData.fire(data);\n    };\n    Terminal.prototype.handleTitle = function (title) {\n        this._onTitleChange.fire(title);\n    };\n    Terminal.prototype.index = function () {\n        this.buffer.y++;\n        if (this.buffer.y > this.buffer.scrollBottom) {\n            this.buffer.y--;\n            this.scroll();\n        }\n        if (this.buffer.x >= this.cols) {\n            this.buffer.x--;\n        }\n    };\n    Terminal.prototype.reverseIndex = function () {\n        if (this.buffer.y === this.buffer.scrollTop) {\n            var scrollRegionHeight = this.buffer.scrollBottom - this.buffer.scrollTop;\n            this.buffer.lines.shiftElements(this.buffer.y + this.buffer.ybase, scrollRegionHeight, 1);\n            this.buffer.lines.set(this.buffer.y + this.buffer.ybase, this.buffer.getBlankLine(this.eraseAttrData()));\n            this.updateRange(this.buffer.scrollTop);\n            this.updateRange(this.buffer.scrollBottom);\n        }\n        else {\n            this.buffer.y--;\n        }\n    };\n    Terminal.prototype.reset = function () {\n        this.options.rows = this.rows;\n        this.options.cols = this.cols;\n        var customKeyEventHandler = this._customKeyEventHandler;\n        var inputHandler = this._inputHandler;\n        var cursorState = this.cursorState;\n        var writeBuffer = this.writeBuffer;\n        var writeBufferUtf8 = this.writeBufferUtf8;\n        var writeInProgress = this._writeInProgress;\n        var xoffSentToCatchUp = this._xoffSentToCatchUp;\n        var userScrolling = this._userScrolling;\n        this._setup();\n        this._customKeyEventHandler = customKeyEventHandler;\n        this._inputHandler = inputHandler;\n        this.cursorState = cursorState;\n        this.writeBuffer = writeBuffer;\n        this.writeBufferUtf8 = writeBufferUtf8;\n        this._writeInProgress = writeInProgress;\n        this._xoffSentToCatchUp = xoffSentToCatchUp;\n        this._userScrolling = userScrolling;\n        this.refresh(0, this.rows - 1);\n        if (this.viewport) {\n            this.viewport.syncScrollArea();\n        }\n    };\n    Terminal.prototype.tabSet = function () {\n        this.buffer.tabs[this.buffer.x] = true;\n    };\n    Terminal.prototype.cancel = function (ev, force) {\n        if (!this.options.cancelEvents && !force) {\n            return;\n        }\n        ev.preventDefault();\n        ev.stopPropagation();\n        return false;\n    };\n    Terminal.prototype._visualBell = function () {\n        return false;\n    };\n    Terminal.prototype._soundBell = function () {\n        return this.options.bellStyle === 'sound';\n    };\n    return Terminal;\n}(EventEmitter_1.EventEmitter));\nexports.Terminal = Terminal;\nfunction wasModifierKeyOnlyEvent(ev) {\n    return ev.keyCode === 16 ||\n        ev.keyCode === 17 ||\n        ev.keyCode === 18;\n}\n\n},{\"./AccessibilityManager\":18,\"./Buffer\":19,\"./BufferSet\":20,\"./CharMeasure\":21,\"./Clipboard\":23,\"./CompositionHelper\":24,\"./InputHandler\":26,\"./Linkifier\":27,\"./MouseHelper\":28,\"./MouseZoneManager\":29,\"./SelectionManager\":30,\"./SoundManager\":32,\"./Strings\":33,\"./Viewport\":35,\"./WindowsMode\":36,\"./common/Clone\":39,\"./common/EventEmitter\":40,\"./common/EventEmitter2\":41,\"./common/Platform\":43,\"./common/data/EscapeSequences\":46,\"./core/buffer/BufferLine\":47,\"./core/input/Keyboard\":51,\"./renderer/RenderCoordinator\":61,\"./renderer/Renderer\":62,\"./renderer/atlas/CharAtlasCache\":66,\"./renderer/dom/DomRenderer\":74,\"./ui/ColorManager\":76,\"./ui/Lifecycle\":77}],35:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar Lifecycle_2 = require(\"./ui/Lifecycle\");\nvar FALLBACK_SCROLL_BAR_WIDTH = 15;\nvar Viewport = (function (_super) {\n    __extends(Viewport, _super);\n    function Viewport(_terminal, _viewportElement, _scrollArea, _charMeasure, _dimensions) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._viewportElement = _viewportElement;\n        _this._scrollArea = _scrollArea;\n        _this._charMeasure = _charMeasure;\n        _this._dimensions = _dimensions;\n        _this.scrollBarWidth = 0;\n        _this._currentRowHeight = 0;\n        _this._lastRecordedBufferLength = 0;\n        _this._lastRecordedViewportHeight = 0;\n        _this._lastRecordedBufferHeight = 0;\n        _this._lastScrollTop = 0;\n        _this._wheelPartialScroll = 0;\n        _this._refreshAnimationFrame = null;\n        _this._ignoreNextScrollEvent = false;\n        _this.scrollBarWidth = (_this._viewportElement.offsetWidth - _this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._viewportElement, 'scroll', _this._onScroll.bind(_this)));\n        setTimeout(function () { return _this.syncScrollArea(); }, 0);\n        return _this;\n    }\n    Viewport.prototype.onDimensionsChance = function (dimensions) {\n        this._dimensions = dimensions;\n    };\n    Viewport.prototype.onThemeChange = function (colors) {\n        this._viewportElement.style.backgroundColor = colors.background.css;\n    };\n    Viewport.prototype._refresh = function () {\n        var _this = this;\n        if (this._refreshAnimationFrame === null) {\n            this._refreshAnimationFrame = requestAnimationFrame(function () { return _this._innerRefresh(); });\n        }\n    };\n    Viewport.prototype._innerRefresh = function () {\n        if (this._charMeasure.height > 0) {\n            this._currentRowHeight = this._dimensions.scaledCellHeight / window.devicePixelRatio;\n            this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;\n            var newBufferHeight = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._dimensions.canvasHeight);\n            if (this._lastRecordedBufferHeight !== newBufferHeight) {\n                this._lastRecordedBufferHeight = newBufferHeight;\n                this._scrollArea.style.height = this._lastRecordedBufferHeight + 'px';\n            }\n        }\n        var scrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._viewportElement.scrollTop !== scrollTop) {\n            this._ignoreNextScrollEvent = true;\n            this._viewportElement.scrollTop = scrollTop;\n        }\n        this._refreshAnimationFrame = null;\n    };\n    Viewport.prototype.syncScrollArea = function () {\n        if (this._lastRecordedBufferLength !== this._terminal.buffer.lines.length) {\n            this._lastRecordedBufferLength = this._terminal.buffer.lines.length;\n            this._refresh();\n            return;\n        }\n        if (this._lastRecordedViewportHeight !== this._dimensions.canvasHeight) {\n            this._refresh();\n            return;\n        }\n        var newScrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._lastScrollTop !== newScrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._lastScrollTop !== this._viewportElement.scrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._dimensions.scaledCellHeight / window.devicePixelRatio !== this._currentRowHeight) {\n            this._refresh();\n            return;\n        }\n    };\n    Viewport.prototype._onScroll = function (ev) {\n        this._lastScrollTop = this._viewportElement.scrollTop;\n        if (!this._viewportElement.offsetParent) {\n            return;\n        }\n        if (this._ignoreNextScrollEvent) {\n            this._ignoreNextScrollEvent = false;\n            return;\n        }\n        var newRow = Math.round(this._lastScrollTop / this._currentRowHeight);\n        var diff = newRow - this._terminal.buffer.ydisp;\n        this._terminal.scrollLines(diff, true);\n    };\n    Viewport.prototype.onWheel = function (ev) {\n        var amount = this._getPixelsScrolled(ev);\n        if (amount === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += amount;\n        ev.preventDefault();\n    };\n    Viewport.prototype._getPixelsScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n            amount *= this._currentRowHeight;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._currentRowHeight * this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.getLinesScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n            amount /= this._currentRowHeight + 0.0;\n            this._wheelPartialScroll += amount;\n            amount = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1);\n            this._wheelPartialScroll %= 1;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.onTouchStart = function (ev) {\n        this._lastTouchY = ev.touches[0].pageY;\n    };\n    Viewport.prototype.onTouchMove = function (ev) {\n        var deltaY = this._lastTouchY - ev.touches[0].pageY;\n        this._lastTouchY = ev.touches[0].pageY;\n        if (deltaY === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += deltaY;\n        ev.preventDefault();\n    };\n    return Viewport;\n}(Lifecycle_1.Disposable));\nexports.Viewport = Viewport;\n\n},{\"./common/Lifecycle\":42,\"./ui/Lifecycle\":77}],36:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nfunction applyWindowsMode(terminal) {\n    return terminal.onLineFeed(function () {\n        var line = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y - 1);\n        var lastChar = line.get(terminal.cols - 1);\n        var nextLine = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y);\n        nextLine.isWrapped = (lastChar[BufferLine_1.CHAR_DATA_CODE_INDEX] !== BufferLine_1.NULL_CELL_CODE && lastChar[BufferLine_1.CHAR_DATA_CODE_INDEX] !== BufferLine_1.WHITESPACE_CELL_CODE);\n    });\n}\nexports.applyWindowsMode = applyWindowsMode;\n\n},{\"./core/buffer/BufferLine\":47}],37:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction proposeGeometry(term) {\n    if (!term.element.parentElement) {\n        return null;\n    }\n    var parentElementStyle = window.getComputedStyle(term.element.parentElement);\n    var parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));\n    var parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));\n    var elementStyle = window.getComputedStyle(term.element);\n    var elementPadding = {\n        top: parseInt(elementStyle.getPropertyValue('padding-top')),\n        bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),\n        right: parseInt(elementStyle.getPropertyValue('padding-right')),\n        left: parseInt(elementStyle.getPropertyValue('padding-left'))\n    };\n    var elementPaddingVer = elementPadding.top + elementPadding.bottom;\n    var elementPaddingHor = elementPadding.right + elementPadding.left;\n    var availableHeight = parentElementHeight - elementPaddingVer;\n    var availableWidth = parentElementWidth - elementPaddingHor - term._core.viewport.scrollBarWidth;\n    var geometry = {\n        cols: Math.floor(availableWidth / term._core._renderCoordinator.dimensions.actualCellWidth),\n        rows: Math.floor(availableHeight / term._core._renderCoordinator.dimensions.actualCellHeight)\n    };\n    return geometry;\n}\nexports.proposeGeometry = proposeGeometry;\nfunction fit(term) {\n    var geometry = proposeGeometry(term);\n    if (geometry) {\n        if (term.rows !== geometry.rows || term.cols !== geometry.cols) {\n            term._core._renderCoordinator.clear();\n            term.resize(geometry.cols, geometry.rows);\n        }\n    }\n}\nexports.fit = fit;\nfunction apply(terminalConstructor) {\n    terminalConstructor.prototype.proposeGeometry = function () {\n        return proposeGeometry(this);\n    };\n    terminalConstructor.prototype.fit = function () {\n        fit(this);\n    };\n}\nexports.apply = apply;\n\n},{}],38:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"./EventEmitter2\");\nvar CircularList = (function () {\n    function CircularList(_maxLength) {\n        this._maxLength = _maxLength;\n        this.onDeleteEmitter = new EventEmitter2_1.EventEmitter2();\n        this.onInsertEmitter = new EventEmitter2_1.EventEmitter2();\n        this.onTrimEmitter = new EventEmitter2_1.EventEmitter2();\n        this._array = new Array(this._maxLength);\n        this._startIndex = 0;\n        this._length = 0;\n    }\n    Object.defineProperty(CircularList.prototype, \"onDelete\", {\n        get: function () { return this.onDeleteEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"onInsert\", {\n        get: function () { return this.onInsertEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"onTrim\", {\n        get: function () { return this.onTrimEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"maxLength\", {\n        get: function () {\n            return this._maxLength;\n        },\n        set: function (newMaxLength) {\n            if (this._maxLength === newMaxLength) {\n                return;\n            }\n            var newArray = new Array(newMaxLength);\n            for (var i = 0; i < Math.min(newMaxLength, this.length); i++) {\n                newArray[i] = this._array[this._getCyclicIndex(i)];\n            }\n            this._array = newArray;\n            this._maxLength = newMaxLength;\n            this._startIndex = 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"length\", {\n        get: function () {\n            return this._length;\n        },\n        set: function (newLength) {\n            if (newLength > this._length) {\n                for (var i = this._length; i < newLength; i++) {\n                    this._array[i] = undefined;\n                }\n            }\n            this._length = newLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.get = function (index) {\n        return this._array[this._getCyclicIndex(index)];\n    };\n    CircularList.prototype.set = function (index, value) {\n        this._array[this._getCyclicIndex(index)] = value;\n    };\n    CircularList.prototype.push = function (value) {\n        this._array[this._getCyclicIndex(this._length)] = value;\n        if (this._length === this._maxLength) {\n            this._startIndex = ++this._startIndex % this._maxLength;\n            this.onTrimEmitter.fire(1);\n        }\n        else {\n            this._length++;\n        }\n    };\n    CircularList.prototype.recycle = function () {\n        if (this._length !== this._maxLength) {\n            throw new Error('Can only recycle when the buffer is full');\n        }\n        this._startIndex = ++this._startIndex % this._maxLength;\n        this.onTrimEmitter.fire(1);\n        return this._array[this._getCyclicIndex(this._length - 1)];\n    };\n    Object.defineProperty(CircularList.prototype, \"isFull\", {\n        get: function () {\n            return this._length === this._maxLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.pop = function () {\n        return this._array[this._getCyclicIndex(this._length-- - 1)];\n    };\n    CircularList.prototype.splice = function (start, deleteCount) {\n        var items = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            items[_i - 2] = arguments[_i];\n        }\n        if (deleteCount) {\n            for (var i = start; i < this._length - deleteCount; i++) {\n                this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + deleteCount)];\n            }\n            this._length -= deleteCount;\n        }\n        for (var i = this._length - 1; i >= start; i--) {\n            this._array[this._getCyclicIndex(i + items.length)] = this._array[this._getCyclicIndex(i)];\n        }\n        for (var i = 0; i < items.length; i++) {\n            this._array[this._getCyclicIndex(start + i)] = items[i];\n        }\n        if (this._length + items.length > this._maxLength) {\n            var countToTrim = (this._length + items.length) - this._maxLength;\n            this._startIndex += countToTrim;\n            this._length = this._maxLength;\n            this.onTrimEmitter.fire(countToTrim);\n        }\n        else {\n            this._length += items.length;\n        }\n    };\n    CircularList.prototype.trimStart = function (count) {\n        if (count > this._length) {\n            count = this._length;\n        }\n        this._startIndex += count;\n        this._length -= count;\n        this.onTrimEmitter.fire(count);\n    };\n    CircularList.prototype.shiftElements = function (start, count, offset) {\n        if (count <= 0) {\n            return;\n        }\n        if (start < 0 || start >= this._length) {\n            throw new Error('start argument out of range');\n        }\n        if (start + offset < 0) {\n            throw new Error('Cannot shift elements in list beyond index 0');\n        }\n        if (offset > 0) {\n            for (var i = count - 1; i >= 0; i--) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n            var expandListBy = (start + count + offset) - this._length;\n            if (expandListBy > 0) {\n                this._length += expandListBy;\n                while (this._length > this._maxLength) {\n                    this._length--;\n                    this._startIndex++;\n                    this.onTrimEmitter.fire(1);\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < count; i++) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n        }\n    };\n    CircularList.prototype._getCyclicIndex = function (index) {\n        return (this._startIndex + index) % this._maxLength;\n    };\n    return CircularList;\n}());\nexports.CircularList = CircularList;\n\n},{\"./EventEmitter2\":41}],39:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction clone(val, depth) {\n    if (depth === void 0) { depth = 5; }\n    if (typeof val !== 'object') {\n        return val;\n    }\n    if (val === null) {\n        return null;\n    }\n    var clonedObject = Array.isArray(val) ? [] : {};\n    for (var key in val) {\n        clonedObject[key] = depth <= 1 ? val[key] : clone(val[key], depth - 1);\n    }\n    return clonedObject;\n}\nexports.clone = clone;\n\n},{}],40:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./Lifecycle\");\nvar EventEmitter = (function (_super) {\n    __extends(EventEmitter, _super);\n    function EventEmitter() {\n        var _this = _super.call(this) || this;\n        _this._events = _this._events || {};\n        return _this;\n    }\n    EventEmitter.prototype.on = function (type, listener) {\n        this._events[type] = this._events[type] || [];\n        this._events[type].push(listener);\n    };\n    EventEmitter.prototype.addDisposableListener = function (type, handler) {\n        var _this = this;\n        this.on(type, handler);\n        var disposed = false;\n        return {\n            dispose: function () {\n                if (disposed) {\n                    return;\n                }\n                _this.off(type, handler);\n                disposed = true;\n            }\n        };\n    };\n    EventEmitter.prototype.off = function (type, listener) {\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        var i = obj.length;\n        while (i--) {\n            if (obj[i] === listener) {\n                obj.splice(i, 1);\n                return;\n            }\n        }\n    };\n    EventEmitter.prototype.removeAllListeners = function (type) {\n        if (this._events[type]) {\n            delete this._events[type];\n        }\n    };\n    EventEmitter.prototype.emit = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        for (var i = 0; i < obj.length; i++) {\n            obj[i].apply(this, args);\n        }\n    };\n    EventEmitter.prototype.emitMayRemoveListeners = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        var length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            obj[i].apply(this, args);\n            i -= length - obj.length;\n            length = obj.length;\n        }\n    };\n    EventEmitter.prototype.listeners = function (type) {\n        return this._events[type] || [];\n    };\n    EventEmitter.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._events = {};\n    };\n    return EventEmitter;\n}(Lifecycle_1.Disposable));\nexports.EventEmitter = EventEmitter;\n\n},{\"./Lifecycle\":42}],41:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2 = (function () {\n    function EventEmitter2() {\n        this._listeners = [];\n    }\n    Object.defineProperty(EventEmitter2.prototype, \"event\", {\n        get: function () {\n            var _this = this;\n            if (!this._event) {\n                this._event = function (listener) {\n                    _this._listeners.push(listener);\n                    var disposable = {\n                        dispose: function () {\n                            for (var i = 0; i < _this._listeners.length; i++) {\n                                if (_this._listeners[i] === listener) {\n                                    _this._listeners.splice(i, 1);\n                                    return;\n                                }\n                            }\n                        }\n                    };\n                    return disposable;\n                };\n            }\n            return this._event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EventEmitter2.prototype.fire = function (data) {\n        var queue = [];\n        for (var i = 0; i < this._listeners.length; i++) {\n            queue.push(this._listeners[i]);\n        }\n        for (var i = 0; i < queue.length; i++) {\n            queue[i].call(undefined, data);\n        }\n    };\n    return EventEmitter2;\n}());\nexports.EventEmitter2 = EventEmitter2;\n\n},{}],42:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Disposable = (function () {\n    function Disposable() {\n        this._disposables = [];\n        this._isDisposed = false;\n    }\n    Disposable.prototype.dispose = function () {\n        this._isDisposed = true;\n        this._disposables.forEach(function (d) { return d.dispose(); });\n        this._disposables.length = 0;\n    };\n    Disposable.prototype.register = function (d) {\n        this._disposables.push(d);\n    };\n    Disposable.prototype.unregister = function (d) {\n        var index = this._disposables.indexOf(d);\n        if (index !== -1) {\n            this._disposables.splice(index, 1);\n        }\n    };\n    return Disposable;\n}());\nexports.Disposable = Disposable;\n\n},{}],43:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isNode = (typeof navigator === 'undefined') ? true : false;\nvar userAgent = (isNode) ? 'node' : navigator.userAgent;\nvar platform = (isNode) ? 'node' : navigator.platform;\nexports.isFirefox = !!~userAgent.indexOf('Firefox');\nexports.isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);\nexports.isMSIE = !!~userAgent.indexOf('MSIE') || !!~userAgent.indexOf('Trident');\nexports.isMac = contains(['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'], platform);\nexports.isIpad = platform === 'iPad';\nexports.isIphone = platform === 'iPhone';\nexports.isMSWindows = contains(['Windows', 'Win16', 'Win32', 'WinCE'], platform);\nexports.isLinux = platform.indexOf('Linux') >= 0;\nfunction contains(arr, el) {\n    return arr.indexOf(el) >= 0;\n}\n\n},{}],44:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction fill(array, value, start, end) {\n    if (array.fill) {\n        return array.fill(value, start, end);\n    }\n    return fillFallback(array, value, start, end);\n}\nexports.fill = fill;\nfunction fillFallback(array, value, start, end) {\n    if (start === void 0) { start = 0; }\n    if (end === void 0) { end = array.length; }\n    if (start >= array.length) {\n        return array;\n    }\n    start = (array.length + start) % array.length;\n    if (end >= array.length) {\n        end = array.length;\n    }\n    else {\n        end = (array.length + end) % array.length;\n    }\n    for (var i = start; i < end; ++i) {\n        array[i] = value;\n    }\n    return array;\n}\nexports.fillFallback = fillFallback;\nfunction concat(a, b) {\n    var result = new a.constructor(a.length + b.length);\n    result.set(a);\n    result.set(b, a.length);\n    return result;\n}\nexports.concat = concat;\n\n},{}],45:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_COLOR = 256;\n\n},{}],46:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar C0;\n(function (C0) {\n    C0.NUL = '\\x00';\n    C0.SOH = '\\x01';\n    C0.STX = '\\x02';\n    C0.ETX = '\\x03';\n    C0.EOT = '\\x04';\n    C0.ENQ = '\\x05';\n    C0.ACK = '\\x06';\n    C0.BEL = '\\x07';\n    C0.BS = '\\x08';\n    C0.HT = '\\x09';\n    C0.LF = '\\x0a';\n    C0.VT = '\\x0b';\n    C0.FF = '\\x0c';\n    C0.CR = '\\x0d';\n    C0.SO = '\\x0e';\n    C0.SI = '\\x0f';\n    C0.DLE = '\\x10';\n    C0.DC1 = '\\x11';\n    C0.DC2 = '\\x12';\n    C0.DC3 = '\\x13';\n    C0.DC4 = '\\x14';\n    C0.NAK = '\\x15';\n    C0.SYN = '\\x16';\n    C0.ETB = '\\x17';\n    C0.CAN = '\\x18';\n    C0.EM = '\\x19';\n    C0.SUB = '\\x1a';\n    C0.ESC = '\\x1b';\n    C0.FS = '\\x1c';\n    C0.GS = '\\x1d';\n    C0.RS = '\\x1e';\n    C0.US = '\\x1f';\n    C0.SP = '\\x20';\n    C0.DEL = '\\x7f';\n})(C0 = exports.C0 || (exports.C0 = {}));\nvar C1;\n(function (C1) {\n    C1.PAD = '\\x80';\n    C1.HOP = '\\x81';\n    C1.BPH = '\\x82';\n    C1.NBH = '\\x83';\n    C1.IND = '\\x84';\n    C1.NEL = '\\x85';\n    C1.SSA = '\\x86';\n    C1.ESA = '\\x87';\n    C1.HTS = '\\x88';\n    C1.HTJ = '\\x89';\n    C1.VTS = '\\x8a';\n    C1.PLD = '\\x8b';\n    C1.PLU = '\\x8c';\n    C1.RI = '\\x8d';\n    C1.SS2 = '\\x8e';\n    C1.SS3 = '\\x8f';\n    C1.DCS = '\\x90';\n    C1.PU1 = '\\x91';\n    C1.PU2 = '\\x92';\n    C1.STS = '\\x93';\n    C1.CCH = '\\x94';\n    C1.MW = '\\x95';\n    C1.SPA = '\\x96';\n    C1.EPA = '\\x97';\n    C1.SOS = '\\x98';\n    C1.SGCI = '\\x99';\n    C1.SCI = '\\x9a';\n    C1.CSI = '\\x9b';\n    C1.ST = '\\x9c';\n    C1.OSC = '\\x9d';\n    C1.PM = '\\x9e';\n    C1.APC = '\\x9f';\n})(C1 = exports.C1 || (exports.C1 = {}));\n\n},{}],47:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextDecoder_1 = require(\"../input/TextDecoder\");\nvar Types_1 = require(\"../../common/Types\");\nexports.DEFAULT_ATTR = (0 << 18) | (Types_1.DEFAULT_COLOR << 9) | (256 << 0);\nexports.CHAR_DATA_ATTR_INDEX = 0;\nexports.CHAR_DATA_CHAR_INDEX = 1;\nexports.CHAR_DATA_WIDTH_INDEX = 2;\nexports.CHAR_DATA_CODE_INDEX = 3;\nexports.NULL_CELL_CHAR = '';\nexports.NULL_CELL_WIDTH = 1;\nexports.NULL_CELL_CODE = 0;\nexports.WHITESPACE_CELL_CHAR = ' ';\nexports.WHITESPACE_CELL_WIDTH = 1;\nexports.WHITESPACE_CELL_CODE = 32;\nvar CELL_SIZE = 3;\nvar AttributeData = (function () {\n    function AttributeData() {\n        this.fg = 0;\n        this.bg = 0;\n    }\n    AttributeData.toColorRGB = function (value) {\n        return [\n            value >>> 16 & 255,\n            value >>> 8 & 255,\n            value & 255\n        ];\n    };\n    AttributeData.fromColorRGB = function (value) {\n        return (value[0] & 255) << 16 | (value[1] & 255) << 8 | value[2] & 255;\n    };\n    AttributeData.prototype.clone = function () {\n        var newObj = new AttributeData();\n        newObj.fg = this.fg;\n        newObj.bg = this.bg;\n        return newObj;\n    };\n    AttributeData.prototype.isInverse = function () { return this.fg & 67108864; };\n    AttributeData.prototype.isBold = function () { return this.fg & 134217728; };\n    AttributeData.prototype.isUnderline = function () { return this.fg & 268435456; };\n    AttributeData.prototype.isBlink = function () { return this.fg & 536870912; };\n    AttributeData.prototype.isInvisible = function () { return this.fg & 1073741824; };\n    AttributeData.prototype.isItalic = function () { return this.bg & 67108864; };\n    AttributeData.prototype.isDim = function () { return this.bg & 134217728; };\n    AttributeData.prototype.getFgColorMode = function () { return this.fg & 50331648; };\n    AttributeData.prototype.getBgColorMode = function () { return this.bg & 50331648; };\n    AttributeData.prototype.isFgRGB = function () { return (this.fg & 50331648) === 50331648; };\n    AttributeData.prototype.isBgRGB = function () { return (this.bg & 50331648) === 50331648; };\n    AttributeData.prototype.isFgPalette = function () { return (this.fg & 50331648) === 16777216 || (this.fg & 50331648) === 33554432; };\n    AttributeData.prototype.isBgPalette = function () { return (this.bg & 50331648) === 16777216 || (this.bg & 50331648) === 33554432; };\n    AttributeData.prototype.isFgDefault = function () { return (this.fg & 50331648) === 0; };\n    AttributeData.prototype.isBgDefault = function () { return (this.bg & 50331648) === 0; };\n    AttributeData.prototype.getFgColor = function () {\n        switch (this.fg & 50331648) {\n            case 16777216:\n            case 33554432: return this.fg & 255;\n            case 50331648: return this.fg & 16777215;\n            default: return -1;\n        }\n    };\n    AttributeData.prototype.getBgColor = function () {\n        switch (this.bg & 50331648) {\n            case 16777216:\n            case 33554432: return this.bg & 255;\n            case 50331648: return this.bg & 16777215;\n            default: return -1;\n        }\n    };\n    return AttributeData;\n}());\nexports.AttributeData = AttributeData;\nexports.DEFAULT_ATTR_DATA = Object.freeze(new AttributeData());\nvar CellData = (function (_super) {\n    __extends(CellData, _super);\n    function CellData() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.content = 0;\n        _this.fg = 0;\n        _this.bg = 0;\n        _this.combinedData = '';\n        return _this;\n    }\n    CellData.fromCharData = function (value) {\n        var obj = new CellData();\n        obj.setFromCharData(value);\n        return obj;\n    };\n    CellData.prototype.isCombined = function () {\n        return this.content & 2097152;\n    };\n    CellData.prototype.getWidth = function () {\n        return this.content >> 22;\n    };\n    CellData.prototype.getChars = function () {\n        if (this.content & 2097152) {\n            return this.combinedData;\n        }\n        if (this.content & 2097151) {\n            return TextDecoder_1.stringFromCodePoint(this.content & 2097151);\n        }\n        return '';\n    };\n    CellData.prototype.getCode = function () {\n        return (this.isCombined())\n            ? this.combinedData.charCodeAt(this.combinedData.length - 1)\n            : this.content & 2097151;\n    };\n    CellData.prototype.setFromCharData = function (value) {\n        this.fg = value[exports.CHAR_DATA_ATTR_INDEX];\n        this.bg = 0;\n        var combined = false;\n        if (value[exports.CHAR_DATA_CHAR_INDEX].length > 2) {\n            combined = true;\n        }\n        else if (value[exports.CHAR_DATA_CHAR_INDEX].length === 2) {\n            var code = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0);\n            if (0xD800 <= code && code <= 0xDBFF) {\n                var second = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(1);\n                if (0xDC00 <= second && second <= 0xDFFF) {\n                    this.content = ((code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n                }\n                else {\n                    combined = true;\n                }\n            }\n            else {\n                combined = true;\n            }\n        }\n        else {\n            this.content = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n        if (combined) {\n            this.combinedData = value[exports.CHAR_DATA_CHAR_INDEX];\n            this.content = 2097152 | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n    };\n    CellData.prototype.getAsCharData = function () {\n        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n    };\n    return CellData;\n}(AttributeData));\nexports.CellData = CellData;\nvar BufferLine = (function () {\n    function BufferLine(cols, fillCellData, isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        this.isWrapped = isWrapped;\n        this._combined = {};\n        this._data = new Uint32Array(cols * CELL_SIZE);\n        var cell = fillCellData || CellData.fromCharData([0, exports.NULL_CELL_CHAR, exports.NULL_CELL_WIDTH, exports.NULL_CELL_CODE]);\n        for (var i = 0; i < cols; ++i) {\n            this.setCell(i, cell);\n        }\n        this.length = cols;\n    }\n    BufferLine.prototype.get = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        var cp = content & 2097151;\n        return [\n            this._data[index * CELL_SIZE + 1],\n            (content & 2097152)\n                ? this._combined[index]\n                : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : '',\n            content >> 22,\n            (content & 2097152)\n                ? this._combined[index].charCodeAt(this._combined[index].length - 1)\n                : cp\n        ];\n    };\n    BufferLine.prototype.set = function (index, value) {\n        this._data[index * CELL_SIZE + 1] = value[exports.CHAR_DATA_ATTR_INDEX];\n        if (value[exports.CHAR_DATA_CHAR_INDEX].length > 1) {\n            this._combined[index] = value[1];\n            this._data[index * CELL_SIZE + 0] = index | 2097152 | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n        else {\n            this._data[index * CELL_SIZE + 0] = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n    };\n    BufferLine.prototype.getWidth = function (index) {\n        return this._data[index * CELL_SIZE + 0] >> 22;\n    };\n    BufferLine.prototype.hasWidth = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 12582912;\n    };\n    BufferLine.prototype.getFg = function (index) {\n        return this._data[index * CELL_SIZE + 1];\n    };\n    BufferLine.prototype.getBg = function (index) {\n        return this._data[index * CELL_SIZE + 2];\n    };\n    BufferLine.prototype.hasContent = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 4194303;\n    };\n    BufferLine.prototype.getCodePoint = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            return this._combined[index].charCodeAt(this._combined[index].length - 1);\n        }\n        return content & 2097151;\n    };\n    BufferLine.prototype.isCombined = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 2097152;\n    };\n    BufferLine.prototype.getString = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            return this._combined[index];\n        }\n        if (content & 2097151) {\n            return TextDecoder_1.stringFromCodePoint(content & 2097151);\n        }\n        return '';\n    };\n    BufferLine.prototype.loadCell = function (index, cell) {\n        var startIndex = index * CELL_SIZE;\n        cell.content = this._data[startIndex + 0];\n        cell.fg = this._data[startIndex + 1];\n        cell.bg = this._data[startIndex + 2];\n        if (cell.content & 2097152) {\n            cell.combinedData = this._combined[index];\n        }\n        return cell;\n    };\n    BufferLine.prototype.setCell = function (index, cell) {\n        if (cell.content & 2097152) {\n            this._combined[index] = cell.combinedData;\n        }\n        this._data[index * CELL_SIZE + 0] = cell.content;\n        this._data[index * CELL_SIZE + 1] = cell.fg;\n        this._data[index * CELL_SIZE + 2] = cell.bg;\n    };\n    BufferLine.prototype.setCellFromCodePoint = function (index, codePoint, width, fg, bg) {\n        this._data[index * CELL_SIZE + 0] = codePoint | (width << 22);\n        this._data[index * CELL_SIZE + 1] = fg;\n        this._data[index * CELL_SIZE + 2] = bg;\n    };\n    BufferLine.prototype.addCodepointToCell = function (index, codePoint) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            this._combined[index] += TextDecoder_1.stringFromCodePoint(codePoint);\n        }\n        else {\n            if (content & 2097151) {\n                this._combined[index] = TextDecoder_1.stringFromCodePoint(content & 2097151) + TextDecoder_1.stringFromCodePoint(codePoint);\n                content &= ~2097151;\n                content |= 2097152;\n            }\n            else {\n                content = codePoint | (1 << 22);\n            }\n            this._data[index * CELL_SIZE + 0] = content;\n        }\n    };\n    BufferLine.prototype.insertCells = function (pos, n, fillCellData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            var cell = new CellData();\n            for (var i = this.length - pos - n - 1; i >= 0; --i) {\n                this.setCell(pos + n + i, this.loadCell(pos + i, cell));\n            }\n            for (var i = 0; i < n; ++i) {\n                this.setCell(pos + i, fillCellData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n    };\n    BufferLine.prototype.deleteCells = function (pos, n, fillCellData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            var cell = new CellData();\n            for (var i = 0; i < this.length - pos - n; ++i) {\n                this.setCell(pos + i, this.loadCell(pos + n + i, cell));\n            }\n            for (var i = this.length - n; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n    };\n    BufferLine.prototype.replaceCells = function (start, end, fillCellData) {\n        while (start < end && start < this.length) {\n            this.setCell(start++, fillCellData);\n        }\n    };\n    BufferLine.prototype.resize = function (cols, fillCellData) {\n        if (cols === this.length) {\n            return;\n        }\n        if (cols > this.length) {\n            var data = new Uint32Array(cols * CELL_SIZE);\n            if (this.length) {\n                if (cols * CELL_SIZE < this._data.length) {\n                    data.set(this._data.subarray(0, cols * CELL_SIZE));\n                }\n                else {\n                    data.set(this._data);\n                }\n            }\n            this._data = data;\n            for (var i = this.length; i < cols; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n        else {\n            if (cols) {\n                var data = new Uint32Array(cols * CELL_SIZE);\n                data.set(this._data.subarray(0, cols * CELL_SIZE));\n                this._data = data;\n                var keys = Object.keys(this._combined);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = parseInt(keys[i], 10);\n                    if (key >= cols) {\n                        delete this._combined[key];\n                    }\n                }\n            }\n            else {\n                this._data = new Uint32Array(0);\n                this._combined = {};\n            }\n        }\n        this.length = cols;\n    };\n    BufferLine.prototype.fill = function (fillCellData) {\n        this._combined = {};\n        for (var i = 0; i < this.length; ++i) {\n            this.setCell(i, fillCellData);\n        }\n    };\n    BufferLine.prototype.copyFrom = function (line) {\n        if (this.length !== line.length) {\n            this._data = new Uint32Array(line._data);\n        }\n        else {\n            this._data.set(line._data);\n        }\n        this.length = line.length;\n        this._combined = {};\n        for (var el in line._combined) {\n            this._combined[el] = line._combined[el];\n        }\n        this.isWrapped = line.isWrapped;\n    };\n    BufferLine.prototype.clone = function () {\n        var newLine = new BufferLine(0);\n        newLine._data = new Uint32Array(this._data);\n        newLine.length = this.length;\n        for (var el in this._combined) {\n            newLine._combined[el] = this._combined[el];\n        }\n        newLine.isWrapped = this.isWrapped;\n        return newLine;\n    };\n    BufferLine.prototype.getTrimmedLength = function () {\n        for (var i = this.length - 1; i >= 0; --i) {\n            if ((this._data[i * CELL_SIZE + 0] & 4194303)) {\n                return i + (this._data[i * CELL_SIZE + 0] >> 22);\n            }\n        }\n        return 0;\n    };\n    BufferLine.prototype.copyCellsFrom = function (src, srcCol, destCol, length, applyInReverse) {\n        var srcData = src._data;\n        if (applyInReverse) {\n            for (var cell = length - 1; cell >= 0; cell--) {\n                for (var i = 0; i < CELL_SIZE; i++) {\n                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n                }\n            }\n        }\n        else {\n            for (var cell = 0; cell < length; cell++) {\n                for (var i = 0; i < CELL_SIZE; i++) {\n                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n                }\n            }\n        }\n        var srcCombinedKeys = Object.keys(src._combined);\n        for (var i = 0; i < srcCombinedKeys.length; i++) {\n            var key = parseInt(srcCombinedKeys[i], 10);\n            if (key >= srcCol) {\n                this._combined[key - srcCol + destCol] = src._combined[key];\n            }\n        }\n    };\n    BufferLine.prototype.translateToString = function (trimRight, startCol, endCol) {\n        if (trimRight === void 0) { trimRight = false; }\n        if (startCol === void 0) { startCol = 0; }\n        if (endCol === void 0) { endCol = this.length; }\n        if (trimRight) {\n            endCol = Math.min(endCol, this.getTrimmedLength());\n        }\n        var result = '';\n        while (startCol < endCol) {\n            var content = this._data[startCol * CELL_SIZE + 0];\n            var cp = content & 2097151;\n            result += (content & 2097152) ? this._combined[startCol] : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : exports.WHITESPACE_CELL_CHAR;\n            startCol += (content >> 22) || 1;\n        }\n        return result;\n    };\n    return BufferLine;\n}());\nexports.BufferLine = BufferLine;\n\n},{\"../../common/Types\":45,\"../input/TextDecoder\":52}],48:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction reflowLargerGetLinesToRemove(lines, oldCols, newCols, bufferAbsoluteY, nullCell) {\n    var toRemove = [];\n    for (var y = 0; y < lines.length - 1; y++) {\n        var i = y;\n        var nextLine = lines.get(++i);\n        if (!nextLine.isWrapped) {\n            continue;\n        }\n        var wrappedLines = [lines.get(y)];\n        while (i < lines.length && nextLine.isWrapped) {\n            wrappedLines.push(nextLine);\n            nextLine = lines.get(++i);\n        }\n        if (bufferAbsoluteY >= y && bufferAbsoluteY < i) {\n            y += wrappedLines.length - 1;\n            continue;\n        }\n        var destLineIndex = 0;\n        var destCol = getWrappedLineTrimmedLength(wrappedLines, destLineIndex, oldCols);\n        var srcLineIndex = 1;\n        var srcCol = 0;\n        while (srcLineIndex < wrappedLines.length) {\n            var srcTrimmedTineLength = getWrappedLineTrimmedLength(wrappedLines, srcLineIndex, oldCols);\n            var srcRemainingCells = srcTrimmedTineLength - srcCol;\n            var destRemainingCells = newCols - destCol;\n            var cellsToCopy = Math.min(srcRemainingCells, destRemainingCells);\n            wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol, destCol, cellsToCopy, false);\n            destCol += cellsToCopy;\n            if (destCol === newCols) {\n                destLineIndex++;\n                destCol = 0;\n            }\n            srcCol += cellsToCopy;\n            if (srcCol === srcTrimmedTineLength) {\n                srcLineIndex++;\n                srcCol = 0;\n            }\n            if (destCol === 0 && destLineIndex !== 0) {\n                if (wrappedLines[destLineIndex - 1].getWidth(newCols - 1) === 2) {\n                    wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[destLineIndex - 1], newCols - 1, destCol++, 1, false);\n                    wrappedLines[destLineIndex - 1].setCell(newCols - 1, nullCell);\n                }\n            }\n        }\n        wrappedLines[destLineIndex].replaceCells(destCol, newCols, nullCell);\n        var countToRemove = 0;\n        for (var i_1 = wrappedLines.length - 1; i_1 > 0; i_1--) {\n            if (i_1 > destLineIndex || wrappedLines[i_1].getTrimmedLength() === 0) {\n                countToRemove++;\n            }\n            else {\n                break;\n            }\n        }\n        if (countToRemove > 0) {\n            toRemove.push(y + wrappedLines.length - countToRemove);\n            toRemove.push(countToRemove);\n        }\n        y += wrappedLines.length - 1;\n    }\n    return toRemove;\n}\nexports.reflowLargerGetLinesToRemove = reflowLargerGetLinesToRemove;\nfunction reflowLargerCreateNewLayout(lines, toRemove) {\n    var layout = [];\n    var nextToRemoveIndex = 0;\n    var nextToRemoveStart = toRemove[nextToRemoveIndex];\n    var countRemovedSoFar = 0;\n    for (var i = 0; i < lines.length; i++) {\n        if (nextToRemoveStart === i) {\n            var countToRemove = toRemove[++nextToRemoveIndex];\n            lines.onDeleteEmitter.fire({\n                index: i - countRemovedSoFar,\n                amount: countToRemove\n            });\n            i += countToRemove - 1;\n            countRemovedSoFar += countToRemove;\n            nextToRemoveStart = toRemove[++nextToRemoveIndex];\n        }\n        else {\n            layout.push(i);\n        }\n    }\n    return {\n        layout: layout,\n        countRemoved: countRemovedSoFar\n    };\n}\nexports.reflowLargerCreateNewLayout = reflowLargerCreateNewLayout;\nfunction reflowLargerApplyNewLayout(lines, newLayout) {\n    var newLayoutLines = [];\n    for (var i = 0; i < newLayout.length; i++) {\n        newLayoutLines.push(lines.get(newLayout[i]));\n    }\n    for (var i = 0; i < newLayoutLines.length; i++) {\n        lines.set(i, newLayoutLines[i]);\n    }\n    lines.length = newLayout.length;\n}\nexports.reflowLargerApplyNewLayout = reflowLargerApplyNewLayout;\nfunction reflowSmallerGetNewLineLengths(wrappedLines, oldCols, newCols) {\n    var newLineLengths = [];\n    var cellsNeeded = wrappedLines.map(function (l, i) { return getWrappedLineTrimmedLength(wrappedLines, i, oldCols); }).reduce(function (p, c) { return p + c; });\n    var srcCol = 0;\n    var srcLine = 0;\n    var cellsAvailable = 0;\n    while (cellsAvailable < cellsNeeded) {\n        if (cellsNeeded - cellsAvailable < newCols) {\n            newLineLengths.push(cellsNeeded - cellsAvailable);\n            break;\n        }\n        srcCol += newCols;\n        var oldTrimmedLength = getWrappedLineTrimmedLength(wrappedLines, srcLine, oldCols);\n        if (srcCol > oldTrimmedLength) {\n            srcCol -= oldTrimmedLength;\n            srcLine++;\n        }\n        var endsWithWide = wrappedLines[srcLine].getWidth(srcCol - 1) === 2;\n        if (endsWithWide) {\n            srcCol--;\n        }\n        var lineLength = endsWithWide ? newCols - 1 : newCols;\n        newLineLengths.push(lineLength);\n        cellsAvailable += lineLength;\n    }\n    return newLineLengths;\n}\nexports.reflowSmallerGetNewLineLengths = reflowSmallerGetNewLineLengths;\nfunction getWrappedLineTrimmedLength(lines, i, cols) {\n    if (i === lines.length - 1) {\n        return lines[i].getTrimmedLength();\n    }\n    var endsInNull = !(lines[i].hasContent(cols - 1)) && lines[i].getWidth(cols - 1) === 1;\n    var followingLineStartsWithWide = lines[i + 1].getWidth(0) === 2;\n    if (endsInNull && followingLineStartsWithWide) {\n        return cols - 1;\n    }\n    return cols;\n}\nexports.getWrappedLineTrimmedLength = getWrappedLineTrimmedLength;\n\n},{}],49:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"../../common/EventEmitter2\");\nvar Lifecycle_1 = require(\"../../common/Lifecycle\");\nvar Marker = (function (_super) {\n    __extends(Marker, _super);\n    function Marker(line) {\n        var _this = _super.call(this) || this;\n        _this.line = line;\n        _this._id = Marker._nextId++;\n        _this.isDisposed = false;\n        _this._onDispose = new EventEmitter2_1.EventEmitter2();\n        return _this;\n    }\n    Object.defineProperty(Marker.prototype, \"id\", {\n        get: function () { return this._id; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Marker.prototype, \"onDispose\", {\n        get: function () { return this._onDispose.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Marker.prototype.dispose = function () {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this._onDispose.fire();\n    };\n    Marker._nextId = 1;\n    return Marker;\n}(Lifecycle_1.Disposable));\nexports.Marker = Marker;\n\n},{\"../../common/EventEmitter2\":41,\"../../common/Lifecycle\":42}],50:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CHARSETS = {};\nexports.DEFAULT_CHARSET = exports.CHARSETS['B'];\nexports.CHARSETS['0'] = {\n    '`': '\\u25c6',\n    'a': '\\u2592',\n    'b': '\\u0009',\n    'c': '\\u000c',\n    'd': '\\u000d',\n    'e': '\\u000a',\n    'f': '\\u00b0',\n    'g': '\\u00b1',\n    'h': '\\u2424',\n    'i': '\\u000b',\n    'j': '\\u2518',\n    'k': '\\u2510',\n    'l': '\\u250c',\n    'm': '\\u2514',\n    'n': '\\u253c',\n    'o': '\\u23ba',\n    'p': '\\u23bb',\n    'q': '\\u2500',\n    'r': '\\u23bc',\n    's': '\\u23bd',\n    't': '\\u251c',\n    'u': '\\u2524',\n    'v': '\\u2534',\n    'w': '\\u252c',\n    'x': '\\u2502',\n    'y': '\\u2264',\n    'z': '\\u2265',\n    '{': '\\u03c0',\n    '|': '\\u2260',\n    '}': '\\u00a3',\n    '~': '\\u00b7'\n};\nexports.CHARSETS['A'] = {\n    '#': '£'\n};\nexports.CHARSETS['B'] = null;\nexports.CHARSETS['4'] = {\n    '#': '£',\n    '@': '¾',\n    '[': 'ij',\n    '\\\\': '½',\n    ']': '|',\n    '{': '¨',\n    '|': 'f',\n    '}': '¼',\n    '~': '´'\n};\nexports.CHARSETS['C'] =\n    exports.CHARSETS['5'] = {\n        '[': 'Ä',\n        '\\\\': 'Ö',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'é',\n        '{': 'ä',\n        '|': 'ö',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['R'] = {\n    '#': '£',\n    '@': 'à',\n    '[': '°',\n    '\\\\': 'ç',\n    ']': '§',\n    '{': 'é',\n    '|': 'ù',\n    '}': 'è',\n    '~': '¨'\n};\nexports.CHARSETS['Q'] = {\n    '@': 'à',\n    '[': 'â',\n    '\\\\': 'ç',\n    ']': 'ê',\n    '^': 'î',\n    '`': 'ô',\n    '{': 'é',\n    '|': 'ù',\n    '}': 'è',\n    '~': 'û'\n};\nexports.CHARSETS['K'] = {\n    '@': '§',\n    '[': 'Ä',\n    '\\\\': 'Ö',\n    ']': 'Ü',\n    '{': 'ä',\n    '|': 'ö',\n    '}': 'ü',\n    '~': 'ß'\n};\nexports.CHARSETS['Y'] = {\n    '#': '£',\n    '@': '§',\n    '[': '°',\n    '\\\\': 'ç',\n    ']': 'é',\n    '`': 'ù',\n    '{': 'à',\n    '|': 'ò',\n    '}': 'è',\n    '~': 'ì'\n};\nexports.CHARSETS['E'] =\n    exports.CHARSETS['6'] = {\n        '@': 'Ä',\n        '[': 'Æ',\n        '\\\\': 'Ø',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'ä',\n        '{': 'æ',\n        '|': 'ø',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['Z'] = {\n    '#': '£',\n    '@': '§',\n    '[': '¡',\n    '\\\\': 'Ñ',\n    ']': '¿',\n    '{': '°',\n    '|': 'ñ',\n    '}': 'ç'\n};\nexports.CHARSETS['H'] =\n    exports.CHARSETS['7'] = {\n        '@': 'É',\n        '[': 'Ä',\n        '\\\\': 'Ö',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'é',\n        '{': 'ä',\n        '|': 'ö',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['='] = {\n    '#': 'ù',\n    '@': 'à',\n    '[': 'é',\n    '\\\\': 'ç',\n    ']': 'ê',\n    '^': 'î',\n    '_': 'è',\n    '`': 'ô',\n    '{': 'ä',\n    '|': 'ö',\n    '}': 'ü',\n    '~': 'û'\n};\n\n},{}],51:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"../../common/data/EscapeSequences\");\nvar KEYCODE_KEY_MAPPINGS = {\n    48: ['0', ')'],\n    49: ['1', '!'],\n    50: ['2', '@'],\n    51: ['3', '#'],\n    52: ['4', '$'],\n    53: ['5', '%'],\n    54: ['6', '^'],\n    55: ['7', '&'],\n    56: ['8', '*'],\n    57: ['9', '('],\n    186: [';', ':'],\n    187: ['=', '+'],\n    188: [',', '<'],\n    189: ['-', '_'],\n    190: ['.', '>'],\n    191: ['/', '?'],\n    192: ['`', '~'],\n    219: ['[', '{'],\n    220: ['\\\\', '|'],\n    221: [']', '}'],\n    222: ['\\'', '\"']\n};\nfunction evaluateKeyboardEvent(ev, applicationCursorMode, isMac, macOptionIsMeta) {\n    var result = {\n        type: 0,\n        cancel: false,\n        key: undefined\n    };\n    var modifiers = (ev.shiftKey ? 1 : 0) | (ev.altKey ? 2 : 0) | (ev.ctrlKey ? 4 : 0) | (ev.metaKey ? 8 : 0);\n    switch (ev.keyCode) {\n        case 0:\n            if (ev.key === 'UIKeyInputUpArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OA';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[A';\n                }\n            }\n            else if (ev.key === 'UIKeyInputLeftArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OD';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[D';\n                }\n            }\n            else if (ev.key === 'UIKeyInputRightArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OC';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[C';\n                }\n            }\n            else if (ev.key === 'UIKeyInputDownArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OB';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[B';\n                }\n            }\n            break;\n        case 8:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.BS;\n                break;\n            }\n            else if (ev.altKey) {\n                result.key = EscapeSequences_1.C0.ESC + EscapeSequences_1.C0.DEL;\n                break;\n            }\n            result.key = EscapeSequences_1.C0.DEL;\n            break;\n        case 9:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[Z';\n                break;\n            }\n            result.key = EscapeSequences_1.C0.HT;\n            result.cancel = true;\n            break;\n        case 13:\n            result.key = EscapeSequences_1.C0.CR;\n            result.cancel = true;\n            break;\n        case 27:\n            result.key = EscapeSequences_1.C0.ESC;\n            result.cancel = true;\n            break;\n        case 37:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'D';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3D') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'b' : EscapeSequences_1.C0.ESC + '[1;5D';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OD';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[D';\n            }\n            break;\n        case 39:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'C';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3C') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'f' : EscapeSequences_1.C0.ESC + '[1;5C';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OC';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[C';\n            }\n            break;\n        case 38:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'A';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3A') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5A';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OA';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[A';\n            }\n            break;\n        case 40:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'B';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3B') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5B';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OB';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[B';\n            }\n            break;\n        case 45:\n            if (!ev.shiftKey && !ev.ctrlKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[2~';\n            }\n            break;\n        case 46:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[3;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[3~';\n            }\n            break;\n        case 36:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'H';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OH';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[H';\n            }\n            break;\n        case 35:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'F';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OF';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[F';\n            }\n            break;\n        case 33:\n            if (ev.shiftKey) {\n                result.type = 2;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[5~';\n            }\n            break;\n        case 34:\n            if (ev.shiftKey) {\n                result.type = 3;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[6~';\n            }\n            break;\n        case 112:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'P';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OP';\n            }\n            break;\n        case 113:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'Q';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OQ';\n            }\n            break;\n        case 114:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'R';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OR';\n            }\n            break;\n        case 115:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'S';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OS';\n            }\n            break;\n        case 116:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[15;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[15~';\n            }\n            break;\n        case 117:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[17;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[17~';\n            }\n            break;\n        case 118:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[18;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[18~';\n            }\n            break;\n        case 119:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[19;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[19~';\n            }\n            break;\n        case 120:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[20;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[20~';\n            }\n            break;\n        case 121:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[21;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[21~';\n            }\n            break;\n        case 122:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[23;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[23~';\n            }\n            break;\n        case 123:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[24;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[24~';\n            }\n            break;\n        default:\n            if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey) {\n                if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    result.key = String.fromCharCode(ev.keyCode - 64);\n                }\n                else if (ev.keyCode === 32) {\n                    result.key = String.fromCharCode(0);\n                }\n                else if (ev.keyCode >= 51 && ev.keyCode <= 55) {\n                    result.key = String.fromCharCode(ev.keyCode - 51 + 27);\n                }\n                else if (ev.keyCode === 56) {\n                    result.key = String.fromCharCode(127);\n                }\n                else if (ev.keyCode === 219) {\n                    result.key = String.fromCharCode(27);\n                }\n                else if (ev.keyCode === 220) {\n                    result.key = String.fromCharCode(28);\n                }\n                else if (ev.keyCode === 221) {\n                    result.key = String.fromCharCode(29);\n                }\n            }\n            else if ((!isMac || macOptionIsMeta) && ev.altKey && !ev.metaKey) {\n                var keyMapping = KEYCODE_KEY_MAPPINGS[ev.keyCode];\n                var key = keyMapping && keyMapping[!ev.shiftKey ? 0 : 1];\n                if (key) {\n                    result.key = EscapeSequences_1.C0.ESC + key;\n                }\n                else if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    var keyCode = ev.ctrlKey ? ev.keyCode - 64 : ev.keyCode + 32;\n                    result.key = EscapeSequences_1.C0.ESC + String.fromCharCode(keyCode);\n                }\n            }\n            else if (isMac && !ev.altKey && !ev.ctrlKey && ev.metaKey) {\n                if (ev.keyCode === 65) {\n                    result.type = 1;\n                }\n            }\n            else if (ev.key && !ev.ctrlKey && !ev.altKey && !ev.metaKey && ev.keyCode >= 48 && ev.key.length === 1) {\n                result.key = ev.key;\n            }\n            else if (ev.key && ev.ctrlKey) {\n                if (ev.key === '_') {\n                    result.key = EscapeSequences_1.C0.US;\n                }\n            }\n            break;\n    }\n    return result;\n}\nexports.evaluateKeyboardEvent = evaluateKeyboardEvent;\n\n},{\"../../common/data/EscapeSequences\":46}],52:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction stringFromCodePoint(codePoint) {\n    if (codePoint > 0xFFFF) {\n        codePoint -= 0x10000;\n        return String.fromCharCode((codePoint >> 10) + 0xD800) + String.fromCharCode((codePoint % 0x400) + 0xDC00);\n    }\n    return String.fromCharCode(codePoint);\n}\nexports.stringFromCodePoint = stringFromCodePoint;\nfunction utf32ToString(data, start, end) {\n    if (start === void 0) { start = 0; }\n    if (end === void 0) { end = data.length; }\n    var result = '';\n    for (var i = start; i < end; ++i) {\n        var codepoint = data[i];\n        if (codepoint > 0xFFFF) {\n            codepoint -= 0x10000;\n            result += String.fromCharCode((codepoint >> 10) + 0xD800) + String.fromCharCode((codepoint % 0x400) + 0xDC00);\n        }\n        else {\n            result += String.fromCharCode(codepoint);\n        }\n    }\n    return result;\n}\nexports.utf32ToString = utf32ToString;\nvar StringToUtf32 = (function () {\n    function StringToUtf32() {\n        this._interim = 0;\n    }\n    StringToUtf32.prototype.clear = function () {\n        this._interim = 0;\n    };\n    StringToUtf32.prototype.decode = function (input, target) {\n        var length = input.length;\n        if (!length) {\n            return 0;\n        }\n        var size = 0;\n        var startPos = 0;\n        if (this._interim) {\n            var second = input.charCodeAt(startPos++);\n            if (0xDC00 <= second && second <= 0xDFFF) {\n                target[size++] = (this._interim - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n            }\n            else {\n                target[size++] = this._interim;\n                target[size++] = second;\n            }\n            this._interim = 0;\n        }\n        for (var i = startPos; i < length; ++i) {\n            var code = input.charCodeAt(i);\n            if (0xD800 <= code && code <= 0xDBFF) {\n                if (++i >= length) {\n                    this._interim = code;\n                    return size;\n                }\n                var second = input.charCodeAt(i);\n                if (0xDC00 <= second && second <= 0xDFFF) {\n                    target[size++] = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n                }\n                else {\n                    target[size++] = code;\n                    target[size++] = second;\n                }\n                continue;\n            }\n            target[size++] = code;\n        }\n        return size;\n    };\n    return StringToUtf32;\n}());\nexports.StringToUtf32 = StringToUtf32;\nvar Utf8ToUtf32 = (function () {\n    function Utf8ToUtf32() {\n        this.interim = new Uint8Array(3);\n    }\n    Utf8ToUtf32.prototype.clear = function () {\n        this.interim.fill(0);\n    };\n    Utf8ToUtf32.prototype.decode = function (input, target) {\n        var length = input.length;\n        if (!length) {\n            return 0;\n        }\n        var size = 0;\n        var byte1;\n        var byte2;\n        var byte3;\n        var byte4;\n        var codepoint = 0;\n        var startPos = 0;\n        if (this.interim[0]) {\n            var discardInterim = false;\n            var cp = this.interim[0];\n            cp &= ((((cp & 0xE0) === 0xC0)) ? 0x1F : (((cp & 0xF0) === 0xE0)) ? 0x0F : 0x07);\n            var pos = 0;\n            var tmp = void 0;\n            while ((tmp = this.interim[++pos] & 0x3F) && pos < 4) {\n                cp <<= 6;\n                cp |= tmp;\n            }\n            var type = (((this.interim[0] & 0xE0) === 0xC0)) ? 2 : (((this.interim[0] & 0xF0) === 0xE0)) ? 3 : 4;\n            var missing = type - pos;\n            while (startPos < missing) {\n                if (startPos >= length) {\n                    return 0;\n                }\n                tmp = input[startPos++];\n                if ((tmp & 0xC0) !== 0x80) {\n                    startPos--;\n                    discardInterim = true;\n                    break;\n                }\n                else {\n                    this.interim[pos++] = tmp;\n                    cp <<= 6;\n                    cp |= tmp & 0x3F;\n                }\n            }\n            if (!discardInterim) {\n                if (type === 2) {\n                    if (cp < 0x80) {\n                        startPos--;\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n                else if (type === 3) {\n                    if (cp < 0x0800 || (cp >= 0xD800 && cp <= 0xDFFF)) {\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n                else {\n                    if (codepoint < 0x010000 || codepoint > 0x10FFFF) {\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n            }\n            this.interim.fill(0);\n        }\n        var fourStop = length - 4;\n        var i = startPos;\n        while (i < length) {\n            while (i < fourStop\n                && !((byte1 = input[i]) & 0x80)\n                && !((byte2 = input[i + 1]) & 0x80)\n                && !((byte3 = input[i + 2]) & 0x80)\n                && !((byte4 = input[i + 3]) & 0x80)) {\n                target[size++] = byte1;\n                target[size++] = byte2;\n                target[size++] = byte3;\n                target[size++] = byte4;\n                i += 4;\n            }\n            byte1 = input[i++];\n            if (byte1 < 0x80) {\n                target[size++] = byte1;\n            }\n            else if ((byte1 & 0xE0) === 0xC0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x1F) << 6 | (byte2 & 0x3F);\n                if (codepoint < 0x80) {\n                    i--;\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else if ((byte1 & 0xF0) === 0xE0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    return size;\n                }\n                byte3 = input[i++];\n                if ((byte3 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x0F) << 12 | (byte2 & 0x3F) << 6 | (byte3 & 0x3F);\n                if (codepoint < 0x0800 || (codepoint >= 0xD800 && codepoint <= 0xDFFF)) {\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else if ((byte1 & 0xF8) === 0xF0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    return size;\n                }\n                byte3 = input[i++];\n                if ((byte3 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    this.interim[2] = byte3;\n                    return size;\n                }\n                byte4 = input[i++];\n                if ((byte4 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x07) << 18 | (byte2 & 0x3F) << 12 | (byte3 & 0x3F) << 6 | (byte4 & 0x3F);\n                if (codepoint < 0x010000 || codepoint > 0x10FFFF) {\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else {\n            }\n        }\n        return size;\n    };\n    return Utf8ToUtf32;\n}());\nexports.Utf8ToUtf32 = Utf8ToUtf32;\n\n},{}],53:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"../common/data/EscapeSequences\");\nvar AltClickHandler = (function () {\n    function AltClickHandler(_mouseEvent, _terminal) {\n        var _a;\n        this._mouseEvent = _mouseEvent;\n        this._terminal = _terminal;\n        this._lines = this._terminal.buffer.lines;\n        this._startCol = this._terminal.buffer.x;\n        this._startRow = this._terminal.buffer.y;\n        var coordinates = this._terminal.mouseHelper.getCoords(this._mouseEvent, this._terminal.element, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows, false);\n        if (coordinates) {\n            _a = coordinates.map(function (coordinate) {\n                return coordinate - 1;\n            }), this._endCol = _a[0], this._endRow = _a[1];\n        }\n    }\n    AltClickHandler.prototype.move = function () {\n        if (this._mouseEvent.altKey && this._endCol !== undefined && this._endRow !== undefined) {\n            this._terminal.handler(this._arrowSequences());\n        }\n    };\n    AltClickHandler.prototype._arrowSequences = function () {\n        if (!this._terminal.buffer.hasScrollback) {\n            return this._resetStartingRow() + this._moveToRequestedRow() + this._moveToRequestedCol();\n        }\n        return this._moveHorizontallyOnly();\n    };\n    AltClickHandler.prototype._resetStartingRow = function () {\n        if (this._moveToRequestedRow().length === 0) {\n            return '';\n        }\n        return repeat(this._bufferLine(this._startCol, this._startRow, this._startCol, this._startRow - this._wrappedRowsForRow(this._startRow), false).length, this._sequence(\"D\"));\n    };\n    AltClickHandler.prototype._moveToRequestedRow = function () {\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        var rowsToMove = Math.abs(startRow - endRow) - this._wrappedRowsCount();\n        return repeat(rowsToMove, this._sequence(this._verticalDirection()));\n    };\n    AltClickHandler.prototype._moveToRequestedCol = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        var endRow = this._endRow;\n        var direction = this._horizontalDirection();\n        return repeat(this._bufferLine(this._startCol, startRow, this._endCol, endRow, direction === \"C\").length, this._sequence(direction));\n    };\n    AltClickHandler.prototype._moveHorizontallyOnly = function () {\n        var direction = this._horizontalDirection();\n        return repeat(Math.abs(this._startCol - this._endCol), this._sequence(direction));\n    };\n    AltClickHandler.prototype._wrappedRowsCount = function () {\n        var wrappedRows = 0;\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        for (var i = 0; i < Math.abs(startRow - endRow); i++) {\n            var direction = this._verticalDirection() === \"A\" ? -1 : 1;\n            if (this._lines.get(startRow + (direction * i)).isWrapped) {\n                wrappedRows++;\n            }\n        }\n        return wrappedRows;\n    };\n    AltClickHandler.prototype._wrappedRowsForRow = function (currentRow) {\n        var rowCount = 0;\n        var lineWraps = this._lines.get(currentRow).isWrapped;\n        while (lineWraps && currentRow >= 0 && currentRow < this._terminal.rows) {\n            rowCount++;\n            currentRow--;\n            lineWraps = this._lines.get(currentRow).isWrapped;\n        }\n        return rowCount;\n    };\n    AltClickHandler.prototype._horizontalDirection = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        if ((this._startCol < this._endCol &&\n            startRow <= this._endRow) ||\n            (this._startCol >= this._endCol &&\n                startRow < this._endRow)) {\n            return \"C\";\n        }\n        return \"D\";\n    };\n    AltClickHandler.prototype._verticalDirection = function () {\n        if (this._startRow > this._endRow) {\n            return \"A\";\n        }\n        return \"B\";\n    };\n    AltClickHandler.prototype._bufferLine = function (startCol, startRow, endCol, endRow, forward) {\n        var currentCol = startCol;\n        var currentRow = startRow;\n        var bufferStr = '';\n        while (currentCol !== endCol || currentRow !== endRow) {\n            currentCol += forward ? 1 : -1;\n            if (forward && currentCol > this._terminal.cols - 1) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n                currentCol = 0;\n                startCol = 0;\n                currentRow++;\n            }\n            else if (!forward && currentCol < 0) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, 0, startCol + 1);\n                currentCol = this._terminal.cols - 1;\n                startCol = currentCol;\n                currentRow--;\n            }\n        }\n        return bufferStr + this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n    };\n    AltClickHandler.prototype._sequence = function (direction) {\n        var mod = this._terminal.applicationCursor ? 'O' : '[';\n        return EscapeSequences_1.C0.ESC + mod + direction;\n    };\n    return AltClickHandler;\n}());\nexports.AltClickHandler = AltClickHandler;\nfunction repeat(count, str) {\n    count = Math.floor(count);\n    var rpt = '';\n    for (var i = 0; i < count; i++) {\n        rpt += str;\n    }\n    return rpt;\n}\n\n},{\"../common/data/EscapeSequences\":46}],54:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar AddonManager = (function () {\n    function AddonManager() {\n        this._addons = [];\n    }\n    AddonManager.prototype.dispose = function () {\n        for (var i = this._addons.length - 1; i >= 0; i--) {\n            this._addons[i].instance.dispose();\n        }\n    };\n    AddonManager.prototype.loadAddon = function (terminal, instance) {\n        var _this = this;\n        var loadedAddon = {\n            instance: instance,\n            dispose: instance.dispose,\n            isDisposed: false\n        };\n        this._addons.push(loadedAddon);\n        instance.dispose = function () { return _this._wrappedAddonDispose(loadedAddon); };\n        instance.activate(terminal);\n    };\n    AddonManager.prototype._wrappedAddonDispose = function (loadedAddon) {\n        if (loadedAddon.isDisposed) {\n            return;\n        }\n        var index = -1;\n        for (var i = 0; i < this._addons.length; i++) {\n            if (this._addons[i] === loadedAddon) {\n                index = i;\n                break;\n            }\n        }\n        if (index === -1) {\n            throw new Error('Could not dispose an addon that has not been loaded');\n        }\n        loadedAddon.isDisposed = true;\n        loadedAddon.dispose.apply(loadedAddon.instance);\n        this._addons.splice(index, 1);\n    };\n    return AddonManager;\n}());\nexports.AddonManager = AddonManager;\n\n},{}],55:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Terminal_1 = require(\"../Terminal\");\nvar Strings = require(\"../Strings\");\nvar AddonManager_1 = require(\"./AddonManager\");\nvar Terminal = (function () {\n    function Terminal(options) {\n        this._core = new Terminal_1.Terminal(options);\n        this._addonManager = new AddonManager_1.AddonManager();\n    }\n    Object.defineProperty(Terminal.prototype, \"onCursorMove\", {\n        get: function () { return this._core.onCursorMove; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onLineFeed\", {\n        get: function () { return this._core.onLineFeed; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onSelectionChange\", {\n        get: function () { return this._core.onSelectionChange; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onData\", {\n        get: function () { return this._core.onData; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onTitleChange\", {\n        get: function () { return this._core.onTitleChange; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onScroll\", {\n        get: function () { return this._core.onScroll; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onKey\", {\n        get: function () { return this._core.onKey; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onRender\", {\n        get: function () { return this._core.onRender; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onResize\", {\n        get: function () { return this._core.onResize; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"element\", {\n        get: function () { return this._core.element; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"textarea\", {\n        get: function () { return this._core.textarea; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"rows\", {\n        get: function () { return this._core.rows; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"cols\", {\n        get: function () { return this._core.cols; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"buffer\", {\n        get: function () { return new BufferApiView(this._core.buffer); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () { return this._core.markers; },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.blur = function () {\n        this._core.blur();\n    };\n    Terminal.prototype.focus = function () {\n        this._core.focus();\n    };\n    Terminal.prototype.on = function (type, listener) {\n        this._core.on(type, listener);\n    };\n    Terminal.prototype.off = function (type, listener) {\n        this._core.off(type, listener);\n    };\n    Terminal.prototype.emit = function (type, data) {\n        this._core.emit(type, data);\n    };\n    Terminal.prototype.addDisposableListener = function (type, handler) {\n        return this._core.addDisposableListener(type, handler);\n    };\n    Terminal.prototype.resize = function (columns, rows) {\n        this._core.resize(columns, rows);\n    };\n    Terminal.prototype.writeln = function (data) {\n        this._core.writeln(data);\n    };\n    Terminal.prototype.open = function (parent) {\n        this._core.open(parent);\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._core.attachCustomKeyEventHandler(customKeyEventHandler);\n    };\n    Terminal.prototype.addCsiHandler = function (flag, callback) {\n        return this._core.addCsiHandler(flag, callback);\n    };\n    Terminal.prototype.addOscHandler = function (ident, callback) {\n        return this._core.addOscHandler(ident, callback);\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        return this._core.registerLinkMatcher(regex, handler, options);\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        this._core.deregisterLinkMatcher(matcherId);\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        return this._core.registerCharacterJoiner(handler);\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        this._core.deregisterCharacterJoiner(joinerId);\n    };\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        return this._core.addMarker(cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this._core.hasSelection();\n    };\n    Terminal.prototype.select = function (column, row, length) {\n        this._core.select(column, row, length);\n    };\n    Terminal.prototype.getSelection = function () {\n        return this._core.getSelection();\n    };\n    Terminal.prototype.getSelectionPosition = function () {\n        return this._core.getSelectionPosition();\n    };\n    Terminal.prototype.clearSelection = function () {\n        this._core.clearSelection();\n    };\n    Terminal.prototype.selectAll = function () {\n        this._core.selectAll();\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        this._core.selectLines(start, end);\n    };\n    Terminal.prototype.dispose = function () {\n        this._addonManager.dispose();\n        this._core.dispose();\n    };\n    Terminal.prototype.destroy = function () {\n        this._core.destroy();\n    };\n    Terminal.prototype.scrollLines = function (amount) {\n        this._core.scrollLines(amount);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this._core.scrollPages(pageCount);\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this._core.scrollToTop();\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this._core.scrollToBottom();\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        this._core.scrollToLine(line);\n    };\n    Terminal.prototype.clear = function () {\n        this._core.clear();\n    };\n    Terminal.prototype.write = function (data) {\n        this._core.write(data);\n    };\n    Terminal.prototype.writeUtf8 = function (data) {\n        this._core.writeUtf8(data);\n    };\n    Terminal.prototype.getOption = function (key) {\n        return this._core.getOption(key);\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        this._core.setOption(key, value);\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        this._core.refresh(start, end);\n    };\n    Terminal.prototype.reset = function () {\n        this._core.reset();\n    };\n    Terminal.applyAddon = function (addon) {\n        addon.apply(Terminal);\n    };\n    Terminal.prototype.loadAddon = function (addon) {\n        return this._addonManager.loadAddon(this, addon);\n    };\n    Object.defineProperty(Terminal, \"strings\", {\n        get: function () {\n            return Strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Terminal;\n}());\nexports.Terminal = Terminal;\nvar BufferApiView = (function () {\n    function BufferApiView(_buffer) {\n        this._buffer = _buffer;\n    }\n    Object.defineProperty(BufferApiView.prototype, \"cursorY\", {\n        get: function () { return this._buffer.y; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"cursorX\", {\n        get: function () { return this._buffer.x; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"viewportY\", {\n        get: function () { return this._buffer.ydisp; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"baseY\", {\n        get: function () { return this._buffer.ybase; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"length\", {\n        get: function () { return this._buffer.lines.length; },\n        enumerable: true,\n        configurable: true\n    });\n    BufferApiView.prototype.getLine = function (y) {\n        var line = this._buffer.lines.get(y);\n        if (!line) {\n            return undefined;\n        }\n        return new BufferLineApiView(line);\n    };\n    return BufferApiView;\n}());\nvar BufferLineApiView = (function () {\n    function BufferLineApiView(_line) {\n        this._line = _line;\n    }\n    Object.defineProperty(BufferLineApiView.prototype, \"isWrapped\", {\n        get: function () { return this._line.isWrapped; },\n        enumerable: true,\n        configurable: true\n    });\n    BufferLineApiView.prototype.getCell = function (x) {\n        if (x < 0 || x >= this._line.length) {\n            return undefined;\n        }\n        return new BufferCellApiView(this._line, x);\n    };\n    BufferLineApiView.prototype.translateToString = function (trimRight, startColumn, endColumn) {\n        return this._line.translateToString(trimRight, startColumn, endColumn);\n    };\n    return BufferLineApiView;\n}());\nvar BufferCellApiView = (function () {\n    function BufferCellApiView(_line, _x) {\n        this._line = _line;\n        this._x = _x;\n    }\n    Object.defineProperty(BufferCellApiView.prototype, \"char\", {\n        get: function () { return this._line.getString(this._x); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferCellApiView.prototype, \"width\", {\n        get: function () { return this._line.getWidth(this._x); },\n        enumerable: true,\n        configurable: true\n    });\n    return BufferCellApiView;\n}());\n\n},{\"../Strings\":33,\"../Terminal\":34,\"./AddonManager\":54}],56:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"../common/Types\");\nvar Types_2 = require(\"./atlas/Types\");\nvar CharAtlasCache_1 = require(\"./atlas/CharAtlasCache\");\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar BaseRenderLayer = (function () {\n    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors) {\n        this._container = _container;\n        this._alpha = _alpha;\n        this._colors = _colors;\n        this._scaledCharWidth = 0;\n        this._scaledCharHeight = 0;\n        this._scaledCellWidth = 0;\n        this._scaledCellHeight = 0;\n        this._scaledCharLeft = 0;\n        this._scaledCharTop = 0;\n        this._currentGlyphIdentifier = {\n            chars: '',\n            code: 0,\n            bg: 0,\n            fg: 0,\n            bold: false,\n            dim: false,\n            italic: false\n        };\n        this._canvas = document.createElement('canvas');\n        this._canvas.classList.add(\"xterm-\" + id + \"-layer\");\n        this._canvas.style.zIndex = zIndex.toString();\n        this._initCanvas();\n        this._container.appendChild(this._canvas);\n    }\n    BaseRenderLayer.prototype.dispose = function () {\n        this._container.removeChild(this._canvas);\n        if (this._charAtlas) {\n            this._charAtlas.dispose();\n        }\n    };\n    BaseRenderLayer.prototype._initCanvas = function () {\n        this._ctx = this._canvas.getContext('2d', { alpha: this._alpha });\n        if (!this._alpha) {\n            this.clearAll();\n        }\n    };\n    BaseRenderLayer.prototype.onOptionsChanged = function (terminal) { };\n    BaseRenderLayer.prototype.onBlur = function (terminal) { };\n    BaseRenderLayer.prototype.onFocus = function (terminal) { };\n    BaseRenderLayer.prototype.onCursorMove = function (terminal) { };\n    BaseRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) { };\n    BaseRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n    };\n    BaseRenderLayer.prototype.setColors = function (terminal, colorSet) {\n        this._refreshCharAtlas(terminal, colorSet);\n    };\n    BaseRenderLayer.prototype.setTransparency = function (terminal, alpha) {\n        if (alpha === this._alpha) {\n            return;\n        }\n        var oldCanvas = this._canvas;\n        this._alpha = alpha;\n        this._canvas = this._canvas.cloneNode();\n        this._initCanvas();\n        this._container.replaceChild(this._canvas, oldCanvas);\n        this._refreshCharAtlas(terminal, this._colors);\n        this.onGridChanged(terminal, 0, terminal.rows - 1);\n    };\n    BaseRenderLayer.prototype._refreshCharAtlas = function (terminal, colorSet) {\n        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {\n            return;\n        }\n        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(terminal, colorSet, this._scaledCharWidth, this._scaledCharHeight);\n        this._charAtlas.warmUp();\n    };\n    BaseRenderLayer.prototype.resize = function (terminal, dim) {\n        this._scaledCellWidth = dim.scaledCellWidth;\n        this._scaledCellHeight = dim.scaledCellHeight;\n        this._scaledCharWidth = dim.scaledCharWidth;\n        this._scaledCharHeight = dim.scaledCharHeight;\n        this._scaledCharLeft = dim.scaledCharLeft;\n        this._scaledCharTop = dim.scaledCharTop;\n        this._canvas.width = dim.scaledCanvasWidth;\n        this._canvas.height = dim.scaledCanvasHeight;\n        this._canvas.style.width = dim.canvasWidth + \"px\";\n        this._canvas.style.height = dim.canvasHeight + \"px\";\n        if (!this._alpha) {\n            this.clearAll();\n        }\n        this._refreshCharAtlas(terminal, this._colors);\n    };\n    BaseRenderLayer.prototype.fillCells = function (x, y, width, height) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.fillBottomLineAtCells = function (x, y, width) {\n        if (width === void 0) { width = 1; }\n        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.fillLeftLineAtCell = function (x, y) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio, this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.strokeRectAtCell = function (x, y, width, height) {\n        this._ctx.lineWidth = window.devicePixelRatio;\n        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.clearAll = function () {\n        if (this._alpha) {\n            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n    };\n    BaseRenderLayer.prototype.clearCells = function (x, y, width, height) {\n        if (this._alpha) {\n            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n    };\n    BaseRenderLayer.prototype.fillCharTrueColor = function (terminal, cell, x, y) {\n        this._ctx.font = this._getFont(terminal, false, false);\n        this._ctx.textBaseline = 'middle';\n        this._clipRow(terminal, y);\n        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);\n    };\n    BaseRenderLayer.prototype.drawChars = function (terminal, cell, x, y) {\n        if (cell.isFgRGB() || cell.isBgRGB()) {\n            this._drawUncachedChars(terminal, cell, x, y);\n            return;\n        }\n        var fg;\n        var bg;\n        if (cell.isInverse()) {\n            fg = (cell.isBgDefault()) ? Types_2.INVERTED_DEFAULT_COLOR : cell.getBgColor();\n            bg = (cell.isFgDefault()) ? Types_2.INVERTED_DEFAULT_COLOR : cell.getFgColor();\n        }\n        else {\n            bg = (cell.isBgDefault()) ? Types_1.DEFAULT_COLOR : cell.getBgColor();\n            fg = (cell.isFgDefault()) ? Types_1.DEFAULT_COLOR : cell.getFgColor();\n        }\n        var drawInBrightColor = terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8 && fg !== Types_2.INVERTED_DEFAULT_COLOR;\n        fg += drawInBrightColor ? 8 : 0;\n        this._currentGlyphIdentifier.chars = cell.getChars() || BufferLine_1.WHITESPACE_CELL_CHAR;\n        this._currentGlyphIdentifier.code = cell.getCode() || BufferLine_1.WHITESPACE_CELL_CODE;\n        this._currentGlyphIdentifier.bg = bg;\n        this._currentGlyphIdentifier.fg = fg;\n        this._currentGlyphIdentifier.bold = cell.isBold() && terminal.options.enableBold;\n        this._currentGlyphIdentifier.dim = !!cell.isDim();\n        this._currentGlyphIdentifier.italic = !!cell.isItalic();\n        var atlasDidDraw = this._charAtlas && this._charAtlas.draw(this._ctx, this._currentGlyphIdentifier, x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);\n        if (!atlasDidDraw) {\n            this._drawUncachedChars(terminal, cell, x, y);\n        }\n    };\n    BaseRenderLayer.prototype._drawUncachedChars = function (terminal, cell, x, y) {\n        this._ctx.save();\n        this._ctx.font = this._getFont(terminal, cell.isBold() && terminal.options.enableBold, !!cell.isItalic());\n        this._ctx.textBaseline = 'middle';\n        if (cell.isInverse()) {\n            if (cell.isBgDefault()) {\n                this._ctx.fillStyle = this._colors.background.css;\n            }\n            else if (cell.isBgRGB()) {\n                this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n            }\n            else {\n                this._ctx.fillStyle = this._colors.ansi[cell.getBgColor()].css;\n            }\n        }\n        else {\n            if (cell.isFgDefault()) {\n                this._ctx.fillStyle = this._colors.foreground.css;\n            }\n            else if (cell.isFgRGB()) {\n                this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n            }\n            else {\n                var fg = cell.getFgColor();\n                if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n                    fg += 8;\n                }\n                this._ctx.fillStyle = this._colors.ansi[fg].css;\n            }\n        }\n        this._clipRow(terminal, y);\n        if (cell.isDim()) {\n            this._ctx.globalAlpha = Types_2.DIM_OPACITY;\n        }\n        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);\n        this._ctx.restore();\n    };\n    BaseRenderLayer.prototype._clipRow = function (terminal, y) {\n        this._ctx.beginPath();\n        this._ctx.rect(0, y * this._scaledCellHeight, terminal.cols * this._scaledCellWidth, this._scaledCellHeight);\n        this._ctx.clip();\n    };\n    BaseRenderLayer.prototype._getFont = function (terminal, isBold, isItalic) {\n        var fontWeight = isBold ? terminal.options.fontWeightBold : terminal.options.fontWeight;\n        var fontStyle = isItalic ? 'italic' : '';\n        return fontStyle + \" \" + fontWeight + \" \" + terminal.options.fontSize * window.devicePixelRatio + \"px \" + terminal.options.fontFamily;\n    };\n    return BaseRenderLayer;\n}());\nexports.BaseRenderLayer = BaseRenderLayer;\n\n},{\"../common/Types\":45,\"../core/buffer/BufferLine\":47,\"./atlas/CharAtlasCache\":66,\"./atlas/Types\":73}],57:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar JoinedCellData = (function (_super) {\n    __extends(JoinedCellData, _super);\n    function JoinedCellData(firstCell, chars, width) {\n        var _this = _super.call(this) || this;\n        _this.content = 0;\n        _this.combinedData = '';\n        _this.fg = firstCell.fg;\n        _this.bg = firstCell.bg;\n        _this.combinedData = chars;\n        _this._width = width;\n        return _this;\n    }\n    JoinedCellData.prototype.isCombined = function () {\n        return 2097152;\n    };\n    JoinedCellData.prototype.getWidth = function () {\n        return this._width;\n    };\n    JoinedCellData.prototype.getChars = function () {\n        return this.combinedData;\n    };\n    JoinedCellData.prototype.getCode = function () {\n        return 0x1FFFFF;\n    };\n    JoinedCellData.prototype.setFromCharData = function (value) {\n        throw new Error('not implemented');\n    };\n    JoinedCellData.prototype.getAsCharData = function () {\n        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n    };\n    return JoinedCellData;\n}(BufferLine_1.AttributeData));\nexports.JoinedCellData = JoinedCellData;\nvar CharacterJoinerRegistry = (function () {\n    function CharacterJoinerRegistry(_terminal) {\n        this._terminal = _terminal;\n        this._characterJoiners = [];\n        this._nextCharacterJoinerId = 0;\n        this._workCell = new BufferLine_1.CellData();\n    }\n    CharacterJoinerRegistry.prototype.registerCharacterJoiner = function (handler) {\n        var joiner = {\n            id: this._nextCharacterJoinerId++,\n            handler: handler\n        };\n        this._characterJoiners.push(joiner);\n        return joiner.id;\n    };\n    CharacterJoinerRegistry.prototype.deregisterCharacterJoiner = function (joinerId) {\n        for (var i = 0; i < this._characterJoiners.length; i++) {\n            if (this._characterJoiners[i].id === joinerId) {\n                this._characterJoiners.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    CharacterJoinerRegistry.prototype.getJoinedCharacters = function (row) {\n        if (this._characterJoiners.length === 0) {\n            return [];\n        }\n        var line = this._terminal.buffer.lines.get(row);\n        if (line.length === 0) {\n            return [];\n        }\n        var ranges = [];\n        var lineStr = line.translateToString(true);\n        var rangeStartColumn = 0;\n        var currentStringIndex = 0;\n        var rangeStartStringIndex = 0;\n        var rangeAttrFG = line.getFg(0);\n        var rangeAttrBG = line.getBg(0);\n        for (var x = 0; x < line.getTrimmedLength(); x++) {\n            line.loadCell(x, this._workCell);\n            if (this._workCell.getWidth() === 0) {\n                continue;\n            }\n            if (this._workCell.fg !== rangeAttrFG || this._workCell.bg !== rangeAttrBG) {\n                if (x - rangeStartColumn > 1) {\n                    var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n                    for (var i = 0; i < joinedRanges.length; i++) {\n                        ranges.push(joinedRanges[i]);\n                    }\n                }\n                rangeStartColumn = x;\n                rangeStartStringIndex = currentStringIndex;\n                rangeAttrFG = this._workCell.fg;\n                rangeAttrBG = this._workCell.bg;\n            }\n            currentStringIndex += this._workCell.getChars().length || BufferLine_1.WHITESPACE_CELL_CHAR.length;\n        }\n        if (this._terminal.cols - rangeStartColumn > 1) {\n            var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n            for (var i = 0; i < joinedRanges.length; i++) {\n                ranges.push(joinedRanges[i]);\n            }\n        }\n        return ranges;\n    };\n    CharacterJoinerRegistry.prototype._getJoinedRanges = function (line, startIndex, endIndex, lineData, startCol) {\n        var text = line.substring(startIndex, endIndex);\n        var joinedRanges = this._characterJoiners[0].handler(text);\n        for (var i = 1; i < this._characterJoiners.length; i++) {\n            var joinerRanges = this._characterJoiners[i].handler(text);\n            for (var j = 0; j < joinerRanges.length; j++) {\n                CharacterJoinerRegistry._mergeRanges(joinedRanges, joinerRanges[j]);\n            }\n        }\n        this._stringRangesToCellRanges(joinedRanges, lineData, startCol);\n        return joinedRanges;\n    };\n    CharacterJoinerRegistry.prototype._stringRangesToCellRanges = function (ranges, line, startCol) {\n        var currentRangeIndex = 0;\n        var currentRangeStarted = false;\n        var currentStringIndex = 0;\n        var currentRange = ranges[currentRangeIndex];\n        if (!currentRange) {\n            return;\n        }\n        for (var x = startCol; x < this._terminal.cols; x++) {\n            var width = line.getWidth(x);\n            var length_1 = line.getString(x).length || BufferLine_1.WHITESPACE_CELL_CHAR.length;\n            if (width === 0) {\n                continue;\n            }\n            if (!currentRangeStarted && currentRange[0] <= currentStringIndex) {\n                currentRange[0] = x;\n                currentRangeStarted = true;\n            }\n            if (currentRange[1] <= currentStringIndex) {\n                currentRange[1] = x;\n                currentRange = ranges[++currentRangeIndex];\n                if (!currentRange) {\n                    break;\n                }\n                if (currentRange[0] <= currentStringIndex) {\n                    currentRange[0] = x;\n                    currentRangeStarted = true;\n                }\n                else {\n                    currentRangeStarted = false;\n                }\n            }\n            currentStringIndex += length_1;\n        }\n        if (currentRange) {\n            currentRange[1] = this._terminal.cols;\n        }\n    };\n    CharacterJoinerRegistry._mergeRanges = function (ranges, newRange) {\n        var inRange = false;\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            if (!inRange) {\n                if (newRange[1] <= range[0]) {\n                    ranges.splice(i, 0, newRange);\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    return ranges;\n                }\n                if (newRange[0] < range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    inRange = true;\n                }\n                continue;\n            }\n            else {\n                if (newRange[1] <= range[0]) {\n                    ranges[i - 1][1] = newRange[1];\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    ranges[i - 1][1] = Math.max(newRange[1], range[1]);\n                    ranges.splice(i, 1);\n                    inRange = false;\n                    return ranges;\n                }\n                ranges.splice(i, 1);\n                i--;\n            }\n        }\n        if (inRange) {\n            ranges[ranges.length - 1][1] = newRange[1];\n        }\n        else {\n            ranges.push(newRange);\n        }\n        return ranges;\n    };\n    return CharacterJoinerRegistry;\n}());\nexports.CharacterJoinerRegistry = CharacterJoinerRegistry;\n\n},{\"../core/buffer/BufferLine\":47}],58:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar BLINK_INTERVAL = 600;\nvar CursorRenderLayer = (function (_super) {\n    __extends(CursorRenderLayer, _super);\n    function CursorRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'cursor', zIndex, true, colors) || this;\n        _this._cell = new BufferLine_1.CellData();\n        _this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n        _this._cursorRenderers = {\n            'bar': _this._renderBarCursor.bind(_this),\n            'block': _this._renderBlockCursor.bind(_this),\n            'underline': _this._renderUnderlineCursor.bind(_this)\n        };\n        return _this;\n    }\n    CursorRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n    };\n    CursorRenderLayer.prototype.reset = function (terminal) {\n        this._clearCursor();\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.dispose();\n            this._cursorBlinkStateManager = null;\n            this.onOptionsChanged(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onBlur = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.pause();\n        }\n        terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n    };\n    CursorRenderLayer.prototype.onFocus = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.resume(terminal);\n        }\n        else {\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        var _this = this;\n        if (terminal.options.cursorBlink) {\n            if (!this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager = new CursorBlinkStateManager(terminal, function () {\n                    _this._render(terminal, true);\n                });\n            }\n        }\n        else {\n            if (this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager.dispose();\n                this._cursorBlinkStateManager = null;\n            }\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onCursorMove = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) {\n        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {\n            this._render(terminal, false);\n        }\n        else {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype._render = function (terminal, triggeredByAnimationFrame) {\n        if (!terminal.cursorState || terminal.cursorHidden) {\n            this._clearCursor();\n            return;\n        }\n        var cursorY = terminal.buffer.ybase + terminal.buffer.y;\n        var viewportRelativeCursorY = cursorY - terminal.buffer.ydisp;\n        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= terminal.rows) {\n            this._clearCursor();\n            return;\n        }\n        terminal.buffer.lines.get(cursorY).loadCell(terminal.buffer.x, this._cell);\n        if (this._cell.content === undefined) {\n            return;\n        }\n        if (!terminal.isFocused) {\n            this._clearCursor();\n            this._ctx.save();\n            this._ctx.fillStyle = this._colors.cursor.css;\n            this._renderBlurCursor(terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);\n            this._ctx.restore();\n            this._state.x = terminal.buffer.x;\n            this._state.y = viewportRelativeCursorY;\n            this._state.isFocused = false;\n            this._state.style = terminal.options.cursorStyle;\n            this._state.width = this._cell.getWidth();\n            return;\n        }\n        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {\n            this._clearCursor();\n            return;\n        }\n        if (this._state) {\n            if (this._state.x === terminal.buffer.x &&\n                this._state.y === viewportRelativeCursorY &&\n                this._state.isFocused === terminal.isFocused &&\n                this._state.style === terminal.options.cursorStyle &&\n                this._state.width === this._cell.getWidth()) {\n                return;\n            }\n            this._clearCursor();\n        }\n        this._ctx.save();\n        this._cursorRenderers[terminal.options.cursorStyle || 'block'](terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);\n        this._ctx.restore();\n        this._state.x = terminal.buffer.x;\n        this._state.y = viewportRelativeCursorY;\n        this._state.isFocused = false;\n        this._state.style = terminal.options.cursorStyle;\n        this._state.width = this._cell.getWidth();\n    };\n    CursorRenderLayer.prototype._clearCursor = function () {\n        if (this._state) {\n            this.clearCells(this._state.x, this._state.y, this._state.width, 1);\n            this._state = {\n                x: null,\n                y: null,\n                isFocused: null,\n                style: null,\n                width: null\n            };\n        }\n    };\n    CursorRenderLayer.prototype._renderBarCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillLeftLineAtCell(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlockCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillCells(x, y, cell.getWidth(), 1);\n        this._ctx.fillStyle = this._colors.cursorAccent.css;\n        this.fillCharTrueColor(terminal, cell, x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderUnderlineCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillBottomLineAtCells(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlurCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.strokeStyle = this._colors.cursor.css;\n        this.strokeRectAtCell(x, y, cell.getWidth(), 1);\n        this._ctx.restore();\n    };\n    return CursorRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.CursorRenderLayer = CursorRenderLayer;\nvar CursorBlinkStateManager = (function () {\n    function CursorBlinkStateManager(terminal, _renderCallback) {\n        this._renderCallback = _renderCallback;\n        this.isCursorVisible = true;\n        if (terminal.isFocused) {\n            this._restartInterval();\n        }\n    }\n    Object.defineProperty(CursorBlinkStateManager.prototype, \"isPaused\", {\n        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },\n        enumerable: true,\n        configurable: true\n    });\n    CursorBlinkStateManager.prototype.dispose = function () {\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.restartBlinkAnimation = function (terminal) {\n        var _this = this;\n        if (this.isPaused) {\n            return;\n        }\n        this._animationTimeRestarted = Date.now();\n        this.isCursorVisible = true;\n        if (!this._animationFrame) {\n            this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n        }\n    };\n    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {\n        var _this = this;\n        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n        }\n        this._blinkStartTimeout = setTimeout(function () {\n            if (_this._animationTimeRestarted) {\n                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                _this._animationTimeRestarted = null;\n                if (time > 0) {\n                    _this._restartInterval(time);\n                    return;\n                }\n            }\n            _this.isCursorVisible = false;\n            _this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n            _this._blinkInterval = setInterval(function () {\n                if (_this._animationTimeRestarted) {\n                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                    _this._animationTimeRestarted = null;\n                    _this._restartInterval(time);\n                    return;\n                }\n                _this.isCursorVisible = !_this.isCursorVisible;\n                _this._animationFrame = window.requestAnimationFrame(function () {\n                    _this._renderCallback();\n                    _this._animationFrame = null;\n                });\n            }, BLINK_INTERVAL);\n        }, timeToStart);\n    };\n    CursorBlinkStateManager.prototype.pause = function () {\n        this.isCursorVisible = true;\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.resume = function (terminal) {\n        this._animationTimeRestarted = null;\n        this._restartInterval();\n        this.restartBlinkAnimation(terminal);\n    };\n    return CursorBlinkStateManager;\n}());\n\n},{\"../core/buffer/BufferLine\":47,\"./BaseRenderLayer\":56}],59:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GridCache = (function () {\n    function GridCache() {\n        this.cache = [];\n    }\n    GridCache.prototype.resize = function (width, height) {\n        for (var x = 0; x < width; x++) {\n            if (this.cache.length <= x) {\n                this.cache.push([]);\n            }\n            for (var y = this.cache[x].length; y < height; y++) {\n                this.cache[x].push(null);\n            }\n            this.cache[x].length = height;\n        }\n        this.cache.length = width;\n    };\n    GridCache.prototype.clear = function () {\n        for (var x = 0; x < this.cache.length; x++) {\n            for (var y = 0; y < this.cache[x].length; y++) {\n                this.cache[x][y] = null;\n            }\n        }\n    };\n    return GridCache;\n}());\nexports.GridCache = GridCache;\n\n},{}],60:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar Types_1 = require(\"./atlas/Types\");\nvar CharAtlasUtils_1 = require(\"./atlas/CharAtlasUtils\");\nvar LinkRenderLayer = (function (_super) {\n    __extends(LinkRenderLayer, _super);\n    function LinkRenderLayer(container, zIndex, colors, terminal) {\n        var _this = _super.call(this, container, 'link', zIndex, true, colors) || this;\n        _this._state = null;\n        terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });\n        terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    LinkRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = null;\n    };\n    LinkRenderLayer.prototype.reset = function (terminal) {\n        this._clearCurrentLink();\n    };\n    LinkRenderLayer.prototype._clearCurrentLink = function () {\n        if (this._state) {\n            this.clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);\n            var middleRowCount = this._state.y2 - this._state.y1 - 1;\n            if (middleRowCount > 0) {\n                this.clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);\n            }\n            this.clearCells(0, this._state.y2, this._state.x2, 1);\n            this._state = null;\n        }\n    };\n    LinkRenderLayer.prototype._onLinkHover = function (e) {\n        if (e.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            this._ctx.fillStyle = this._colors.background.css;\n        }\n        else if (CharAtlasUtils_1.is256Color(e.fg)) {\n            this._ctx.fillStyle = this._colors.ansi[e.fg].css;\n        }\n        else {\n            this._ctx.fillStyle = this._colors.foreground.css;\n        }\n        if (e.y1 === e.y2) {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);\n        }\n        else {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);\n            for (var y = e.y1 + 1; y < e.y2; y++) {\n                this.fillBottomLineAtCells(0, y, e.cols);\n            }\n            this.fillBottomLineAtCells(0, e.y2, e.x2);\n        }\n        this._state = e;\n    };\n    LinkRenderLayer.prototype._onLinkLeave = function (e) {\n        this._clearCurrentLink();\n    };\n    return LinkRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.LinkRenderLayer = LinkRenderLayer;\n\n},{\"./BaseRenderLayer\":56,\"./atlas/CharAtlasUtils\":68,\"./atlas/Types\":73}],61:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RenderDebouncer_1 = require(\"../ui/RenderDebouncer\");\nvar EventEmitter2_1 = require(\"../common/EventEmitter2\");\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar ScreenDprMonitor_1 = require(\"../ui/ScreenDprMonitor\");\nvar Lifecycle_2 = require(\"../ui/Lifecycle\");\nvar RenderCoordinator = (function (_super) {\n    __extends(RenderCoordinator, _super);\n    function RenderCoordinator(_renderer, _rowCount, screenElement) {\n        var _this = _super.call(this) || this;\n        _this._renderer = _renderer;\n        _this._rowCount = _rowCount;\n        _this._isPaused = false;\n        _this._needsFullRefresh = false;\n        _this._canvasWidth = 0;\n        _this._canvasHeight = 0;\n        _this._onDimensionsChange = new EventEmitter2_1.EventEmitter2();\n        _this._onRender = new EventEmitter2_1.EventEmitter2();\n        _this._onRefreshRequest = new EventEmitter2_1.EventEmitter2();\n        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(function (start, end) { return _this._renderRows(start, end); });\n        _this.register(_this._renderDebouncer);\n        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        _this._screenDprMonitor.setListener(function () { return _this._renderer.onDevicePixelRatioChange(); });\n        _this.register(_this._screenDprMonitor);\n        _this.register(Lifecycle_2.addDisposableDomListener(window, 'resize', function () { return _this._renderer.onDevicePixelRatioChange(); }));\n        if ('IntersectionObserver' in window) {\n            var observer_1 = new IntersectionObserver(function (e) { return _this._onIntersectionChange(e[e.length - 1]); }, { threshold: 0 });\n            observer_1.observe(screenElement);\n            _this.register({ dispose: function () { return observer_1.disconnect(); } });\n        }\n        return _this;\n    }\n    Object.defineProperty(RenderCoordinator.prototype, \"onDimensionsChange\", {\n        get: function () { return this._onDimensionsChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"onRender\", {\n        get: function () { return this._onRender.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"onRefreshRequest\", {\n        get: function () { return this._onRefreshRequest.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"dimensions\", {\n        get: function () { return this._renderer.dimensions; },\n        enumerable: true,\n        configurable: true\n    });\n    RenderCoordinator.prototype._onIntersectionChange = function (entry) {\n        this._isPaused = entry.intersectionRatio === 0;\n        if (!this._isPaused && this._needsFullRefresh) {\n            this.refreshRows(0, this._rowCount - 1);\n            this._needsFullRefresh = false;\n        }\n    };\n    RenderCoordinator.prototype.refreshRows = function (start, end) {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n            return;\n        }\n        this._renderDebouncer.refresh(start, end, this._rowCount);\n    };\n    RenderCoordinator.prototype._renderRows = function (start, end) {\n        this._renderer.renderRows(start, end);\n        this._onRender.fire({ start: start, end: end });\n    };\n    RenderCoordinator.prototype.resize = function (cols, rows) {\n        this._rowCount = rows;\n        this._fireOnCanvasResize();\n    };\n    RenderCoordinator.prototype.changeOptions = function () {\n        this._renderer.onOptionsChanged();\n        this._fireOnCanvasResize();\n    };\n    RenderCoordinator.prototype._fireOnCanvasResize = function () {\n        if (this._renderer.dimensions.canvasWidth === this._canvasWidth && this._renderer.dimensions.canvasHeight === this._canvasHeight) {\n            return;\n        }\n        this._onDimensionsChange.fire(this._renderer.dimensions);\n    };\n    RenderCoordinator.prototype.setRenderer = function (renderer) {\n        this._renderer.dispose();\n        this._renderer = renderer;\n    };\n    RenderCoordinator.prototype._fullRefresh = function () {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n        }\n        else {\n            this.refreshRows(0, this._rowCount);\n        }\n    };\n    RenderCoordinator.prototype.setColors = function (colors) {\n        this._renderer.setColors(colors);\n        this._fullRefresh();\n    };\n    RenderCoordinator.prototype.onDevicePixelRatioChange = function () {\n        this._renderer.onDevicePixelRatioChange();\n    };\n    RenderCoordinator.prototype.onResize = function (cols, rows) {\n        this._renderer.onResize(cols, rows);\n        this._fullRefresh();\n    };\n    RenderCoordinator.prototype.onCharSizeChanged = function () {\n        this._renderer.onCharSizeChanged();\n    };\n    RenderCoordinator.prototype.onBlur = function () {\n        this._renderer.onBlur();\n    };\n    RenderCoordinator.prototype.onFocus = function () {\n        this._renderer.onFocus();\n    };\n    RenderCoordinator.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        this._renderer.onSelectionChanged(start, end, columnSelectMode);\n    };\n    RenderCoordinator.prototype.onCursorMove = function () {\n        this._renderer.onCursorMove();\n    };\n    RenderCoordinator.prototype.onOptionsChanged = function () {\n        this._renderer.onOptionsChanged();\n    };\n    RenderCoordinator.prototype.clear = function () {\n        this._renderer.clear();\n    };\n    RenderCoordinator.prototype.registerCharacterJoiner = function (handler) {\n        return this._renderer.registerCharacterJoiner(handler);\n    };\n    RenderCoordinator.prototype.deregisterCharacterJoiner = function (joinerId) {\n        return this._renderer.deregisterCharacterJoiner(joinerId);\n    };\n    return RenderCoordinator;\n}(Lifecycle_1.Disposable));\nexports.RenderCoordinator = RenderCoordinator;\n\n},{\"../common/EventEmitter2\":41,\"../common/Lifecycle\":42,\"../ui/Lifecycle\":77,\"../ui/RenderDebouncer\":78,\"../ui/ScreenDprMonitor\":79}],62:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextRenderLayer_1 = require(\"./TextRenderLayer\");\nvar SelectionRenderLayer_1 = require(\"./SelectionRenderLayer\");\nvar CursorRenderLayer_1 = require(\"./CursorRenderLayer\");\nvar LinkRenderLayer_1 = require(\"./LinkRenderLayer\");\nvar CharacterJoinerRegistry_1 = require(\"../renderer/CharacterJoinerRegistry\");\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar Renderer = (function (_super) {\n    __extends(Renderer, _super);\n    function Renderer(_terminal, _colors) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._colors = _colors;\n        var allowTransparency = _this._terminal.options.allowTransparency;\n        _this._characterJoinerRegistry = new CharacterJoinerRegistry_1.CharacterJoinerRegistry(_terminal);\n        _this._renderLayers = [\n            new TextRenderLayer_1.TextRenderLayer(_this._terminal.screenElement, 0, _this._colors, _this._characterJoinerRegistry, allowTransparency),\n            new SelectionRenderLayer_1.SelectionRenderLayer(_this._terminal.screenElement, 1, _this._colors),\n            new LinkRenderLayer_1.LinkRenderLayer(_this._terminal.screenElement, 2, _this._colors, _this._terminal),\n            new CursorRenderLayer_1.CursorRenderLayer(_this._terminal.screenElement, 3, _this._colors)\n        ];\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._devicePixelRatio = window.devicePixelRatio;\n        _this._updateDimensions();\n        _this.onOptionsChanged();\n        return _this;\n    }\n    Renderer.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._renderLayers.forEach(function (l) { return l.dispose(); });\n    };\n    Renderer.prototype.onDevicePixelRatioChange = function () {\n        if (this._devicePixelRatio !== window.devicePixelRatio) {\n            this._devicePixelRatio = window.devicePixelRatio;\n            this.onResize(this._terminal.cols, this._terminal.rows);\n        }\n    };\n    Renderer.prototype.setColors = function (colors) {\n        var _this = this;\n        this._colors = colors;\n        this._renderLayers.forEach(function (l) {\n            l.setColors(_this._terminal, _this._colors);\n            l.reset(_this._terminal);\n        });\n    };\n    Renderer.prototype.onResize = function (cols, rows) {\n        var _this = this;\n        this._updateDimensions();\n        this._renderLayers.forEach(function (l) { return l.resize(_this._terminal, _this.dimensions); });\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n    };\n    Renderer.prototype.onCharSizeChanged = function () {\n        this.onResize(this._terminal.cols, this._terminal.rows);\n    };\n    Renderer.prototype.onBlur = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onBlur(_this._terminal); });\n    };\n    Renderer.prototype.onFocus = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onFocus(_this._terminal); });\n    };\n    Renderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        var _this = this;\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n        this._runOperation(function (l) { return l.onSelectionChanged(_this._terminal, start, end, columnSelectMode); });\n    };\n    Renderer.prototype.onCursorMove = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onCursorMove(_this._terminal); });\n    };\n    Renderer.prototype.onOptionsChanged = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onOptionsChanged(_this._terminal); });\n    };\n    Renderer.prototype.clear = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.reset(_this._terminal); });\n    };\n    Renderer.prototype._runOperation = function (operation) {\n        this._renderLayers.forEach(function (l) { return operation(l); });\n    };\n    Renderer.prototype.renderRows = function (start, end) {\n        var _this = this;\n        this._renderLayers.forEach(function (l) { return l.onGridChanged(_this._terminal, start, end); });\n    };\n    Renderer.prototype._updateDimensions = function () {\n        if (!this._terminal.charMeasure.width || !this._terminal.charMeasure.height) {\n            return;\n        }\n        this.dimensions.scaledCharWidth = Math.floor(this._terminal.charMeasure.width * window.devicePixelRatio);\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharTop = this._terminal.options.lineHeight === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCharLeft = Math.floor(this._terminal.options.letterSpacing / 2);\n        this.dimensions.scaledCanvasHeight = this._terminal.rows * this.dimensions.scaledCellHeight;\n        this.dimensions.scaledCanvasWidth = this._terminal.cols * this.dimensions.scaledCellWidth;\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n    };\n    Renderer.prototype.registerCharacterJoiner = function (handler) {\n        return this._characterJoinerRegistry.registerCharacterJoiner(handler);\n    };\n    Renderer.prototype.deregisterCharacterJoiner = function (joinerId) {\n        return this._characterJoinerRegistry.deregisterCharacterJoiner(joinerId);\n    };\n    return Renderer;\n}(Lifecycle_1.Disposable));\nexports.Renderer = Renderer;\n\n},{\"../common/Lifecycle\":42,\"../renderer/CharacterJoinerRegistry\":57,\"./CursorRenderLayer\":58,\"./LinkRenderLayer\":60,\"./SelectionRenderLayer\":63,\"./TextRenderLayer\":64}],63:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar SelectionRenderLayer = (function (_super) {\n    __extends(SelectionRenderLayer, _super);\n    function SelectionRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'selection', zIndex, true, colors) || this;\n        _this._clearState();\n        return _this;\n    }\n    SelectionRenderLayer.prototype._clearState = function () {\n        this._state = {\n            start: null,\n            end: null,\n            columnSelectMode: null,\n            ydisp: null\n        };\n    };\n    SelectionRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._clearState();\n    };\n    SelectionRenderLayer.prototype.reset = function (terminal) {\n        if (this._state.start && this._state.end) {\n            this._clearState();\n            this.clearAll();\n        }\n    };\n    SelectionRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (!this._didStateChange(start, end, columnSelectMode, terminal.buffer.ydisp)) {\n            return;\n        }\n        this.clearAll();\n        if (!start || !end) {\n            this._clearState();\n            return;\n        }\n        var viewportStartRow = start[1] - terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, terminal.rows - 1);\n        if (viewportCappedStartRow >= terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        this._ctx.fillStyle = this._colors.selection.css;\n        if (columnSelectMode) {\n            var startCol = start[0];\n            var width = end[0] - startCol;\n            var height = viewportCappedEndRow - viewportCappedStartRow + 1;\n            this.fillCells(startCol, viewportCappedStartRow, width, height);\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var startRowEndCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : terminal.cols;\n            this.fillCells(startCol, viewportCappedStartRow, startRowEndCol - startCol, 1);\n            var middleRowsCount = Math.max(viewportCappedEndRow - viewportCappedStartRow - 1, 0);\n            this.fillCells(0, viewportCappedStartRow + 1, terminal.cols, middleRowsCount);\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol = viewportEndRow === viewportCappedEndRow ? end[0] : terminal.cols;\n                this.fillCells(0, viewportCappedEndRow, endCol, 1);\n            }\n        }\n        this._state.start = [start[0], start[1]];\n        this._state.end = [end[0], end[1]];\n        this._state.columnSelectMode = columnSelectMode;\n        this._state.ydisp = terminal.buffer.ydisp;\n    };\n    SelectionRenderLayer.prototype._didStateChange = function (start, end, columnSelectMode, ydisp) {\n        return !this._areCoordinatesEqual(start, this._state.start) ||\n            !this._areCoordinatesEqual(end, this._state.end) ||\n            columnSelectMode !== this._state.columnSelectMode ||\n            ydisp !== this._state.ydisp;\n    };\n    SelectionRenderLayer.prototype._areCoordinatesEqual = function (coord1, coord2) {\n        if (!coord1 || !coord2) {\n            return false;\n        }\n        return coord1[0] === coord2[0] && coord1[1] === coord2[1];\n    };\n    return SelectionRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.SelectionRenderLayer = SelectionRenderLayer;\n\n},{\"./BaseRenderLayer\":56}],64:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GridCache_1 = require(\"./GridCache\");\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar CharacterJoinerRegistry_1 = require(\"./CharacterJoinerRegistry\");\nvar TextRenderLayer = (function (_super) {\n    __extends(TextRenderLayer, _super);\n    function TextRenderLayer(container, zIndex, colors, characterJoinerRegistry, alpha) {\n        var _this = _super.call(this, container, 'text', zIndex, alpha, colors) || this;\n        _this._characterOverlapCache = {};\n        _this._workCell = new BufferLine_1.CellData();\n        _this._state = new GridCache_1.GridCache();\n        _this._characterJoinerRegistry = characterJoinerRegistry;\n        return _this;\n    }\n    TextRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        var terminalFont = this._getFont(terminal, false, false);\n        if (this._characterWidth !== dim.scaledCharWidth || this._characterFont !== terminalFont) {\n            this._characterWidth = dim.scaledCharWidth;\n            this._characterFont = terminalFont;\n            this._characterOverlapCache = {};\n        }\n        this._state.clear();\n        this._state.resize(terminal.cols, terminal.rows);\n    };\n    TextRenderLayer.prototype.reset = function (terminal) {\n        this._state.clear();\n        this.clearAll();\n    };\n    TextRenderLayer.prototype._forEachCell = function (terminal, firstRow, lastRow, joinerRegistry, callback) {\n        for (var y = firstRow; y <= lastRow; y++) {\n            var row = y + terminal.buffer.ydisp;\n            var line = terminal.buffer.lines.get(row);\n            var joinedRanges = joinerRegistry ? joinerRegistry.getJoinedCharacters(row) : [];\n            for (var x = 0; x < terminal.cols; x++) {\n                line.loadCell(x, this._workCell);\n                var cell = this._workCell;\n                var isJoined = false;\n                var lastCharX = x;\n                if (cell.getWidth() === 0) {\n                    continue;\n                }\n                if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {\n                    isJoined = true;\n                    var range = joinedRanges.shift();\n                    cell = new CharacterJoinerRegistry_1.JoinedCellData(this._workCell, line.translateToString(true, range[0], range[1]), range[1] - range[0]);\n                    lastCharX = range[1] - 1;\n                }\n                if (!isJoined && this._isOverlapping(cell)) {\n                    if (lastCharX < line.length - 1 && line.getCodePoint(lastCharX + 1) === BufferLine_1.NULL_CELL_CODE) {\n                        cell.content &= ~12582912;\n                        cell.content |= 2 << 22;\n                    }\n                }\n                callback(cell, x, y);\n                x = lastCharX;\n            }\n        }\n    };\n    TextRenderLayer.prototype._drawBackground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        var ctx = this._ctx;\n        var cols = terminal.cols;\n        var startX = 0;\n        var startY = 0;\n        var prevFillStyle = null;\n        ctx.save();\n        this._forEachCell(terminal, firstRow, lastRow, null, function (cell, x, y) {\n            var nextFillStyle = null;\n            if (cell.isInverse()) {\n                if (cell.isFgDefault()) {\n                    nextFillStyle = _this._colors.foreground.css;\n                }\n                else if (cell.isFgRGB()) {\n                    nextFillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n                }\n                else {\n                    nextFillStyle = _this._colors.ansi[cell.getFgColor()].css;\n                }\n            }\n            else if (cell.isBgRGB()) {\n                nextFillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n            }\n            else if (cell.isBgPalette()) {\n                nextFillStyle = _this._colors.ansi[cell.getBgColor()].css;\n            }\n            if (prevFillStyle === null) {\n                startX = x;\n                startY = y;\n            }\n            if (y !== startY) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, cols - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            else if (prevFillStyle !== nextFillStyle) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, x - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            prevFillStyle = nextFillStyle;\n        });\n        if (prevFillStyle !== null) {\n            ctx.fillStyle = prevFillStyle;\n            this.fillCells(startX, startY, cols - startX, 1);\n        }\n        ctx.restore();\n    };\n    TextRenderLayer.prototype._drawForeground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        this._forEachCell(terminal, firstRow, lastRow, this._characterJoinerRegistry, function (cell, x, y) {\n            if (cell.isInvisible()) {\n                return;\n            }\n            _this.drawChars(terminal, cell, x, y);\n            if (cell.isUnderline()) {\n                _this._ctx.save();\n                if (cell.isInverse()) {\n                    if (cell.isBgDefault()) {\n                        _this._ctx.fillStyle = _this._colors.background.css;\n                    }\n                    else if (cell.isBgRGB()) {\n                        _this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n                    }\n                    else {\n                        _this._ctx.fillStyle = _this._colors.ansi[cell.getBgColor()].css;\n                    }\n                }\n                else {\n                    if (cell.isFgDefault()) {\n                        _this._ctx.fillStyle = _this._colors.foreground.css;\n                    }\n                    else if (cell.isFgRGB()) {\n                        _this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n                    }\n                    else {\n                        var fg = cell.getFgColor();\n                        if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n                            fg += 8;\n                        }\n                        _this._ctx.fillStyle = _this._colors.ansi[fg].css;\n                    }\n                }\n                _this.fillBottomLineAtCells(x, y, cell.getWidth());\n                _this._ctx.restore();\n            }\n        });\n    };\n    TextRenderLayer.prototype.onGridChanged = function (terminal, firstRow, lastRow) {\n        if (this._state.cache.length === 0) {\n            return;\n        }\n        if (this._charAtlas) {\n            this._charAtlas.beginFrame();\n        }\n        this.clearCells(0, firstRow, terminal.cols, lastRow - firstRow + 1);\n        this._drawBackground(terminal, firstRow, lastRow);\n        this._drawForeground(terminal, firstRow, lastRow);\n    };\n    TextRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        this.setTransparency(terminal, terminal.options.allowTransparency);\n    };\n    TextRenderLayer.prototype._isOverlapping = function (cell) {\n        if (cell.getWidth() !== 1) {\n            return false;\n        }\n        if (cell.getCode() < 256) {\n            return false;\n        }\n        var chars = cell.getChars();\n        if (this._characterOverlapCache.hasOwnProperty(chars)) {\n            return this._characterOverlapCache[chars];\n        }\n        this._ctx.save();\n        this._ctx.font = this._characterFont;\n        var overlaps = Math.floor(this._ctx.measureText(chars).width) > this._characterWidth;\n        this._ctx.restore();\n        this._characterOverlapCache[chars] = overlaps;\n        return overlaps;\n    };\n    return TextRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.TextRenderLayer = TextRenderLayer;\n\n},{\"../core/buffer/BufferLine\":47,\"./BaseRenderLayer\":56,\"./CharacterJoinerRegistry\":57,\"./GridCache\":59}],65:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas = (function () {\n    function BaseCharAtlas() {\n        this._didWarmUp = false;\n    }\n    BaseCharAtlas.prototype.dispose = function () { };\n    BaseCharAtlas.prototype.warmUp = function () {\n        if (!this._didWarmUp) {\n            this._doWarmUp();\n            this._didWarmUp = true;\n        }\n    };\n    BaseCharAtlas.prototype._doWarmUp = function () { };\n    BaseCharAtlas.prototype.beginFrame = function () { };\n    return BaseCharAtlas;\n}());\nexports.default = BaseCharAtlas;\n\n},{}],66:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CharAtlasUtils_1 = require(\"./CharAtlasUtils\");\nvar DynamicCharAtlas_1 = require(\"./DynamicCharAtlas\");\nvar NoneCharAtlas_1 = require(\"./NoneCharAtlas\");\nvar StaticCharAtlas_1 = require(\"./StaticCharAtlas\");\nvar charAtlasImplementations = {\n    'none': NoneCharAtlas_1.default,\n    'static': StaticCharAtlas_1.default,\n    'dynamic': DynamicCharAtlas_1.default\n};\nvar charAtlasCache = [];\nfunction acquireCharAtlas(terminal, colors, scaledCharWidth, scaledCharHeight) {\n    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors);\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        var ownedByIndex = entry.ownedBy.indexOf(terminal);\n        if (ownedByIndex >= 0) {\n            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n                return entry.atlas;\n            }\n            if (entry.ownedBy.length === 1) {\n                entry.atlas.dispose();\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                entry.ownedBy.splice(ownedByIndex, 1);\n            }\n            break;\n        }\n    }\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n            entry.ownedBy.push(terminal);\n            return entry.atlas;\n        }\n    }\n    var newEntry = {\n        atlas: new charAtlasImplementations[terminal.options.experimentalCharAtlas](document, newConfig),\n        config: newConfig,\n        ownedBy: [terminal]\n    };\n    charAtlasCache.push(newEntry);\n    return newEntry.atlas;\n}\nexports.acquireCharAtlas = acquireCharAtlas;\nfunction removeTerminalFromCache(terminal) {\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var index = charAtlasCache[i].ownedBy.indexOf(terminal);\n        if (index !== -1) {\n            if (charAtlasCache[i].ownedBy.length === 1) {\n                charAtlasCache[i].atlas.dispose();\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                charAtlasCache[i].ownedBy.splice(index, 1);\n            }\n            break;\n        }\n    }\n}\nexports.removeTerminalFromCache = removeTerminalFromCache;\n\n},{\"./CharAtlasUtils\":68,\"./DynamicCharAtlas\":69,\"./NoneCharAtlas\":71,\"./StaticCharAtlas\":72}],67:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Platform_1 = require(\"../../common/Platform\");\nvar Types_1 = require(\"./Types\");\nfunction generateStaticCharAtlasTexture(context, canvasFactory, config) {\n    var cellWidth = config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var cellHeight = config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var canvas = canvasFactory(255 * cellWidth, (2 + 16 + 16) * cellHeight);\n    var ctx = canvas.getContext('2d', { alpha: config.allowTransparency });\n    ctx.fillStyle = config.colors.background.css;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.save();\n    ctx.fillStyle = config.colors.foreground.css;\n    ctx.font = getFont(config.fontWeight, config);\n    ctx.textBaseline = 'middle';\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, 0, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight / 2);\n        ctx.restore();\n    }\n    ctx.save();\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, cellHeight, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight * 1.5);\n        ctx.restore();\n    }\n    ctx.restore();\n    ctx.font = getFont(config.fontWeight, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);\n            ctx.restore();\n        }\n    }\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2 + 16) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);\n            ctx.restore();\n        }\n    }\n    ctx.restore();\n    if (!('createImageBitmap' in context) || Platform_1.isFirefox || Platform_1.isSafari) {\n        return canvas;\n    }\n    var charAtlasImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    clearColor(charAtlasImageData, config.colors.background);\n    return context.createImageBitmap(charAtlasImageData);\n}\nexports.generateStaticCharAtlasTexture = generateStaticCharAtlasTexture;\nfunction clearColor(imageData, color) {\n    var isEmpty = true;\n    var r = color.rgba >>> 24;\n    var g = color.rgba >>> 16 & 0xFF;\n    var b = color.rgba >>> 8 & 0xFF;\n    for (var offset = 0; offset < imageData.data.length; offset += 4) {\n        if (imageData.data[offset] === r &&\n            imageData.data[offset + 1] === g &&\n            imageData.data[offset + 2] === b) {\n            imageData.data[offset + 3] = 0;\n        }\n        else {\n            isEmpty = false;\n        }\n    }\n    return isEmpty;\n}\nexports.clearColor = clearColor;\nfunction getFont(fontWeight, config) {\n    return fontWeight + \" \" + config.fontSize * config.devicePixelRatio + \"px \" + config.fontFamily;\n}\n\n},{\"../../common/Platform\":43,\"./Types\":73}],68:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"../../common/Types\");\nfunction generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors) {\n    var clonedColors = {\n        foreground: colors.foreground,\n        background: colors.background,\n        cursor: null,\n        cursorAccent: null,\n        selection: null,\n        ansi: colors.ansi.slice(0, 16)\n    };\n    return {\n        type: terminal.options.experimentalCharAtlas,\n        devicePixelRatio: window.devicePixelRatio,\n        scaledCharWidth: scaledCharWidth,\n        scaledCharHeight: scaledCharHeight,\n        fontFamily: terminal.options.fontFamily,\n        fontSize: terminal.options.fontSize,\n        fontWeight: terminal.options.fontWeight,\n        fontWeightBold: terminal.options.fontWeightBold,\n        allowTransparency: terminal.options.allowTransparency,\n        colors: clonedColors\n    };\n}\nexports.generateConfig = generateConfig;\nfunction configEquals(a, b) {\n    for (var i = 0; i < a.colors.ansi.length; i++) {\n        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {\n            return false;\n        }\n    }\n    return a.type === b.type &&\n        a.devicePixelRatio === b.devicePixelRatio &&\n        a.fontFamily === b.fontFamily &&\n        a.fontSize === b.fontSize &&\n        a.fontWeight === b.fontWeight &&\n        a.fontWeightBold === b.fontWeightBold &&\n        a.allowTransparency === b.allowTransparency &&\n        a.scaledCharWidth === b.scaledCharWidth &&\n        a.scaledCharHeight === b.scaledCharHeight &&\n        a.colors.foreground === b.colors.foreground &&\n        a.colors.background === b.colors.background;\n}\nexports.configEquals = configEquals;\nfunction is256Color(colorCode) {\n    return colorCode < Types_1.DEFAULT_COLOR;\n}\nexports.is256Color = is256Color;\n\n},{\"../../common/Types\":45}],69:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar ColorManager_1 = require(\"../../ui/ColorManager\");\nvar CharAtlasGenerator_1 = require(\"./CharAtlasGenerator\");\nvar LRUMap_1 = require(\"./LRUMap\");\nvar Platform_1 = require(\"../../common/Platform\");\nvar TEXTURE_WIDTH = 1024;\nvar TEXTURE_HEIGHT = 1024;\nvar TRANSPARENT_COLOR = {\n    css: 'rgba(0, 0, 0, 0)',\n    rgba: 0\n};\nvar FRAME_CACHE_DRAW_LIMIT = 100;\nvar GLYPH_BITMAP_COMMIT_DELAY = 100;\nfunction getGlyphCacheKey(glyph) {\n    return glyph.code << 21 | glyph.bg << 12 | glyph.fg << 3 | (glyph.bold ? 0 : 4) + (glyph.dim ? 0 : 2) + (glyph.italic ? 0 : 1);\n}\nexports.getGlyphCacheKey = getGlyphCacheKey;\nvar DynamicCharAtlas = (function (_super) {\n    __extends(DynamicCharAtlas, _super);\n    function DynamicCharAtlas(document, _config) {\n        var _this = _super.call(this) || this;\n        _this._config = _config;\n        _this._drawToCacheCount = 0;\n        _this._glyphsWaitingOnBitmap = [];\n        _this._bitmapCommitTimeout = null;\n        _this._bitmap = null;\n        _this._cacheCanvas = document.createElement('canvas');\n        _this._cacheCanvas.width = TEXTURE_WIDTH;\n        _this._cacheCanvas.height = TEXTURE_HEIGHT;\n        _this._cacheCtx = _this._cacheCanvas.getContext('2d', { alpha: true });\n        var tmpCanvas = document.createElement('canvas');\n        tmpCanvas.width = _this._config.scaledCharWidth;\n        tmpCanvas.height = _this._config.scaledCharHeight;\n        _this._tmpCtx = tmpCanvas.getContext('2d', { alpha: _this._config.allowTransparency });\n        _this._width = Math.floor(TEXTURE_WIDTH / _this._config.scaledCharWidth);\n        _this._height = Math.floor(TEXTURE_HEIGHT / _this._config.scaledCharHeight);\n        var capacity = _this._width * _this._height;\n        _this._cacheMap = new LRUMap_1.default(capacity);\n        _this._cacheMap.prealloc(capacity);\n        return _this;\n    }\n    DynamicCharAtlas.prototype.dispose = function () {\n        if (this._bitmapCommitTimeout !== null) {\n            window.clearTimeout(this._bitmapCommitTimeout);\n            this._bitmapCommitTimeout = null;\n        }\n    };\n    DynamicCharAtlas.prototype.beginFrame = function () {\n        this._drawToCacheCount = 0;\n    };\n    DynamicCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (glyph.code === 32) {\n            return true;\n        }\n        if (!this._canCache(glyph)) {\n            return false;\n        }\n        var glyphKey = getGlyphCacheKey(glyph);\n        var cacheValue = this._cacheMap.get(glyphKey);\n        if (cacheValue !== null && cacheValue !== undefined) {\n            this._drawFromCache(ctx, cacheValue, x, y);\n            return true;\n        }\n        else if (this._drawToCacheCount < FRAME_CACHE_DRAW_LIMIT) {\n            var index = void 0;\n            if (this._cacheMap.size < this._cacheMap.capacity) {\n                index = this._cacheMap.size;\n            }\n            else {\n                index = this._cacheMap.peek().index;\n            }\n            var cacheValue_1 = this._drawToCache(glyph, index);\n            this._cacheMap.set(glyphKey, cacheValue_1);\n            this._drawFromCache(ctx, cacheValue_1, x, y);\n            return true;\n        }\n        return false;\n    };\n    DynamicCharAtlas.prototype._canCache = function (glyph) {\n        return glyph.code < 256;\n    };\n    DynamicCharAtlas.prototype._toCoordinateX = function (index) {\n        return (index % this._width) * this._config.scaledCharWidth;\n    };\n    DynamicCharAtlas.prototype._toCoordinateY = function (index) {\n        return Math.floor(index / this._width) * this._config.scaledCharHeight;\n    };\n    DynamicCharAtlas.prototype._drawFromCache = function (ctx, cacheValue, x, y) {\n        if (cacheValue.isEmpty) {\n            return;\n        }\n        var cacheX = this._toCoordinateX(cacheValue.index);\n        var cacheY = this._toCoordinateY(cacheValue.index);\n        ctx.drawImage(cacheValue.inBitmap ? this._bitmap : this._cacheCanvas, cacheX, cacheY, this._config.scaledCharWidth, this._config.scaledCharHeight, x, y, this._config.scaledCharWidth, this._config.scaledCharHeight);\n    };\n    DynamicCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {\n        if (idx < this._config.colors.ansi.length) {\n            return this._config.colors.ansi[idx];\n        }\n        return ColorManager_1.DEFAULT_ANSI_COLORS[idx];\n    };\n    DynamicCharAtlas.prototype._getBackgroundColor = function (glyph) {\n        if (this._config.allowTransparency) {\n            return TRANSPARENT_COLOR;\n        }\n        else if (glyph.bg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.foreground;\n        }\n        else if (glyph.bg < 256) {\n            return this._getColorFromAnsiIndex(glyph.bg);\n        }\n        return this._config.colors.background;\n    };\n    DynamicCharAtlas.prototype._getForegroundColor = function (glyph) {\n        if (glyph.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.background;\n        }\n        else if (glyph.fg < 256) {\n            return this._getColorFromAnsiIndex(glyph.fg);\n        }\n        return this._config.colors.foreground;\n    };\n    DynamicCharAtlas.prototype._drawToCache = function (glyph, index) {\n        this._drawToCacheCount++;\n        this._tmpCtx.save();\n        var backgroundColor = this._getBackgroundColor(glyph);\n        this._tmpCtx.globalCompositeOperation = 'copy';\n        this._tmpCtx.fillStyle = backgroundColor.css;\n        this._tmpCtx.fillRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        this._tmpCtx.globalCompositeOperation = 'source-over';\n        var fontWeight = glyph.bold ? this._config.fontWeightBold : this._config.fontWeight;\n        var fontStyle = glyph.italic ? 'italic' : '';\n        this._tmpCtx.font =\n            fontStyle + \" \" + fontWeight + \" \" + this._config.fontSize * this._config.devicePixelRatio + \"px \" + this._config.fontFamily;\n        this._tmpCtx.textBaseline = 'middle';\n        this._tmpCtx.fillStyle = this._getForegroundColor(glyph).css;\n        if (glyph.dim) {\n            this._tmpCtx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        this._tmpCtx.fillText(glyph.chars, 0, this._config.scaledCharHeight / 2);\n        this._tmpCtx.restore();\n        var imageData = this._tmpCtx.getImageData(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        var isEmpty = false;\n        if (!this._config.allowTransparency) {\n            isEmpty = CharAtlasGenerator_1.clearColor(imageData, backgroundColor);\n        }\n        var x = this._toCoordinateX(index);\n        var y = this._toCoordinateY(index);\n        this._cacheCtx.putImageData(imageData, x, y);\n        var cacheValue = {\n            index: index,\n            isEmpty: isEmpty,\n            inBitmap: false\n        };\n        this._addGlyphToBitmap(cacheValue);\n        return cacheValue;\n    };\n    DynamicCharAtlas.prototype._addGlyphToBitmap = function (cacheValue) {\n        var _this = this;\n        if (!('createImageBitmap' in window) || Platform_1.isFirefox || Platform_1.isSafari) {\n            return;\n        }\n        this._glyphsWaitingOnBitmap.push(cacheValue);\n        if (this._bitmapCommitTimeout !== null) {\n            return;\n        }\n        this._bitmapCommitTimeout = window.setTimeout(function () { return _this._generateBitmap(); }, GLYPH_BITMAP_COMMIT_DELAY);\n    };\n    DynamicCharAtlas.prototype._generateBitmap = function () {\n        var _this = this;\n        var glyphsMovingToBitmap = this._glyphsWaitingOnBitmap;\n        this._glyphsWaitingOnBitmap = [];\n        window.createImageBitmap(this._cacheCanvas).then(function (bitmap) {\n            _this._bitmap = bitmap;\n            for (var i = 0; i < glyphsMovingToBitmap.length; i++) {\n                var value = glyphsMovingToBitmap[i];\n                value.inBitmap = true;\n            }\n        });\n        this._bitmapCommitTimeout = null;\n    };\n    return DynamicCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = DynamicCharAtlas;\n\n},{\"../../common/Platform\":43,\"../../ui/ColorManager\":76,\"./BaseCharAtlas\":65,\"./CharAtlasGenerator\":67,\"./LRUMap\":70,\"./Types\":73}],70:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LRUMap = (function () {\n    function LRUMap(capacity) {\n        this.capacity = capacity;\n        this._map = {};\n        this._head = null;\n        this._tail = null;\n        this._nodePool = [];\n        this.size = 0;\n    }\n    LRUMap.prototype._unlinkNode = function (node) {\n        var prev = node.prev;\n        var next = node.next;\n        if (node === this._head) {\n            this._head = next;\n        }\n        if (node === this._tail) {\n            this._tail = prev;\n        }\n        if (prev !== null) {\n            prev.next = next;\n        }\n        if (next !== null) {\n            next.prev = prev;\n        }\n    };\n    LRUMap.prototype._appendNode = function (node) {\n        var tail = this._tail;\n        if (tail !== null) {\n            tail.next = node;\n        }\n        node.prev = tail;\n        node.next = null;\n        this._tail = node;\n        if (this._head === null) {\n            this._head = node;\n        }\n    };\n    LRUMap.prototype.prealloc = function (count) {\n        var nodePool = this._nodePool;\n        for (var i = 0; i < count; i++) {\n            nodePool.push({\n                prev: null,\n                next: null,\n                key: null,\n                value: null\n            });\n        }\n    };\n    LRUMap.prototype.get = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            this._unlinkNode(node);\n            this._appendNode(node);\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peekValue = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peek = function () {\n        var head = this._head;\n        return head === null ? null : head.value;\n    };\n    LRUMap.prototype.set = function (key, value) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            node = this._map[key];\n            this._unlinkNode(node);\n            node.value = value;\n        }\n        else if (this.size >= this.capacity) {\n            node = this._head;\n            this._unlinkNode(node);\n            delete this._map[node.key];\n            node.key = key;\n            node.value = value;\n            this._map[key] = node;\n        }\n        else {\n            var nodePool = this._nodePool;\n            if (nodePool.length > 0) {\n                node = nodePool.pop();\n                node.key = key;\n                node.value = value;\n            }\n            else {\n                node = {\n                    prev: null,\n                    next: null,\n                    key: key,\n                    value: value\n                };\n            }\n            this._map[key] = node;\n            this.size++;\n        }\n        this._appendNode(node);\n    };\n    return LRUMap;\n}());\nexports.default = LRUMap;\n\n},{}],71:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar NoneCharAtlas = (function (_super) {\n    __extends(NoneCharAtlas, _super);\n    function NoneCharAtlas(document, config) {\n        return _super.call(this) || this;\n    }\n    NoneCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        return false;\n    };\n    return NoneCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = NoneCharAtlas;\n\n},{\"./BaseCharAtlas\":65}],72:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nvar CharAtlasGenerator_1 = require(\"./CharAtlasGenerator\");\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar CharAtlasUtils_1 = require(\"./CharAtlasUtils\");\nvar Types_2 = require(\"../../common/Types\");\nvar StaticCharAtlas = (function (_super) {\n    __extends(StaticCharAtlas, _super);\n    function StaticCharAtlas(_document, _config) {\n        var _this = _super.call(this) || this;\n        _this._document = _document;\n        _this._config = _config;\n        _this._canvasFactory = function (width, height) {\n            var canvas = _this._document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n            return canvas;\n        };\n        return _this;\n    }\n    StaticCharAtlas.prototype._doWarmUp = function () {\n        var _this = this;\n        var result = CharAtlasGenerator_1.generateStaticCharAtlasTexture(window, this._canvasFactory, this._config);\n        if (result instanceof HTMLCanvasElement) {\n            this._texture = result;\n        }\n        else {\n            result.then(function (texture) {\n                _this._texture = texture;\n            });\n        }\n    };\n    StaticCharAtlas.prototype._isCached = function (glyph, colorIndex) {\n        var isAscii = glyph.code < 256;\n        var isBasicColor = glyph.fg < 16;\n        var isDefaultColor = glyph.fg === Types_2.DEFAULT_COLOR;\n        var isDefaultBackground = glyph.bg === Types_2.DEFAULT_COLOR;\n        return isAscii && (isBasicColor || isDefaultColor) && isDefaultBackground && !glyph.italic;\n    };\n    StaticCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (this._texture === null || this._texture === undefined) {\n            return false;\n        }\n        var colorIndex = 0;\n        if (CharAtlasUtils_1.is256Color(glyph.fg)) {\n            colorIndex = 2 + glyph.fg + (glyph.bold ? 16 : 0);\n        }\n        else if (glyph.fg === Types_2.DEFAULT_COLOR) {\n            if (glyph.bold) {\n                colorIndex = 1;\n            }\n        }\n        if (!this._isCached(glyph, colorIndex)) {\n            return false;\n        }\n        ctx.save();\n        var charAtlasCellWidth = this._config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n        var charAtlasCellHeight = this._config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n        if (glyph.dim) {\n            ctx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        ctx.drawImage(this._texture, glyph.code * charAtlasCellWidth, colorIndex * charAtlasCellHeight, charAtlasCellWidth, this._config.scaledCharHeight, x, y, charAtlasCellWidth, this._config.scaledCharHeight);\n        ctx.restore();\n        return true;\n    };\n    return StaticCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = StaticCharAtlas;\n\n},{\"../../common/Types\":45,\"./BaseCharAtlas\":65,\"./CharAtlasGenerator\":67,\"./CharAtlasUtils\":68,\"./Types\":73}],73:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.INVERTED_DEFAULT_COLOR = 257;\nexports.DIM_OPACITY = 0.5;\nexports.CHAR_ATLAS_CELL_SPACING = 1;\n\n},{}],74:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DomRendererRowFactory_1 = require(\"./DomRendererRowFactory\");\nvar Types_1 = require(\"../atlas/Types\");\nvar Lifecycle_1 = require(\"../../common/Lifecycle\");\nvar TERMINAL_CLASS_PREFIX = 'xterm-dom-renderer-owner-';\nvar ROW_CONTAINER_CLASS = 'xterm-rows';\nvar FG_CLASS_PREFIX = 'xterm-fg-';\nvar BG_CLASS_PREFIX = 'xterm-bg-';\nvar FOCUS_CLASS = 'xterm-focus';\nvar SELECTION_CLASS = 'xterm-selection';\nvar nextTerminalId = 1;\nvar DomRenderer = (function (_super) {\n    __extends(DomRenderer, _super);\n    function DomRenderer(_terminal, _colors) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._colors = _colors;\n        _this._terminalClass = nextTerminalId++;\n        _this._rowElements = [];\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add(ROW_CONTAINER_CLASS);\n        _this._rowContainer.style.lineHeight = 'normal';\n        _this._rowContainer.setAttribute('aria-hidden', 'true');\n        _this._refreshRowElements(_this._terminal.cols, _this._terminal.rows);\n        _this._selectionContainer = document.createElement('div');\n        _this._selectionContainer.classList.add(SELECTION_CLASS);\n        _this._selectionContainer.setAttribute('aria-hidden', 'true');\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._updateDimensions();\n        _this._injectCss();\n        _this._rowFactory = new DomRendererRowFactory_1.DomRendererRowFactory(_terminal.options, document);\n        _this._terminal.element.classList.add(TERMINAL_CLASS_PREFIX + _this._terminalClass);\n        _this._terminal.screenElement.appendChild(_this._rowContainer);\n        _this._terminal.screenElement.appendChild(_this._selectionContainer);\n        _this._terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });\n        _this._terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    DomRenderer.prototype.dispose = function () {\n        this._terminal.element.classList.remove(TERMINAL_CLASS_PREFIX + this._terminalClass);\n        this._terminal.screenElement.removeChild(this._rowContainer);\n        this._terminal.screenElement.removeChild(this._selectionContainer);\n        this._terminal.screenElement.removeChild(this._themeStyleElement);\n        this._terminal.screenElement.removeChild(this._dimensionsStyleElement);\n        _super.prototype.dispose.call(this);\n    };\n    DomRenderer.prototype._updateDimensions = function () {\n        var _this = this;\n        this.dimensions.scaledCharWidth = this._terminal.charMeasure.width * window.devicePixelRatio;\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharLeft = 0;\n        this.dimensions.scaledCharTop = 0;\n        this.dimensions.scaledCanvasWidth = this.dimensions.scaledCellWidth * this._terminal.cols;\n        this.dimensions.scaledCanvasHeight = this.dimensions.scaledCellHeight * this._terminal.rows;\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this._rowElements.forEach(function (element) {\n            element.style.width = _this.dimensions.canvasWidth + \"px\";\n            element.style.height = _this.dimensions.actualCellHeight + \"px\";\n            element.style.lineHeight = _this.dimensions.actualCellHeight + \"px\";\n            element.style.overflow = 'hidden';\n        });\n        if (!this._dimensionsStyleElement) {\n            this._dimensionsStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._dimensionsStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" span {\" +\n            \" display: inline-block;\" +\n            \" height: 100%;\" +\n            \" vertical-align: top;\" +\n            (\" width: \" + this.dimensions.actualCellWidth + \"px\") +\n            \"}\";\n        this._dimensionsStyleElement.innerHTML = styles;\n        this._selectionContainer.style.height = this._terminal._viewportElement.style.height;\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n    };\n    DomRenderer.prototype.setColors = function (colors) {\n        this._colors = colors;\n        this._injectCss();\n    };\n    DomRenderer.prototype._injectCss = function () {\n        var _this = this;\n        if (!this._themeStyleElement) {\n            this._themeStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._themeStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" {\" +\n            (\" color: \" + this._colors.foreground.css + \";\") +\n            (\" background-color: \" + this._colors.background.css + \";\") +\n            (\" font-family: \" + this._terminal.options.fontFamily + \";\") +\n            (\" font-size: \" + this._terminal.options.fontSize + \"px;\") +\n            \"}\";\n        styles +=\n            this._terminalSelector + \" span:not(.\" + DomRendererRowFactory_1.BOLD_CLASS + \") {\" +\n                (\" font-weight: \" + this._terminal.options.fontWeight + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.BOLD_CLASS + \" {\") +\n                (\" font-weight: \" + this._terminal.options.fontWeightBold + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.ITALIC_CLASS + \" {\") +\n                \" font-style: italic;\" +\n                \"}\";\n        styles +=\n            \"@keyframes blink {\" +\n                \" 0% { opacity: 1.0; }\" +\n                \" 50% { opacity: 0.0; }\" +\n                \" 100% { opacity: 1.0; }\" +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \":not(.\" + FOCUS_CLASS + \") .\" + DomRendererRowFactory_1.CURSOR_CLASS + \" {\" +\n                (\" outline: 1px solid \" + this._colors.cursor.css + \";\") +\n                \" outline-offset: -1px;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_BLINK_CLASS + \" {\") +\n                \" animation: blink 1s step-end infinite;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + \" {\") +\n                (\" background-color: \" + this._colors.cursor.css + \";\") +\n                (\" color: \" + this._colors.cursorAccent.css + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BAR_CLASS + \" {\") +\n                (\" box-shadow: 1px 0 0 \" + this._colors.cursor.css + \" inset;\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_UNDERLINE_CLASS + \" {\") +\n                (\" box-shadow: 0 -1px 0 \" + this._colors.cursor.css + \" inset;\") +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + SELECTION_CLASS + \" {\" +\n                \" position: absolute;\" +\n                \" top: 0;\" +\n                \" left: 0;\" +\n                \" z-index: 1;\" +\n                \" pointer-events: none;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + SELECTION_CLASS + \" div {\") +\n                \" position: absolute;\" +\n                (\" background-color: \" + this._colors.selection.css + \";\") +\n                \"}\";\n        this._colors.ansi.forEach(function (c, i) {\n            styles +=\n                _this._terminalSelector + \" .\" + FG_CLASS_PREFIX + i + \" { color: \" + c.css + \"; }\" +\n                    (_this._terminalSelector + \" .\" + BG_CLASS_PREFIX + i + \" { background-color: \" + c.css + \"; }\");\n        });\n        styles +=\n            this._terminalSelector + \" .\" + FG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { color: \" + this._colors.background.css + \"; }\" +\n                (this._terminalSelector + \" .\" + BG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { background-color: \" + this._colors.foreground.css + \"; }\");\n        this._themeStyleElement.innerHTML = styles;\n    };\n    DomRenderer.prototype.onDevicePixelRatioChange = function () {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype._refreshRowElements = function (cols, rows) {\n        for (var i = this._rowElements.length; i <= rows; i++) {\n            var row = document.createElement('div');\n            this._rowContainer.appendChild(row);\n            this._rowElements.push(row);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n    };\n    DomRenderer.prototype.onResize = function (cols, rows) {\n        this._refreshRowElements(cols, rows);\n        this._updateDimensions();\n    };\n    DomRenderer.prototype.onCharSizeChanged = function () {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype.onBlur = function () {\n        this._rowContainer.classList.remove(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onFocus = function () {\n        this._rowContainer.classList.add(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        while (this._selectionContainer.children.length) {\n            this._selectionContainer.removeChild(this._selectionContainer.children[0]);\n        }\n        if (!start || !end) {\n            return;\n        }\n        var viewportStartRow = start[1] - this._terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - this._terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, this._terminal.rows - 1);\n        if (viewportCappedStartRow >= this._terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        var documentFragment = document.createDocumentFragment();\n        if (columnSelectMode) {\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, start[0], end[0], viewportCappedEndRow - viewportCappedStartRow + 1));\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var endCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, startCol, endCol));\n            var middleRowsCount = viewportCappedEndRow - viewportCappedStartRow - 1;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow + 1, 0, this._terminal.cols, middleRowsCount));\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol_1 = viewportEndRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n                documentFragment.appendChild(this._createSelectionElement(viewportCappedEndRow, 0, endCol_1));\n            }\n        }\n        this._selectionContainer.appendChild(documentFragment);\n    };\n    DomRenderer.prototype._createSelectionElement = function (row, colStart, colEnd, rowCount) {\n        if (rowCount === void 0) { rowCount = 1; }\n        var element = document.createElement('div');\n        element.style.height = rowCount * this.dimensions.actualCellHeight + \"px\";\n        element.style.top = row * this.dimensions.actualCellHeight + \"px\";\n        element.style.left = colStart * this.dimensions.actualCellWidth + \"px\";\n        element.style.width = this.dimensions.actualCellWidth * (colEnd - colStart) + \"px\";\n        return element;\n    };\n    DomRenderer.prototype.onCursorMove = function () {\n    };\n    DomRenderer.prototype.onOptionsChanged = function () {\n        this._updateDimensions();\n        this._injectCss();\n        this._terminal.refresh(0, this._terminal.rows - 1);\n    };\n    DomRenderer.prototype.clear = function () {\n        this._rowElements.forEach(function (e) { return e.innerHTML = ''; });\n    };\n    DomRenderer.prototype.renderRows = function (start, end) {\n        var terminal = this._terminal;\n        var cursorAbsoluteY = terminal.buffer.ybase + terminal.buffer.y;\n        var cursorX = this._terminal.buffer.x;\n        var cursorBlink = this._terminal.options.cursorBlink;\n        for (var y = start; y <= end; y++) {\n            var rowElement = this._rowElements[y];\n            rowElement.innerHTML = '';\n            var row = y + terminal.buffer.ydisp;\n            var lineData = terminal.buffer.lines.get(row);\n            var cursorStyle = terminal.options.cursorStyle;\n            rowElement.appendChild(this._rowFactory.createRow(lineData, row === cursorAbsoluteY, cursorStyle, cursorX, cursorBlink, this.dimensions.actualCellWidth, terminal.cols));\n        }\n    };\n    Object.defineProperty(DomRenderer.prototype, \"_terminalSelector\", {\n        get: function () {\n            return \".\" + TERMINAL_CLASS_PREFIX + this._terminalClass;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DomRenderer.prototype.registerCharacterJoiner = function (handler) { return -1; };\n    DomRenderer.prototype.deregisterCharacterJoiner = function (joinerId) { return false; };\n    DomRenderer.prototype._onLinkHover = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);\n    };\n    DomRenderer.prototype._onLinkLeave = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);\n    };\n    DomRenderer.prototype._setCellUnderline = function (x, x2, y, y2, cols, enabled) {\n        while (x !== x2 || y !== y2) {\n            var row = this._rowElements[y];\n            if (!row) {\n                return;\n            }\n            var span = row.children[x];\n            if (span) {\n                span.style.textDecoration = enabled ? 'underline' : 'none';\n            }\n            if (++x >= cols) {\n                x = 0;\n                y++;\n            }\n        }\n    };\n    return DomRenderer;\n}(Lifecycle_1.Disposable));\nexports.DomRenderer = DomRenderer;\n\n},{\"../../common/Lifecycle\":42,\"../atlas/Types\":73,\"./DomRendererRowFactory\":75}],75:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"../atlas/Types\");\nvar BufferLine_1 = require(\"../../core/buffer/BufferLine\");\nexports.BOLD_CLASS = 'xterm-bold';\nexports.DIM_CLASS = 'xterm-dim';\nexports.ITALIC_CLASS = 'xterm-italic';\nexports.UNDERLINE_CLASS = 'xterm-underline';\nexports.CURSOR_CLASS = 'xterm-cursor';\nexports.CURSOR_BLINK_CLASS = 'xterm-cursor-blink';\nexports.CURSOR_STYLE_BLOCK_CLASS = 'xterm-cursor-block';\nexports.CURSOR_STYLE_BAR_CLASS = 'xterm-cursor-bar';\nexports.CURSOR_STYLE_UNDERLINE_CLASS = 'xterm-cursor-underline';\nvar DomRendererRowFactory = (function () {\n    function DomRendererRowFactory(_terminalOptions, _document) {\n        this._terminalOptions = _terminalOptions;\n        this._document = _document;\n        this._workCell = new BufferLine_1.CellData();\n    }\n    DomRendererRowFactory.prototype.createRow = function (lineData, isCursorRow, cursorStyle, cursorX, cursorBlink, cellWidth, cols) {\n        var fragment = this._document.createDocumentFragment();\n        var lineLength = 0;\n        for (var x = Math.min(lineData.length, cols) - 1; x >= 0; x--) {\n            if (lineData.loadCell(x, this._workCell).getCode() !== BufferLine_1.NULL_CELL_CODE || (isCursorRow && x === cursorX)) {\n                lineLength = x + 1;\n                break;\n            }\n        }\n        for (var x = 0; x < lineLength; x++) {\n            lineData.loadCell(x, this._workCell);\n            var width = this._workCell.getWidth();\n            if (width === 0) {\n                continue;\n            }\n            var charElement = this._document.createElement('span');\n            if (width > 1) {\n                charElement.style.width = cellWidth * width + \"px\";\n            }\n            if (isCursorRow && x === cursorX) {\n                charElement.classList.add(exports.CURSOR_CLASS);\n                if (cursorBlink) {\n                    charElement.classList.add(exports.CURSOR_BLINK_CLASS);\n                }\n                switch (cursorStyle) {\n                    case 'bar':\n                        charElement.classList.add(exports.CURSOR_STYLE_BAR_CLASS);\n                        break;\n                    case 'underline':\n                        charElement.classList.add(exports.CURSOR_STYLE_UNDERLINE_CLASS);\n                        break;\n                    default:\n                        charElement.classList.add(exports.CURSOR_STYLE_BLOCK_CLASS);\n                        break;\n                }\n            }\n            if (this._workCell.isBold() && this._terminalOptions.enableBold) {\n                charElement.classList.add(exports.BOLD_CLASS);\n            }\n            if (this._workCell.isItalic()) {\n                charElement.classList.add(exports.ITALIC_CLASS);\n            }\n            if (this._workCell.isDim()) {\n                charElement.classList.add(exports.DIM_CLASS);\n            }\n            if (this._workCell.isUnderline()) {\n                charElement.classList.add(exports.UNDERLINE_CLASS);\n            }\n            charElement.textContent = this._workCell.getChars() || BufferLine_1.WHITESPACE_CELL_CHAR;\n            var swapColor = this._workCell.isInverse();\n            if (this._workCell.isFgRGB()) {\n                var style = charElement.getAttribute('style') || '';\n                style += (swapColor ? 'background-' : '') + \"color:rgb(\" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getFgColor())).join(',') + \");\";\n                charElement.setAttribute('style', style);\n            }\n            else if (this._workCell.isFgPalette()) {\n                var fg = this._workCell.getFgColor();\n                if (this._workCell.isBold() && fg < 8 && !swapColor &&\n                    this._terminalOptions.enableBold && this._terminalOptions.drawBoldTextInBrightColors) {\n                    fg += 8;\n                }\n                charElement.classList.add(\"xterm-\" + (swapColor ? 'b' : 'f') + \"g-\" + fg);\n            }\n            else if (swapColor) {\n                charElement.classList.add(\"xterm-bg-\" + Types_1.INVERTED_DEFAULT_COLOR);\n            }\n            if (this._workCell.isBgRGB()) {\n                var style = charElement.getAttribute('style') || '';\n                style += (swapColor ? '' : 'background-') + \"color:rgb(\" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getBgColor())).join(',') + \");\";\n                charElement.setAttribute('style', style);\n            }\n            else if (this._workCell.isBgPalette()) {\n                charElement.classList.add(\"xterm-\" + (swapColor ? 'f' : 'b') + \"g-\" + this._workCell.getBgColor());\n            }\n            else if (swapColor) {\n                charElement.classList.add(\"xterm-fg-\" + Types_1.INVERTED_DEFAULT_COLOR);\n            }\n            fragment.appendChild(charElement);\n        }\n        return fragment;\n    };\n    return DomRendererRowFactory;\n}());\nexports.DomRendererRowFactory = DomRendererRowFactory;\n\n},{\"../../core/buffer/BufferLine\":47,\"../atlas/Types\":73}],76:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DEFAULT_FOREGROUND = fromHex('#ffffff');\nvar DEFAULT_BACKGROUND = fromHex('#000000');\nvar DEFAULT_CURSOR = fromHex('#ffffff');\nvar DEFAULT_CURSOR_ACCENT = fromHex('#000000');\nvar DEFAULT_SELECTION = {\n    css: 'rgba(255, 255, 255, 0.3)',\n    rgba: 0xFFFFFF77\n};\nexports.DEFAULT_ANSI_COLORS = (function () {\n    var colors = [\n        fromHex('#2e3436'),\n        fromHex('#cc0000'),\n        fromHex('#4e9a06'),\n        fromHex('#c4a000'),\n        fromHex('#3465a4'),\n        fromHex('#75507b'),\n        fromHex('#06989a'),\n        fromHex('#d3d7cf'),\n        fromHex('#555753'),\n        fromHex('#ef2929'),\n        fromHex('#8ae234'),\n        fromHex('#fce94f'),\n        fromHex('#729fcf'),\n        fromHex('#ad7fa8'),\n        fromHex('#34e2e2'),\n        fromHex('#eeeeec')\n    ];\n    var v = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff];\n    for (var i = 0; i < 216; i++) {\n        var r = v[(i / 36) % 6 | 0];\n        var g = v[(i / 6) % 6 | 0];\n        var b = v[i % 6];\n        colors.push({\n            css: \"#\" + toPaddedHex(r) + toPaddedHex(g) + toPaddedHex(b),\n            rgba: ((r << 24) | (g << 16) | (b << 8) | 0xFF) >>> 0\n        });\n    }\n    for (var i = 0; i < 24; i++) {\n        var c = 8 + i * 10;\n        var ch = toPaddedHex(c);\n        colors.push({\n            css: \"#\" + ch + ch + ch,\n            rgba: ((c << 24) | (c << 16) | (c << 8) | 0xFF) >>> 0\n        });\n    }\n    return colors;\n})();\nfunction fromHex(css) {\n    return {\n        css: css,\n        rgba: parseInt(css.slice(1), 16) << 8 | 0xFF\n    };\n}\nfunction toPaddedHex(c) {\n    var s = c.toString(16);\n    return s.length < 2 ? '0' + s : s;\n}\nvar ColorManager = (function () {\n    function ColorManager(document, allowTransparency) {\n        this.allowTransparency = allowTransparency;\n        var canvas = document.createElement('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        var ctx = canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('Could not get rendering context');\n        }\n        this._ctx = ctx;\n        this._ctx.globalCompositeOperation = 'copy';\n        this._litmusColor = this._ctx.createLinearGradient(0, 0, 1, 1);\n        this.colors = {\n            foreground: DEFAULT_FOREGROUND,\n            background: DEFAULT_BACKGROUND,\n            cursor: DEFAULT_CURSOR,\n            cursorAccent: DEFAULT_CURSOR_ACCENT,\n            selection: DEFAULT_SELECTION,\n            ansi: exports.DEFAULT_ANSI_COLORS.slice()\n        };\n    }\n    ColorManager.prototype.setTheme = function (theme) {\n        if (theme === void 0) { theme = {}; }\n        this.colors.foreground = this._parseColor(theme.foreground, DEFAULT_FOREGROUND);\n        this.colors.background = this._parseColor(theme.background, DEFAULT_BACKGROUND);\n        this.colors.cursor = this._parseColor(theme.cursor, DEFAULT_CURSOR, true);\n        this.colors.cursorAccent = this._parseColor(theme.cursorAccent, DEFAULT_CURSOR_ACCENT, true);\n        this.colors.selection = this._parseColor(theme.selection, DEFAULT_SELECTION, true);\n        this.colors.ansi[0] = this._parseColor(theme.black, exports.DEFAULT_ANSI_COLORS[0]);\n        this.colors.ansi[1] = this._parseColor(theme.red, exports.DEFAULT_ANSI_COLORS[1]);\n        this.colors.ansi[2] = this._parseColor(theme.green, exports.DEFAULT_ANSI_COLORS[2]);\n        this.colors.ansi[3] = this._parseColor(theme.yellow, exports.DEFAULT_ANSI_COLORS[3]);\n        this.colors.ansi[4] = this._parseColor(theme.blue, exports.DEFAULT_ANSI_COLORS[4]);\n        this.colors.ansi[5] = this._parseColor(theme.magenta, exports.DEFAULT_ANSI_COLORS[5]);\n        this.colors.ansi[6] = this._parseColor(theme.cyan, exports.DEFAULT_ANSI_COLORS[6]);\n        this.colors.ansi[7] = this._parseColor(theme.white, exports.DEFAULT_ANSI_COLORS[7]);\n        this.colors.ansi[8] = this._parseColor(theme.brightBlack, exports.DEFAULT_ANSI_COLORS[8]);\n        this.colors.ansi[9] = this._parseColor(theme.brightRed, exports.DEFAULT_ANSI_COLORS[9]);\n        this.colors.ansi[10] = this._parseColor(theme.brightGreen, exports.DEFAULT_ANSI_COLORS[10]);\n        this.colors.ansi[11] = this._parseColor(theme.brightYellow, exports.DEFAULT_ANSI_COLORS[11]);\n        this.colors.ansi[12] = this._parseColor(theme.brightBlue, exports.DEFAULT_ANSI_COLORS[12]);\n        this.colors.ansi[13] = this._parseColor(theme.brightMagenta, exports.DEFAULT_ANSI_COLORS[13]);\n        this.colors.ansi[14] = this._parseColor(theme.brightCyan, exports.DEFAULT_ANSI_COLORS[14]);\n        this.colors.ansi[15] = this._parseColor(theme.brightWhite, exports.DEFAULT_ANSI_COLORS[15]);\n    };\n    ColorManager.prototype._parseColor = function (css, fallback, allowTransparency) {\n        if (allowTransparency === void 0) { allowTransparency = this.allowTransparency; }\n        if (css === undefined) {\n            return fallback;\n        }\n        this._ctx.fillStyle = this._litmusColor;\n        this._ctx.fillStyle = css;\n        if (typeof this._ctx.fillStyle !== 'string') {\n            console.warn(\"Color: \" + css + \" is invalid using fallback \" + fallback.css);\n            return fallback;\n        }\n        this._ctx.fillRect(0, 0, 1, 1);\n        var data = this._ctx.getImageData(0, 0, 1, 1).data;\n        if (!allowTransparency && data[3] !== 0xFF) {\n            console.warn(\"Color: \" + css + \" is using transparency, but allowTransparency is false. \" +\n                (\"Using fallback \" + fallback.css + \".\"));\n            return fallback;\n        }\n        return {\n            css: css,\n            rgba: (data[0] << 24 | data[1] << 16 | data[2] << 8 | data[3]) >>> 0\n        };\n    };\n    return ColorManager;\n}());\nexports.ColorManager = ColorManager;\n\n},{}],77:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction addDisposableDomListener(node, type, handler, useCapture) {\n    node.addEventListener(type, handler, useCapture);\n    return {\n        dispose: function () {\n            if (!handler) {\n                return;\n            }\n            node.removeEventListener(type, handler, useCapture);\n        }\n    };\n}\nexports.addDisposableDomListener = addDisposableDomListener;\n\n},{}],78:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RenderDebouncer = (function () {\n    function RenderDebouncer(_renderCallback) {\n        this._renderCallback = _renderCallback;\n    }\n    RenderDebouncer.prototype.dispose = function () {\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = undefined;\n        }\n    };\n    RenderDebouncer.prototype.refresh = function (rowStart, rowEnd, rowCount) {\n        var _this = this;\n        this._rowCount = rowCount;\n        rowStart = rowStart !== undefined ? rowStart : 0;\n        rowEnd = rowEnd !== undefined ? rowEnd : this._rowCount - 1;\n        this._rowStart = this._rowStart !== undefined ? Math.min(this._rowStart, rowStart) : rowStart;\n        this._rowEnd = this._rowEnd !== undefined ? Math.max(this._rowEnd, rowEnd) : rowEnd;\n        if (this._animationFrame) {\n            return;\n        }\n        this._animationFrame = window.requestAnimationFrame(function () { return _this._innerRefresh(); });\n    };\n    RenderDebouncer.prototype._innerRefresh = function () {\n        if (this._rowStart === undefined || this._rowEnd === undefined || this._rowCount === undefined) {\n            return;\n        }\n        this._rowStart = Math.max(this._rowStart, 0);\n        this._rowEnd = Math.min(this._rowEnd, this._rowCount - 1);\n        this._renderCallback(this._rowStart, this._rowEnd);\n        this._rowStart = undefined;\n        this._rowEnd = undefined;\n        this._animationFrame = undefined;\n    };\n    return RenderDebouncer;\n}());\nexports.RenderDebouncer = RenderDebouncer;\n\n},{}],79:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar ScreenDprMonitor = (function (_super) {\n    __extends(ScreenDprMonitor, _super);\n    function ScreenDprMonitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._currentDevicePixelRatio = window.devicePixelRatio;\n        return _this;\n    }\n    ScreenDprMonitor.prototype.setListener = function (listener) {\n        var _this = this;\n        if (this._listener) {\n            this.clearListener();\n        }\n        this._listener = listener;\n        this._outerListener = function () {\n            if (!_this._listener) {\n                return;\n            }\n            _this._listener(window.devicePixelRatio, _this._currentDevicePixelRatio);\n            _this._updateDpr();\n        };\n        this._updateDpr();\n    };\n    ScreenDprMonitor.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.clearListener();\n    };\n    ScreenDprMonitor.prototype._updateDpr = function () {\n        if (!this._resolutionMediaMatchList || !this._outerListener) {\n            return;\n        }\n        this._resolutionMediaMatchList.removeListener(this._outerListener);\n        this._currentDevicePixelRatio = window.devicePixelRatio;\n        this._resolutionMediaMatchList = window.matchMedia(\"screen and (resolution: \" + window.devicePixelRatio + \"dppx)\");\n        this._resolutionMediaMatchList.addListener(this._outerListener);\n    };\n    ScreenDprMonitor.prototype.clearListener = function () {\n        if (!this._resolutionMediaMatchList || !this._listener || !this._outerListener) {\n            return;\n        }\n        this._resolutionMediaMatchList.removeListener(this._outerListener);\n        this._resolutionMediaMatchList = undefined;\n        this._listener = undefined;\n        this._outerListener = undefined;\n    };\n    return ScreenDprMonitor;\n}(Lifecycle_1.Disposable));\nexports.ScreenDprMonitor = ScreenDprMonitor;\n\n},{\"../common/Lifecycle\":42}]},{},[7]);\n"]}